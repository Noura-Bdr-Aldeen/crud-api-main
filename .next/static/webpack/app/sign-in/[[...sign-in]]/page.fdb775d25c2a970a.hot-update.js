"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/sign-in/[[...sign-in]]/page",{

/***/ "(app-pages-browser)/./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAPTCHA_ELEMENT_ID: () => (/* binding */ CAPTCHA_ELEMENT_ID),\n/* harmony export */   ClerkElementsError: () => (/* binding */ ClerkElementsError),\n/* harmony export */   ClerkElementsRuntimeError: () => (/* binding */ ClerkElementsRuntimeError),\n/* harmony export */   Connection: () => (/* binding */ Connection),\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   Field: () => (/* binding */ Field),\n/* harmony export */   FieldError: () => (/* binding */ FieldError),\n/* harmony export */   FieldState: () => (/* binding */ FieldState),\n/* harmony export */   Form: () => (/* binding */ Form),\n/* harmony export */   FormStoreProvider: () => (/* binding */ FormStoreProvider),\n/* harmony export */   GlobalError: () => (/* binding */ GlobalError),\n/* harmony export */   Icon: () => (/* binding */ Icon),\n/* harmony export */   Input: () => (/* binding */ Input),\n/* harmony export */   Label: () => (/* binding */ Label),\n/* harmony export */   Link: () => (/* binding */ Link),\n/* harmony export */   Loading: () => (/* binding */ Loading),\n/* harmony export */   MAGIC_LINK_VERIFY_PATH_ROUTE: () => (/* binding */ MAGIC_LINK_VERIFY_PATH_ROUTE),\n/* harmony export */   NEXT_WINDOW_HISTORY_SUPPORT_VERSION: () => (/* binding */ NEXT_WINDOW_HISTORY_SUPPORT_VERSION),\n/* harmony export */   RESENDABLE_COUNTDOWN_DEFAULT: () => (/* binding */ RESENDABLE_COUNTDOWN_DEFAULT),\n/* harmony export */   ROUTING: () => (/* binding */ ROUTING),\n/* harmony export */   SEARCH_PARAMS: () => (/* binding */ SEARCH_PARAMS),\n/* harmony export */   SIGN_IN_DEFAULT_BASE_PATH: () => (/* binding */ SIGN_IN_DEFAULT_BASE_PATH),\n/* harmony export */   SIGN_UP_DEFAULT_BASE_PATH: () => (/* binding */ SIGN_UP_DEFAULT_BASE_PATH),\n/* harmony export */   SIGN_UP_MODES: () => (/* binding */ SIGN_UP_MODES),\n/* harmony export */   SSO_CALLBACK_PATH_ROUTE: () => (/* binding */ SSO_CALLBACK_PATH_ROUTE),\n/* harmony export */   SignInFirstFactor: () => (/* binding */ SignInFirstFactor),\n/* harmony export */   SignInFirstFactorCtx: () => (/* binding */ SignInFirstFactorCtx),\n/* harmony export */   SignInRouterCtx: () => (/* binding */ SignInRouterCtx),\n/* harmony export */   SignInRouterMachine: () => (/* binding */ SignInRouterMachine),\n/* harmony export */   SignInSafeIdentifierSelectorForStrategy: () => (/* binding */ SignInSafeIdentifierSelectorForStrategy),\n/* harmony export */   SignInSalutationSelector: () => (/* binding */ SignInSalutationSelector),\n/* harmony export */   SignInSecondFactor: () => (/* binding */ SignInSecondFactor),\n/* harmony export */   SignInSecondFactorCtx: () => (/* binding */ SignInSecondFactorCtx),\n/* harmony export */   SignInSessionList: () => (/* binding */ SignInSessionList),\n/* harmony export */   SignInSessionListItem: () => (/* binding */ SignInSessionListItem),\n/* harmony export */   SignInStep: () => (/* binding */ SignInStep),\n/* harmony export */   SignInStrategy: () => (/* binding */ SignInStrategy),\n/* harmony export */   SignInSupportedStrategy: () => (/* binding */ SignInSupportedStrategy),\n/* harmony export */   SignUpRouterCtx: () => (/* binding */ SignUpRouterCtx),\n/* harmony export */   SignUpStartCtx: () => (/* binding */ SignUpStartCtx),\n/* harmony export */   SignUpStep: () => (/* binding */ SignUpStep),\n/* harmony export */   SignUpStrategy: () => (/* binding */ SignUpStrategy),\n/* harmony export */   SignUpVerificationCtx: () => (/* binding */ SignUpVerificationCtx),\n/* harmony export */   Submit: () => (/* binding */ Submit),\n/* harmony export */   ThirdPartyMachine: () => (/* binding */ ThirdPartyMachine),\n/* harmony export */   ThirdPartyMachineId: () => (/* binding */ ThirdPartyMachineId),\n/* harmony export */   __privateAdd: () => (/* binding */ __privateAdd),\n/* harmony export */   __privateGet: () => (/* binding */ __privateGet),\n/* harmony export */   __privateSet: () => (/* binding */ __privateSet),\n/* harmony export */   assertActorEventError: () => (/* binding */ assertActorEventError),\n/* harmony export */   inspect: () => (/* binding */ inspect),\n/* harmony export */   sendToLoading: () => (/* binding */ sendToLoading),\n/* harmony export */   shouldUseVirtualRouting: () => (/* binding */ shouldUseVirtualRouting),\n/* harmony export */   useActiveTags: () => (/* binding */ useActiveTags),\n/* harmony export */   useFormStore: () => (/* binding */ useFormStore),\n/* harmony export */   useSignInActiveSessionContext: () => (/* binding */ useSignInActiveSessionContext),\n/* harmony export */   useSignInStrategy: () => (/* binding */ useSignInStrategy)\n/* harmony export */ });\n/* harmony import */ var client_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! client-only */ \"(app-pages-browser)/./node_modules/next/dist/compiled/client-only/index.js\");\n/* harmony import */ var _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @radix-ui/react-form */ \"(app-pages-browser)/./node_modules/@clerk/elements/node_modules/@radix-ui/react-form/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var _xstate_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @xstate/react */ \"(app-pages-browser)/./node_modules/@xstate/react/dist/xstate-react.development.esm.js\");\n/* harmony import */ var _clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @clerk/shared/error */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/error.mjs\");\n/* harmony import */ var _clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/shared/underscore */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/underscore.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/xstate.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/log-0acd9069.development.esm.js\");\n/* harmony import */ var _clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @clerk/shared/react */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/react/index.mjs\");\n/* harmony import */ var _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @clerk/shared/utils */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/utils/index.mjs\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @radix-ui/react-slot */ \"(app-pages-browser)/./node_modules/@radix-ui/react-slot/dist/index.mjs\");\n/* harmony import */ var _radix_ui_primitive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @radix-ui/primitive */ \"(app-pages-browser)/./node_modules/@radix-ui/primitive/dist/index.mjs\");\n/* harmony import */ var _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @clerk/shared/logger */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/logger.mjs\");\n/* harmony import */ var _clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @clerk/shared/telemetry */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/telemetry.mjs\");\n/* harmony import */ var _clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @clerk/shared/constants */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/constants.mjs\");\n/* harmony import */ var _clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @clerk/shared/oauth */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/oauth.mjs\");\n/* harmony import */ var _clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @clerk/shared/web3 */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/web3.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/actors/dist/xstate-actors.development.esm.js\");\n/* harmony import */ var _clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @clerk/shared/webauthn */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/webauthn.mjs\");\n/* harmony import */ var _clerk_shared_url__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @clerk/shared/url */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/url.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/raise-1db27a82.development.esm.js\");\n/* harmony import */ var _clerk_shared_router__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @clerk/shared/router */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/router.mjs\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\n\n// src/react/common/index.ts\n\n\n// src/react/common/form/field.tsx\n\n\n\n// src/internals/machines/form/form.context.ts\n\n\n// src/internals/machines/form/form.machine.ts\n\n\n\n\n// src/internals/errors/index.ts\nvar ClerkElementsErrorBase = class extends Error {\n  constructor(code, message) {\n    super(message);\n    this.code = code;\n    this.clerkError = true;\n    this.clerkElementsError = true;\n    this.name = \"ClerkElementsError\";\n    this.rawMessage = message;\n  }\n  toString() {\n    return `[${this.name}]\nCode: ${this.code}\nMessage: ${this.message}`;\n  }\n};\nvar ClerkElementsError = class _ClerkElementsError extends ClerkElementsErrorBase {\n  static fromAPIError(error) {\n    return new _ClerkElementsError(\n      error.code.toString(),\n      // @ts-expect-error - Expected that longMessage isn't a property of MetamaskError\n      error.longMessage || error.message\n    );\n  }\n  constructor(code, message) {\n    super(code, message);\n    this.name = \"ClerkElementsError\";\n  }\n};\nvar ClerkElementsRuntimeError = class extends ClerkElementsErrorBase {\n  constructor(message) {\n    super(\"elements_runtime_error\", message);\n    this.name = \"ClerkElementsRuntimeError\";\n  }\n};\nvar ClerkElementsFieldError = class _ClerkElementsFieldError extends ClerkElementsErrorBase {\n  constructor(code, message) {\n    super(code, message);\n    this.matchFn = () => true;\n    this.name = \"ClerkElementsFieldError\";\n  }\n  static fromAPIError(error) {\n    return new _ClerkElementsFieldError(error.code, error.longMessage || error.message);\n  }\n  get validityState() {\n    return this.code;\n  }\n  get forceMatch() {\n    return true;\n  }\n};\n\n// src/internals/machines/form/form.machine.ts\nvar FormMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actions: {\n    setGlobalErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      errors: (_, params) => [...params.errors]\n    }),\n    setFieldFeedback: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      fields: ({ context }, params) => {\n        if (!params.name) {\n          throw new Error(\"Field name is required\");\n        }\n        const fieldName = params.name;\n        if (context.fields.has(fieldName)) {\n          context.fields.get(fieldName).feedback = params.feedback;\n        }\n        return context.fields;\n      }\n    })\n  },\n  types: {}\n}).createMachine({\n  id: \"Form\",\n  context: () => ({\n    defaultValues: /* @__PURE__ */ new Map(),\n    errors: [],\n    fields: /* @__PURE__ */ new Map(),\n    progressive: false\n  }),\n  on: {\n    \"ERRORS.SET\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, event }) => {\n        var _a, _b, _c;\n        const isClerkAPIError = (err) => \"meta\" in err;\n        if ((0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isKnownError)(event.error)) {\n          const fields = {};\n          const globalErrors = [];\n          const errors = (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isClerkAPIResponseError)(event.error) ? (_a = event.error) == null ? void 0 : _a.errors : [event.error];\n          for (const error of errors) {\n            const name = isClerkAPIError(error) ? (0,_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.snakeToCamel)((_b = error.meta) == null ? void 0 : _b.paramName) : null;\n            if (!name || (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isMetamaskError)(error)) {\n              globalErrors.push(ClerkElementsError.fromAPIError(error));\n              continue;\n            }\n            if (!fields[name]) {\n              fields[name] = [];\n            }\n            (_c = fields[name]) == null ? void 0 : _c.push(ClerkElementsFieldError.fromAPIError(error));\n          }\n          enqueue({\n            type: \"setGlobalErrors\",\n            params: {\n              errors: globalErrors\n            }\n          });\n          for (const field in fields) {\n            enqueue({\n              type: \"setFieldFeedback\",\n              params: {\n                name: field,\n                feedback: {\n                  type: \"error\",\n                  message: fields[field][0]\n                }\n              }\n            });\n          }\n        }\n      })\n    },\n    \"ERRORS.CLEAR\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        errors: () => []\n      })\n    },\n    \"FIELD.ADD\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          event.field.value = event.field.value || context.defaultValues.get(event.field.name) || void 0;\n          context.fields.set(event.field.name, event.field);\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.UPDATE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          var _a;\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.checked = event.field.checked;\n            field.disabled = (_a = event.field.disabled) != null ? _a : field.disabled;\n            field.value = event.field.value;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.DISABLE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.disabled = true;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.ENABLE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.disabled = false;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.REMOVE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          context.fields.delete(event.field.name);\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.FEEDBACK.SET\": {\n      actions: [\n        {\n          type: \"setFieldFeedback\",\n          params: ({ event }) => event.field\n        }\n      ]\n    },\n    \"FIELD.FEEDBACK.CLEAR\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          if (context.fields.has(event.field.name)) {\n            context.fields.get(event.field.name).feedback = void 0;\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.FEEDBACK.CLEAR.ALL\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context }) => {\n          context.fields.forEach((field) => {\n            field.feedback = void 0;\n          });\n          return context.fields;\n        }\n      })\n    },\n    MARK_AS_PROGRESSIVE: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n        const missing = new Set(event.missing);\n        return {\n          defaultValues: event.defaultValues,\n          hidden: /* @__PURE__ */ new Set([...event.required.filter((f) => !missing.has(f)), ...event.optional]),\n          missing,\n          optional: new Set(event.optional),\n          progressive: true,\n          required: new Set(event.required)\n        };\n      })\n    },\n    UNMARK_AS_PROGRESSIVE: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        defaultValues: /* @__PURE__ */ new Map(),\n        hidden: void 0,\n        missing: void 0,\n        optional: void 0,\n        progressive: false,\n        required: void 0\n      })\n    },\n    PREFILL_DEFAULT_VALUES: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n        return {\n          defaultValues: event.defaultValues\n        };\n      })\n    }\n  }\n});\n\n// src/utils/safe-access.ts\nfunction safeAccess(fn, fallback) {\n  try {\n    return fn();\n  } catch (e) {\n    return fallback;\n  }\n}\n\n// src/internals/utils/inspector/index.ts\nvar inspect;\nif (false) {}\n\n// src/internals/machines/form/form.context.ts\nvar FormMachineContext = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.createActorContext)(FormMachine, { inspect });\nvar FormStoreProvider = FormMachineContext.Provider;\nvar useFormStore = FormMachineContext.useActorRef;\nvar useFormSelector = FormMachineContext.useSelector;\nvar globalErrorsSelector = (state) => state.context.errors;\nvar fieldValueSelector = (name) => (state) => {\n  var _a;\n  return name ? (_a = state.context.fields.get(name)) == null ? void 0 : _a.value : \"\";\n};\nvar fieldHasValueSelector = (name) => (state) => Boolean(fieldValueSelector(name)(state));\nvar fieldFeedbackSelector = (name) => (state) => {\n  var _a;\n  return name ? (_a = state.context.fields.get(name)) == null ? void 0 : _a.feedback : void 0;\n};\n\n// src/react/common/form/hooks/use-field-feedback.ts\nfunction useFieldFeedback({ name }) {\n  const feedback = useFormSelector(fieldFeedbackSelector(name));\n  return {\n    feedback\n  };\n}\n\n// src/react/common/form/hooks/use-field.ts\nfunction useField({ name }) {\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n  const { feedback } = useFieldFeedback({ name });\n  const shouldBeHidden = false;\n  const hasError = feedback ? feedback.type === \"error\" : false;\n  return {\n    hasValue,\n    props: {\n      \"data-hidden\": shouldBeHidden ? true : void 0,\n      serverInvalid: hasError\n    }\n  };\n}\n\n// src/react/common/form/hooks/use-field-context.ts\n\nvar FieldContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nvar useFieldContext = () => react__WEBPACK_IMPORTED_MODULE_1__.useContext(FieldContext);\n\n// src/react/common/form/types.ts\nvar FIELD_STATES = {\n  success: \"success\",\n  error: \"error\",\n  idle: \"idle\",\n  warning: \"warning\",\n  info: \"info\"\n};\n\n// src/react/common/form/hooks/use-field-state.ts\nfunction useFieldState({ name }) {\n  const { feedback } = useFieldFeedback({ name });\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n  let state = FIELD_STATES.idle;\n  if (!hasValue) {\n    state = FIELD_STATES.idle;\n  }\n  switch (feedback == null ? void 0 : feedback.type) {\n    case \"error\":\n      state = FIELD_STATES.error;\n      break;\n    case \"warning\":\n      state = FIELD_STATES.warning;\n      break;\n    case \"info\":\n      state = FIELD_STATES.info;\n      break;\n    case \"success\":\n      state = FIELD_STATES.success;\n      break;\n    default:\n      break;\n  }\n  return {\n    state\n  };\n}\n\n// src/react/common/form/hooks/use-form.ts\n\n\n// src/react/common/form/hooks/use-global-errors.ts\nfunction useGlobalErrors() {\n  const errors = useFormSelector(globalErrorsSelector);\n  return {\n    errors\n  };\n}\n\n// src/react/common/form/hooks/use-form.ts\nfunction useForm({ flowActor }) {\n  const { errors } = useGlobalErrors();\n  const onSubmit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (event) => {\n      event.preventDefault();\n      if (flowActor) {\n        flowActor.send({ type: \"SUBMIT\", action: \"submit\" });\n      }\n    },\n    [flowActor]\n  );\n  return {\n    props: {\n      ...errors.length > 0 ? { \"data-global-error\": true } : {},\n      onSubmit\n    }\n  };\n}\n\n// src/react/common/form/hooks/use-input.tsx\n\n\n\n// src/react/hooks/use-password.hook.ts\n\n\n\n\n// src/react/utils/generate-password-error-text.ts\nvar errorMessages = {\n  max_length: [\"less than %length% characters\", \"length\"],\n  min_length: [\"%length% or more characters\", \"length\"],\n  require_numbers: \"a number\",\n  require_lowercase: \"a lowercase letter\",\n  require_uppercase: \"an uppercase letter\",\n  require_special_char: \"a special character\"\n};\nvar createListFormat = (message) => {\n  let messageWithPrefix;\n  if (\"ListFormat\" in Intl) {\n    const formatter = new Intl.ListFormat(\"en\", { style: \"long\", type: \"conjunction\" });\n    messageWithPrefix = formatter.format(message);\n  } else {\n    messageWithPrefix = message.join(\", \");\n  }\n  return messageWithPrefix;\n};\nfunction buildErrorTuple(key, config) {\n  switch (key) {\n    case \"max_length\":\n      return [key, { max_length: config.max_length }];\n    case \"min_length\":\n      return [key, { min_length: config.min_length }];\n    case \"require_special_char\":\n      return [key, { allowed_special_characters: config.allowed_special_characters }];\n    default:\n      return key;\n  }\n}\nvar generatePasswordErrorText = ({ config, failedValidations }) => {\n  const codes = [];\n  if (!failedValidations || Object.keys(failedValidations).length === 0) {\n    return {\n      codes,\n      message: \"\"\n    };\n  }\n  const hasMinLengthError = (failedValidations == null ? void 0 : failedValidations.min_length) || false;\n  const messages = Object.entries(failedValidations).filter((k) => hasMinLengthError ? k[0] === \"min_length\" : true).filter(([, v]) => !!v).map(([k]) => {\n    const entry = k;\n    const errorTuple = buildErrorTuple(entry, config);\n    codes.push(errorTuple);\n    const errorKey = errorMessages[entry];\n    if (Array.isArray(errorKey)) {\n      const [msg, replaceValue] = errorKey;\n      return msg.replace(`%${replaceValue}%`, config[k]);\n    }\n    return errorKey;\n  });\n  const messageWithPrefix = createListFormat(messages);\n  return {\n    codes,\n    message: `Your password must contain ${messageWithPrefix}.`\n  };\n};\n\n// src/react/hooks/use-password.hook.ts\nvar usePassword = (callbacks) => {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  const passwordSettings = (_a = clerk.__unstable__environment) == null ? void 0 : _a.userSettings.passwordSettings;\n  const { disable_hibp, min_zxcvbn_strength, show_zxcvbn, ...config } = passwordSettings || {};\n  const {\n    onValidationError = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationSuccess = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationWarning = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationInfo = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationComplexity\n  } = callbacks || {};\n  const onValidate = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (res) => {\n      var _a2, _b, _c;\n      if (res.complexity) {\n        if (Object.values(res == null ? void 0 : res.complexity).length > 0) {\n          const { message, codes } = generatePasswordErrorText({\n            config,\n            failedValidations: res.complexity\n          });\n          if ((_a2 = res.complexity) == null ? void 0 : _a2.min_length) {\n            return onValidationInfo(message, codes);\n          }\n          return onValidationError(message, codes);\n        }\n      }\n      if (((_b = res == null ? void 0 : res.strength) == null ? void 0 : _b.state) === \"fail\") {\n        const keys = res.strength.keys;\n        const error = keys.map((key) => get(zxcvbnKeys, key)).join(\" \");\n        return onValidationError(error, keys);\n      }\n      if (((_c = res == null ? void 0 : res.strength) == null ? void 0 : _c.state) === \"pass\") {\n        const keys = res.strength.keys;\n        const error = keys.map((key) => get(zxcvbnKeys, key)).join(\" \");\n        return onValidationWarning(error, keys);\n      }\n      return onValidationSuccess();\n    },\n    [callbacks, config]\n  );\n  const validatePassword = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => {\n    return (password) => {\n      return clerk.client.signUp.validatePassword(password, {\n        onValidation: onValidate,\n        onValidationComplexity\n      });\n    };\n  }, [onValidate]);\n  return {\n    validatePassword\n  };\n};\nvar get = (t, path) => path.split(\".\").reduce((r, k) => r == null ? void 0 : r[k], t);\nvar zxcvbnKeys = {\n  unstable__errors: {\n    zxcvbn: {\n      couldBeStronger: \"Your password works, but could be stronger. Try adding more characters.\",\n      goodPassword: \"Your password meets all the necessary requirements.\",\n      notEnough: \"Your password is not strong enough.\",\n      suggestions: {\n        allUppercase: \"Capitalize some, but not all letters.\",\n        anotherWord: \"Add more words that are less common.\",\n        associatedYears: \"Avoid years that are associated with you.\",\n        capitalization: \"Capitalize more than the first letter.\",\n        dates: \"Avoid dates and years that are associated with you.\",\n        l33t: \"Avoid predictable letter substitutions like '@' for 'a'.\",\n        longerKeyboardPattern: \"Use longer keyboard patterns and change typing direction multiple times.\",\n        noNeed: \"You can create strong passwords without using symbols, numbers, or uppercase letters.\",\n        pwned: \"If you use this password elsewhere, you should change it.\",\n        recentYears: \"Avoid recent years.\",\n        repeated: \"Avoid repeated words and characters.\",\n        reverseWords: \"Avoid reversed spellings of common words.\",\n        sequences: \"Avoid common character sequences.\",\n        useWords: \"Use multiple words, but avoid common phrases.\"\n      },\n      warnings: {\n        common: \"This is a commonly used password.\",\n        commonNames: \"Common names and surnames are easy to guess.\",\n        dates: \"Dates are easy to guess.\",\n        extendedRepeat: 'Repeated character patterns like \"abcabcabc\" are easy to guess.',\n        keyPattern: \"Short keyboard patterns are easy to guess.\",\n        namesByThemselves: \"Single names or surnames are easy to guess.\",\n        pwned: \"Your password was exposed by a data breach on the Internet.\",\n        recentYears: \"Recent years are easy to guess.\",\n        sequences: 'Common character sequences like \"abc\" are easy to guess.',\n        similarToCommon: \"This is similar to a commonly used password.\",\n        simpleRepeat: 'Repeated characters like \"aaa\" are easy to guess.',\n        straightRow: \"Straight rows of keys on your keyboard are easy to guess.\",\n        topHundred: \"This is a frequently used password.\",\n        topTen: \"This is a heavily used password.\",\n        userInputs: \"There should not be any personal or page related data.\",\n        wordByItself: \"Single words are easy to guess.\"\n      }\n    }\n  }\n};\n\n// src/react/common/form/otp.tsx\n\n\n\nvar ZERO = [0, 0];\nvar OUTSIDE = [-1, -1];\nvar OTP_LENGTH_DEFAULT = 6;\nvar PASSWORD_MANAGER_OFFSET_DEFAULT = 40;\nvar OTPInput = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function OTPInput2(props, ref) {\n  const { render, length, autoSubmit, ...rest } = props;\n  const hasRenderProp = typeof render !== \"undefined\";\n  if (hasRenderProp) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      OTPInputSegmented,\n      {\n        ...rest,\n        ref,\n        render,\n        length,\n        autoSubmit\n      }\n    );\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    OTPInputStandard,\n    {\n      ...rest,\n      ref,\n      length,\n      autoSubmit\n    }\n  );\n});\nvar OTPInputStandard = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  function OTPInput3(props, ref) {\n    const { length = OTP_LENGTH_DEFAULT, autoSubmit = false, ...rest } = props;\n    const innerRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, () => innerRef.current, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      var _a, _b;\n      if (String(props.value).length === length && autoSubmit) {\n        (_b = (_a = innerRef.current) == null ? void 0 : _a.form) == null ? void 0 : _b.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control,\n      {\n        ref: innerRef,\n        ...rest,\n        \"data-otp-input-standard\": true\n      }\n    );\n  }\n);\nvar OTPInputSegmented = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  function OTPInput4(props, ref) {\n    const {\n      className: userProvidedClassName,\n      render,\n      length = OTP_LENGTH_DEFAULT,\n      autoSubmit = false,\n      passwordManagerOffset = PASSWORD_MANAGER_OFFSET_DEFAULT,\n      ...rest\n    } = props;\n    const innerRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    const [selectionRange, setSelectionRange] = react__WEBPACK_IMPORTED_MODULE_1__.useState(props.autoFocus ? ZERO : OUTSIDE);\n    const [isHovering, setIsHovering] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n    const isFocused = () => document.activeElement === innerRef.current;\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, () => innerRef.current, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n      if (document.activeElement !== innerRef.current) {\n        return;\n      }\n      setSelectionRange((cur) => selectionRangeUpdater(cur, innerRef));\n    }, [props.value]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      function onSelectionChange() {\n        if (!isFocused()) {\n          return;\n        }\n        setSelectionRange((cur) => selectionRangeUpdater(cur, innerRef));\n      }\n      document.addEventListener(\"selectionchange\", onSelectionChange, { capture: true });\n      return () => document.removeEventListener(\"selectionchange\", onSelectionChange);\n    }, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      var _a, _b;\n      if (String(props.value).length === length && autoSubmit) {\n        (_b = (_a = innerRef.current) == null ? void 0 : _a.form) == null ? void 0 : _b.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\n      \"div\",\n      {\n        \"data-otp-input-wrapper\": true,\n        style: wrapperStyle,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"style\", { children: `\n      input[data-otp-input-segmented]::selection {\n        color: transparent;\n        background-color: transparent;\n      }\n      ` }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n            _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control,\n            {\n              \"data-otp-input-segmented\": true,\n              ref: innerRef,\n              ...rest,\n              onFocus: (event) => {\n                var _a;\n                if (innerRef.current) {\n                  const start = Math.min(innerRef.current.value.length, length - 1);\n                  const end = innerRef.current.value.length;\n                  innerRef.current.setSelectionRange(start, end);\n                  setSelectionRange([start, end]);\n                }\n                (_a = rest == null ? void 0 : rest.onFocus) == null ? void 0 : _a.call(rest, event);\n              },\n              onBlur: (event) => {\n                var _a;\n                setSelectionRange([-1, -1]);\n                (_a = rest == null ? void 0 : rest.onBlur) == null ? void 0 : _a.call(rest, event);\n              },\n              onMouseOver: (event) => {\n                var _a;\n                if (!isFocused()) {\n                  setIsHovering(true);\n                }\n                (_a = props.onMouseOver) == null ? void 0 : _a.call(props, event);\n              },\n              onMouseLeave: (event) => {\n                var _a;\n                setIsHovering(false);\n                (_a = props.onMouseLeave) == null ? void 0 : _a.call(props, event);\n              },\n              style: {\n                ...inputStyle,\n                clipPath: `inset(0 calc(1ch + ${passwordManagerOffset}px) 0 0)`,\n                width: `calc(100% + 1ch + ${passwordManagerOffset}px)`\n              }\n            }\n          ),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n            \"div\",\n            {\n              className: userProvidedClassName,\n              \"aria-hidden\": true,\n              style: segmentWrapperStyle,\n              children: Array.from({ length }).map((_, i) => {\n                var _a, _b;\n                const isHovered = isHovering && !isFocused();\n                const isCursor = selectionRange[0] === selectionRange[1] && selectionRange[0] === i;\n                const isSelected = ((_a = selectionRange[0]) != null ? _a : -1) <= i && ((_b = selectionRange[1]) != null ? _b : -1) > i;\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: render({\n                  value: String(props.value)[i] || \"\",\n                  status: isHovered ? \"hovered\" : isCursor ? \"cursor\" : isSelected ? \"selected\" : \"none\",\n                  index: i\n                }) }, `otp-segment-${i}`);\n              })\n            }\n          )\n        ]\n      }\n    );\n  }\n);\nfunction selectionRangeUpdater(cur, inputRef) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  let updated = [\n    (_b = (_a = inputRef.current) == null ? void 0 : _a.selectionStart) != null ? _b : 0,\n    (_d = (_c = inputRef.current) == null ? void 0 : _c.selectionEnd) != null ? _d : 0,\n    (_f = (_e = inputRef.current) == null ? void 0 : _e.selectionDirection) != null ? _f : null\n  ];\n  if (cur[0] === updated[0] && cur[1] === updated[1]) {\n    return cur;\n  }\n  if (updated[0] === 0 && updated[1] === 1) {\n    updated[2] = \"forward\";\n  }\n  if (updated[0] === updated[1]) {\n    if (updated[0] > 0 && cur[0] === updated[0] && cur[1] === updated[0] + 1) {\n      updated = [updated[0] - 1, updated[1], \"backward\"];\n    } else if (typeof ((_g = inputRef.current) == null ? void 0 : _g.value[updated[0]]) !== \"undefined\") {\n      updated = [updated[0], updated[1] + 1, \"backward\"];\n    } else if (updated[0] >= OTP_LENGTH_DEFAULT) {\n      updated = [updated[0] - 1, updated[1], \"backward\"];\n    }\n  }\n  (_i = inputRef.current) == null ? void 0 : _i.setSelectionRange(updated[0], updated[1], (_h = updated[2]) != null ? _h : void 0);\n  return [updated[0], updated[1]];\n}\nvar wrapperStyle = {\n  position: \"relative\",\n  userSelect: \"none\"\n};\nvar inputStyle = {\n  display: \"block\",\n  background: \"transparent\",\n  opacity: 0,\n  outline: \"transparent solid 0px\",\n  appearance: \"none\",\n  color: \"transparent\",\n  position: \"absolute\",\n  inset: 0,\n  caretColor: \"transparent\",\n  border: \"0px solid transparent\",\n  // width is handled inline\n  height: \"100%\",\n  letterSpacing: \"-1rem\"\n};\nvar segmentWrapperStyle = {\n  zIndex: 1,\n  pointerEvents: \"none\"\n};\n\n// src/react/common/form/utils/enrich-field-state.ts\nfunction enrichFieldState(validity, fieldState) {\n  return (validity == null ? void 0 : validity.valid) === false ? FIELD_STATES.error : fieldState;\n}\n\n// src/react/common/form/utils/determine-input-type-from-name.ts\nfunction determineInputTypeFromName(name) {\n  if (name === \"password\" || name === \"confirmPassword\" || name === \"currentPassword\" || name === \"newPassword\") {\n    return \"password\";\n  }\n  if (name === \"emailAddress\") {\n    return \"email\";\n  }\n  if (name === \"phoneNumber\") {\n    return \"tel\";\n  }\n  if (name === \"code\") {\n    return \"otp\";\n  }\n  if (name === \"backup_code\") {\n    return \"backup_code\";\n  }\n  return \"text\";\n}\n\n// src/react/common/form/hooks/use-previous.ts\n\nfunction usePrevious(value) {\n  const ref = react__WEBPACK_IMPORTED_MODULE_1__.useRef();\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\n// src/react/common/form/hooks/use-validity-state-context.ts\n\nvar ValidityStateContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nvar useValidityStateContext = () => react__WEBPACK_IMPORTED_MODULE_1__.useContext(ValidityStateContext);\n\n// src/react/common/form/hooks/use-input.tsx\nfunction useInput({\n  name: inputName,\n  value: providedValue,\n  checked: providedChecked,\n  onChange: onChangeProp,\n  onBlur: onBlurProp,\n  onFocus: onFocusProp,\n  type: inputType,\n  ...passthroughProps\n}) {\n  const fieldContext = useFieldContext();\n  const rawName = inputName || (fieldContext == null ? void 0 : fieldContext.name);\n  const name = rawName === \"backup_code\" ? \"code\" : rawName;\n  const { state: fieldState } = useFieldState({ name });\n  const validity = useValidityStateContext();\n  if (!rawName || !name) {\n    throw new Error(\"Clerk: <Input /> must be wrapped in a <Field> component or have a name prop.\");\n  }\n  const ref = useFormStore();\n  const [hasPassedValiation, setHasPassedValidation] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const { validatePassword } = usePassword({\n    onValidationComplexity: (hasPassed) => setHasPassedValidation(hasPassed),\n    onValidationSuccess: () => {\n      ref.send({\n        type: \"FIELD.FEEDBACK.SET\",\n        field: { name, feedback: { type: \"success\", message: \"Your password meets all the necessary requirements.\" } }\n      });\n    },\n    onValidationError: (error, codes) => {\n      if (error) {\n        ref.send({\n          type: \"FIELD.FEEDBACK.SET\",\n          field: {\n            name,\n            feedback: {\n              type: \"error\",\n              message: new ClerkElementsFieldError(\"password-validation-error\", error),\n              codes\n            }\n          }\n        });\n      }\n    },\n    onValidationWarning: (warning, codes) => ref.send({\n      type: \"FIELD.FEEDBACK.SET\",\n      field: { name, feedback: { type: \"warning\", message: warning, codes } }\n    }),\n    onValidationInfo: (info, codes) => {\n      ref.send({\n        type: \"FIELD.FEEDBACK.SET\",\n        field: {\n          name,\n          feedback: {\n            type: \"info\",\n            message: info,\n            codes\n          }\n        }\n      });\n    }\n  });\n  const value = useFormSelector(fieldValueSelector(name));\n  const prevValue = usePrevious(value);\n  const hasValue = Boolean(value);\n  const type = inputType != null ? inputType : determineInputTypeFromName(rawName);\n  let nativeFieldType = type;\n  let shouldValidatePassword = false;\n  if (type === \"password\" || type === \"text\") {\n    shouldValidatePassword = Boolean(passthroughProps.validatePassword);\n  }\n  if (nativeFieldType === \"otp\" || nativeFieldType === \"backup_code\") {\n    nativeFieldType = \"text\";\n  }\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (!name) {\n      return;\n    }\n    ref.send({\n      type: \"FIELD.ADD\",\n      field: { name, type: nativeFieldType, value: providedValue, checked: providedChecked }\n    });\n    return () => ref.send({ type: \"FIELD.REMOVE\", field: { name } });\n  }, [ref]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (!name) {\n      return;\n    }\n    if (type === \"checkbox\" && providedChecked !== void 0 || type !== \"checkbox\" && providedValue !== void 0) {\n      ref.send({\n        type: \"FIELD.UPDATE\",\n        field: { name, value: providedValue, checked: providedChecked }\n      });\n    }\n  }, [name, type, ref, providedValue, providedChecked]);\n  const onChange = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onChangeProp == null ? void 0 : onChangeProp(event);\n      if (!name) {\n        return;\n      }\n      ref.send({ type: \"FIELD.UPDATE\", field: { name, value: event.target.value, checked: event.target.checked } });\n      if (shouldValidatePassword) {\n        validatePassword(event.target.value);\n      }\n    },\n    [ref, name, onChangeProp, shouldValidatePassword, validatePassword]\n  );\n  const onBlur = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onBlurProp == null ? void 0 : onBlurProp(event);\n      if (shouldValidatePassword && event.target.value !== prevValue) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onBlurProp, shouldValidatePassword, validatePassword, prevValue]\n  );\n  const onFocus = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onFocusProp == null ? void 0 : onFocusProp(event);\n      if (shouldValidatePassword && event.target.value !== prevValue) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onFocusProp, shouldValidatePassword, validatePassword, prevValue]\n  );\n  const shouldBeHidden = false;\n  const Element = type === \"otp\" ? OTPInput : _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control;\n  let props = {};\n  if (type === \"otp\") {\n    const p = passthroughProps;\n    const length = p.length || OTP_LENGTH_DEFAULT;\n    props = {\n      \"data-otp-input\": true,\n      autoComplete: \"one-time-code\",\n      inputMode: \"numeric\",\n      pattern: `[0-9]{${length}}`,\n      minLength: length,\n      maxLength: length,\n      onChange: (event) => {\n        event.currentTarget.value = event.currentTarget.value.replace(/\\D+/g, \"\");\n        onChange(event);\n      },\n      type: \"text\",\n      spellCheck: false\n    };\n  } else if (type === \"backup_code\") {\n    props = {\n      autoComplete: \"off\",\n      type: \"text\",\n      spellCheck: false\n    };\n  } else if (type === \"password\" && shouldValidatePassword) {\n    props = {\n      \"data-has-passed-validation\": hasPassedValiation ? true : void 0\n    };\n  }\n  const { validatePassword: _1, ...rest } = passthroughProps;\n  return {\n    Element,\n    props: {\n      type,\n      value: value != null ? value : \"\",\n      onChange,\n      onBlur,\n      onFocus,\n      \"data-hidden\": shouldBeHidden ? true : void 0,\n      \"data-has-value\": hasValue ? true : void 0,\n      \"data-state\": enrichFieldState(validity, fieldState),\n      ...props,\n      ...rest\n    }\n  };\n}\n\n// src/react/common/form/field.tsx\n\nvar DISPLAY_NAME = \"ClerkElementsField\";\nvar DISPLAY_NAME_INNER = \"ClerkElementsFieldInner\";\nvar Field = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ alwaysShow, ...rest }, forwardedRef) => {\n  var _a;\n  const formRef = useFormStore();\n  const formCtx = formRef.getSnapshot().context;\n  const isHiddenField = formCtx.progressive && Boolean((_a = formCtx.hidden) == null ? void 0 : _a.has(rest.name));\n  const shouldHide = alwaysShow ? false : isHiddenField;\n  return shouldHide ? null : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(FieldContext.Provider, { value: { name: rest.name }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    FieldInner,\n    {\n      ...rest,\n      ref: forwardedRef\n    }\n  ) });\n});\nField.displayName = DISPLAY_NAME;\nvar FieldInner = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((props, forwardedRef) => {\n  const { children, ...rest } = props;\n  const field = useField({ name: rest.name });\n  const { state: fieldState } = useFieldState({ name: rest.name });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Field,\n    {\n      ...field.props,\n      ...rest,\n      ref: forwardedRef,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.ValidityState, { children: (validity) => {\n        const enrichedFieldState = enrichFieldState(validity, fieldState);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ValidityStateContext.Provider, { value: validity, children: typeof children === \"function\" ? children(enrichedFieldState) : children });\n      } })\n    }\n  );\n});\nFieldInner.displayName = DISPLAY_NAME_INNER;\n\n// src/react/common/form/field-error.tsx\n\n\n\n\n// src/react/utils/is-react-fragment.ts\n\nfunction isReactFragment(node) {\n  return react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(node) && node.type === react__WEBPACK_IMPORTED_MODULE_1__.Fragment;\n}\n\n// src/react/common/form/field-error.tsx\n\nvar DISPLAY_NAME2 = \"ClerkElementsFieldError\";\nvar FieldError = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild = false, children, code, name, ...rest }, forwardedRef) => {\n    const fieldContext = useFieldContext();\n    const rawFieldName = (fieldContext == null ? void 0 : fieldContext.name) || name;\n    const fieldName = rawFieldName === \"backup_code\" ? \"code\" : rawFieldName;\n    const { feedback } = useFieldFeedback({ name: fieldName });\n    if (!((feedback == null ? void 0 : feedback.type) === \"error\")) {\n      return null;\n    }\n    const error = feedback.message;\n    if (!error) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"span\";\n    const child = typeof children === \"function\" ? children(error) : children;\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError(\"<FieldError /> cannot render a Fragment as a child.\");\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.FormMessage,\n      {\n        \"data-error-code\": error.code,\n        ...rest,\n        ref: forwardedRef,\n        asChild: true,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { children: child || error.message })\n      }\n    );\n  }\n);\nFieldError.displayName = DISPLAY_NAME2;\n\n// src/react/common/form/field-state.tsx\nvar DISPLAY_NAME3 = \"ClerkElementsFieldState\";\nfunction FieldState({ children }) {\n  const field = useFieldContext();\n  const { feedback } = useFieldFeedback({ name: field == null ? void 0 : field.name });\n  const { state } = useFieldState({ name: field == null ? void 0 : field.name });\n  const validity = useValidityStateContext();\n  const message = (feedback == null ? void 0 : feedback.message) instanceof ClerkElementsFieldError ? feedback.message.message : feedback == null ? void 0 : feedback.message;\n  const codes = feedback == null ? void 0 : feedback.codes;\n  const fieldState = { state: enrichFieldState(validity, state), message, codes };\n  return children(fieldState);\n}\nFieldState.displayName = DISPLAY_NAME3;\n\n// src/react/common/form/form.tsx\n\n\n\n\nvar DISPLAY_NAME4 = \"ClerkElementsForm\";\nvar Form = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ flowActor, onSubmit, ...rest }, forwardedRef) => {\n  const form = useForm({ flowActor });\n  const { onSubmit: internalOnSubmit, ...internalFormProps } = form.props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Form,\n    {\n      ...internalFormProps,\n      ...rest,\n      onSubmit: (0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_12__.composeEventHandlers)(internalOnSubmit, onSubmit),\n      ref: forwardedRef\n    }\n  );\n});\nForm.displayName = DISPLAY_NAME4;\n\n// src/react/common/form/global-error.tsx\n\n\n\nvar DISPLAY_NAME5 = \"ClerkElementsGlobalError\";\nvar GlobalError = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild = false, children, code, ...rest }, forwardedRef) => {\n    const { errors } = useGlobalErrors();\n    const error = errors == null ? void 0 : errors[0];\n    if (!error || code && error.code !== code) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n    const child = typeof children === \"function\" ? children(error) : children;\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError(\"<GlobalError /> cannot render a Fragment as a child.\");\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      Comp,\n      {\n        role: \"alert\",\n        ...rest,\n        ref: forwardedRef,\n        children: child || error.message\n      }\n    );\n  }\n);\nGlobalError.displayName = DISPLAY_NAME5;\n\n// src/react/common/form/input.tsx\n\n\n\n\n\n// src/react/utils/create-context-from-actor-ref.ts\n\n\nfunction createContextFromActorRef(displayName) {\n  const ReactContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\n  const OriginalProvider = ReactContext.Provider;\n  function Provider({ children, actorRef }) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\n      OriginalProvider,\n      {\n        value: actorRef\n      },\n      children\n    );\n  }\n  Provider.displayName = displayName;\n  function useContext9(allowMissingActor = false) {\n    const actorRef = react__WEBPACK_IMPORTED_MODULE_1__.useContext(ReactContext);\n    if (!allowMissingActor && !actorRef) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`\n      );\n    }\n    return actorRef;\n  }\n  function useSelector6(selector, compare) {\n    const actor = useContext9();\n    return (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actor, selector, compare);\n  }\n  return {\n    Provider,\n    useActorRef: useContext9,\n    useSelector: useSelector6\n  };\n}\n\n// src/react/sign-in/context/router.context.ts\nvar SignInRouterCtx = createContextFromActorRef(\"SignInRouterCtx\");\nfunction useSignInStep(name) {\n  return SignInRouterCtx.useSelector((state) => state.children[name]);\n}\nvar useSignInStartStep = () => useSignInStep(\"start\");\nvar useSignInFirstFactorStep = () => useSignInStep(\"firstFactor\");\nvar useSignInSecondFactorStep = () => useSignInStep(\"secondFactor\");\nvar useSignInResetPasswordStep = () => useSignInStep(\"resetPassword\");\nvar useSignInPasskeyAutofill = () => SignInRouterCtx.useSelector((state) => state.context.webAuthnAutofillSupport);\n\n// src/react/sign-in/context/sign-in-strategy.context.ts\n\nvar SignInStrategyContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n  strategy: void 0\n});\nfunction useSignInStrategy() {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SignInStrategyContext);\n  if (!ctx) {\n    throw new ClerkElementsRuntimeError(\n      \"useSignInStrategy must be used within a <SignIn.Strategy> or <SignIn.SupportedStrategy> component.\"\n    );\n  }\n  const { strategy } = ctx;\n  return strategy;\n}\n\n// src/react/sign-in/context/strategies.context.ts\n\nvar StrategiesContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n  current: void 0,\n  isActive: (_name) => false,\n  preferred: void 0\n});\nfunction useStrategy(name) {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StrategiesContext);\n  if (!ctx) {\n    throw new ClerkElementsRuntimeError(\n      'useStrategy must be used within a <SignIn.Step name=\"verifications\"> component. Did you mean to `import { Step } from \"@clerk/elements/sign-up\"` instead?'\n    );\n  }\n  const { current, preferred, isActive } = ctx;\n  return {\n    current,\n    preferred,\n    get active() {\n      return isActive(name);\n    }\n  };\n}\n\n// src/react/common/form/input.tsx\n\nvar DISPLAY_NAME6 = \"ClerkElementsInput\";\nvar DISPLAY_NAME_PASSKEYS_AUTOFILL = \"ClerkElementsInputWithPasskeyAutofill\";\nvar Input = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  (props, forwardedRef) => {\n    var _a, _b, _c;\n    const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n    const field = useInput(props);\n    const hasPasskeyAutofillProp = Boolean((_a = field.props.autoComplete) == null ? void 0 : _a.includes(\"webauthn\"));\n    const allowedTypeForPasskey = [\"text\", \"email\", \"tel\"].includes(field.props.type);\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n    (_c = clerk.telemetry) == null ? void 0 : _c.record(\n      (0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_Input\", {\n        type: (_b = props.type) != null ? _b : false,\n        // @ts-expect-error - Depending on type the props can be different\n        render: Boolean(props == null ? void 0 : props.render),\n        // @ts-expect-error - Depending on type the props can be different\n        asChild: Boolean(props == null ? void 0 : props.asChild),\n        // @ts-expect-error - Depending on type the props can be different\n        validatePassword: Boolean(props == null ? void 0 : props.validatePassword)\n      })\n    );\n    if (signInRouterRef && hasPasskeyAutofillProp && allowedTypeForPasskey) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        InputWithPasskeyAutofill,\n        {\n          ref: forwardedRef,\n          ...props\n        }\n      );\n    }\n    if (hasPasskeyAutofillProp && !allowedTypeForPasskey) {\n      _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__.logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used with <Input type=\"text\"> or <Input type=\"email\">`\n      );\n    } else if (hasPasskeyAutofillProp) {\n      _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__.logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used inside <SignIn> in order to trigger a sign-in attempt, otherwise it will be ignored.`\n      );\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      field.Element,\n      {\n        ref: forwardedRef,\n        ...field.props\n      }\n    );\n  }\n);\nInput.displayName = DISPLAY_NAME6;\nvar InputWithPasskeyAutofill = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  (props, forwardedRef) => {\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n    const passkeyAutofillSupported = useSignInPasskeyAutofill();\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      if (passkeyAutofillSupported) {\n        signInRouterRef == null ? void 0 : signInRouterRef.send({ type: \"AUTHENTICATE.PASSKEY.AUTOFILL\" });\n      }\n    }, [passkeyAutofillSupported, signInRouterRef]);\n    const field = useInput(props);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      field.Element,\n      {\n        ref: forwardedRef,\n        ...field.props\n      }\n    );\n  }\n);\nInputWithPasskeyAutofill.displayName = DISPLAY_NAME_PASSKEYS_AUTOFILL;\n\n// src/react/common/form/label.tsx\n\nvar DISPLAY_NAME7 = \"ClerkElementsLabel\";\nvar Label = _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Label;\nLabel.displayName = DISPLAY_NAME7;\n\n// src/react/common/form/submit.tsx\n\nvar DISPLAY_NAME8 = \"ClerkElementsSubmit\";\nvar Submit = _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Submit;\nSubmit.displayName = DISPLAY_NAME8;\n\n// src/react/common/connections.tsx\n\n\n\n// src/react/hooks/use-active-tags.hook.ts\n\nvar ActiveTagsMode = {\n  any: \"any\",\n  all: \"all\"\n};\nfunction useActiveTags(actor, tags, mode = ActiveTagsMode.any) {\n  const state = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(\n    actor,\n    (s) => s,\n    (prev, next) => prev.tags === next.tags\n  );\n  if (!state) {\n    return false;\n  }\n  if (typeof tags === \"string\") {\n    return state.hasTag(tags);\n  }\n  if (!Array.isArray(tags)) {\n    throw new Error(\"Invalid tags parameter provided to useActiveTags\");\n  }\n  switch (mode) {\n    case ActiveTagsMode.any: {\n      const matching = new Set(tags.filter((tag) => state.hasTag(tag)));\n      return { active: matching.size > 0, activeTags: matching };\n    }\n    case ActiveTagsMode.all:\n      return tags.length === state.tags.size ? tags.every((tag) => state.hasTag(tag)) : false;\n    default:\n      return false;\n  }\n}\n\n// src/react/hooks/use-third-party-provider.hook.ts\n\n\n\n// src/utils/third-party-strategies.ts\n\n\n\n\n// src/utils/clerk-js.ts\nvar fromEntries = (iterable) => {\n  return [...iterable].reduce((obj, [key, val]) => {\n    obj[key] = val;\n    return obj;\n  }, {});\n};\n\n// src/utils/third-party-strategies.ts\nvar oauthStrategies = _clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS.map((p) => p.strategy);\nvar providerToDisplayData = fromEntries(\n  [..._clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS, ..._clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__.WEB3_PROVIDERS].map((p) => {\n    return [p.provider, { iconUrl: (0,_clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__.iconImageUrl)(p.provider), name: p.name, strategy: p.strategy }];\n  })\n);\nvar strategyToDisplayData = fromEntries(\n  [..._clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS, ..._clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__.WEB3_PROVIDERS].map((p) => {\n    return [p.strategy, { iconUrl: (0,_clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__.iconImageUrl)(p.provider), id: p.provider, name: p.name }];\n  })\n);\nfunction isSamlStrategy(strategy) {\n  return strategy === \"saml\";\n}\nfunction isWeb3Strategy(strategy, available) {\n  return available.includes(strategy.startsWith(\"web3_\") ? strategy : `web3_${strategy}_signature`);\n}\nfunction isAuthenticatableOauthStrategy(strategy, available) {\n  return available.includes(strategy.startsWith(\"oauth_\") ? strategy : `oauth_${strategy}`);\n}\nvar emptyThirdPartyProviders = {\n  authenticatableOauthStrategies: [],\n  providerToDisplayData: {},\n  strategies: [],\n  strategyToDisplayData: {},\n  web3Strategies: []\n};\nvar getEnabledThirdPartyProviders = (environment) => {\n  if (!(environment == null ? void 0 : environment.userSettings)) {\n    return emptyThirdPartyProviders;\n  }\n  const { socialProviderStrategies, web3FirstFactors, authenticatableSocialStrategies } = environment.userSettings;\n  const knownSocialProviderStrategies = socialProviderStrategies.filter((s) => oauthStrategies.includes(s));\n  const knownAuthenticatableSocialStrategies = authenticatableSocialStrategies.filter((s) => oauthStrategies.includes(s));\n  return {\n    authenticatableOauthStrategies: [...knownAuthenticatableSocialStrategies],\n    providerToDisplayData,\n    strategies: [...knownSocialProviderStrategies, ...web3FirstFactors],\n    strategyToDisplayData,\n    web3Strategies: web3FirstFactors\n  };\n};\n\n// src/react/hooks/use-third-party-provider.hook.ts\nvar useIsProviderEnabled = (provider) => {\n  var _a, _b;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  if (!clerk.loaded) {\n    return null;\n  }\n  if (provider === \"saml\") {\n    return (_b = (_a = clerk.__unstable__environment) == null ? void 0 : _a.userSettings.saml.enabled) != null ? _b : false;\n  }\n  const data = getEnabledThirdPartyProviders(clerk.__unstable__environment);\n  return isAuthenticatableOauthStrategy(provider, data.authenticatableOauthStrategies) || isWeb3Strategy(provider, data.web3Strategies);\n};\nvar useThirdPartyProvider = (ref, provider) => {\n  const isProviderEnabled = useIsProviderEnabled(provider);\n  const isSaml = isSamlStrategy(provider);\n  const details = isSaml ? {\n    name: \"SAML\",\n    strategy: \"saml\"\n  } : providerToDisplayData[provider];\n  const authenticate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (event) => {\n      if (!isProviderEnabled) {\n        return;\n      }\n      event.preventDefault();\n      if (isSaml) {\n        return ref.send({ type: \"AUTHENTICATE.SAML\" });\n      }\n      if (provider === \"metamask\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_metamask_signature\" });\n      }\n      if (provider === \"coinbase_wallet\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_coinbase_wallet_signature\" });\n      }\n      if (provider === \"okx_wallet\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_okx_wallet_signature\" });\n      }\n      return ref.send({ type: \"AUTHENTICATE.OAUTH\", strategy: `oauth_${provider}` });\n    },\n    [provider, isProviderEnabled, isSaml, ref]\n  );\n  if (isProviderEnabled === false) {\n    const dashboardPath = `https://dashboard.clerk.com/last-active?path=/user-authentication/${provider === \"metamask\" ? \"web3\" : \"social-connections\"}`;\n    throw new ClerkElementsRuntimeError(\n      `You have used <Connection name=\"${provider}\"> which isn't enabled for your project. Enable ${details.name} in your Clerk dashboard: ${dashboardPath}`\n    );\n  }\n  return {\n    events: {\n      authenticate\n    },\n    ...details\n  };\n};\n\n// src/react/sign-up/context/router.context.ts\nvar SignUpRouterCtx = createContextFromActorRef(\"SignUpRouterCtx\");\nfunction useSignUpStep(name) {\n  return SignUpRouterCtx.useSelector((state) => state.children[name]);\n}\nvar useSignUpStartStep = () => useSignUpStep(\"start\");\nvar useSignUpContinueStep = () => useSignUpStep(\"continue\");\nvar useSignUpVerificationStep = () => useSignUpStep(\"verification\");\n\n// src/react/common/connections.tsx\n\nvar ConnectionContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nvar useConnectionContext = () => {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConnectionContext);\n  if (!ctx) {\n    throw new Error(\"useConnectionContext must be used within <Clerk.Connection>\");\n  }\n  return ctx;\n};\nfunction Connection({ asChild, name, ...rest }) {\n  const signInRef = SignInRouterCtx.useActorRef(true);\n  const signUpRef = SignUpRouterCtx.useActorRef(true);\n  const provider = useThirdPartyProvider(signInRef || signUpRef, name);\n  if (!provider) {\n    return null;\n  }\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"button\";\n  const defaultProps = asChild ? {} : { type: \"button\" };\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ConnectionContext.Provider, { value: provider, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Comp,\n    {\n      onClick: provider.events.authenticate,\n      ...defaultProps,\n      ...rest\n    }\n  ) });\n}\nfunction Icon({ asChild, ...rest }) {\n  const { iconUrl, name } = useConnectionContext();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"img\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Comp,\n    {\n      alt: `${name} logo`,\n      src: iconUrl,\n      ...rest\n    }\n  );\n}\n\n// src/react/common/loading.tsx\n\n\n\n\n// src/react/hooks/use-loading.hook.ts\n\nvar selectLoading = (snapshot) => {\n  var _a;\n  return (_a = snapshot == null ? void 0 : snapshot.context) == null ? void 0 : _a.loading;\n};\nvar compareLoadingValue = (prev, next) => (prev == null ? void 0 : prev.isLoading) === (next == null ? void 0 : next.isLoading);\nfunction useLoading(actor) {\n  const loadingCtx = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actor, selectLoading, compareLoadingValue);\n  if (!loadingCtx) {\n    return [false, { step: void 0, strategy: void 0, action: void 0 }];\n  }\n  return [loadingCtx.isLoading, { step: loadingCtx.step, strategy: loadingCtx.strategy, action: loadingCtx.action }];\n}\n\n// src/react/sign-in/step.tsx\n\n\n\n// src/react/sign-in/choose-session/choose-session.tsx\n\n\n\n// src/react/utils/create-context-for-dom-validation.ts\n\nfunction createContextForDomValidation(displayName) {\n  const ReactContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(false);\n  const OriginalProvider = ReactContext.Provider;\n  function Provider({ children }) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\n      OriginalProvider,\n      {\n        value: true\n      },\n      children\n    );\n  }\n  Provider.displayName = displayName;\n  function useContext9(allowMissingContext = false) {\n    const context = react__WEBPACK_IMPORTED_MODULE_1__.useContext(ReactContext);\n    if (!allowMissingContext && !context) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`\n      );\n    }\n    return context;\n  }\n  return {\n    Provider,\n    useDomValidation: useContext9\n  };\n}\n\n// src/react/utils/is-valid-component-type.ts\n\nfunction isValidComponentType(child, type) {\n  return react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(child) && child.type === type;\n}\n\n// src/react/sign-in/choose-session/choose-session.hooks.ts\n\nvar SignInActiveSessionContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nfunction useSignInActiveSessionContext() {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_1__.useContext(SignInActiveSessionContext);\n  if (!ctx) {\n    throw new Error(\"SignInActiveSessionContext must be used within a SessionList/SignInSessionListItem\");\n  }\n  return ctx;\n}\nfunction useSignInChooseSessionIsActive() {\n  const routerRef = SignInRouterCtx.useActorRef();\n  return useActiveTags(routerRef, \"step:choose-session\");\n}\nfunction useSignInActiveSessionList(params) {\n  const { omitCurrent = true } = params || {};\n  return SignInRouterCtx.useSelector((state) => {\n    var _a, _b, _c, _d;\n    const activeSessions = ((_b = (_a = state.context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.activeSessions) || [];\n    const currentSessionId = (_d = (_c = state.context.clerk) == null ? void 0 : _c.session) == null ? void 0 : _d.id;\n    const filteredSessions = omitCurrent ? activeSessions.filter((s) => s.id !== currentSessionId) : activeSessions;\n    return filteredSessions.map((s) => ({\n      id: s.id,\n      ...s.publicUserData\n    }));\n  });\n}\n\n// src/react/sign-in/choose-session/choose-session.tsx\n\nvar SignInChooseSessionCtx = createContextForDomValidation(\"SignInChooseSessionCtx\");\nfunction SignInChooseSession({ asChild, children, ...props }) {\n  const activeState = useSignInChooseSessionIsActive();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseSessionCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nfunction SignInSessionList({ asChild, children, includeCurrentSession, ...props }) {\n  const sessions = useSignInActiveSessionList({ omitCurrent: !includeCurrentSession });\n  if (!children || !(sessions == null ? void 0 : sessions.length)) {\n    return null;\n  }\n  if (react__WEBPACK_IMPORTED_MODULE_1__.Children.count(children) > 1) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.Children.only(null);\n  }\n  if (asChild && isValidComponentType(children, SignInSessionListItem)) {\n    throw new Error(\"asChild cannot be used with SessionListItem as the direct child\");\n  }\n  if (!react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(children)) {\n    throw new Error(\"children must be a valid React element\");\n  }\n  const newChildren = asChild ? children.props.children : children;\n  const childrenWithCtx = sessions.map((session) => {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      SignInActiveSessionContext.Provider,\n      {\n        value: session,\n        children: newChildren\n      },\n      `SignInActiveSessionContext-${session.id}`\n    );\n  });\n  if (asChild) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot, { ...props, children: react__WEBPACK_IMPORTED_MODULE_1__.cloneElement(children, void 0, childrenWithCtx) });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"ul\", { ...props, children: childrenWithCtx });\n}\nfunction SignInSessionListItem(props) {\n  const { asChild = false, children, ...passthroughProps } = props;\n  const session = useSignInActiveSessionContext();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"li\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...passthroughProps, children: children({ session }) });\n}\n\n// src/react/sign-in/choose-strategy.tsx\n\n\n\n\n// src/internals/machines/sign-in/verification.machine.ts\n\n\n\n// src/internals/constants/index.ts\nvar SSO_CALLBACK_PATH_ROUTE = \"/sso-callback\";\nvar CHOOSE_SESSION_PATH_ROUTE = \"/choose\";\nvar MAGIC_LINK_VERIFY_PATH_ROUTE = \"/verify\";\nvar SIGN_UP_MODES = {\n  PUBLIC: \"public\",\n  RESTRICTED: \"restricted\"\n};\nvar SIGN_IN_DEFAULT_BASE_PATH = safeAccess(\n  () => {\n    var _a;\n    return (_a = process.env.CLERK_SIGN_IN_URL) != null ? _a : \"/sign-up\";\n  },\n  \"/sign-in\"\n);\nvar SIGN_UP_DEFAULT_BASE_PATH = safeAccess(\n  () => {\n    var _a;\n    return (_a = process.env.CLERK_SIGN_UP_URL) != null ? _a : process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL;\n  },\n  \"/sign-up\"\n);\nvar NEXT_WINDOW_HISTORY_SUPPORT_VERSION = \"14.1.0\";\nvar SEARCH_PARAMS = {\n  createdSession: \"__clerk_created_session\",\n  handshake: \"__clerk_handshake\",\n  help: \"__clerk_help\",\n  invitationToken: \"__clerk_invitation_token\",\n  modalState: \"__clerk_modal_state\",\n  satelliteUrl: \"__clerk_satellite_url\",\n  status: \"__clerk_status\",\n  synced: \"__clerk_synced\",\n  ticket: \"__clerk_ticket\",\n  transfer: \"__clerk_transfer\"\n};\nvar RESENDABLE_COUNTDOWN_DEFAULT = 60;\nvar CAPTCHA_ELEMENT_ID = \"clerk-captcha\";\nvar ERROR_CODES = {\n  FORM_IDENTIFIER_NOT_FOUND: \"form_identifier_not_found\",\n  FORM_PASSWORD_INCORRECT: \"form_password_incorrect\",\n  INVALID_STRATEGY_FOR_USER: \"strategy_for_user_invalid\",\n  NOT_ALLOWED_TO_SIGN_UP: \"not_allowed_to_sign_up\",\n  OAUTH_ACCESS_DENIED: \"oauth_access_denied\",\n  OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML: \"oauth_email_domain_reserved_by_saml\",\n  NOT_ALLOWED_ACCESS: \"not_allowed_access\",\n  SAML_USER_ATTRIBUTE_MISSING: \"saml_user_attribute_missing\",\n  USER_LOCKED: \"user_locked\",\n  ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING: \"enterprise_sso_user_attribute_missing\",\n  ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH: \"enterprise_sso_email_address_domain_mismatch\",\n  ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH: \"enterprise_sso_hosted_domain_mismatch\",\n  SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH: \"saml_email_address_domain_mismatch\",\n  ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO: \"organization_membership_quota_exceeded_for_sso\"\n};\nvar ROUTING = {\n  path: \"path\",\n  virtual: \"virtual\",\n  hash: \"hash\"\n};\n\n// src/internals/machines/shared/shared.actions.ts\nfunction sendToLoading({ context, event }) {\n  let step;\n  let strategy;\n  let action;\n  if (event.type.startsWith(\"xstate.done.\") || event.type.startsWith(\"xstate.error.\")) {\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: false,\n      step: void 0,\n      strategy: void 0\n    });\n  }\n  if (context.loadingStep === \"strategy\") {\n    step = void 0;\n    if (event.type === \"REDIRECT\") {\n      strategy = event.params.strategy;\n    }\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy\n    });\n  } else if (context.loadingStep === \"continue\") {\n    step = \"continue\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else if (context.loadingStep === \"reset-password\") {\n    step = \"reset-password\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else if (context.loadingStep === \"start\") {\n    step = \"start\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else {\n    step = context.loadingStep;\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  }\n}\n\n// src/internals/machines/sign-in/utils/starting-factors.ts\n\nvar makeSortingOrderMap = (arr) => arr.reduce(\n  (acc, k, i) => {\n    acc[k] = i;\n    return acc;\n  },\n  {}\n);\nvar STRATEGY_SORT_ORDER_PASSWORD_PREF = makeSortingOrderMap([\n  \"passkey\",\n  \"password\",\n  \"email_link\",\n  \"email_code\",\n  \"phone_code\"\n]);\nvar STRATEGY_SORT_ORDER_OTP_PREF = makeSortingOrderMap([\n  \"email_code\",\n  \"email_link\",\n  \"phone_code\",\n  \"passkey\",\n  \"password\"\n]);\nvar makeSortingFunction = (sortingMap) => (a, b) => {\n  const orderA = sortingMap[a.strategy];\n  const orderB = sortingMap[b.strategy];\n  if (orderA === void 0 || orderB === void 0) {\n    return 0;\n  }\n  return orderA - orderB;\n};\nvar passwordPrefFactorComparator = makeSortingFunction(STRATEGY_SORT_ORDER_PASSWORD_PREF);\nvar otpPrefFactorComparator = makeSortingFunction(STRATEGY_SORT_ORDER_OTP_PREF);\nvar findFactorForIdentifier = (i) => (f) => {\n  return \"safeIdentifier\" in f && f.safeIdentifier === i;\n};\nfunction determineStartingSignInFactor(firstFactors, identifier, preferredSignInStrategy) {\n  if (!firstFactors || firstFactors.length === 0) {\n    return null;\n  }\n  return preferredSignInStrategy === \"password\" ? determineStrategyWhenPasswordIsPreferred(firstFactors, identifier) : determineStrategyWhenOTPIsPreferred(firstFactors, identifier);\n}\nfunction findPasskeyStrategy(factors) {\n  if ((0,_clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__.isWebAuthnSupported)()) {\n    const passkeyFactor = factors.find(({ strategy }) => strategy === \"passkey\");\n    if (passkeyFactor) {\n      return passkeyFactor;\n    }\n  }\n  return null;\n}\nfunction determineStrategyWhenPasswordIsPreferred(factors, identifier) {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n  const selected = factors.sort(passwordPrefFactorComparator)[0];\n  if (selected.strategy === \"password\") {\n    return selected;\n  }\n  return factors.find(findFactorForIdentifier(identifier)) || selected || null;\n}\nfunction determineStrategyWhenOTPIsPreferred(factors, identifier) {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n  const sortedBasedOnPrefFactor = factors.sort(otpPrefFactorComparator);\n  const forIdentifier = sortedBasedOnPrefFactor.find(findFactorForIdentifier(identifier));\n  if (forIdentifier) {\n    return forIdentifier;\n  }\n  const firstBasedOnPref = sortedBasedOnPrefFactor[0];\n  if (firstBasedOnPref.strategy === \"email_link\") {\n    return firstBasedOnPref;\n  }\n  return factors.find(findFactorForIdentifier(identifier)) || firstBasedOnPref || null;\n}\nfunction determineStartingSignInSecondFactor(secondFactors) {\n  if (!secondFactors || secondFactors.length === 0) {\n    return null;\n  }\n  const totpFactor = secondFactors.find((f) => f.strategy === \"totp\");\n  if (totpFactor) {\n    return totpFactor;\n  }\n  const phoneCodeFactor = secondFactors.find((f) => f.strategy === \"phone_code\");\n  if (phoneCodeFactor) {\n    return phoneCodeFactor;\n  }\n  return secondFactors[0];\n}\n\n// src/internals/machines/utils/assert.ts\nfunction assertIsDefined(value, label) {\n  if (value === void 0 || value === null) {\n    throw new Error(`${label || value} is not defined`);\n  }\n}\nfunction assertActorEventError(event) {\n  if (\"error\" in event === false) {\n    throw new Error(`Expected an error event, got \"${event.type}\"`);\n  }\n}\n\n// src/internals/machines/sign-in/verification.types.ts\nvar SignInVerificationDelays = {\n  resendableTimeout: 1e3\n  // 1 second\n};\n\n// src/internals/machines/sign-in/verification.machine.ts\nvar isNonPreparableStrategy = (strategy) => {\n  if (!strategy) {\n    return false;\n  }\n  return [\"passkey\", \"password\"].includes(strategy);\n};\nvar SignInVerificationMachineId = \"SignInVerification\";\nvar SignInVerificationMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `determineStartingFactor` must be overridden\"))\n    ),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `prepare` must be overridden\"))\n    ),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `attempt` must be overridden\"))\n    ),\n    attemptPasskey: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { parent, flow } }) => {\n      return parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey({\n        flow\n      });\n    })\n  },\n  actions: {\n    resendableTick: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ context }) => ({\n      resendable: context.resendableAfter === 0,\n      resendableAfter: context.resendableAfter > 0 ? context.resendableAfter - 1 : context.resendableAfter\n    })),\n    resendableReset: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      resendable: false,\n      resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT\n    }),\n    validateRegisteredStrategies: ({ context }) => {\n      var _a;\n      const clerk = context.parent.getSnapshot().context.clerk;\n      if ((_a = clerk.__unstable__environment) == null ? void 0 : _a.isProduction()) {\n        return;\n      }\n      if (false) {}\n    },\n    sendToNext: ({ context, event }) => context.parent.send({ type: \"NEXT\", resource: event.output }),\n    sendToLoading,\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    ),\n    setConsoleError: ({ event }) => {\n      if (true) {\n        return;\n      }\n      assertActorEventError(event);\n      const error = (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isClerkAPIResponseError)(event.error) ? event.error.errors[0].longMessage : event.error.message;\n      console.error(`Unable to fulfill the prepare or attempt request for the sign-in verification.\n      Error: ${error}\n      Please open an issue if you continue to run into this issue.`);\n    }\n  },\n  guards: {\n    isResendable: ({ context }) => context.resendable || context.resendableAfter === 0,\n    isNeverResendable: ({ context }) => {\n      var _a;\n      return isNonPreparableStrategy((_a = context.currentFactor) == null ? void 0 : _a.strategy);\n    }\n  },\n  delays: SignInVerificationDelays,\n  types: {}\n}).createMachine({\n  id: SignInVerificationMachineId,\n  context: ({ input }) => ({\n    currentFactor: null,\n    basePath: input.basePath || SIGN_IN_DEFAULT_BASE_PATH,\n    formRef: input.formRef,\n    loadingStep: \"verifications\",\n    parent: input.parent,\n    registeredStrategies: /* @__PURE__ */ new Set(),\n    resendable: false,\n    resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT\n  }),\n  initial: \"Init\",\n  on: {\n    \"NAVIGATE.PREVIOUS\": \".Hist\",\n    \"STRATEGY.REGISTER\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        registeredStrategies: ({ context, event }) => context.registeredStrategies.add(event.factor)\n      })\n    },\n    \"STRATEGY.UNREGISTER\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        registeredStrategies: ({ context, event }) => {\n          context.registeredStrategies.delete(event.factor);\n          return context.registeredStrategies;\n        }\n      })\n    }\n  },\n  states: {\n    Init: {\n      tags: [\"state:preparing\", \"state:loading\"],\n      invoke: {\n        id: \"determineStartingFactor\",\n        src: \"determineStartingFactor\",\n        input: ({ context }) => ({\n          parent: context.parent\n        }),\n        onDone: {\n          target: \"Preparing\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n            currentFactor: ({ event }) => event.output\n          })\n        },\n        onError: {\n          target: \"Preparing\",\n          actions: [\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Clerk [Sign In Verification]: Error determining starting factor\"),\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n              currentFactor: { strategy: \"password\" }\n            })\n          ]\n        }\n      }\n    },\n    Preparing: {\n      tags: [\"state:preparing\", \"state:loading\"],\n      invoke: {\n        id: \"prepare\",\n        src: \"prepare\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          resendable: context.resendable,\n          params: {\n            ...context.currentFactor,\n            redirectUrl: `${window.location.origin}${context.basePath}${MAGIC_LINK_VERIFY_PATH_ROUTE}`\n          }\n        }),\n        onDone: {\n          actions: \"resendableReset\",\n          target: \"Pending\"\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"setConsoleError\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        \"NAVIGATE.CHOOSE_STRATEGY\": \"ChooseStrategy\",\n        \"NAVIGATE.FORGOT_PASSWORD\": \"ChooseStrategy\",\n        RETRY: \"Preparing\",\n        SUBMIT: {\n          target: \"Attempting\",\n          reenter: true\n        }\n      },\n      initial: \"Init\",\n      states: {\n        Init: {\n          description: \"Marks appropriate factors as never resendable.\",\n          always: [\n            {\n              guard: \"isNeverResendable\",\n              target: \"NeverResendable\"\n            },\n            {\n              target: \"NotResendable\"\n            }\n          ]\n        },\n        Resendable: {\n          description: \"Waiting for user to retry\"\n        },\n        NeverResendable: {\n          description: \"Handles never resendable\",\n          on: {\n            RETRY: {\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Never retriable\")\n            }\n          }\n        },\n        NotResendable: {\n          description: \"Handle countdowns\",\n          on: {\n            RETRY: {\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(({ context }) => `Not retriable; Try again in ${context.resendableAfter}s`)\n            }\n          },\n          after: {\n            resendableTimeout: [\n              {\n                description: \"Set as retriable if countdown is 0\",\n                guard: \"isResendable\",\n                actions: \"resendableTick\",\n                target: \"Resendable\"\n              },\n              {\n                description: \"Continue countdown if not retriable\",\n                actions: \"resendableTick\",\n                target: \"NotResendable\",\n                reenter: true\n              }\n            ]\n          }\n        }\n      },\n      after: {\n        3e3: {\n          actions: \"validateRegisteredStrategies\"\n        }\n      }\n    },\n    ChooseStrategy: {\n      description: \"Handles both choose strategy and forgot password as the latter is similar in functionality\",\n      tags: [\"state:choose-strategy\", \"state:forgot-password\"],\n      on: {\n        \"STRATEGY.UPDATE\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({ currentFactor: ({ event }) => event.factor || null }),\n          target: \"Preparing\"\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          currentFactor: context.currentFactor,\n          fields: context.formRef.getSnapshot().context.fields\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"setConsoleError\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskey: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptPasskey\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"discoverable\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    Hist: {\n      type: \"history\"\n    }\n  }\n});\nvar SignInFirstFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a;\n      const clerk = input.parent.getSnapshot().context.clerk;\n      return Promise.resolve(\n        determineStartingSignInFactor(\n          clerk.client.signIn.supportedFirstFactors,\n          clerk.client.signIn.identifier,\n          (_a = clerk.__unstable__environment) == null ? void 0 : _a.displayConfig.preferredSignInStrategy\n        )\n      );\n    }),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n      const currentVerificationExpiration = clerk.client.signIn.firstFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < /* @__PURE__ */ new Date();\n      if (isNonPreparableStrategy(params == null ? void 0 : params.strategy) || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n      assertIsDefined(params, \"First factor params\");\n      return await clerk.client.signIn.prepareFirstFactor(params);\n    }),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a, _b, _c, _d, _e;\n      const { currentFactor, fields, parent } = input;\n      assertIsDefined(currentFactor, \"Current factor\");\n      let attemptParams;\n      const strategy = currentFactor.strategy;\n      const code = (_a = fields.get(\"code\")) == null ? void 0 : _a.value;\n      const password = (_b = fields.get(\"password\")) == null ? void 0 : _b.value;\n      switch (strategy) {\n        case \"passkey\": {\n          return await parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey();\n        }\n        case \"password\": {\n          assertIsDefined(password, \"Password\");\n          attemptParams = {\n            strategy,\n            password\n          };\n          break;\n        }\n        case \"reset_password_phone_code\":\n        case \"reset_password_email_code\": {\n          assertIsDefined(code, \"Code for resetting phone/email\");\n          attemptParams = {\n            strategy,\n            code,\n            password\n          };\n          break;\n        }\n        case \"phone_code\":\n        case \"email_code\": {\n          assertIsDefined(code, \"Code for phone/email\");\n          attemptParams = {\n            strategy,\n            code\n          };\n          break;\n        }\n        case \"web3_metamask_signature\": {\n          const signature = (_c = fields.get(\"signature\")) == null ? void 0 : _c.value;\n          assertIsDefined(signature, \"Web3 Metamask signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        case \"web3_coinbase_wallet_signature\": {\n          const signature = (_d = fields.get(\"signature\")) == null ? void 0 : _d.value;\n          assertIsDefined(signature, \"Web3 Coinbase Wallet signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        case \"web3_okx_wallet_signature\": {\n          const signature = (_e = fields.get(\"signature\")) == null ? void 0 : _e.value;\n          assertIsDefined(signature, \"Web3 OKX Wallet signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        default:\n          throw new ClerkElementsRuntimeError(`Invalid strategy: ${strategy}`);\n      }\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptFirstFactor(attemptParams);\n    })\n  }\n});\nvar SignInSecondFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      async ({ input }) => Promise.resolve(\n        determineStartingSignInSecondFactor(\n          input.parent.getSnapshot().context.clerk.client.signIn.supportedSecondFactors\n        )\n      )\n    ),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n      const currentVerificationExpiration = clerk.client.signIn.secondFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < /* @__PURE__ */ new Date();\n      assertIsDefined(params, \"Second factor params\");\n      if (params.strategy !== \"phone_code\" || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n      return await clerk.client.signIn.prepareSecondFactor({\n        strategy: params.strategy,\n        phoneNumberId: params.phoneNumberId\n      });\n    }),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a;\n      const { fields, parent, currentFactor } = input;\n      const code = (_a = fields.get(\"code\")) == null ? void 0 : _a.value;\n      assertIsDefined(currentFactor, \"Current factor\");\n      assertIsDefined(code, \"Code\");\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptSecondFactor({\n        strategy: currentFactor.strategy,\n        code\n      });\n    })\n  }\n});\n\n// src/internals/machines/sign-in/router.machine.ts\n\n\n\n\n// src/internals/machines/third-party/third-party.actors.ts\n\n\n// src/internals/machines/utils/clerkjs.ts\nfunction isClerkJSEvent(eventObj, event) {\n  return Object.values(eventObj).includes(event);\n}\nvar ClerkJSNavigationEvent = {\n  complete: \"CLERKJS.NAVIGATE.COMPLETE\",\n  signUp: \"CLERKJS.NAVIGATE.SIGN_UP\",\n  continue: \"CLERKJS.NAVIGATE.CONTINUE\",\n  generic: \"CLERKJS.NAVIGATE.GENERIC\",\n  resetPassword: \"CLERKJS.NAVIGATE.RESET_PASSWORD\",\n  signIn: \"CLERKJS.NAVIGATE.SIGN_IN\",\n  verification: \"CLERKJS.NAVIGATE.VERIFICATION\"\n};\nfunction isClerkJSNavigationEvent(event) {\n  return isClerkJSEvent(ClerkJSNavigationEvent, event);\n}\n\n// src/internals/machines/third-party/third-party.actors.ts\nvar redirect = (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n  async ({ input: { flow, params, parent } }) => {\n    const clerk = parent.getSnapshot().context.clerk;\n    return clerk.client[flow].authenticateWithRedirect({\n      redirectUrl: clerk.buildUrlWithAuth(params.redirectUrl || \"/\"),\n      redirectUrlComplete: clerk.buildUrlWithAuth(params.redirectUrlComplete || \"/\"),\n      ...params\n    });\n  }\n);\nvar handleRedirectCallback = (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromCallback)(\n  ({ sendBack, input: parent }) => {\n    var _a, _b;\n    const clerk = parent.getSnapshot().context.clerk;\n    const displayConfig = (_a = clerk.__unstable__environment) == null ? void 0 : _a.displayConfig;\n    const customNavigate = (toEvt) => {\n      const to = toEvt.split(\"/\").slice(-1)[0];\n      if (isClerkJSNavigationEvent(to)) {\n        sendBack({ type: to });\n      } else if (to === (displayConfig == null ? void 0 : displayConfig.signInUrl)) {\n        sendBack({ type: ClerkJSNavigationEvent.signIn });\n      } else if (to === (displayConfig == null ? void 0 : displayConfig.signUpUrl)) {\n        sendBack({ type: ClerkJSNavigationEvent.signUp });\n      } else {\n        sendBack({ type: \"FAILURE\", error: new ClerkElementsRuntimeError(`Unknown navigation event: ${to}`) });\n      }\n      return Promise.resolve();\n    };\n    const loadedClerk = (_b = clerk.clerkjs) != null ? _b : clerk;\n    void loadedClerk.handleRedirectCallback(\n      {\n        continueSignUpUrl: ClerkJSNavigationEvent.continue,\n        firstFactorUrl: ClerkJSNavigationEvent.signIn,\n        resetPasswordUrl: ClerkJSNavigationEvent.resetPassword,\n        secondFactorUrl: ClerkJSNavigationEvent.signIn,\n        verifyEmailAddressUrl: ClerkJSNavigationEvent.verification,\n        verifyPhoneNumberUrl: ClerkJSNavigationEvent.verification,\n        signUpUrl: ClerkJSNavigationEvent.signUp,\n        signInUrl: ClerkJSNavigationEvent.signIn\n      },\n      customNavigate\n    );\n    return () => void 0;\n  }\n);\n\n// src/internals/machines/third-party/third-party.machine.ts\n\nvar ThirdPartyMachineId = \"ThirdParty\";\nvar ThirdPartyMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    handleRedirectCallback,\n    redirect\n  },\n  actions: {\n    logError: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(({ event }) => `Error: ${event.type}`),\n    assignActiveStrategy: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      activeStrategy: ({ event }) => {\n        (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"REDIRECT\");\n        return event.params.strategy;\n      }\n    }),\n    unassignActiveStrategy: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      activeStrategy: null\n    }),\n    sendToNext: ({ context }) => context.parent.send({ type: \"NEXT\" }),\n    sendToLoading,\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  guards: {\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode)\n  },\n  types: {}\n}).createMachine({\n  id: ThirdPartyMachineId,\n  context: ({ input }) => ({\n    activeStrategy: null,\n    basePath: input.basePath,\n    formRef: input.formRef,\n    flow: input.flow,\n    parent: input.parent,\n    loadingStep: \"strategy\"\n  }),\n  initial: \"Idle\",\n  states: {\n    Idle: {\n      description: \"Sets third-party providers if not already set, and waits for a redirect or callback event\",\n      on: {\n        CALLBACK: \"HandlingCallback\",\n        REDIRECT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Redirecting\",\n          reenter: true\n        }\n      }\n    },\n    Redirecting: {\n      description: \"Redirects to the third-party provider for authentication\",\n      tags: [\"state:redirect\", \"state:loading\"],\n      entry: [\"assignActiveStrategy\", \"sendToLoading\"],\n      exit: [\"unassignActiveStrategy\", \"sendToLoading\"],\n      invoke: {\n        id: \"redirect\",\n        src: \"redirect\",\n        input: ({ context, event }) => {\n          var _a;\n          (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"REDIRECT\");\n          const legalAcceptedField = (_a = context.formRef.getSnapshot().context.fields.get(\"legalAccepted\")) == null ? void 0 : _a.checked;\n          return {\n            basePath: context.basePath,\n            flow: context.flow,\n            params: {\n              ...event.params,\n              legalAccepted: legalAcceptedField || void 0\n            },\n            parent: context.parent\n          };\n        },\n        onError: {\n          actions: \"setFormErrors\",\n          target: \"Idle\"\n        }\n      }\n    },\n    HandlingCallback: {\n      description: \"Handles the callback from the third-party provider\",\n      tags: [\"state:callback\", \"state:loading\"],\n      invoke: {\n        id: \"handleRedirectCallback\",\n        src: \"handleRedirectCallback\",\n        input: ({ context }) => context.parent,\n        onError: {\n          actions: [\"logError\", \"setFormErrors\"],\n          target: \"Idle\"\n        }\n      },\n      on: {\n        \"CLERKJS.NAVIGATE.*\": {\n          actions: \"sendToNext\",\n          target: \"Idle\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/utils/next.ts\nfunction shouldUseVirtualRouting() {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  if (!window.next) {\n    return false;\n  }\n  return window.next.version < NEXT_WINDOW_HISTORY_SUPPORT_VERSION;\n}\n\n// src/internals/machines/sign-in/reset-password.machine.ts\n\nvar SignInResetPasswordMachineId = \"SignInResetPasswordMachine\";\nvar SignInResetPasswordMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      ({ input: { fields, parent } }) => {\n        var _a, _b;\n        const password = ((_a = fields.get(\"password\")) == null ? void 0 : _a.value) || \"\";\n        const signOutOfOtherSessions = ((_b = fields.get(\"signOutOfOtherSessions\")) == null ? void 0 : _b.checked) || false;\n        return parent.getSnapshot().context.clerk.client.signIn.resetPassword({ password, signOutOfOtherSessions });\n      }\n    )\n  },\n  actions: {\n    sendToLoading,\n    sendToNext: ({ context, event }) => context.parent.send({ type: \"NEXT\", resource: event.output }),\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  types: {}\n}).createMachine({\n  id: SignInResetPasswordMachineId,\n  context: ({ input }) => ({\n    loadingStep: \"reset-password\",\n    parent: input.parent,\n    formRef: input.formRef\n  }),\n  initial: \"Pending\",\n  states: {\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        SUBMIT: {\n          target: \"Attempting\",\n          reenter: true\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          fields: context.formRef.getSnapshot().context.fields\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/sign-in/start.machine.ts\n\nvar DISABLEABLE_FIELDS = [\"emailAddress\", \"phoneNumber\"];\nvar SignInStartMachineId = \"SignInStart\";\nvar SignInStartMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    attemptPasskey: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { parent, flow } }) => {\n      return parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey({\n        flow\n      });\n    }),\n    attemptWeb3: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      ({ input: { parent, strategy } }) => {\n        if (strategy === \"web3_metamask_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithMetamask();\n        }\n        if (strategy === \"web3_coinbase_wallet_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithCoinbaseWallet();\n        }\n        if (strategy === \"web3_okx_wallet_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithOKXWallet();\n        }\n        throw new ClerkElementsRuntimeError(`Unsupported Web3 strategy: ${strategy}`);\n      }\n    ),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { fields, parent, params } }) => {\n      var _a;\n      const clerk = parent.getSnapshot().context.clerk;\n      const password = fields.get(\"password\");\n      const identifier = fields.get(\"identifier\");\n      const passwordParams = (password == null ? void 0 : password.value) ? {\n        password: password.value,\n        strategy: \"password\"\n      } : {};\n      return clerk.client.signIn.create({\n        ...passwordParams,\n        ...(params == null ? void 0 : params.ticket) ? params : {\n          identifier: (_a = identifier == null ? void 0 : identifier.value) != null ? _a : \"\"\n        }\n      });\n    })\n  },\n  actions: {\n    sendToNext: ({ context, event }) => {\n      return context.parent.send({ type: \"NEXT\", resource: event == null ? void 0 : event.output });\n    },\n    sendToLoading,\n    setFormDisabledTicketFields: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ context, enqueue }) => {\n      if (!context.ticket) {\n        return;\n      }\n      const currentFields = context.formRef.getSnapshot().context.fields;\n      for (const name of DISABLEABLE_FIELDS) {\n        if (currentFields.has(name)) {\n          enqueue.sendTo(context.formRef, { type: \"FIELD.DISABLE\", field: { name } });\n        }\n      }\n    }),\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  guards: {\n    hasTicket: ({ context }) => Boolean(context.ticket),\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode)\n  },\n  types: {}\n}).createMachine({\n  id: SignInStartMachineId,\n  context: ({ input }) => ({\n    basePath: input.basePath || SIGN_IN_DEFAULT_BASE_PATH,\n    parent: input.parent,\n    formRef: input.formRef,\n    loadingStep: \"start\",\n    ticket: input.ticket\n  }),\n  initial: \"Init\",\n  states: {\n    Init: {\n      description: \"Handle ticket, if present; Else, default to Pending state.\",\n      always: [\n        {\n          guard: \"hasTicket\",\n          target: \"Attempting\"\n        },\n        {\n          target: \"Pending\"\n        }\n      ]\n    },\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        SUBMIT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Attempting\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY.AUTOFILL\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskeyAutoFill\",\n          reenter: false\n        },\n        \"AUTHENTICATE.WEB3\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingWeb3\",\n          reenter: true\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => {\n          const defaultParams = {\n            fields: context.formRef.getSnapshot().context.fields,\n            parent: context.parent\n          };\n          const params = context.ticket ? {\n            strategy: \"ticket\",\n            ticket: context.ticket\n          } : {};\n          return { ...defaultParams, params };\n        },\n        onDone: {\n          actions: [\"setFormDisabledTicketFields\", \"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormDisabledTicketFields\", \"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskey: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptPasskey\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"discoverable\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskeyAutoFill: {\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        SUBMIT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Attempting\",\n          reenter: true\n        }\n      },\n      invoke: {\n        id: \"attemptPasskeyAutofill\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"autofill\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingWeb3: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptWeb3\",\n        src: \"attemptWeb3\",\n        input: ({ context, event }) => {\n          (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"AUTHENTICATE.WEB3\");\n          return {\n            parent: context.parent,\n            strategy: event.strategy\n          };\n        },\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/sign-in/router.machine.ts\nvar isCurrentPath = (path) => ({ context }, _params) => {\n  var _a, _b;\n  return (_b = (_a = context.router) == null ? void 0 : _a.match(path)) != null ? _b : false;\n};\nvar needsStatus = (status) => ({ context, event }, _) => {\n  var _a, _b;\n  return ((_a = event == null ? void 0 : event.resource) == null ? void 0 : _a.status) === status || ((_b = context.clerk) == null ? void 0 : _b.client.signIn.status) === status;\n};\nvar SignInRouterMachineId = \"SignInRouter\";\nvar SignInRouterMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    firstFactorMachine: SignInFirstFactorMachine,\n    formMachine: FormMachine,\n    resetPasswordMachine: SignInResetPasswordMachine,\n    startMachine: SignInStartMachine,\n    secondFactorMachine: SignInSecondFactorMachine,\n    thirdPartyMachine: ThirdPartyMachine,\n    webAuthnAutofillSupport: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(() => (0,_clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__.isWebAuthnAutofillSupported)())\n  },\n  actions: {\n    clearFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(({ context }) => context.formRef, { type: \"ERRORS.CLEAR\" }),\n    navigateInternal: ({ context }, { path, force = false }) => {\n      if (!context.router) {\n        return;\n      }\n      if (!force && shouldUseVirtualRouting()) {\n        return;\n      }\n      if (context.exampleMode) {\n        return;\n      }\n      const resolvedPath = (0,_clerk_shared_url__WEBPACK_IMPORTED_MODULE_20__.joinURL)(context.router.basePath, path);\n      if (resolvedPath === context.router.pathname()) {\n        return;\n      }\n      context.router.shallowPush(resolvedPath);\n    },\n    navigateExternal: ({ context }, { path }) => {\n      var _a;\n      return (_a = context.router) == null ? void 0 : _a.push(path);\n    },\n    raiseNext: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.O)({ type: \"NEXT\" }),\n    setActive: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, check, context, event }) => {\n      var _a;\n      if (check(\"isExampleMode\")) {\n        return;\n      }\n      const id = event == null ? void 0 : event.id;\n      const lastActiveSessionId = context.clerk.client.lastActiveSessionId;\n      const createdSessionId = ((event == null ? void 0 : event.resource) || context.clerk.client.signIn).createdSessionId;\n      const session = id || createdSessionId || lastActiveSessionId || null;\n      void context.clerk.setActive({\n        session,\n        redirectUrl: ((_a = context.router) == null ? void 0 : _a.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n      });\n      enqueue.raise({ type: \"RESET\" }, { delay: 2e3 });\n    }),\n    setError: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      error: (_, { error }) => {\n        if (error) {\n          return error;\n        }\n        return new ClerkElementsRuntimeError(\"Unknown error\");\n      }\n    }),\n    setFormErrors: ({ context }, params) => (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(context.formRef, {\n      type: \"ERRORS.SET\",\n      error: params.error\n    }),\n    setFormOAuthErrors: ({ context }) => {\n      const errorOrig = context.clerk.client.signIn.firstFactorVerification.error;\n      if (!errorOrig) {\n        return;\n      }\n      let error;\n      switch (errorOrig.code) {\n        case ERROR_CODES.NOT_ALLOWED_TO_SIGN_UP:\n        case ERROR_CODES.OAUTH_ACCESS_DENIED:\n        case ERROR_CODES.NOT_ALLOWED_ACCESS:\n        case ERROR_CODES.SAML_USER_ATTRIBUTE_MISSING:\n        case ERROR_CODES.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:\n        case ERROR_CODES.USER_LOCKED:\n        case ERROR_CODES.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:\n        case ERROR_CODES.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:\n        case ERROR_CODES.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:\n        case ERROR_CODES.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:\n        case ERROR_CODES.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:\n          error = new ClerkElementsError(errorOrig.code, errorOrig.longMessage || \"\");\n          break;\n        default:\n          error = new ClerkElementsError(\n            \"unable_to_complete\",\n            \"Unable to complete action at this time. If the problem persists please contact support.\"\n          );\n      }\n      context.formRef.send({\n        type: \"ERRORS.SET\",\n        error\n      });\n    },\n    transfer: ({ context }) => {\n      var _a;\n      const searchParams = new URLSearchParams({ __clerk_transfer: \"1\" });\n      (_a = context.router) == null ? void 0 : _a.push(`${context.signUpPath}?${searchParams}`);\n    }\n  },\n  guards: {\n    hasAuthenticatedViaClerkJS: ({ context }) => Boolean(context.clerk.client.signIn.status === null && context.clerk.client.lastActiveSessionId),\n    hasOAuthError: ({ context }) => {\n      var _a, _b, _c, _d;\n      return Boolean((_d = (_c = (_b = (_a = context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.signIn) == null ? void 0 : _c.firstFactorVerification) == null ? void 0 : _d.error);\n    },\n    hasResource: ({ context }) => {\n      var _a, _b, _c;\n      return Boolean((_c = (_b = (_a = context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.signIn) == null ? void 0 : _c.status);\n    },\n    hasTicket: ({ context }) => Boolean(context.ticket),\n    isLoggedInAndSingleSession: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"isLoggedIn\", \"isSingleSessionMode\", (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\")]),\n    isActivePathRoot: isCurrentPath(\"/\"),\n    isComplete: ({ context, event }) => {\n      const resource = event == null ? void 0 : event.resource;\n      const signIn = context.clerk.client.signIn;\n      return (resource == null ? void 0 : resource.status) === \"complete\" && Boolean(resource == null ? void 0 : resource.createdSessionId) || signIn.status === \"complete\" && Boolean(signIn.createdSessionId);\n    },\n    isLoggedIn: ({ context }) => {\n      var _a;\n      return Boolean((_a = context.clerk) == null ? void 0 : _a.user);\n    },\n    isSingleSessionMode: ({ context }) => {\n      var _a, _b;\n      return Boolean((_b = (_a = context.clerk) == null ? void 0 : _a.__unstable__environment) == null ? void 0 : _b.authConfig.singleSessionMode);\n    },\n    isExampleMode: ({ context }) => Boolean(context.exampleMode),\n    needsStart: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.F)([(0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"hasResource\"), \"statusNeedsIdentifier\", isCurrentPath(\"/\")]),\n    needsFirstFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsFirstFactor\", isCurrentPath(\"/continue\")]),\n    needsSecondFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsSecondFactor\", isCurrentPath(\"/continue\")]),\n    needsCallback: isCurrentPath(SSO_CALLBACK_PATH_ROUTE),\n    needsChooseSession: isCurrentPath(CHOOSE_SESSION_PATH_ROUTE),\n    needsNewPassword: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsNewPassword\", isCurrentPath(\"/new-password\")]),\n    statusNeedsIdentifier: needsStatus(\"needs_identifier\"),\n    statusNeedsFirstFactor: needsStatus(\"needs_first_factor\"),\n    statusNeedsSecondFactor: needsStatus(\"needs_second_factor\"),\n    statusNeedsNewPassword: needsStatus(\"needs_new_password\")\n  },\n  types: {}\n}).createMachine({\n  id: SignInRouterMachineId,\n  // @ts-expect-error - Set in INIT event\n  context: {},\n  initial: \"Idle\",\n  on: {\n    \"AUTHENTICATE.OAUTH\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, ({ context, event }) => {\n        var _a, _b, _c, _d;\n        return {\n          type: \"REDIRECT\",\n          params: {\n            strategy: event.strategy,\n            redirectUrl: `${((_a = context.router) == null ? void 0 : _a.mode) === ROUTING.virtual ? (_b = context.clerk.__unstable__environment) == null ? void 0 : _b.displayConfig.signInUrl : (_c = context.router) == null ? void 0 : _c.basePath}${SSO_CALLBACK_PATH_ROUTE}`,\n            redirectUrlComplete: ((_d = context.router) == null ? void 0 : _d.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n          }\n        };\n      })\n    },\n    \"AUTHENTICATE.SAML\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, ({ context }) => {\n        var _a, _b, _c, _d, _e;\n        return {\n          type: \"REDIRECT\",\n          params: {\n            strategy: \"saml\",\n            identifier: (_a = context.formRef.getSnapshot().context.fields.get(\"identifier\")) == null ? void 0 : _a.value,\n            redirectUrl: `${((_b = context.router) == null ? void 0 : _b.mode) === ROUTING.virtual ? (_c = context.clerk.__unstable__environment) == null ? void 0 : _c.displayConfig.signInUrl : (_d = context.router) == null ? void 0 : _d.basePath}${SSO_CALLBACK_PATH_ROUTE}`,\n            redirectUrlComplete: ((_e = context.router) == null ? void 0 : _e.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n          }\n        };\n      })\n    },\n    \"FORM.ATTACH\": {\n      description: \"Attach/re-attach the form to the router.\",\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, event }) => {\n        enqueue.assign({\n          formRef: event.formRef\n        });\n        enqueue.raise({ type: \"RESET.STEP\" });\n      })\n    },\n    \"NAVIGATE.PREVIOUS\": \".Hist\",\n    \"NAVIGATE.START\": \".Start\",\n    LOADING: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => ({\n        loading: {\n          isLoading: event.isLoading,\n          step: event.step,\n          strategy: event.strategy,\n          action: event.action\n        }\n      }))\n    },\n    RESET: \".Idle\"\n  },\n  states: {\n    Idle: {\n      invoke: {\n        id: \"webAuthnAutofill\",\n        src: \"webAuthnAutofillSupport\",\n        onDone: {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({ webAuthnAutofillSupport: ({ event }) => event.output })\n        }\n      },\n      on: {\n        INIT: {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n            var _a;\n            const searchParams = (_a = event.router) == null ? void 0 : _a.searchParams();\n            return {\n              clerk: event.clerk,\n              exampleMode: event.exampleMode || false,\n              formRef: event.formRef,\n              loading: {\n                isLoading: false\n              },\n              router: event.router,\n              signUpPath: event.signUpPath || SIGN_UP_DEFAULT_BASE_PATH,\n              ticket: (searchParams == null ? void 0 : searchParams.get(SEARCH_PARAMS.ticket)) || void 0\n            };\n          }),\n          target: \"Init\"\n        }\n      }\n    },\n    Init: {\n      entry: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ context, enqueue, self }) => {\n        var _a, _b;\n        if (!self.getSnapshot().children[ThirdPartyMachineId]) {\n          enqueue.spawnChild(\"thirdPartyMachine\", {\n            id: ThirdPartyMachineId,\n            systemId: ThirdPartyMachineId,\n            input: {\n              basePath: (_b = (_a = context.router) == null ? void 0 : _a.basePath) != null ? _b : SIGN_IN_DEFAULT_BASE_PATH,\n              flow: \"signIn\",\n              formRef: context.formRef,\n              parent: self\n            }\n          });\n        }\n      }),\n      always: [\n        {\n          guard: \"needsCallback\",\n          target: \"Callback\"\n        },\n        {\n          guard: \"needsChooseSession\",\n          target: \"ChooseSession\"\n        },\n        {\n          guard: \"isComplete\",\n          actions: \"setActive\"\n        },\n        {\n          guard: \"isLoggedInAndSingleSession\",\n          actions: [\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Already logged in\"),\n            {\n              type: \"navigateExternal\",\n              params: ({ context }) => {\n                var _a;\n                return {\n                  path: ((_a = context.router) == null ? void 0 : _a.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n                };\n              }\n            }\n          ]\n        },\n        {\n          guard: \"needsStart\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        },\n        {\n          guard: \"needsFirstFactor\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/continue\" } },\n          target: \"FirstFactor\"\n        },\n        {\n          guard: \"needsSecondFactor\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/continue\" } },\n          target: \"SecondFactor\"\n        },\n        {\n          guard: \"needsNewPassword\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/reset-password\" } },\n          target: \"ResetPassword\"\n        },\n        {\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        },\n        {\n          guard: \"hasTicket\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        }\n      ]\n    },\n    Start: {\n      tags: [\"step:start\"],\n      exit: \"clearFormErrors\",\n      invoke: {\n        id: \"start\",\n        src: \"startMachine\",\n        input: ({ context, self }) => {\n          var _a;\n          return {\n            basePath: (_a = context.router) == null ? void 0 : _a.basePath,\n            formRef: context.formRef,\n            parent: self,\n            ticket: context.ticket\n          };\n        },\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"Start\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        \"AUTHENTICATE.PASSKEY.AUTOFILL\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        \"AUTHENTICATE.WEB3\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ]\n      }\n    },\n    FirstFactor: {\n      tags: [\"step:first-factor\", \"step:verifications\"],\n      invoke: {\n        id: \"firstFactor\",\n        src: \"firstFactorMachine\",\n        input: ({ context, self }) => {\n          var _a;\n          return {\n            formRef: context.formRef,\n            parent: self,\n            basePath: (_a = context.router) == null ? void 0 : _a.basePath\n          };\n        },\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event)\n        },\n        \"RESET.STEP\": {\n          target: \"FirstFactor\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ],\n        \"STRATEGY.UPDATE\": {\n          description: \"Send event to verification machine to update the current strategy.\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n          target: \".Idle\"\n        }\n      },\n      initial: \"Idle\",\n      states: {\n        Idle: {\n          on: {\n            \"NAVIGATE.FORGOT_PASSWORD\": {\n              description: \"Navigate to forgot password screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n              target: \"ForgotPassword\"\n            },\n            \"NAVIGATE.CHOOSE_STRATEGY\": {\n              description: \"Navigate to choose strategy screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n              target: \"ChoosingStrategy\"\n            }\n          }\n        },\n        ChoosingStrategy: {\n          tags: [\"step:choose-strategy\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": {\n              description: \"Go to Idle, and also tell firstFactor to go to Pending\",\n              target: \"Idle\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", { type: \"NAVIGATE.PREVIOUS\" })\n            }\n          }\n        },\n        ForgotPassword: {\n          tags: [\"step:forgot-password\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": \"Idle\"\n          }\n        }\n      }\n    },\n    SecondFactor: {\n      tags: [\"step:second-factor\", \"step:verifications\"],\n      invoke: {\n        id: \"secondFactor\",\n        src: \"secondFactorMachine\",\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self\n        }),\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"SecondFactor\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ],\n        \"STRATEGY.UPDATE\": {\n          description: \"Send event to verification machine to update the current strategy.\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", ({ event }) => event),\n          target: \".Idle\"\n        }\n      },\n      initial: \"Idle\",\n      states: {\n        Idle: {\n          on: {\n            \"NAVIGATE.CHOOSE_STRATEGY\": {\n              description: \"Navigate to choose strategy screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", ({ event }) => event),\n              target: \"ChoosingStrategy\"\n            }\n          }\n        },\n        ChoosingStrategy: {\n          tags: [\"step:choose-strategy\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": {\n              description: \"Go to Idle, and also tell firstFactor to go to Pending\",\n              target: \"Idle\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", { type: \"NAVIGATE.PREVIOUS\" })\n            }\n          }\n        }\n      }\n    },\n    ResetPassword: {\n      tags: [\"step:reset-password\"],\n      invoke: {\n        id: \"resetPassword\",\n        src: \"resetPasswordMachine\",\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self\n        }),\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"ResetPassword\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          }\n        ]\n      }\n    },\n    Callback: {\n      tags: [\"step:callback\"],\n      entry: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, { type: \"CALLBACK\" }),\n      on: {\n        NEXT: [\n          {\n            guard: \"hasOAuthError\",\n            actions: [\"setFormOAuthErrors\", { type: \"navigateInternal\", params: { force: true, path: \"/\" } }],\n            target: \"Start\"\n          },\n          {\n            guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.F)([\"isLoggedIn\", \"isComplete\", \"hasAuthenticatedViaClerkJS\"]),\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsIdentifier\",\n            actions: \"transfer\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ]\n      }\n    },\n    ChooseSession: {\n      tags: [\"step:choose-session\"],\n      on: {\n        \"SESSION.SET_ACTIVE\": {\n          actions: {\n            type: \"setActive\",\n            params: ({ event }) => ({ id: event.id })\n          }\n        }\n      }\n    },\n    Error: {\n      tags: [\"step:error\"],\n      on: {\n        NEXT: {\n          target: \"Start\",\n          actions: \"clearFormErrors\"\n        }\n      }\n    },\n    Hist: {\n      type: \"history\",\n      exit: \"clearFormErrors\"\n    }\n  }\n});\n\n// src/internals/machines/utils/formatters.ts\n\nfunction formatName(...args) {\n  switch (args.length) {\n    case 0:\n      return void 0;\n    case 1:\n      return (0,_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.titleize)(args[0]);\n    default:\n      return args.filter(Boolean).map(_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.titleize).join(\" \");\n  }\n}\nfunction formatSalutation({\n  firstName,\n  lastName,\n  identifier\n}) {\n  return firstName && formatName(firstName) || lastName && formatName(lastName) || identifier || \"\";\n}\n\n// src/internals/machines/sign-in/router.selectors.ts\nfunction SignInSafeIdentifierSelectorForStrategy(strategy) {\n  return (s) => {\n    var _a, _b, _c;\n    const signIn = (_a = s.context.clerk) == null ? void 0 : _a.client.signIn;\n    if (strategy) {\n      const matchingFactors = [\n        ...(_b = signIn.supportedFirstFactors) != null ? _b : [],\n        ...(_c = signIn.supportedSecondFactors) != null ? _c : []\n      ].filter((f) => f.strategy === strategy);\n      const matchingFactorForIdentifier = signIn.identifier && matchingFactors.length > 0 ? matchingFactors.find((f) => \"safeIdentifier\" in f && f.safeIdentifier === signIn.identifier) : null;\n      const matchingFactorForStrategy = matchingFactors[0];\n      if (matchingFactorForIdentifier && \"safeIdentifier\" in matchingFactorForIdentifier) {\n        return matchingFactorForIdentifier.safeIdentifier;\n      }\n      if (matchingFactorForStrategy && \"safeIdentifier\" in matchingFactorForStrategy) {\n        return matchingFactorForStrategy.safeIdentifier;\n      }\n    }\n    return signIn.identifier || \"\";\n  };\n}\nfunction SignInSalutationSelector(s) {\n  var _a, _b, _c;\n  const signIn = (_a = s.context.clerk) == null ? void 0 : _a.client.signIn;\n  return formatSalutation({\n    firstName: (_b = signIn == null ? void 0 : signIn.userData) == null ? void 0 : _b.firstName,\n    identifier: signIn == null ? void 0 : signIn.identifier,\n    lastName: (_c = signIn == null ? void 0 : signIn.userData) == null ? void 0 : _c.lastName\n  });\n}\n\n// src/internals/machines/sign-in/router.types.ts\nvar SignInRouterSystemId = {\n  start: \"start\",\n  firstFactor: \"firstFactor\",\n  secondFactor: \"secondFactor\",\n  resetPassword: \"resetPassword\"\n};\n\n// src/react/sign-in/choose-strategy.tsx\n\nvar SignInChooseStrategyCtx = createContextForDomValidation(\"SignInChooseStrategyCtx\");\nfunction SignInChooseStrategy({ asChild, children, ...props }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeStateFirstFactor = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:first-factor\", \"step:choose-strategy\"],\n    ActiveTagsMode.all\n  );\n  const activeStateSecondFactor = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:second-factor\", \"step:choose-strategy\"],\n    ActiveTagsMode.all\n  );\n  const activeState = activeStateFirstFactor || activeStateSecondFactor;\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategyCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nfunction SignInForgotPassword({ asChild, children, ...props }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:first-factor\", \"step:forgot-password\"],\n    ActiveTagsMode.all\n  );\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategyCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nvar SUPPORTED_STRATEGY_NAME = \"SignInSupportedStrategy\";\nvar SignInSupportedStrategy = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild, children, name, ...rest }, forwardedRef) => {\n    const routerRef = SignInRouterCtx.useActorRef();\n    const snapshot = routerRef.getSnapshot();\n    const status = snapshot.context.clerk.client.signIn.status;\n    const supportedFirstFactors = status === \"needs_first_factor\" ? snapshot.context.clerk.client.signIn.supportedFirstFactors || [] : [];\n    const supportedSecondFactors = status === \"needs_second_factor\" ? snapshot.context.clerk.client.signIn.supportedSecondFactors || [] : [];\n    const factor = [...supportedFirstFactors, ...supportedSecondFactors].find((factor2) => name === factor2.strategy);\n    const currentFactor = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(\n      snapshot.children[SignInRouterSystemId.firstFactor] || snapshot.children[SignInRouterSystemId.secondFactor],\n      (state) => {\n        var _a;\n        return (_a = state == null ? void 0 : state.context.currentFactor) == null ? void 0 : _a.strategy;\n      }\n    );\n    const sendUpdateStrategyEvent = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n      () => routerRef.send({ type: \"STRATEGY.UPDATE\", factor }),\n      [routerRef, factor]\n    );\n    if (currentFactor === name) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"button\";\n    const defaultProps = asChild ? {} : { type: \"button\" };\n    return factor ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStrategyContext.Provider, { value: { strategy: name }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      Comp,\n      {\n        ...defaultProps,\n        ...rest,\n        ref: forwardedRef,\n        onClick: sendUpdateStrategyEvent,\n        children: children || factor.strategy\n      }\n    ) }) : null;\n  }\n);\nSignInSupportedStrategy.displayName = SUPPORTED_STRATEGY_NAME;\n\n// src/react/sign-in/reset-password.tsx\n\nvar SignInResetPasswordCtx = createContextFromActorRef(\"SignInResetPasswordCtx\");\nfunction SignInResetPassword(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:reset-password\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPasswordInner, { ...props }) : null;\n}\nfunction SignInResetPasswordInner(props) {\n  const ref = useSignInResetPasswordStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPasswordCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-in/sso-callback.tsx\nfunction SignInSSOCallback({ children }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:callback\");\n  return activeState ? children : null;\n}\n\n// src/react/sign-in/start.tsx\n\nvar SignInStartCtx = createContextFromActorRef(\"SignInStartCtx\");\nfunction SignInStart(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:start\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStartInner, { ...props }) : null;\n}\nfunction SignInStartInner(props) {\n  const ref = useSignInStartStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStartCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-in/verifications.tsx\n\n\n\n// src/internals/machines/utils/strategies.ts\nvar matchStrategy = (current, desired) => {\n  if (!current || !desired) {\n    return false;\n  }\n  if (current === desired) {\n    return true;\n  }\n  return current.startsWith(`${desired}_`);\n};\n\n// src/react/sign-in/verifications.tsx\n\nvar SignInFirstFactorCtx = createContextFromActorRef(\"SignInFirstFactorCtx\");\nvar SignInSecondFactorCtx = createContextFromActorRef(\"SignInSecondFactorCtx\");\nvar strategiesSelector = (state) => {\n  var _a;\n  return (_a = state.context.currentFactor) == null ? void 0 : _a.strategy;\n};\nfunction SignInStrategiesProvider({\n  children,\n  preferred,\n  actorRef,\n  ...props\n}) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const current = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actorRef, strategiesSelector);\n  const isChoosingAltStrategy = useActiveTags(routerRef, [\"step:choose-strategy\", \"step:forgot-password\"]);\n  const isActive = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((name) => current ? matchStrategy(current, name) : false, [current]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(StrategiesContext.Provider, { value: { current, preferred, isActive }, children: isChoosingAltStrategy.active ? null : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: actorRef,\n      ...props,\n      children\n    }\n  ) });\n}\nfunction useFactorCtx() {\n  const firstFactorRef = SignInFirstFactorCtx.useActorRef(true);\n  const secondFactorRef = SignInSecondFactorCtx.useActorRef(true);\n  return firstFactorRef || secondFactorRef;\n}\nfunction SignInStrategy({ children, name }) {\n  const { active } = useStrategy(name);\n  const factorCtx = useFactorCtx();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (factorCtx) {\n      factorCtx.send({ type: \"STRATEGY.REGISTER\", factor: name });\n    }\n    return () => {\n      if ((factorCtx == null ? void 0 : factorCtx.getSnapshot().status) === \"active\") {\n        factorCtx.send({ type: \"STRATEGY.UNREGISTER\", factor: name });\n      }\n    };\n  }, [factorCtx, name]);\n  return active ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStrategyContext.Provider, { value: { strategy: name }, children }) : null;\n}\nfunction SignInVerifications(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const { activeTags: activeRoutes } = useActiveTags(routerRef, [\"step:first-factor\", \"step:second-factor\"]);\n  if (activeRoutes.has(\"step:first-factor\")) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorInner, { ...props });\n  }\n  if (activeRoutes.has(\"step:second-factor\")) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorInner, { ...props });\n  }\n  return null;\n}\nfunction SignInFirstFactor(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:first-factor\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorInner, { ...props }) : null;\n}\nfunction SignInSecondFactor(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:second-factor\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorInner, { ...props }) : null;\n}\nfunction SignInFirstFactorInner(props) {\n  const ref = useSignInFirstFactorStep();\n  if (!ref) {\n    return null;\n  }\n  return ref ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    SignInStrategiesProvider,\n    {\n      actorRef: ref,\n      ...props\n    }\n  ) }) : null;\n}\nfunction SignInSecondFactorInner(props) {\n  const ref = useSignInSecondFactorStep();\n  if (!ref) {\n    return null;\n  }\n  return ref ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    SignInStrategiesProvider,\n    {\n      actorRef: ref,\n      ...props\n    }\n  ) }) : null;\n}\n\n// src/react/sign-in/step.tsx\n\nvar SIGN_IN_STEPS = {\n  start: \"start\",\n  verifications: \"verifications\",\n  \"choose-strategy\": \"choose-strategy\",\n  \"choose-session\": \"choose-session\",\n  \"forgot-password\": \"forgot-password\",\n  \"reset-password\": \"reset-password\",\n  \"sso-callback\": \"sso-callback\"\n};\nfunction SignInStep(props) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_SignInStep\", { name: props.name }));\n  switch (props.name) {\n    case SIGN_IN_STEPS.start:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStart, { ...props });\n    case SIGN_IN_STEPS.verifications:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInVerifications, { ...props });\n    case SIGN_IN_STEPS[\"choose-strategy\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategy, { ...props });\n    case SIGN_IN_STEPS[\"forgot-password\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInForgotPassword, { ...props });\n    case SIGN_IN_STEPS[\"reset-password\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPassword, { ...props });\n    case SIGN_IN_STEPS[\"choose-session\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseSession, { ...props });\n    case SIGN_IN_STEPS[\"sso-callback\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSSOCallback, { ...props });\n    default:\n      throw new ClerkElementsRuntimeError(`Invalid step name. Use: ${Object.keys(SIGN_IN_STEPS).join(\",\")}.`);\n  }\n}\n\n// src/react/sign-up/step.tsx\n\n\n\n// src/react/sign-up/continue.tsx\n\nvar SignUpContinueCtx = createContextFromActorRef(\"SignUpContinueCtx\");\nfunction SignUpContinue(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:continue\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinueInner, { ...props }) : null;\n}\nfunction SignUpContinueInner(props) {\n  const ref = useSignUpContinueStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinueCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-up/restricted.tsx\n\nfunction SignUpRestricted(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:restricted\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: routerRef,\n      ...props\n    }\n  ) : null;\n}\n\n// src/react/sign-up/start.tsx\n\nvar SignUpStartCtx = createContextFromActorRef(\"SignUpStartCtx\");\nfunction SignUpStart(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:start\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStartInner, { ...props }) : null;\n}\nfunction SignUpStartInner(props) {\n  const ref = useSignUpStartStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStartCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-up/verifications.tsx\n\nvar SignUpVerificationCtx = createContextFromActorRef(\"SignUpVerificationCtx\");\nfunction SignUpVerifications(props) {\n  const ref = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(ref, \"step:verification\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerifyInner, { ...props }) : null;\n}\nfunction SignUpVerifyInner(props) {\n  const ref = useSignUpVerificationStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerificationCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\nfunction SignUpStrategy({ children, name: tag }) {\n  const ref = SignUpVerificationCtx.useActorRef(true);\n  if (!ref) {\n    throw new Error(\n      '<Strategy> used outside of <SignUp>. Did you mean to `import { Strategy } from \"@clerk/elements/sign-in\"` instead?'\n    );\n  }\n  const { active } = useActiveTags(ref, [\n    `verification:${tag}`,\n    `verification:category:${tag}`\n  ]);\n  return active ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment, { children }) : null;\n}\n\n// src/react/sign-up/step.tsx\n\nvar SIGN_UP_STEPS = {\n  start: \"start\",\n  continue: \"continue\",\n  verifications: \"verifications\",\n  restricted: \"restricted\"\n};\nfunction SignUpStep(props) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_SignUpStep\", { name: props.name }));\n  switch (props.name) {\n    case SIGN_UP_STEPS.start:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStart, { ...props });\n    case SIGN_UP_STEPS.continue:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinue, { ...props });\n    case SIGN_UP_STEPS.verifications:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerifications, { ...props });\n    case SIGN_UP_STEPS.restricted:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpRestricted, { ...props });\n    default:\n      throw new ClerkElementsRuntimeError(\n        `Invalid step name. Use 'start', 'continue', 'verifications', or 'restricted'.`\n      );\n  }\n}\n\n// src/react/utils/map-scope-to-strategy.ts\nfunction isProviderStrategyScope(value) {\n  return value.startsWith(\"provider:\");\n}\nfunction mapScopeToStrategy(scope) {\n  if (scope === \"provider:metamask\") {\n    return \"web3_metamask_signature\";\n  }\n  if (scope === \"provider:coinbase_wallet\") {\n    return \"web3_coinbase_wallet_signature\";\n  }\n  if (scope === \"provider:okx_wallet\") {\n    return \"web3_okx_wallet_signature\";\n  }\n  if (scope === \"provider:saml\") {\n    return \"saml\";\n  }\n  const scopeWithoutPrefix = scope.replace(\"provider:\", \"\");\n  return `oauth_${scopeWithoutPrefix}`;\n}\n\n// src/react/common/loading.tsx\n\nfunction isSignInScope(scope) {\n  if (!scope) {\n    return true;\n  }\n  if (scope.startsWith(\"step:\")) {\n    return Object.prototype.hasOwnProperty.call(SIGN_IN_STEPS, scope.replace(\"step:\", \"\"));\n  }\n  return true;\n}\nfunction isSignUpScope(scope) {\n  if (!scope) {\n    return true;\n  }\n  if (scope.startsWith(\"step:\")) {\n    return Object.prototype.hasOwnProperty.call(SIGN_UP_STEPS, scope.replace(\"step:\", \"\"));\n  }\n  return true;\n}\nfunction Loading({ children, scope }) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_Loading\", { scope: scope != null ? scope : false }));\n  const signInRouterRef = SignInRouterCtx.useActorRef(true);\n  const signUpRouterRef = SignUpRouterCtx.useActorRef(true);\n  if (!signInRouterRef && !signUpRouterRef) {\n    throw new ClerkElementsRuntimeError(`<Loading> must be used within a <SignIn> or <SignUp> component.`);\n  }\n  if (signInRouterRef) {\n    if (isSignInScope(scope)) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        SignInLoading,\n        {\n          scope,\n          routerRef: signInRouterRef,\n          children\n        }\n      );\n    } else {\n      throw new ClerkElementsRuntimeError(`Invalid scope \"${scope}\" used for <Loading> inside <SignIn>.`);\n    }\n  }\n  if (signUpRouterRef) {\n    if (isSignUpScope(scope)) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        SignUpLoading,\n        {\n          scope,\n          routerRef: signUpRouterRef,\n          children\n        }\n      );\n    } else {\n      throw new ClerkElementsRuntimeError(`Invalid scope \"${scope}\" used for <Loading> inside <SignUp>.`);\n    }\n  }\n  throw new ClerkElementsRuntimeError(\"Invalid state for <Loading>. Please open an issue.\");\n}\nfunction SignInLoading({ children, scope, routerRef }) {\n  const [isLoading, { step: loadingStep, strategy, action }] = useLoading(routerRef);\n  const tags = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(routerRef, (s) => s.tags);\n  const isStepLoading = (step) => isLoading && loadingStep === step;\n  const isInferredStepLoading = (step) => tags.has(`step:${step}`) && isStepLoading(step);\n  let loadingResult = false;\n  if (scope === \"global\") {\n    loadingResult = isLoading;\n  } else if (scope && isProviderStrategyScope(scope)) {\n    loadingResult = isLoading && loadingStep === void 0 && strategy === mapScopeToStrategy(scope);\n  } else if (scope) {\n    loadingResult = isStepLoading(scope.replace(\"step:\", \"\")) || scope === action;\n  } else {\n    loadingResult = isInferredStepLoading(\"start\") || isInferredStepLoading(\"verifications\") || isInferredStepLoading(\"choose-strategy\") || isInferredStepLoading(\"forgot-password\") || isInferredStepLoading(\"reset-password\");\n  }\n  return children(loadingResult);\n}\nfunction SignUpLoading({ children, scope, routerRef }) {\n  const [isLoading, { step: loadingStep, strategy, action }] = useLoading(routerRef);\n  const tags = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(routerRef, (s) => s.tags);\n  const isStepLoading = (step) => isLoading && loadingStep === step;\n  const isInferredStepLoading = (step) => tags.has(`step:${step}`) && isStepLoading(step);\n  let loadingResult = false;\n  if (scope === \"global\") {\n    loadingResult = isLoading;\n  } else if (scope && isProviderStrategyScope(scope)) {\n    loadingResult = isLoading && loadingStep === void 0 && strategy === mapScopeToStrategy(scope);\n  } else if (scope) {\n    loadingResult = isStepLoading(scope.replace(\"step:\", \"\")) || scope === action;\n  } else {\n    loadingResult = isInferredStepLoading(\"start\") || isInferredStepLoading(\"continue\") || isInferredStepLoading(\"verifications\");\n  }\n  return children(loadingResult);\n}\n\n// src/react/common/link.tsx\n\n\n\nvar paths = {\n  \"sign-in\": \"signInUrl\",\n  \"sign-up\": \"signUpUrl\"\n};\nfunction Link({ navigate, children, ...rest }) {\n  const router = (0,_clerk_shared_router__WEBPACK_IMPORTED_MODULE_22__.useClerkRouter)();\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  const destinationUrl = router.makeDestinationUrlWithPreservedQueryParameters(\n    clerk.__internal_getOption(paths[navigate])\n  );\n  if (typeof children === \"function\") {\n    return children({ url: destinationUrl });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    \"a\",\n    {\n      onClick: (e) => {\n        if (router) {\n          e.preventDefault();\n          router.push(destinationUrl);\n        }\n      },\n      href: destinationUrl,\n      ...rest,\n      children\n    }\n  );\n}\n\n\n//# sourceMappingURL=chunk-7B3IWWWL.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AY2xlcmsvZWxlbWVudHMvZGlzdC9jaHVuay03QjNJV1dXTC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7O0FBRXJCO0FBQ2dHO0FBQ2hFOztBQUVoQztBQUNtRDs7QUFFbkQ7QUFDNkY7QUFDckM7QUFDRDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QixRQUFRO0FBQ1IsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLDZDQUFLO0FBQ3ZCO0FBQ0EscUJBQXFCLHlDQUFNO0FBQzNCO0FBQ0EsS0FBSztBQUNMLHNCQUFzQix5Q0FBTTtBQUM1QixpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZUFBZSx5Q0FBYyxJQUFJLGdCQUFnQjtBQUNqRDtBQUNBO0FBQ0EsWUFBWSxpRUFBWTtBQUN4QjtBQUNBO0FBQ0EseUJBQXlCLDRFQUF1QjtBQUNo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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQTRERTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNIQU1cXERlc2t0b3BcXGNydWQtYXBpLW1haW5cXG5vZGVfbW9kdWxlc1xcQGNsZXJrXFxlbGVtZW50c1xcZGlzdFxcY2h1bmstN0IzSVdXV0wubWpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHtcbiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG59O1xudmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4gbWVtYmVyLmhhcyhvYmopIHx8IF9fdHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIiksIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaikpO1xudmFyIF9fcHJpdmF0ZUFkZCA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IG1lbWJlci5oYXMob2JqKSA/IF9fdHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKSA6IG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKSwgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpLCB2YWx1ZSk7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vaW5kZXgudHNcbmltcG9ydCBcImNsaWVudC1vbmx5XCI7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9maWVsZC50c3hcbmltcG9ydCB7IEZpZWxkIGFzIFJhZGl4RmllbGQsIFZhbGlkaXR5U3RhdGUgYXMgUmFkaXhWYWxpZGl0eVN0YXRlIH0gZnJvbSBcIkByYWRpeC11aS9yZWFjdC1mb3JtXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDcgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvZm9ybS9mb3JtLmNvbnRleHQudHNcbmltcG9ydCB7IGNyZWF0ZUFjdG9yQ29udGV4dCB9IGZyb20gXCJAeHN0YXRlL3JlYWN0XCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvZm9ybS9mb3JtLm1hY2hpbmUudHNcbmltcG9ydCB7IGlzQ2xlcmtBUElSZXNwb25zZUVycm9yLCBpc0tub3duRXJyb3IsIGlzTWV0YW1hc2tFcnJvciB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL2Vycm9yXCI7XG5pbXBvcnQgeyBzbmFrZVRvQ2FtZWwgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC91bmRlcnNjb3JlXCI7XG5pbXBvcnQgeyBhc3NpZ24sIGVucXVldWVBY3Rpb25zLCBzZXR1cCB9IGZyb20gXCJ4c3RhdGVcIjtcblxuLy8gc3JjL2ludGVybmFscy9lcnJvcnMvaW5kZXgudHNcbnZhciBDbGVya0VsZW1lbnRzRXJyb3JCYXNlID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuY2xlcmtFcnJvciA9IHRydWU7XG4gICAgdGhpcy5jbGVya0VsZW1lbnRzRXJyb3IgPSB0cnVlO1xuICAgIHRoaXMubmFtZSA9IFwiQ2xlcmtFbGVtZW50c0Vycm9yXCI7XG4gICAgdGhpcy5yYXdNZXNzYWdlID0gbWVzc2FnZTtcbiAgfVxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYFske3RoaXMubmFtZX1dXG5Db2RlOiAke3RoaXMuY29kZX1cbk1lc3NhZ2U6ICR7dGhpcy5tZXNzYWdlfWA7XG4gIH1cbn07XG52YXIgQ2xlcmtFbGVtZW50c0Vycm9yID0gY2xhc3MgX0NsZXJrRWxlbWVudHNFcnJvciBleHRlbmRzIENsZXJrRWxlbWVudHNFcnJvckJhc2Uge1xuICBzdGF0aWMgZnJvbUFQSUVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIG5ldyBfQ2xlcmtFbGVtZW50c0Vycm9yKFxuICAgICAgZXJyb3IuY29kZS50b1N0cmluZygpLFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEV4cGVjdGVkIHRoYXQgbG9uZ01lc3NhZ2UgaXNuJ3QgYSBwcm9wZXJ0eSBvZiBNZXRhbWFza0Vycm9yXG4gICAgICBlcnJvci5sb25nTWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlXG4gICAgKTtcbiAgfVxuICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlKSB7XG4gICAgc3VwZXIoY29kZSwgbWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJDbGVya0VsZW1lbnRzRXJyb3JcIjtcbiAgfVxufTtcbnZhciBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBDbGVya0VsZW1lbnRzRXJyb3JCYXNlIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKFwiZWxlbWVudHNfcnVudGltZV9lcnJvclwiLCBtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkNsZXJrRWxlbWVudHNSdW50aW1lRXJyb3JcIjtcbiAgfVxufTtcbnZhciBDbGVya0VsZW1lbnRzRmllbGRFcnJvciA9IGNsYXNzIF9DbGVya0VsZW1lbnRzRmllbGRFcnJvciBleHRlbmRzIENsZXJrRWxlbWVudHNFcnJvckJhc2Uge1xuICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlKSB7XG4gICAgc3VwZXIoY29kZSwgbWVzc2FnZSk7XG4gICAgdGhpcy5tYXRjaEZuID0gKCkgPT4gdHJ1ZTtcbiAgICB0aGlzLm5hbWUgPSBcIkNsZXJrRWxlbWVudHNGaWVsZEVycm9yXCI7XG4gIH1cbiAgc3RhdGljIGZyb21BUElFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBuZXcgX0NsZXJrRWxlbWVudHNGaWVsZEVycm9yKGVycm9yLmNvZGUsIGVycm9yLmxvbmdNZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2UpO1xuICB9XG4gIGdldCB2YWxpZGl0eVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvZGU7XG4gIH1cbiAgZ2V0IGZvcmNlTWF0Y2goKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvZm9ybS9mb3JtLm1hY2hpbmUudHNcbnZhciBGb3JtTWFjaGluZSA9IHNldHVwKHtcbiAgYWN0aW9uczoge1xuICAgIHNldEdsb2JhbEVycm9yczogYXNzaWduKHtcbiAgICAgIGVycm9yczogKF8sIHBhcmFtcykgPT4gWy4uLnBhcmFtcy5lcnJvcnNdXG4gICAgfSksXG4gICAgc2V0RmllbGRGZWVkYmFjazogYXNzaWduKHtcbiAgICAgIGZpZWxkczogKHsgY29udGV4dCB9LCBwYXJhbXMpID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbXMubmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpZWxkIG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gcGFyYW1zLm5hbWU7XG4gICAgICAgIGlmIChjb250ZXh0LmZpZWxkcy5oYXMoZmllbGROYW1lKSkge1xuICAgICAgICAgIGNvbnRleHQuZmllbGRzLmdldChmaWVsZE5hbWUpLmZlZWRiYWNrID0gcGFyYW1zLmZlZWRiYWNrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuICB0eXBlczoge31cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICBpZDogXCJGb3JtXCIsXG4gIGNvbnRleHQ6ICgpID0+ICh7XG4gICAgZGVmYXVsdFZhbHVlczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICBlcnJvcnM6IFtdLFxuICAgIGZpZWxkczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICBwcm9ncmVzc2l2ZTogZmFsc2VcbiAgfSksXG4gIG9uOiB7XG4gICAgXCJFUlJPUlMuU0VUXCI6IHtcbiAgICAgIGFjdGlvbnM6IGVucXVldWVBY3Rpb25zKCh7IGVucXVldWUsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IGlzQ2xlcmtBUElFcnJvciA9IChlcnIpID0+IFwibWV0YVwiIGluIGVycjtcbiAgICAgICAgaWYgKGlzS25vd25FcnJvcihldmVudC5lcnJvcikpIHtcbiAgICAgICAgICBjb25zdCBmaWVsZHMgPSB7fTtcbiAgICAgICAgICBjb25zdCBnbG9iYWxFcnJvcnMgPSBbXTtcbiAgICAgICAgICBjb25zdCBlcnJvcnMgPSBpc0NsZXJrQVBJUmVzcG9uc2VFcnJvcihldmVudC5lcnJvcikgPyAoX2EgPSBldmVudC5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmVycm9ycyA6IFtldmVudC5lcnJvcl07XG4gICAgICAgICAgZm9yIChjb25zdCBlcnJvciBvZiBlcnJvcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpc0NsZXJrQVBJRXJyb3IoZXJyb3IpID8gc25ha2VUb0NhbWVsKChfYiA9IGVycm9yLm1ldGEpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYXJhbU5hbWUpIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghbmFtZSB8fCBpc01ldGFtYXNrRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgIGdsb2JhbEVycm9ycy5wdXNoKENsZXJrRWxlbWVudHNFcnJvci5mcm9tQVBJRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWZpZWxkc1tuYW1lXSkge1xuICAgICAgICAgICAgICBmaWVsZHNbbmFtZV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfYyA9IGZpZWxkc1tuYW1lXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnB1c2goQ2xlcmtFbGVtZW50c0ZpZWxkRXJyb3IuZnJvbUFQSUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVucXVldWUoe1xuICAgICAgICAgICAgdHlwZTogXCJzZXRHbG9iYWxFcnJvcnNcIixcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICBlcnJvcnM6IGdsb2JhbEVycm9yc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgZmllbGQgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICBlbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJzZXRGaWVsZEZlZWRiYWNrXCIsXG4gICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgICAgIGZlZWRiYWNrOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBmaWVsZHNbZmllbGRdWzBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkVSUk9SUy5DTEVBUlwiOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24oe1xuICAgICAgICBlcnJvcnM6ICgpID0+IFtdXG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJGSUVMRC5BRERcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5maWVsZC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBldmVudC5maWVsZC52YWx1ZSA9IGV2ZW50LmZpZWxkLnZhbHVlIHx8IGNvbnRleHQuZGVmYXVsdFZhbHVlcy5nZXQoZXZlbnQuZmllbGQubmFtZSkgfHwgdm9pZCAwO1xuICAgICAgICAgIGNvbnRleHQuZmllbGRzLnNldChldmVudC5maWVsZC5uYW1lLCBldmVudC5maWVsZCk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGRzO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJGSUVMRC5VUERBVEVcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgIGlmICghZXZlbnQuZmllbGQubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmllbGQgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZmllbGQgPSBjb250ZXh0LmZpZWxkcy5nZXQoZXZlbnQuZmllbGQubmFtZSk7XG4gICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICBmaWVsZC5jaGVja2VkID0gZXZlbnQuZmllbGQuY2hlY2tlZDtcbiAgICAgICAgICAgIGZpZWxkLmRpc2FibGVkID0gKF9hID0gZXZlbnQuZmllbGQuZGlzYWJsZWQpICE9IG51bGwgPyBfYSA6IGZpZWxkLmRpc2FibGVkO1xuICAgICAgICAgICAgZmllbGQudmFsdWUgPSBldmVudC5maWVsZC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRzLnNldChldmVudC5maWVsZC5uYW1lLCBmaWVsZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRklFTEQuRElTQUJMRVwiOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24oe1xuICAgICAgICBmaWVsZHM6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgICBpZiAoIWV2ZW50LmZpZWxkLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpZWxkIG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGZpZWxkID0gY29udGV4dC5maWVsZHMuZ2V0KGV2ZW50LmZpZWxkLm5hbWUpO1xuICAgICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgZmllbGQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGV4dC5maWVsZHMuc2V0KGV2ZW50LmZpZWxkLm5hbWUsIGZpZWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGRzO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJGSUVMRC5FTkFCTEVcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5maWVsZC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGNvbnRleHQuZmllbGRzLmdldChldmVudC5maWVsZC5uYW1lKTtcbiAgICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICAgIGZpZWxkLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkcy5zZXQoZXZlbnQuZmllbGQubmFtZSwgZmllbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkZJRUxELlJFTU9WRVwiOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24oe1xuICAgICAgICBmaWVsZHM6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgICBpZiAoIWV2ZW50LmZpZWxkLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpZWxkIG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRleHQuZmllbGRzLmRlbGV0ZShldmVudC5maWVsZC5uYW1lKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkZJRUxELkZFRURCQUNLLlNFVFwiOiB7XG4gICAgICBhY3Rpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInNldEZpZWxkRmVlZGJhY2tcIixcbiAgICAgICAgICBwYXJhbXM6ICh7IGV2ZW50IH0pID0+IGV2ZW50LmZpZWxkXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIFwiRklFTEQuRkVFREJBQ0suQ0xFQVJcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5maWVsZC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29udGV4dC5maWVsZHMuaGFzKGV2ZW50LmZpZWxkLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkcy5nZXQoZXZlbnQuZmllbGQubmFtZSkuZmVlZGJhY2sgPSB2b2lkIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRklFTEQuRkVFREJBQ0suQ0xFQVIuQUxMXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGZpZWxkczogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICAgICAgY29udGV4dC5maWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgIGZpZWxkLmZlZWRiYWNrID0gdm9pZCAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIE1BUktfQVNfUFJPR1JFU1NJVkU6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbigoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IG1pc3NpbmcgPSBuZXcgU2V0KGV2ZW50Lm1pc3NpbmcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRlZmF1bHRWYWx1ZXM6IGV2ZW50LmRlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgaGlkZGVuOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbLi4uZXZlbnQucmVxdWlyZWQuZmlsdGVyKChmKSA9PiAhbWlzc2luZy5oYXMoZikpLCAuLi5ldmVudC5vcHRpb25hbF0pLFxuICAgICAgICAgIG1pc3NpbmcsXG4gICAgICAgICAgb3B0aW9uYWw6IG5ldyBTZXQoZXZlbnQub3B0aW9uYWwpLFxuICAgICAgICAgIHByb2dyZXNzaXZlOiB0cnVlLFxuICAgICAgICAgIHJlcXVpcmVkOiBuZXcgU2V0KGV2ZW50LnJlcXVpcmVkKVxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9LFxuICAgIFVOTUFSS19BU19QUk9HUkVTU0lWRToge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZGVmYXVsdFZhbHVlczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICAgICAgaGlkZGVuOiB2b2lkIDAsXG4gICAgICAgIG1pc3Npbmc6IHZvaWQgMCxcbiAgICAgICAgb3B0aW9uYWw6IHZvaWQgMCxcbiAgICAgICAgcHJvZ3Jlc3NpdmU6IGZhbHNlLFxuICAgICAgICByZXF1aXJlZDogdm9pZCAwXG4gICAgICB9KVxuICAgIH0sXG4gICAgUFJFRklMTF9ERUZBVUxUX1ZBTFVFUzoge1xuICAgICAgYWN0aW9uczogYXNzaWduKCh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkZWZhdWx0VmFsdWVzOiBldmVudC5kZWZhdWx0VmFsdWVzXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSk7XG5cbi8vIHNyYy91dGlscy9zYWZlLWFjY2Vzcy50c1xuZnVuY3Rpb24gc2FmZUFjY2VzcyhmbiwgZmFsbGJhY2spIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxufVxuXG4vLyBzcmMvaW50ZXJuYWxzL3V0aWxzL2luc3BlY3Rvci9pbmRleC50c1xudmFyIGluc3BlY3Q7XG5pZiAoZmFsc2UpIHtcbiAgaW5zcGVjdCA9IChfYSA9IGdldEJyb3dzZXJJbnNwZWN0b3IoKSkgIT0gbnVsbCA/IF9hIDogZ2V0Q29uc29sZUluc3BlY3RvcigpO1xufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL2Zvcm0vZm9ybS5jb250ZXh0LnRzXG52YXIgRm9ybU1hY2hpbmVDb250ZXh0ID0gY3JlYXRlQWN0b3JDb250ZXh0KEZvcm1NYWNoaW5lLCB7IGluc3BlY3QgfSk7XG52YXIgRm9ybVN0b3JlUHJvdmlkZXIgPSBGb3JtTWFjaGluZUNvbnRleHQuUHJvdmlkZXI7XG52YXIgdXNlRm9ybVN0b3JlID0gRm9ybU1hY2hpbmVDb250ZXh0LnVzZUFjdG9yUmVmO1xudmFyIHVzZUZvcm1TZWxlY3RvciA9IEZvcm1NYWNoaW5lQ29udGV4dC51c2VTZWxlY3RvcjtcbnZhciBnbG9iYWxFcnJvcnNTZWxlY3RvciA9IChzdGF0ZSkgPT4gc3RhdGUuY29udGV4dC5lcnJvcnM7XG52YXIgZmllbGRWYWx1ZVNlbGVjdG9yID0gKG5hbWUpID0+IChzdGF0ZSkgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiBuYW1lID8gKF9hID0gc3RhdGUuY29udGV4dC5maWVsZHMuZ2V0KG5hbWUpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUgOiBcIlwiO1xufTtcbnZhciBmaWVsZEhhc1ZhbHVlU2VsZWN0b3IgPSAobmFtZSkgPT4gKHN0YXRlKSA9PiBCb29sZWFuKGZpZWxkVmFsdWVTZWxlY3RvcihuYW1lKShzdGF0ZSkpO1xudmFyIGZpZWxkRmVlZGJhY2tTZWxlY3RvciA9IChuYW1lKSA9PiAoc3RhdGUpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gbmFtZSA/IChfYSA9IHN0YXRlLmNvbnRleHQuZmllbGRzLmdldChuYW1lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZlZWRiYWNrIDogdm9pZCAwO1xufTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2hvb2tzL3VzZS1maWVsZC1mZWVkYmFjay50c1xuZnVuY3Rpb24gdXNlRmllbGRGZWVkYmFjayh7IG5hbWUgfSkge1xuICBjb25zdCBmZWVkYmFjayA9IHVzZUZvcm1TZWxlY3RvcihmaWVsZEZlZWRiYWNrU2VsZWN0b3IobmFtZSkpO1xuICByZXR1cm4ge1xuICAgIGZlZWRiYWNrXG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZmllbGQudHNcbmZ1bmN0aW9uIHVzZUZpZWxkKHsgbmFtZSB9KSB7XG4gIGNvbnN0IGhhc1ZhbHVlID0gdXNlRm9ybVNlbGVjdG9yKGZpZWxkSGFzVmFsdWVTZWxlY3RvcihuYW1lKSk7XG4gIGNvbnN0IHsgZmVlZGJhY2sgfSA9IHVzZUZpZWxkRmVlZGJhY2soeyBuYW1lIH0pO1xuICBjb25zdCBzaG91bGRCZUhpZGRlbiA9IGZhbHNlO1xuICBjb25zdCBoYXNFcnJvciA9IGZlZWRiYWNrID8gZmVlZGJhY2sudHlwZSA9PT0gXCJlcnJvclwiIDogZmFsc2U7XG4gIHJldHVybiB7XG4gICAgaGFzVmFsdWUsXG4gICAgcHJvcHM6IHtcbiAgICAgIFwiZGF0YS1oaWRkZW5cIjogc2hvdWxkQmVIaWRkZW4gPyB0cnVlIDogdm9pZCAwLFxuICAgICAgc2VydmVySW52YWxpZDogaGFzRXJyb3JcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZmllbGQtY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG52YXIgRmllbGRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbnZhciB1c2VGaWVsZENvbnRleHQgPSAoKSA9PiBSZWFjdC51c2VDb250ZXh0KEZpZWxkQ29udGV4dCk7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS90eXBlcy50c1xudmFyIEZJRUxEX1NUQVRFUyA9IHtcbiAgc3VjY2VzczogXCJzdWNjZXNzXCIsXG4gIGVycm9yOiBcImVycm9yXCIsXG4gIGlkbGU6IFwiaWRsZVwiLFxuICB3YXJuaW5nOiBcIndhcm5pbmdcIixcbiAgaW5mbzogXCJpbmZvXCJcbn07XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZmllbGQtc3RhdGUudHNcbmZ1bmN0aW9uIHVzZUZpZWxkU3RhdGUoeyBuYW1lIH0pIHtcbiAgY29uc3QgeyBmZWVkYmFjayB9ID0gdXNlRmllbGRGZWVkYmFjayh7IG5hbWUgfSk7XG4gIGNvbnN0IGhhc1ZhbHVlID0gdXNlRm9ybVNlbGVjdG9yKGZpZWxkSGFzVmFsdWVTZWxlY3RvcihuYW1lKSk7XG4gIGxldCBzdGF0ZSA9IEZJRUxEX1NUQVRFUy5pZGxlO1xuICBpZiAoIWhhc1ZhbHVlKSB7XG4gICAgc3RhdGUgPSBGSUVMRF9TVEFURVMuaWRsZTtcbiAgfVxuICBzd2l0Y2ggKGZlZWRiYWNrID09IG51bGwgPyB2b2lkIDAgOiBmZWVkYmFjay50eXBlKSB7XG4gICAgY2FzZSBcImVycm9yXCI6XG4gICAgICBzdGF0ZSA9IEZJRUxEX1NUQVRFUy5lcnJvcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJ3YXJuaW5nXCI6XG4gICAgICBzdGF0ZSA9IEZJRUxEX1NUQVRFUy53YXJuaW5nO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImluZm9cIjpcbiAgICAgIHN0YXRlID0gRklFTERfU1RBVEVTLmluZm87XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwic3VjY2Vzc1wiOlxuICAgICAgc3RhdGUgPSBGSUVMRF9TVEFURVMuc3VjY2VzcztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXRlXG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZm9ybS50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2hvb2tzL3VzZS1nbG9iYWwtZXJyb3JzLnRzXG5mdW5jdGlvbiB1c2VHbG9iYWxFcnJvcnMoKSB7XG4gIGNvbnN0IGVycm9ycyA9IHVzZUZvcm1TZWxlY3RvcihnbG9iYWxFcnJvcnNTZWxlY3Rvcik7XG4gIHJldHVybiB7XG4gICAgZXJyb3JzXG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZm9ybS50c1xuZnVuY3Rpb24gdXNlRm9ybSh7IGZsb3dBY3RvciB9KSB7XG4gIGNvbnN0IHsgZXJyb3JzIH0gPSB1c2VHbG9iYWxFcnJvcnMoKTtcbiAgY29uc3Qgb25TdWJtaXQgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZmxvd0FjdG9yKSB7XG4gICAgICAgIGZsb3dBY3Rvci5zZW5kKHsgdHlwZTogXCJTVUJNSVRcIiwgYWN0aW9uOiBcInN1Ym1pdFwiIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2Zsb3dBY3Rvcl1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgLi4uZXJyb3JzLmxlbmd0aCA+IDAgPyB7IFwiZGF0YS1nbG9iYWwtZXJyb3JcIjogdHJ1ZSB9IDoge30sXG4gICAgICBvblN1Ym1pdFxuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2hvb2tzL3VzZS1pbnB1dC50c3hcbmltcG9ydCB7IENvbnRyb2wgYXMgUmFkaXhDb250cm9sMiB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q2IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvaG9va3MvdXNlLXBhc3N3b3JkLmhvb2sudHNcbmltcG9ydCB7IHVzZUNsZXJrIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IG5vb3AgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC91dGlsc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvdXRpbHMvZ2VuZXJhdGUtcGFzc3dvcmQtZXJyb3ItdGV4dC50c1xudmFyIGVycm9yTWVzc2FnZXMgPSB7XG4gIG1heF9sZW5ndGg6IFtcImxlc3MgdGhhbiAlbGVuZ3RoJSBjaGFyYWN0ZXJzXCIsIFwibGVuZ3RoXCJdLFxuICBtaW5fbGVuZ3RoOiBbXCIlbGVuZ3RoJSBvciBtb3JlIGNoYXJhY3RlcnNcIiwgXCJsZW5ndGhcIl0sXG4gIHJlcXVpcmVfbnVtYmVyczogXCJhIG51bWJlclwiLFxuICByZXF1aXJlX2xvd2VyY2FzZTogXCJhIGxvd2VyY2FzZSBsZXR0ZXJcIixcbiAgcmVxdWlyZV91cHBlcmNhc2U6IFwiYW4gdXBwZXJjYXNlIGxldHRlclwiLFxuICByZXF1aXJlX3NwZWNpYWxfY2hhcjogXCJhIHNwZWNpYWwgY2hhcmFjdGVyXCJcbn07XG52YXIgY3JlYXRlTGlzdEZvcm1hdCA9IChtZXNzYWdlKSA9PiB7XG4gIGxldCBtZXNzYWdlV2l0aFByZWZpeDtcbiAgaWYgKFwiTGlzdEZvcm1hdFwiIGluIEludGwpIHtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KFwiZW5cIiwgeyBzdHlsZTogXCJsb25nXCIsIHR5cGU6IFwiY29uanVuY3Rpb25cIiB9KTtcbiAgICBtZXNzYWdlV2l0aFByZWZpeCA9IGZvcm1hdHRlci5mb3JtYXQobWVzc2FnZSk7XG4gIH0gZWxzZSB7XG4gICAgbWVzc2FnZVdpdGhQcmVmaXggPSBtZXNzYWdlLmpvaW4oXCIsIFwiKTtcbiAgfVxuICByZXR1cm4gbWVzc2FnZVdpdGhQcmVmaXg7XG59O1xuZnVuY3Rpb24gYnVpbGRFcnJvclR1cGxlKGtleSwgY29uZmlnKSB7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSBcIm1heF9sZW5ndGhcIjpcbiAgICAgIHJldHVybiBba2V5LCB7IG1heF9sZW5ndGg6IGNvbmZpZy5tYXhfbGVuZ3RoIH1dO1xuICAgIGNhc2UgXCJtaW5fbGVuZ3RoXCI6XG4gICAgICByZXR1cm4gW2tleSwgeyBtaW5fbGVuZ3RoOiBjb25maWcubWluX2xlbmd0aCB9XTtcbiAgICBjYXNlIFwicmVxdWlyZV9zcGVjaWFsX2NoYXJcIjpcbiAgICAgIHJldHVybiBba2V5LCB7IGFsbG93ZWRfc3BlY2lhbF9jaGFyYWN0ZXJzOiBjb25maWcuYWxsb3dlZF9zcGVjaWFsX2NoYXJhY3RlcnMgfV07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBrZXk7XG4gIH1cbn1cbnZhciBnZW5lcmF0ZVBhc3N3b3JkRXJyb3JUZXh0ID0gKHsgY29uZmlnLCBmYWlsZWRWYWxpZGF0aW9ucyB9KSA9PiB7XG4gIGNvbnN0IGNvZGVzID0gW107XG4gIGlmICghZmFpbGVkVmFsaWRhdGlvbnMgfHwgT2JqZWN0LmtleXMoZmFpbGVkVmFsaWRhdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlcyxcbiAgICAgIG1lc3NhZ2U6IFwiXCJcbiAgICB9O1xuICB9XG4gIGNvbnN0IGhhc01pbkxlbmd0aEVycm9yID0gKGZhaWxlZFZhbGlkYXRpb25zID09IG51bGwgPyB2b2lkIDAgOiBmYWlsZWRWYWxpZGF0aW9ucy5taW5fbGVuZ3RoKSB8fCBmYWxzZTtcbiAgY29uc3QgbWVzc2FnZXMgPSBPYmplY3QuZW50cmllcyhmYWlsZWRWYWxpZGF0aW9ucykuZmlsdGVyKChrKSA9PiBoYXNNaW5MZW5ndGhFcnJvciA/IGtbMF0gPT09IFwibWluX2xlbmd0aFwiIDogdHJ1ZSkuZmlsdGVyKChbLCB2XSkgPT4gISF2KS5tYXAoKFtrXSkgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gaztcbiAgICBjb25zdCBlcnJvclR1cGxlID0gYnVpbGRFcnJvclR1cGxlKGVudHJ5LCBjb25maWcpO1xuICAgIGNvZGVzLnB1c2goZXJyb3JUdXBsZSk7XG4gICAgY29uc3QgZXJyb3JLZXkgPSBlcnJvck1lc3NhZ2VzW2VudHJ5XTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlcnJvcktleSkpIHtcbiAgICAgIGNvbnN0IFttc2csIHJlcGxhY2VWYWx1ZV0gPSBlcnJvcktleTtcbiAgICAgIHJldHVybiBtc2cucmVwbGFjZShgJSR7cmVwbGFjZVZhbHVlfSVgLCBjb25maWdba10pO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3JLZXk7XG4gIH0pO1xuICBjb25zdCBtZXNzYWdlV2l0aFByZWZpeCA9IGNyZWF0ZUxpc3RGb3JtYXQobWVzc2FnZXMpO1xuICByZXR1cm4ge1xuICAgIGNvZGVzLFxuICAgIG1lc3NhZ2U6IGBZb3VyIHBhc3N3b3JkIG11c3QgY29udGFpbiAke21lc3NhZ2VXaXRoUHJlZml4fS5gXG4gIH07XG59O1xuXG4vLyBzcmMvcmVhY3QvaG9va3MvdXNlLXBhc3N3b3JkLmhvb2sudHNcbnZhciB1c2VQYXNzd29yZCA9IChjYWxsYmFja3MpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBjbGVyayA9IHVzZUNsZXJrKCk7XG4gIGNvbnN0IHBhc3N3b3JkU2V0dGluZ3MgPSAoX2EgPSBjbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnVzZXJTZXR0aW5ncy5wYXNzd29yZFNldHRpbmdzO1xuICBjb25zdCB7IGRpc2FibGVfaGlicCwgbWluX3p4Y3Zibl9zdHJlbmd0aCwgc2hvd196eGN2Ym4sIC4uLmNvbmZpZyB9ID0gcGFzc3dvcmRTZXR0aW5ncyB8fCB7fTtcbiAgY29uc3Qge1xuICAgIG9uVmFsaWRhdGlvbkVycm9yID0gbm9vcCxcbiAgICBvblZhbGlkYXRpb25TdWNjZXNzID0gbm9vcCxcbiAgICBvblZhbGlkYXRpb25XYXJuaW5nID0gbm9vcCxcbiAgICBvblZhbGlkYXRpb25JbmZvID0gbm9vcCxcbiAgICBvblZhbGlkYXRpb25Db21wbGV4aXR5XG4gIH0gPSBjYWxsYmFja3MgfHwge307XG4gIGNvbnN0IG9uVmFsaWRhdGUgPSBSZWFjdDIudXNlQ2FsbGJhY2soXG4gICAgKHJlcykgPT4ge1xuICAgICAgdmFyIF9hMiwgX2IsIF9jO1xuICAgICAgaWYgKHJlcy5jb21wbGV4aXR5KSB7XG4gICAgICAgIGlmIChPYmplY3QudmFsdWVzKHJlcyA9PSBudWxsID8gdm9pZCAwIDogcmVzLmNvbXBsZXhpdHkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB7IG1lc3NhZ2UsIGNvZGVzIH0gPSBnZW5lcmF0ZVBhc3N3b3JkRXJyb3JUZXh0KHtcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIGZhaWxlZFZhbGlkYXRpb25zOiByZXMuY29tcGxleGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICgoX2EyID0gcmVzLmNvbXBsZXhpdHkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIubWluX2xlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGlvbkluZm8obWVzc2FnZSwgY29kZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gb25WYWxpZGF0aW9uRXJyb3IobWVzc2FnZSwgY29kZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKChfYiA9IHJlcyA9PSBudWxsID8gdm9pZCAwIDogcmVzLnN0cmVuZ3RoKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RhdGUpID09PSBcImZhaWxcIikge1xuICAgICAgICBjb25zdCBrZXlzID0gcmVzLnN0cmVuZ3RoLmtleXM7XG4gICAgICAgIGNvbnN0IGVycm9yID0ga2V5cy5tYXAoKGtleSkgPT4gZ2V0KHp4Y3ZibktleXMsIGtleSkpLmpvaW4oXCIgXCIpO1xuICAgICAgICByZXR1cm4gb25WYWxpZGF0aW9uRXJyb3IoZXJyb3IsIGtleXMpO1xuICAgICAgfVxuICAgICAgaWYgKCgoX2MgPSByZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHJlcy5zdHJlbmd0aCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnN0YXRlKSA9PT0gXCJwYXNzXCIpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHJlcy5zdHJlbmd0aC5rZXlzO1xuICAgICAgICBjb25zdCBlcnJvciA9IGtleXMubWFwKChrZXkpID0+IGdldCh6eGN2Ym5LZXlzLCBrZXkpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGlvbldhcm5pbmcoZXJyb3IsIGtleXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9uVmFsaWRhdGlvblN1Y2Nlc3MoKTtcbiAgICB9LFxuICAgIFtjYWxsYmFja3MsIGNvbmZpZ11cbiAgKTtcbiAgY29uc3QgdmFsaWRhdGVQYXNzd29yZCA9IFJlYWN0Mi51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKHBhc3N3b3JkKSA9PiB7XG4gICAgICByZXR1cm4gY2xlcmsuY2xpZW50LnNpZ25VcC52YWxpZGF0ZVBhc3N3b3JkKHBhc3N3b3JkLCB7XG4gICAgICAgIG9uVmFsaWRhdGlvbjogb25WYWxpZGF0ZSxcbiAgICAgICAgb25WYWxpZGF0aW9uQ29tcGxleGl0eVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW29uVmFsaWRhdGVdKTtcbiAgcmV0dXJuIHtcbiAgICB2YWxpZGF0ZVBhc3N3b3JkXG4gIH07XG59O1xudmFyIGdldCA9ICh0LCBwYXRoKSA9PiBwYXRoLnNwbGl0KFwiLlwiKS5yZWR1Y2UoKHIsIGspID0+IHIgPT0gbnVsbCA/IHZvaWQgMCA6IHJba10sIHQpO1xudmFyIHp4Y3ZibktleXMgPSB7XG4gIHVuc3RhYmxlX19lcnJvcnM6IHtcbiAgICB6eGN2Ym46IHtcbiAgICAgIGNvdWxkQmVTdHJvbmdlcjogXCJZb3VyIHBhc3N3b3JkIHdvcmtzLCBidXQgY291bGQgYmUgc3Ryb25nZXIuIFRyeSBhZGRpbmcgbW9yZSBjaGFyYWN0ZXJzLlwiLFxuICAgICAgZ29vZFBhc3N3b3JkOiBcIllvdXIgcGFzc3dvcmQgbWVldHMgYWxsIHRoZSBuZWNlc3NhcnkgcmVxdWlyZW1lbnRzLlwiLFxuICAgICAgbm90RW5vdWdoOiBcIllvdXIgcGFzc3dvcmQgaXMgbm90IHN0cm9uZyBlbm91Z2guXCIsXG4gICAgICBzdWdnZXN0aW9uczoge1xuICAgICAgICBhbGxVcHBlcmNhc2U6IFwiQ2FwaXRhbGl6ZSBzb21lLCBidXQgbm90IGFsbCBsZXR0ZXJzLlwiLFxuICAgICAgICBhbm90aGVyV29yZDogXCJBZGQgbW9yZSB3b3JkcyB0aGF0IGFyZSBsZXNzIGNvbW1vbi5cIixcbiAgICAgICAgYXNzb2NpYXRlZFllYXJzOiBcIkF2b2lkIHllYXJzIHRoYXQgYXJlIGFzc29jaWF0ZWQgd2l0aCB5b3UuXCIsXG4gICAgICAgIGNhcGl0YWxpemF0aW9uOiBcIkNhcGl0YWxpemUgbW9yZSB0aGFuIHRoZSBmaXJzdCBsZXR0ZXIuXCIsXG4gICAgICAgIGRhdGVzOiBcIkF2b2lkIGRhdGVzIGFuZCB5ZWFycyB0aGF0IGFyZSBhc3NvY2lhdGVkIHdpdGggeW91LlwiLFxuICAgICAgICBsMzN0OiBcIkF2b2lkIHByZWRpY3RhYmxlIGxldHRlciBzdWJzdGl0dXRpb25zIGxpa2UgJ0AnIGZvciAnYScuXCIsXG4gICAgICAgIGxvbmdlcktleWJvYXJkUGF0dGVybjogXCJVc2UgbG9uZ2VyIGtleWJvYXJkIHBhdHRlcm5zIGFuZCBjaGFuZ2UgdHlwaW5nIGRpcmVjdGlvbiBtdWx0aXBsZSB0aW1lcy5cIixcbiAgICAgICAgbm9OZWVkOiBcIllvdSBjYW4gY3JlYXRlIHN0cm9uZyBwYXNzd29yZHMgd2l0aG91dCB1c2luZyBzeW1ib2xzLCBudW1iZXJzLCBvciB1cHBlcmNhc2UgbGV0dGVycy5cIixcbiAgICAgICAgcHduZWQ6IFwiSWYgeW91IHVzZSB0aGlzIHBhc3N3b3JkIGVsc2V3aGVyZSwgeW91IHNob3VsZCBjaGFuZ2UgaXQuXCIsXG4gICAgICAgIHJlY2VudFllYXJzOiBcIkF2b2lkIHJlY2VudCB5ZWFycy5cIixcbiAgICAgICAgcmVwZWF0ZWQ6IFwiQXZvaWQgcmVwZWF0ZWQgd29yZHMgYW5kIGNoYXJhY3RlcnMuXCIsXG4gICAgICAgIHJldmVyc2VXb3JkczogXCJBdm9pZCByZXZlcnNlZCBzcGVsbGluZ3Mgb2YgY29tbW9uIHdvcmRzLlwiLFxuICAgICAgICBzZXF1ZW5jZXM6IFwiQXZvaWQgY29tbW9uIGNoYXJhY3RlciBzZXF1ZW5jZXMuXCIsXG4gICAgICAgIHVzZVdvcmRzOiBcIlVzZSBtdWx0aXBsZSB3b3JkcywgYnV0IGF2b2lkIGNvbW1vbiBwaHJhc2VzLlwiXG4gICAgICB9LFxuICAgICAgd2FybmluZ3M6IHtcbiAgICAgICAgY29tbW9uOiBcIlRoaXMgaXMgYSBjb21tb25seSB1c2VkIHBhc3N3b3JkLlwiLFxuICAgICAgICBjb21tb25OYW1lczogXCJDb21tb24gbmFtZXMgYW5kIHN1cm5hbWVzIGFyZSBlYXN5IHRvIGd1ZXNzLlwiLFxuICAgICAgICBkYXRlczogXCJEYXRlcyBhcmUgZWFzeSB0byBndWVzcy5cIixcbiAgICAgICAgZXh0ZW5kZWRSZXBlYXQ6ICdSZXBlYXRlZCBjaGFyYWN0ZXIgcGF0dGVybnMgbGlrZSBcImFiY2FiY2FiY1wiIGFyZSBlYXN5IHRvIGd1ZXNzLicsXG4gICAgICAgIGtleVBhdHRlcm46IFwiU2hvcnQga2V5Ym9hcmQgcGF0dGVybnMgYXJlIGVhc3kgdG8gZ3Vlc3MuXCIsXG4gICAgICAgIG5hbWVzQnlUaGVtc2VsdmVzOiBcIlNpbmdsZSBuYW1lcyBvciBzdXJuYW1lcyBhcmUgZWFzeSB0byBndWVzcy5cIixcbiAgICAgICAgcHduZWQ6IFwiWW91ciBwYXNzd29yZCB3YXMgZXhwb3NlZCBieSBhIGRhdGEgYnJlYWNoIG9uIHRoZSBJbnRlcm5ldC5cIixcbiAgICAgICAgcmVjZW50WWVhcnM6IFwiUmVjZW50IHllYXJzIGFyZSBlYXN5IHRvIGd1ZXNzLlwiLFxuICAgICAgICBzZXF1ZW5jZXM6ICdDb21tb24gY2hhcmFjdGVyIHNlcXVlbmNlcyBsaWtlIFwiYWJjXCIgYXJlIGVhc3kgdG8gZ3Vlc3MuJyxcbiAgICAgICAgc2ltaWxhclRvQ29tbW9uOiBcIlRoaXMgaXMgc2ltaWxhciB0byBhIGNvbW1vbmx5IHVzZWQgcGFzc3dvcmQuXCIsXG4gICAgICAgIHNpbXBsZVJlcGVhdDogJ1JlcGVhdGVkIGNoYXJhY3RlcnMgbGlrZSBcImFhYVwiIGFyZSBlYXN5IHRvIGd1ZXNzLicsXG4gICAgICAgIHN0cmFpZ2h0Um93OiBcIlN0cmFpZ2h0IHJvd3Mgb2Yga2V5cyBvbiB5b3VyIGtleWJvYXJkIGFyZSBlYXN5IHRvIGd1ZXNzLlwiLFxuICAgICAgICB0b3BIdW5kcmVkOiBcIlRoaXMgaXMgYSBmcmVxdWVudGx5IHVzZWQgcGFzc3dvcmQuXCIsXG4gICAgICAgIHRvcFRlbjogXCJUaGlzIGlzIGEgaGVhdmlseSB1c2VkIHBhc3N3b3JkLlwiLFxuICAgICAgICB1c2VySW5wdXRzOiBcIlRoZXJlIHNob3VsZCBub3QgYmUgYW55IHBlcnNvbmFsIG9yIHBhZ2UgcmVsYXRlZCBkYXRhLlwiLFxuICAgICAgICB3b3JkQnlJdHNlbGY6IFwiU2luZ2xlIHdvcmRzIGFyZSBlYXN5IHRvIGd1ZXNzLlwiXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vb3RwLnRzeFxuaW1wb3J0IHsgQ29udHJvbCBhcyBSYWRpeENvbnRyb2wgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbmltcG9ydCAqIGFzIFJlYWN0MyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFpFUk8gPSBbMCwgMF07XG52YXIgT1VUU0lERSA9IFstMSwgLTFdO1xudmFyIE9UUF9MRU5HVEhfREVGQVVMVCA9IDY7XG52YXIgUEFTU1dPUkRfTUFOQUdFUl9PRkZTRVRfREVGQVVMVCA9IDQwO1xudmFyIE9UUElucHV0ID0gUmVhY3QzLmZvcndhcmRSZWYoZnVuY3Rpb24gT1RQSW5wdXQyKHByb3BzLCByZWYpIHtcbiAgY29uc3QgeyByZW5kZXIsIGxlbmd0aCwgYXV0b1N1Ym1pdCwgLi4ucmVzdCB9ID0gcHJvcHM7XG4gIGNvbnN0IGhhc1JlbmRlclByb3AgPSB0eXBlb2YgcmVuZGVyICE9PSBcInVuZGVmaW5lZFwiO1xuICBpZiAoaGFzUmVuZGVyUHJvcCkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgT1RQSW5wdXRTZWdtZW50ZWQsXG4gICAgICB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIHJlZixcbiAgICAgICAgcmVuZGVyLFxuICAgICAgICBsZW5ndGgsXG4gICAgICAgIGF1dG9TdWJtaXRcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIE9UUElucHV0U3RhbmRhcmQsXG4gICAge1xuICAgICAgLi4ucmVzdCxcbiAgICAgIHJlZixcbiAgICAgIGxlbmd0aCxcbiAgICAgIGF1dG9TdWJtaXRcbiAgICB9XG4gICk7XG59KTtcbnZhciBPVFBJbnB1dFN0YW5kYXJkID0gUmVhY3QzLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIE9UUElucHV0Myhwcm9wcywgcmVmKSB7XG4gICAgY29uc3QgeyBsZW5ndGggPSBPVFBfTEVOR1RIX0RFRkFVTFQsIGF1dG9TdWJtaXQgPSBmYWxzZSwgLi4ucmVzdCB9ID0gcHJvcHM7XG4gICAgY29uc3QgaW5uZXJSZWYgPSBSZWFjdDMudXNlUmVmKG51bGwpO1xuICAgIFJlYWN0My51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gaW5uZXJSZWYuY3VycmVudCwgW10pO1xuICAgIFJlYWN0My51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgdmFyIF9hLCBfYjtcbiAgICAgIGlmIChTdHJpbmcocHJvcHMudmFsdWUpLmxlbmd0aCA9PT0gbGVuZ3RoICYmIGF1dG9TdWJtaXQpIHtcbiAgICAgICAgKF9iID0gKF9hID0gaW5uZXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvcm0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5yZXF1ZXN0U3VibWl0KCk7XG4gICAgICB9XG4gICAgfSwgW3Byb3BzLnZhbHVlLCBsZW5ndGgsIGF1dG9TdWJtaXRdKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFJhZGl4Q29udHJvbCxcbiAgICAgIHtcbiAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgXCJkYXRhLW90cC1pbnB1dC1zdGFuZGFyZFwiOiB0cnVlXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbnZhciBPVFBJbnB1dFNlZ21lbnRlZCA9IFJlYWN0My5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBPVFBJbnB1dDQocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHtcbiAgICAgIGNsYXNzTmFtZTogdXNlclByb3ZpZGVkQ2xhc3NOYW1lLFxuICAgICAgcmVuZGVyLFxuICAgICAgbGVuZ3RoID0gT1RQX0xFTkdUSF9ERUZBVUxULFxuICAgICAgYXV0b1N1Ym1pdCA9IGZhbHNlLFxuICAgICAgcGFzc3dvcmRNYW5hZ2VyT2Zmc2V0ID0gUEFTU1dPUkRfTUFOQUdFUl9PRkZTRVRfREVGQVVMVCxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gcHJvcHM7XG4gICAgY29uc3QgaW5uZXJSZWYgPSBSZWFjdDMudXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IFtzZWxlY3Rpb25SYW5nZSwgc2V0U2VsZWN0aW9uUmFuZ2VdID0gUmVhY3QzLnVzZVN0YXRlKHByb3BzLmF1dG9Gb2N1cyA/IFpFUk8gOiBPVVRTSURFKTtcbiAgICBjb25zdCBbaXNIb3ZlcmluZywgc2V0SXNIb3ZlcmluZ10gPSBSZWFjdDMudXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGlzRm9jdXNlZCA9ICgpID0+IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlubmVyUmVmLmN1cnJlbnQ7XG4gICAgUmVhY3QzLnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiBpbm5lclJlZi5jdXJyZW50LCBbXSk7XG4gICAgUmVhY3QzLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gaW5uZXJSZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZXRTZWxlY3Rpb25SYW5nZSgoY3VyKSA9PiBzZWxlY3Rpb25SYW5nZVVwZGF0ZXIoY3VyLCBpbm5lclJlZikpO1xuICAgIH0sIFtwcm9wcy52YWx1ZV0pO1xuICAgIFJlYWN0My51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgZnVuY3Rpb24gb25TZWxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIGlmICghaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0U2VsZWN0aW9uUmFuZ2UoKGN1cikgPT4gc2VsZWN0aW9uUmFuZ2VVcGRhdGVyKGN1ciwgaW5uZXJSZWYpKTtcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgb25TZWxlY3Rpb25DaGFuZ2UsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIG9uU2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9LCBbXSk7XG4gICAgUmVhY3QzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICB2YXIgX2EsIF9iO1xuICAgICAgaWYgKFN0cmluZyhwcm9wcy52YWx1ZSkubGVuZ3RoID09PSBsZW5ndGggJiYgYXV0b1N1Ym1pdCkge1xuICAgICAgICAoX2IgPSAoX2EgPSBpbm5lclJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZm9ybSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJlcXVlc3RTdWJtaXQoKTtcbiAgICAgIH1cbiAgICB9LCBbcHJvcHMudmFsdWUsIGxlbmd0aCwgYXV0b1N1Ym1pdF0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIFwiZGF0YS1vdHAtaW5wdXQtd3JhcHBlclwiOiB0cnVlLFxuICAgICAgICBzdHlsZTogd3JhcHBlclN0eWxlLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdHlsZVwiLCB7IGNoaWxkcmVuOiBgXG4gICAgICBpbnB1dFtkYXRhLW90cC1pbnB1dC1zZWdtZW50ZWRdOjpzZWxlY3Rpb24ge1xuICAgICAgICBjb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgfVxuICAgICAgYCB9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgUmFkaXhDb250cm9sLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcImRhdGEtb3RwLWlucHV0LXNlZ21lbnRlZFwiOiB0cnVlLFxuICAgICAgICAgICAgICByZWY6IGlubmVyUmVmLFxuICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgICBvbkZvY3VzOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5taW4oaW5uZXJSZWYuY3VycmVudC52YWx1ZS5sZW5ndGgsIGxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gaW5uZXJSZWYuY3VycmVudC52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICBpbm5lclJlZi5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uUmFuZ2UoW3N0YXJ0LCBlbmRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKF9hID0gcmVzdCA9PSBudWxsID8gdm9pZCAwIDogcmVzdC5vbkZvY3VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChyZXN0LCBldmVudCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvblJhbmdlKFstMSwgLTFdKTtcbiAgICAgICAgICAgICAgICAoX2EgPSByZXN0ID09IG51bGwgPyB2b2lkIDAgOiByZXN0Lm9uQmx1cikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwocmVzdCwgZXZlbnQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBvbk1vdXNlT3ZlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmICghaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNldElzSG92ZXJpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChfYSA9IHByb3BzLm9uTW91c2VPdmVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChwcm9wcywgZXZlbnQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBzZXRJc0hvdmVyaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAoX2EgPSBwcm9wcy5vbk1vdXNlTGVhdmUpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHByb3BzLCBldmVudCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgLi4uaW5wdXRTdHlsZSxcbiAgICAgICAgICAgICAgICBjbGlwUGF0aDogYGluc2V0KDAgY2FsYygxY2ggKyAke3Bhc3N3b3JkTWFuYWdlck9mZnNldH1weCkgMCAwKWAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGBjYWxjKDEwMCUgKyAxY2ggKyAke3Bhc3N3b3JkTWFuYWdlck9mZnNldH1weClgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IHVzZXJQcm92aWRlZENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiB0cnVlLFxuICAgICAgICAgICAgICBzdHlsZTogc2VnbWVudFdyYXBwZXJTdHlsZSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IEFycmF5LmZyb20oeyBsZW5ndGggfSkubWFwKChfLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0hvdmVyZWQgPSBpc0hvdmVyaW5nICYmICFpc0ZvY3VzZWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnNvciA9IHNlbGVjdGlvblJhbmdlWzBdID09PSBzZWxlY3Rpb25SYW5nZVsxXSAmJiBzZWxlY3Rpb25SYW5nZVswXSA9PT0gaTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gKChfYSA9IHNlbGVjdGlvblJhbmdlWzBdKSAhPSBudWxsID8gX2EgOiAtMSkgPD0gaSAmJiAoKF9iID0gc2VsZWN0aW9uUmFuZ2VbMV0pICE9IG51bGwgPyBfYiA6IC0xKSA+IGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goUmVhY3QzLkZyYWdtZW50LCB7IGNoaWxkcmVuOiByZW5kZXIoe1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IFN0cmluZyhwcm9wcy52YWx1ZSlbaV0gfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogaXNIb3ZlcmVkID8gXCJob3ZlcmVkXCIgOiBpc0N1cnNvciA/IFwiY3Vyc29yXCIgOiBpc1NlbGVjdGVkID8gXCJzZWxlY3RlZFwiIDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgIH0pIH0sIGBvdHAtc2VnbWVudC0ke2l9YCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIHNlbGVjdGlvblJhbmdlVXBkYXRlcihjdXIsIGlucHV0UmVmKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pO1xuICBsZXQgdXBkYXRlZCA9IFtcbiAgICAoX2IgPSAoX2EgPSBpbnB1dFJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2Euc2VsZWN0aW9uU3RhcnQpICE9IG51bGwgPyBfYiA6IDAsXG4gICAgKF9kID0gKF9jID0gaW5wdXRSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnNlbGVjdGlvbkVuZCkgIT0gbnVsbCA/IF9kIDogMCxcbiAgICAoX2YgPSAoX2UgPSBpbnB1dFJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2Uuc2VsZWN0aW9uRGlyZWN0aW9uKSAhPSBudWxsID8gX2YgOiBudWxsXG4gIF07XG4gIGlmIChjdXJbMF0gPT09IHVwZGF0ZWRbMF0gJiYgY3VyWzFdID09PSB1cGRhdGVkWzFdKSB7XG4gICAgcmV0dXJuIGN1cjtcbiAgfVxuICBpZiAodXBkYXRlZFswXSA9PT0gMCAmJiB1cGRhdGVkWzFdID09PSAxKSB7XG4gICAgdXBkYXRlZFsyXSA9IFwiZm9yd2FyZFwiO1xuICB9XG4gIGlmICh1cGRhdGVkWzBdID09PSB1cGRhdGVkWzFdKSB7XG4gICAgaWYgKHVwZGF0ZWRbMF0gPiAwICYmIGN1clswXSA9PT0gdXBkYXRlZFswXSAmJiBjdXJbMV0gPT09IHVwZGF0ZWRbMF0gKyAxKSB7XG4gICAgICB1cGRhdGVkID0gW3VwZGF0ZWRbMF0gLSAxLCB1cGRhdGVkWzFdLCBcImJhY2t3YXJkXCJdO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mICgoX2cgPSBpbnB1dFJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2cudmFsdWVbdXBkYXRlZFswXV0pICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB1cGRhdGVkID0gW3VwZGF0ZWRbMF0sIHVwZGF0ZWRbMV0gKyAxLCBcImJhY2t3YXJkXCJdO1xuICAgIH0gZWxzZSBpZiAodXBkYXRlZFswXSA+PSBPVFBfTEVOR1RIX0RFRkFVTFQpIHtcbiAgICAgIHVwZGF0ZWQgPSBbdXBkYXRlZFswXSAtIDEsIHVwZGF0ZWRbMV0sIFwiYmFja3dhcmRcIl07XG4gICAgfVxuICB9XG4gIChfaSA9IGlucHV0UmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfaS5zZXRTZWxlY3Rpb25SYW5nZSh1cGRhdGVkWzBdLCB1cGRhdGVkWzFdLCAoX2ggPSB1cGRhdGVkWzJdKSAhPSBudWxsID8gX2ggOiB2b2lkIDApO1xuICByZXR1cm4gW3VwZGF0ZWRbMF0sIHVwZGF0ZWRbMV1dO1xufVxudmFyIHdyYXBwZXJTdHlsZSA9IHtcbiAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgdXNlclNlbGVjdDogXCJub25lXCJcbn07XG52YXIgaW5wdXRTdHlsZSA9IHtcbiAgZGlzcGxheTogXCJibG9ja1wiLFxuICBiYWNrZ3JvdW5kOiBcInRyYW5zcGFyZW50XCIsXG4gIG9wYWNpdHk6IDAsXG4gIG91dGxpbmU6IFwidHJhbnNwYXJlbnQgc29saWQgMHB4XCIsXG4gIGFwcGVhcmFuY2U6IFwibm9uZVwiLFxuICBjb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICBpbnNldDogMCxcbiAgY2FyZXRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICBib3JkZXI6IFwiMHB4IHNvbGlkIHRyYW5zcGFyZW50XCIsXG4gIC8vIHdpZHRoIGlzIGhhbmRsZWQgaW5saW5lXG4gIGhlaWdodDogXCIxMDAlXCIsXG4gIGxldHRlclNwYWNpbmc6IFwiLTFyZW1cIlxufTtcbnZhciBzZWdtZW50V3JhcHBlclN0eWxlID0ge1xuICB6SW5kZXg6IDEsXG4gIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG59O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vdXRpbHMvZW5yaWNoLWZpZWxkLXN0YXRlLnRzXG5mdW5jdGlvbiBlbnJpY2hGaWVsZFN0YXRlKHZhbGlkaXR5LCBmaWVsZFN0YXRlKSB7XG4gIHJldHVybiAodmFsaWRpdHkgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbGlkaXR5LnZhbGlkKSA9PT0gZmFsc2UgPyBGSUVMRF9TVEFURVMuZXJyb3IgOiBmaWVsZFN0YXRlO1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vdXRpbHMvZGV0ZXJtaW5lLWlucHV0LXR5cGUtZnJvbS1uYW1lLnRzXG5mdW5jdGlvbiBkZXRlcm1pbmVJbnB1dFR5cGVGcm9tTmFtZShuYW1lKSB7XG4gIGlmIChuYW1lID09PSBcInBhc3N3b3JkXCIgfHwgbmFtZSA9PT0gXCJjb25maXJtUGFzc3dvcmRcIiB8fCBuYW1lID09PSBcImN1cnJlbnRQYXNzd29yZFwiIHx8IG5hbWUgPT09IFwibmV3UGFzc3dvcmRcIikge1xuICAgIHJldHVybiBcInBhc3N3b3JkXCI7XG4gIH1cbiAgaWYgKG5hbWUgPT09IFwiZW1haWxBZGRyZXNzXCIpIHtcbiAgICByZXR1cm4gXCJlbWFpbFwiO1xuICB9XG4gIGlmIChuYW1lID09PSBcInBob25lTnVtYmVyXCIpIHtcbiAgICByZXR1cm4gXCJ0ZWxcIjtcbiAgfVxuICBpZiAobmFtZSA9PT0gXCJjb2RlXCIpIHtcbiAgICByZXR1cm4gXCJvdHBcIjtcbiAgfVxuICBpZiAobmFtZSA9PT0gXCJiYWNrdXBfY29kZVwiKSB7XG4gICAgcmV0dXJuIFwiYmFja3VwX2NvZGVcIjtcbiAgfVxuICByZXR1cm4gXCJ0ZXh0XCI7XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtcHJldmlvdXMudHNcbmltcG9ydCAqIGFzIFJlYWN0NCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVByZXZpb3VzKHZhbHVlKSB7XG4gIGNvbnN0IHJlZiA9IFJlYWN0NC51c2VSZWYoKTtcbiAgUmVhY3Q0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgfSwgW3ZhbHVlXSk7XG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2hvb2tzL3VzZS12YWxpZGl0eS1zdGF0ZS1jb250ZXh0LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDUgZnJvbSBcInJlYWN0XCI7XG52YXIgVmFsaWRpdHlTdGF0ZUNvbnRleHQgPSBSZWFjdDUuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xudmFyIHVzZVZhbGlkaXR5U3RhdGVDb250ZXh0ID0gKCkgPT4gUmVhY3Q1LnVzZUNvbnRleHQoVmFsaWRpdHlTdGF0ZUNvbnRleHQpO1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWlucHV0LnRzeFxuZnVuY3Rpb24gdXNlSW5wdXQoe1xuICBuYW1lOiBpbnB1dE5hbWUsXG4gIHZhbHVlOiBwcm92aWRlZFZhbHVlLFxuICBjaGVja2VkOiBwcm92aWRlZENoZWNrZWQsXG4gIG9uQ2hhbmdlOiBvbkNoYW5nZVByb3AsXG4gIG9uQmx1cjogb25CbHVyUHJvcCxcbiAgb25Gb2N1czogb25Gb2N1c1Byb3AsXG4gIHR5cGU6IGlucHV0VHlwZSxcbiAgLi4ucGFzc3Rocm91Z2hQcm9wc1xufSkge1xuICBjb25zdCBmaWVsZENvbnRleHQgPSB1c2VGaWVsZENvbnRleHQoKTtcbiAgY29uc3QgcmF3TmFtZSA9IGlucHV0TmFtZSB8fCAoZmllbGRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBmaWVsZENvbnRleHQubmFtZSk7XG4gIGNvbnN0IG5hbWUgPSByYXdOYW1lID09PSBcImJhY2t1cF9jb2RlXCIgPyBcImNvZGVcIiA6IHJhd05hbWU7XG4gIGNvbnN0IHsgc3RhdGU6IGZpZWxkU3RhdGUgfSA9IHVzZUZpZWxkU3RhdGUoeyBuYW1lIH0pO1xuICBjb25zdCB2YWxpZGl0eSA9IHVzZVZhbGlkaXR5U3RhdGVDb250ZXh0KCk7XG4gIGlmICghcmF3TmFtZSB8fCAhbmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNsZXJrOiA8SW5wdXQgLz4gbXVzdCBiZSB3cmFwcGVkIGluIGEgPEZpZWxkPiBjb21wb25lbnQgb3IgaGF2ZSBhIG5hbWUgcHJvcC5cIik7XG4gIH1cbiAgY29uc3QgcmVmID0gdXNlRm9ybVN0b3JlKCk7XG4gIGNvbnN0IFtoYXNQYXNzZWRWYWxpYXRpb24sIHNldEhhc1Bhc3NlZFZhbGlkYXRpb25dID0gUmVhY3Q2LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyB2YWxpZGF0ZVBhc3N3b3JkIH0gPSB1c2VQYXNzd29yZCh7XG4gICAgb25WYWxpZGF0aW9uQ29tcGxleGl0eTogKGhhc1Bhc3NlZCkgPT4gc2V0SGFzUGFzc2VkVmFsaWRhdGlvbihoYXNQYXNzZWQpLFxuICAgIG9uVmFsaWRhdGlvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHJlZi5zZW5kKHtcbiAgICAgICAgdHlwZTogXCJGSUVMRC5GRUVEQkFDSy5TRVRcIixcbiAgICAgICAgZmllbGQ6IHsgbmFtZSwgZmVlZGJhY2s6IHsgdHlwZTogXCJzdWNjZXNzXCIsIG1lc3NhZ2U6IFwiWW91ciBwYXNzd29yZCBtZWV0cyBhbGwgdGhlIG5lY2Vzc2FyeSByZXF1aXJlbWVudHMuXCIgfSB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIG9uVmFsaWRhdGlvbkVycm9yOiAoZXJyb3IsIGNvZGVzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVmLnNlbmQoe1xuICAgICAgICAgIHR5cGU6IFwiRklFTEQuRkVFREJBQ0suU0VUXCIsXG4gICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBmZWVkYmFjazoge1xuICAgICAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IG5ldyBDbGVya0VsZW1lbnRzRmllbGRFcnJvcihcInBhc3N3b3JkLXZhbGlkYXRpb24tZXJyb3JcIiwgZXJyb3IpLFxuICAgICAgICAgICAgICBjb2Rlc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvblZhbGlkYXRpb25XYXJuaW5nOiAod2FybmluZywgY29kZXMpID0+IHJlZi5zZW5kKHtcbiAgICAgIHR5cGU6IFwiRklFTEQuRkVFREJBQ0suU0VUXCIsXG4gICAgICBmaWVsZDogeyBuYW1lLCBmZWVkYmFjazogeyB0eXBlOiBcIndhcm5pbmdcIiwgbWVzc2FnZTogd2FybmluZywgY29kZXMgfSB9XG4gICAgfSksXG4gICAgb25WYWxpZGF0aW9uSW5mbzogKGluZm8sIGNvZGVzKSA9PiB7XG4gICAgICByZWYuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwiRklFTEQuRkVFREJBQ0suU0VUXCIsXG4gICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBmZWVkYmFjazoge1xuICAgICAgICAgICAgdHlwZTogXCJpbmZvXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBpbmZvLFxuICAgICAgICAgICAgY29kZXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHZhbHVlID0gdXNlRm9ybVNlbGVjdG9yKGZpZWxkVmFsdWVTZWxlY3RvcihuYW1lKSk7XG4gIGNvbnN0IHByZXZWYWx1ZSA9IHVzZVByZXZpb3VzKHZhbHVlKTtcbiAgY29uc3QgaGFzVmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcbiAgY29uc3QgdHlwZSA9IGlucHV0VHlwZSAhPSBudWxsID8gaW5wdXRUeXBlIDogZGV0ZXJtaW5lSW5wdXRUeXBlRnJvbU5hbWUocmF3TmFtZSk7XG4gIGxldCBuYXRpdmVGaWVsZFR5cGUgPSB0eXBlO1xuICBsZXQgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCA9IGZhbHNlO1xuICBpZiAodHlwZSA9PT0gXCJwYXNzd29yZFwiIHx8IHR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCA9IEJvb2xlYW4ocGFzc3Rocm91Z2hQcm9wcy52YWxpZGF0ZVBhc3N3b3JkKTtcbiAgfVxuICBpZiAobmF0aXZlRmllbGRUeXBlID09PSBcIm90cFwiIHx8IG5hdGl2ZUZpZWxkVHlwZSA9PT0gXCJiYWNrdXBfY29kZVwiKSB7XG4gICAgbmF0aXZlRmllbGRUeXBlID0gXCJ0ZXh0XCI7XG4gIH1cbiAgUmVhY3Q2LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlZi5zZW5kKHtcbiAgICAgIHR5cGU6IFwiRklFTEQuQUREXCIsXG4gICAgICBmaWVsZDogeyBuYW1lLCB0eXBlOiBuYXRpdmVGaWVsZFR5cGUsIHZhbHVlOiBwcm92aWRlZFZhbHVlLCBjaGVja2VkOiBwcm92aWRlZENoZWNrZWQgfVxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiByZWYuc2VuZCh7IHR5cGU6IFwiRklFTEQuUkVNT1ZFXCIsIGZpZWxkOiB7IG5hbWUgfSB9KTtcbiAgfSwgW3JlZl0pO1xuICBSZWFjdDYudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFwiY2hlY2tib3hcIiAmJiBwcm92aWRlZENoZWNrZWQgIT09IHZvaWQgMCB8fCB0eXBlICE9PSBcImNoZWNrYm94XCIgJiYgcHJvdmlkZWRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICByZWYuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwiRklFTEQuVVBEQVRFXCIsXG4gICAgICAgIGZpZWxkOiB7IG5hbWUsIHZhbHVlOiBwcm92aWRlZFZhbHVlLCBjaGVja2VkOiBwcm92aWRlZENoZWNrZWQgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbbmFtZSwgdHlwZSwgcmVmLCBwcm92aWRlZFZhbHVlLCBwcm92aWRlZENoZWNrZWRdKTtcbiAgY29uc3Qgb25DaGFuZ2UgPSBSZWFjdDYudXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBvbkNoYW5nZVByb3AgPT0gbnVsbCA/IHZvaWQgMCA6IG9uQ2hhbmdlUHJvcChldmVudCk7XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVmLnNlbmQoeyB0eXBlOiBcIkZJRUxELlVQREFURVwiLCBmaWVsZDogeyBuYW1lLCB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlLCBjaGVja2VkOiBldmVudC50YXJnZXQuY2hlY2tlZCB9IH0pO1xuICAgICAgaWYgKHNob3VsZFZhbGlkYXRlUGFzc3dvcmQpIHtcbiAgICAgICAgdmFsaWRhdGVQYXNzd29yZChldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3JlZiwgbmFtZSwgb25DaGFuZ2VQcm9wLCBzaG91bGRWYWxpZGF0ZVBhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkXVxuICApO1xuICBjb25zdCBvbkJsdXIgPSBSZWFjdDYudXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBvbkJsdXJQcm9wID09IG51bGwgPyB2b2lkIDAgOiBvbkJsdXJQcm9wKGV2ZW50KTtcbiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZVBhc3N3b3JkICYmIGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gcHJldlZhbHVlKSB7XG4gICAgICAgIHZhbGlkYXRlUGFzc3dvcmQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtvbkJsdXJQcm9wLCBzaG91bGRWYWxpZGF0ZVBhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkLCBwcmV2VmFsdWVdXG4gICk7XG4gIGNvbnN0IG9uRm9jdXMgPSBSZWFjdDYudXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBvbkZvY3VzUHJvcCA9PSBudWxsID8gdm9pZCAwIDogb25Gb2N1c1Byb3AoZXZlbnQpO1xuICAgICAgaWYgKHNob3VsZFZhbGlkYXRlUGFzc3dvcmQgJiYgZXZlbnQudGFyZ2V0LnZhbHVlICE9PSBwcmV2VmFsdWUpIHtcbiAgICAgICAgdmFsaWRhdGVQYXNzd29yZChldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uRm9jdXNQcm9wLCBzaG91bGRWYWxpZGF0ZVBhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkLCBwcmV2VmFsdWVdXG4gICk7XG4gIGNvbnN0IHNob3VsZEJlSGlkZGVuID0gZmFsc2U7XG4gIGNvbnN0IEVsZW1lbnQgPSB0eXBlID09PSBcIm90cFwiID8gT1RQSW5wdXQgOiBSYWRpeENvbnRyb2wyO1xuICBsZXQgcHJvcHMgPSB7fTtcbiAgaWYgKHR5cGUgPT09IFwib3RwXCIpIHtcbiAgICBjb25zdCBwID0gcGFzc3Rocm91Z2hQcm9wcztcbiAgICBjb25zdCBsZW5ndGggPSBwLmxlbmd0aCB8fCBPVFBfTEVOR1RIX0RFRkFVTFQ7XG4gICAgcHJvcHMgPSB7XG4gICAgICBcImRhdGEtb3RwLWlucHV0XCI6IHRydWUsXG4gICAgICBhdXRvQ29tcGxldGU6IFwib25lLXRpbWUtY29kZVwiLFxuICAgICAgaW5wdXRNb2RlOiBcIm51bWVyaWNcIixcbiAgICAgIHBhdHRlcm46IGBbMC05XXske2xlbmd0aH19YCxcbiAgICAgIG1pbkxlbmd0aDogbGVuZ3RoLFxuICAgICAgbWF4TGVuZ3RoOiBsZW5ndGgsXG4gICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1xcRCsvZywgXCJcIik7XG4gICAgICAgIG9uQ2hhbmdlKGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHNwZWxsQ2hlY2s6IGZhbHNlXG4gICAgfTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcImJhY2t1cF9jb2RlXCIpIHtcbiAgICBwcm9wcyA9IHtcbiAgICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIixcbiAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgc3BlbGxDaGVjazogZmFsc2VcbiAgICB9O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicGFzc3dvcmRcIiAmJiBzaG91bGRWYWxpZGF0ZVBhc3N3b3JkKSB7XG4gICAgcHJvcHMgPSB7XG4gICAgICBcImRhdGEtaGFzLXBhc3NlZC12YWxpZGF0aW9uXCI6IGhhc1Bhc3NlZFZhbGlhdGlvbiA/IHRydWUgOiB2b2lkIDBcbiAgICB9O1xuICB9XG4gIGNvbnN0IHsgdmFsaWRhdGVQYXNzd29yZDogXzEsIC4uLnJlc3QgfSA9IHBhc3N0aHJvdWdoUHJvcHM7XG4gIHJldHVybiB7XG4gICAgRWxlbWVudCxcbiAgICBwcm9wczoge1xuICAgICAgdHlwZSxcbiAgICAgIHZhbHVlOiB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBcIlwiLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICBvbkJsdXIsXG4gICAgICBvbkZvY3VzLFxuICAgICAgXCJkYXRhLWhpZGRlblwiOiBzaG91bGRCZUhpZGRlbiA/IHRydWUgOiB2b2lkIDAsXG4gICAgICBcImRhdGEtaGFzLXZhbHVlXCI6IGhhc1ZhbHVlID8gdHJ1ZSA6IHZvaWQgMCxcbiAgICAgIFwiZGF0YS1zdGF0ZVwiOiBlbnJpY2hGaWVsZFN0YXRlKHZhbGlkaXR5LCBmaWVsZFN0YXRlKSxcbiAgICAgIC4uLnByb3BzLFxuICAgICAgLi4ucmVzdFxuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2ZpZWxkLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBESVNQTEFZX05BTUUgPSBcIkNsZXJrRWxlbWVudHNGaWVsZFwiO1xudmFyIERJU1BMQVlfTkFNRV9JTk5FUiA9IFwiQ2xlcmtFbGVtZW50c0ZpZWxkSW5uZXJcIjtcbnZhciBGaWVsZCA9IFJlYWN0Ny5mb3J3YXJkUmVmKCh7IGFsd2F5c1Nob3csIC4uLnJlc3QgfSwgZm9yd2FyZGVkUmVmKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgZm9ybVJlZiA9IHVzZUZvcm1TdG9yZSgpO1xuICBjb25zdCBmb3JtQ3R4ID0gZm9ybVJlZi5nZXRTbmFwc2hvdCgpLmNvbnRleHQ7XG4gIGNvbnN0IGlzSGlkZGVuRmllbGQgPSBmb3JtQ3R4LnByb2dyZXNzaXZlICYmIEJvb2xlYW4oKF9hID0gZm9ybUN0eC5oaWRkZW4pID09IG51bGwgPyB2b2lkIDAgOiBfYS5oYXMocmVzdC5uYW1lKSk7XG4gIGNvbnN0IHNob3VsZEhpZGUgPSBhbHdheXNTaG93ID8gZmFsc2UgOiBpc0hpZGRlbkZpZWxkO1xuICByZXR1cm4gc2hvdWxkSGlkZSA/IG51bGwgOiAvKiBAX19QVVJFX18gKi8ganN4MihGaWVsZENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgbmFtZTogcmVzdC5uYW1lIH0sIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MihcbiAgICBGaWVsZElubmVyLFxuICAgIHtcbiAgICAgIC4uLnJlc3QsXG4gICAgICByZWY6IGZvcndhcmRlZFJlZlxuICAgIH1cbiAgKSB9KTtcbn0pO1xuRmllbGQuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUU7XG52YXIgRmllbGRJbm5lciA9IFJlYWN0Ny5mb3J3YXJkUmVmKChwcm9wcywgZm9yd2FyZGVkUmVmKSA9PiB7XG4gIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnJlc3QgfSA9IHByb3BzO1xuICBjb25zdCBmaWVsZCA9IHVzZUZpZWxkKHsgbmFtZTogcmVzdC5uYW1lIH0pO1xuICBjb25zdCB7IHN0YXRlOiBmaWVsZFN0YXRlIH0gPSB1c2VGaWVsZFN0YXRlKHsgbmFtZTogcmVzdC5uYW1lIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIoXG4gICAgUmFkaXhGaWVsZCxcbiAgICB7XG4gICAgICAuLi5maWVsZC5wcm9wcyxcbiAgICAgIC4uLnJlc3QsXG4gICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MihSYWRpeFZhbGlkaXR5U3RhdGUsIHsgY2hpbGRyZW46ICh2YWxpZGl0eSkgPT4ge1xuICAgICAgICBjb25zdCBlbnJpY2hlZEZpZWxkU3RhdGUgPSBlbnJpY2hGaWVsZFN0YXRlKHZhbGlkaXR5LCBmaWVsZFN0YXRlKTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyKFZhbGlkaXR5U3RhdGVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB2YWxpZGl0eSwgY2hpbGRyZW46IHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiID8gY2hpbGRyZW4oZW5yaWNoZWRGaWVsZFN0YXRlKSA6IGNoaWxkcmVuIH0pO1xuICAgICAgfSB9KVxuICAgIH1cbiAgKTtcbn0pO1xuRmllbGRJbm5lci5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRV9JTk5FUjtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2ZpZWxkLWVycm9yLnRzeFxuaW1wb3J0IHsgRm9ybU1lc3NhZ2UgYXMgUmFkaXhGb3JtTWVzc2FnZSB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xuaW1wb3J0IHsgU2xvdCB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0ICogYXMgUmVhY3Q5IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvdXRpbHMvaXMtcmVhY3QtZnJhZ21lbnQudHNcbmltcG9ydCAqIGFzIFJlYWN0OCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIGlzUmVhY3RGcmFnbWVudChub2RlKSB7XG4gIHJldHVybiBSZWFjdDguaXNWYWxpZEVsZW1lbnQobm9kZSkgJiYgbm9kZS50eXBlID09PSBSZWFjdDguRnJhZ21lbnQ7XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9maWVsZC1lcnJvci50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRElTUExBWV9OQU1FMiA9IFwiQ2xlcmtFbGVtZW50c0ZpZWxkRXJyb3JcIjtcbnZhciBGaWVsZEVycm9yID0gUmVhY3Q5LmZvcndhcmRSZWYoXG4gICh7IGFzQ2hpbGQgPSBmYWxzZSwgY2hpbGRyZW4sIGNvZGUsIG5hbWUsIC4uLnJlc3QgfSwgZm9yd2FyZGVkUmVmKSA9PiB7XG4gICAgY29uc3QgZmllbGRDb250ZXh0ID0gdXNlRmllbGRDb250ZXh0KCk7XG4gICAgY29uc3QgcmF3RmllbGROYW1lID0gKGZpZWxkQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogZmllbGRDb250ZXh0Lm5hbWUpIHx8IG5hbWU7XG4gICAgY29uc3QgZmllbGROYW1lID0gcmF3RmllbGROYW1lID09PSBcImJhY2t1cF9jb2RlXCIgPyBcImNvZGVcIiA6IHJhd0ZpZWxkTmFtZTtcbiAgICBjb25zdCB7IGZlZWRiYWNrIH0gPSB1c2VGaWVsZEZlZWRiYWNrKHsgbmFtZTogZmllbGROYW1lIH0pO1xuICAgIGlmICghKChmZWVkYmFjayA9PSBudWxsID8gdm9pZCAwIDogZmVlZGJhY2sudHlwZSkgPT09IFwiZXJyb3JcIikpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBlcnJvciA9IGZlZWRiYWNrLm1lc3NhZ2U7XG4gICAgaWYgKCFlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdCA6IFwic3BhblwiO1xuICAgIGNvbnN0IGNoaWxkID0gdHlwZW9mIGNoaWxkcmVuID09PSBcImZ1bmN0aW9uXCIgPyBjaGlsZHJlbihlcnJvcikgOiBjaGlsZHJlbjtcbiAgICBpZiAoaXNSZWFjdEZyYWdtZW50KGNoaWxkKSkge1xuICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXCI8RmllbGRFcnJvciAvPiBjYW5ub3QgcmVuZGVyIGEgRnJhZ21lbnQgYXMgYSBjaGlsZC5cIik7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MyhcbiAgICAgIFJhZGl4Rm9ybU1lc3NhZ2UsXG4gICAgICB7XG4gICAgICAgIFwiZGF0YS1lcnJvci1jb2RlXCI6IGVycm9yLmNvZGUsXG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIHJlZjogZm9yd2FyZGVkUmVmLFxuICAgICAgICBhc0NoaWxkOiB0cnVlLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMoQ29tcCwgeyBjaGlsZHJlbjogY2hpbGQgfHwgZXJyb3IubWVzc2FnZSB9KVxuICAgICAgfVxuICAgICk7XG4gIH1cbik7XG5GaWVsZEVycm9yLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FMjtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2ZpZWxkLXN0YXRlLnRzeFxudmFyIERJU1BMQVlfTkFNRTMgPSBcIkNsZXJrRWxlbWVudHNGaWVsZFN0YXRlXCI7XG5mdW5jdGlvbiBGaWVsZFN0YXRlKHsgY2hpbGRyZW4gfSkge1xuICBjb25zdCBmaWVsZCA9IHVzZUZpZWxkQ29udGV4dCgpO1xuICBjb25zdCB7IGZlZWRiYWNrIH0gPSB1c2VGaWVsZEZlZWRiYWNrKHsgbmFtZTogZmllbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGZpZWxkLm5hbWUgfSk7XG4gIGNvbnN0IHsgc3RhdGUgfSA9IHVzZUZpZWxkU3RhdGUoeyBuYW1lOiBmaWVsZCA9PSBudWxsID8gdm9pZCAwIDogZmllbGQubmFtZSB9KTtcbiAgY29uc3QgdmFsaWRpdHkgPSB1c2VWYWxpZGl0eVN0YXRlQ29udGV4dCgpO1xuICBjb25zdCBtZXNzYWdlID0gKGZlZWRiYWNrID09IG51bGwgPyB2b2lkIDAgOiBmZWVkYmFjay5tZXNzYWdlKSBpbnN0YW5jZW9mIENsZXJrRWxlbWVudHNGaWVsZEVycm9yID8gZmVlZGJhY2subWVzc2FnZS5tZXNzYWdlIDogZmVlZGJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGZlZWRiYWNrLm1lc3NhZ2U7XG4gIGNvbnN0IGNvZGVzID0gZmVlZGJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGZlZWRiYWNrLmNvZGVzO1xuICBjb25zdCBmaWVsZFN0YXRlID0geyBzdGF0ZTogZW5yaWNoRmllbGRTdGF0ZSh2YWxpZGl0eSwgc3RhdGUpLCBtZXNzYWdlLCBjb2RlcyB9O1xuICByZXR1cm4gY2hpbGRyZW4oZmllbGRTdGF0ZSk7XG59XG5GaWVsZFN0YXRlLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FMztcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2Zvcm0udHN4XG5pbXBvcnQgeyBjb21wb3NlRXZlbnRIYW5kbGVycyB9IGZyb20gXCJAcmFkaXgtdWkvcHJpbWl0aXZlXCI7XG5pbXBvcnQgeyBGb3JtIGFzIFJhZGl4Rm9ybSB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3g0IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRElTUExBWV9OQU1FNCA9IFwiQ2xlcmtFbGVtZW50c0Zvcm1cIjtcbnZhciBGb3JtID0gUmVhY3QxMC5mb3J3YXJkUmVmKCh7IGZsb3dBY3Rvciwgb25TdWJtaXQsIC4uLnJlc3QgfSwgZm9yd2FyZGVkUmVmKSA9PiB7XG4gIGNvbnN0IGZvcm0gPSB1c2VGb3JtKHsgZmxvd0FjdG9yIH0pO1xuICBjb25zdCB7IG9uU3VibWl0OiBpbnRlcm5hbE9uU3VibWl0LCAuLi5pbnRlcm5hbEZvcm1Qcm9wcyB9ID0gZm9ybS5wcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0KFxuICAgIFJhZGl4Rm9ybSxcbiAgICB7XG4gICAgICAuLi5pbnRlcm5hbEZvcm1Qcm9wcyxcbiAgICAgIC4uLnJlc3QsXG4gICAgICBvblN1Ym1pdDogY29tcG9zZUV2ZW50SGFuZGxlcnMoaW50ZXJuYWxPblN1Ym1pdCwgb25TdWJtaXQpLFxuICAgICAgcmVmOiBmb3J3YXJkZWRSZWZcbiAgICB9XG4gICk7XG59KTtcbkZvcm0uZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUU0O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vZ2xvYmFsLWVycm9yLnRzeFxuaW1wb3J0IHsgU2xvdCBhcyBTbG90MiB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3g1IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRElTUExBWV9OQU1FNSA9IFwiQ2xlcmtFbGVtZW50c0dsb2JhbEVycm9yXCI7XG52YXIgR2xvYmFsRXJyb3IgPSBSZWFjdDExLmZvcndhcmRSZWYoXG4gICh7IGFzQ2hpbGQgPSBmYWxzZSwgY2hpbGRyZW4sIGNvZGUsIC4uLnJlc3QgfSwgZm9yd2FyZGVkUmVmKSA9PiB7XG4gICAgY29uc3QgeyBlcnJvcnMgfSA9IHVzZUdsb2JhbEVycm9ycygpO1xuICAgIGNvbnN0IGVycm9yID0gZXJyb3JzID09IG51bGwgPyB2b2lkIDAgOiBlcnJvcnNbMF07XG4gICAgaWYgKCFlcnJvciB8fCBjb2RlICYmIGVycm9yLmNvZGUgIT09IGNvZGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3QyIDogXCJkaXZcIjtcbiAgICBjb25zdCBjaGlsZCA9IHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiID8gY2hpbGRyZW4oZXJyb3IpIDogY2hpbGRyZW47XG4gICAgaWYgKGlzUmVhY3RGcmFnbWVudChjaGlsZCkpIHtcbiAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiPEdsb2JhbEVycm9yIC8+IGNhbm5vdCByZW5kZXIgYSBGcmFnbWVudCBhcyBhIGNoaWxkLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g1KFxuICAgICAgQ29tcCxcbiAgICAgIHtcbiAgICAgICAgcm9sZTogXCJhbGVydFwiLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkIHx8IGVycm9yLm1lc3NhZ2VcbiAgICAgIH1cbiAgICApO1xuICB9XG4pO1xuR2xvYmFsRXJyb3IuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUU1O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaW5wdXQudHN4XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9sb2dnZXJcIjtcbmltcG9ydCB7IHVzZUNsZXJrIGFzIHVzZUNsZXJrMiB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JlYWN0XCI7XG5pbXBvcnQgeyBldmVudENvbXBvbmVudE1vdW50ZWQgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC90ZWxlbWV0cnlcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTMgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9yZWFjdC91dGlscy9jcmVhdGUtY29udGV4dC1mcm9tLWFjdG9yLXJlZi50c1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgYXMgdXNlU2VsZWN0b3JVbmJvdW5kIH0gZnJvbSBcIkB4c3RhdGUvcmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTIgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBjcmVhdGVDb250ZXh0RnJvbUFjdG9yUmVmKGRpc3BsYXlOYW1lKSB7XG4gIGNvbnN0IFJlYWN0Q29udGV4dCA9IFJlYWN0MTIuY3JlYXRlQ29udGV4dChudWxsKTtcbiAgY29uc3QgT3JpZ2luYWxQcm92aWRlciA9IFJlYWN0Q29udGV4dC5Qcm92aWRlcjtcbiAgZnVuY3Rpb24gUHJvdmlkZXIoeyBjaGlsZHJlbiwgYWN0b3JSZWYgfSkge1xuICAgIHJldHVybiBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBPcmlnaW5hbFByb3ZpZGVyLFxuICAgICAge1xuICAgICAgICB2YWx1ZTogYWN0b3JSZWZcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlblxuICAgICk7XG4gIH1cbiAgUHJvdmlkZXIuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgZnVuY3Rpb24gdXNlQ29udGV4dDkoYWxsb3dNaXNzaW5nQWN0b3IgPSBmYWxzZSkge1xuICAgIGNvbnN0IGFjdG9yUmVmID0gUmVhY3QxMi51c2VDb250ZXh0KFJlYWN0Q29udGV4dCk7XG4gICAgaWYgKCFhbGxvd01pc3NpbmdBY3RvciAmJiAhYWN0b3JSZWYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFlvdSB1c2VkIGEgaG9vayBmcm9tIFwiJHtQcm92aWRlci5kaXNwbGF5TmFtZX1cIiBidXQgaXQncyBub3QgaW5zaWRlIGEgPCR7UHJvdmlkZXIuZGlzcGxheU5hbWV9LlByb3ZpZGVyPiBjb21wb25lbnQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdG9yUmVmO1xuICB9XG4gIGZ1bmN0aW9uIHVzZVNlbGVjdG9yNihzZWxlY3RvciwgY29tcGFyZSkge1xuICAgIGNvbnN0IGFjdG9yID0gdXNlQ29udGV4dDkoKTtcbiAgICByZXR1cm4gdXNlU2VsZWN0b3JVbmJvdW5kKGFjdG9yLCBzZWxlY3RvciwgY29tcGFyZSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBQcm92aWRlcixcbiAgICB1c2VBY3RvclJlZjogdXNlQ29udGV4dDksXG4gICAgdXNlU2VsZWN0b3I6IHVzZVNlbGVjdG9yNlxuICB9O1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9jb250ZXh0L3JvdXRlci5jb250ZXh0LnRzXG52YXIgU2lnbkluUm91dGVyQ3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25JblJvdXRlckN0eFwiKTtcbmZ1bmN0aW9uIHVzZVNpZ25JblN0ZXAobmFtZSkge1xuICByZXR1cm4gU2lnbkluUm91dGVyQ3R4LnVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuY2hpbGRyZW5bbmFtZV0pO1xufVxudmFyIHVzZVNpZ25JblN0YXJ0U3RlcCA9ICgpID0+IHVzZVNpZ25JblN0ZXAoXCJzdGFydFwiKTtcbnZhciB1c2VTaWduSW5GaXJzdEZhY3RvclN0ZXAgPSAoKSA9PiB1c2VTaWduSW5TdGVwKFwiZmlyc3RGYWN0b3JcIik7XG52YXIgdXNlU2lnbkluU2Vjb25kRmFjdG9yU3RlcCA9ICgpID0+IHVzZVNpZ25JblN0ZXAoXCJzZWNvbmRGYWN0b3JcIik7XG52YXIgdXNlU2lnbkluUmVzZXRQYXNzd29yZFN0ZXAgPSAoKSA9PiB1c2VTaWduSW5TdGVwKFwicmVzZXRQYXNzd29yZFwiKTtcbnZhciB1c2VTaWduSW5QYXNza2V5QXV0b2ZpbGwgPSAoKSA9PiBTaWduSW5Sb3V0ZXJDdHgudXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5jb250ZXh0LndlYkF1dGhuQXV0b2ZpbGxTdXBwb3J0KTtcblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY29udGV4dC9zaWduLWluLXN0cmF0ZWd5LmNvbnRleHQudHNcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDQsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDQgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBTaWduSW5TdHJhdGVneUNvbnRleHQgPSBjcmVhdGVDb250ZXh0NCh7XG4gIHN0cmF0ZWd5OiB2b2lkIDBcbn0pO1xuZnVuY3Rpb24gdXNlU2lnbkluU3RyYXRlZ3koKSB7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQ0KFNpZ25JblN0cmF0ZWd5Q29udGV4dCk7XG4gIGlmICghY3R4KSB7XG4gICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICBcInVzZVNpZ25JblN0cmF0ZWd5IG11c3QgYmUgdXNlZCB3aXRoaW4gYSA8U2lnbkluLlN0cmF0ZWd5PiBvciA8U2lnbkluLlN1cHBvcnRlZFN0cmF0ZWd5PiBjb21wb25lbnQuXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IHsgc3RyYXRlZ3kgfSA9IGN0eDtcbiAgcmV0dXJuIHN0cmF0ZWd5O1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9jb250ZXh0L3N0cmF0ZWdpZXMuY29udGV4dC50c1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCBhcyBjcmVhdGVDb250ZXh0NSwgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0NSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIFN0cmF0ZWdpZXNDb250ZXh0ID0gY3JlYXRlQ29udGV4dDUoe1xuICBjdXJyZW50OiB2b2lkIDAsXG4gIGlzQWN0aXZlOiAoX25hbWUpID0+IGZhbHNlLFxuICBwcmVmZXJyZWQ6IHZvaWQgMFxufSk7XG5mdW5jdGlvbiB1c2VTdHJhdGVneShuYW1lKSB7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQ1KFN0cmF0ZWdpZXNDb250ZXh0KTtcbiAgaWYgKCFjdHgpIHtcbiAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcbiAgICAgICd1c2VTdHJhdGVneSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgPFNpZ25Jbi5TdGVwIG5hbWU9XCJ2ZXJpZmljYXRpb25zXCI+IGNvbXBvbmVudC4gRGlkIHlvdSBtZWFuIHRvIGBpbXBvcnQgeyBTdGVwIH0gZnJvbSBcIkBjbGVyay9lbGVtZW50cy9zaWduLXVwXCJgIGluc3RlYWQ/J1xuICAgICk7XG4gIH1cbiAgY29uc3QgeyBjdXJyZW50LCBwcmVmZXJyZWQsIGlzQWN0aXZlIH0gPSBjdHg7XG4gIHJldHVybiB7XG4gICAgY3VycmVudCxcbiAgICBwcmVmZXJyZWQsXG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgIHJldHVybiBpc0FjdGl2ZShuYW1lKTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9pbnB1dC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRElTUExBWV9OQU1FNiA9IFwiQ2xlcmtFbGVtZW50c0lucHV0XCI7XG52YXIgRElTUExBWV9OQU1FX1BBU1NLRVlTX0FVVE9GSUxMID0gXCJDbGVya0VsZW1lbnRzSW5wdXRXaXRoUGFzc2tleUF1dG9maWxsXCI7XG52YXIgSW5wdXQgPSBSZWFjdDEzLmZvcndhcmRSZWYoXG4gIChwcm9wcywgZm9yd2FyZGVkUmVmKSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgY2xlcmsgPSB1c2VDbGVyazIoKTtcbiAgICBjb25zdCBmaWVsZCA9IHVzZUlucHV0KHByb3BzKTtcbiAgICBjb25zdCBoYXNQYXNza2V5QXV0b2ZpbGxQcm9wID0gQm9vbGVhbigoX2EgPSBmaWVsZC5wcm9wcy5hdXRvQ29tcGxldGUpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhcIndlYmF1dGhuXCIpKTtcbiAgICBjb25zdCBhbGxvd2VkVHlwZUZvclBhc3NrZXkgPSBbXCJ0ZXh0XCIsIFwiZW1haWxcIiwgXCJ0ZWxcIl0uaW5jbHVkZXMoZmllbGQucHJvcHMudHlwZSk7XG4gICAgY29uc3Qgc2lnbkluUm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKHRydWUpO1xuICAgIChfYyA9IGNsZXJrLnRlbGVtZXRyeSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnJlY29yZChcbiAgICAgIGV2ZW50Q29tcG9uZW50TW91bnRlZChcIkVsZW1lbnRzX0lucHV0XCIsIHtcbiAgICAgICAgdHlwZTogKF9iID0gcHJvcHMudHlwZSkgIT0gbnVsbCA/IF9iIDogZmFsc2UsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBEZXBlbmRpbmcgb24gdHlwZSB0aGUgcHJvcHMgY2FuIGJlIGRpZmZlcmVudFxuICAgICAgICByZW5kZXI6IEJvb2xlYW4ocHJvcHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BzLnJlbmRlciksXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBEZXBlbmRpbmcgb24gdHlwZSB0aGUgcHJvcHMgY2FuIGJlIGRpZmZlcmVudFxuICAgICAgICBhc0NoaWxkOiBCb29sZWFuKHByb3BzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wcy5hc0NoaWxkKSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIERlcGVuZGluZyBvbiB0eXBlIHRoZSBwcm9wcyBjYW4gYmUgZGlmZmVyZW50XG4gICAgICAgIHZhbGlkYXRlUGFzc3dvcmQ6IEJvb2xlYW4ocHJvcHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BzLnZhbGlkYXRlUGFzc3dvcmQpXG4gICAgICB9KVxuICAgICk7XG4gICAgaWYgKHNpZ25JblJvdXRlclJlZiAmJiBoYXNQYXNza2V5QXV0b2ZpbGxQcm9wICYmIGFsbG93ZWRUeXBlRm9yUGFzc2tleSkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g2KFxuICAgICAgICBJbnB1dFdpdGhQYXNza2V5QXV0b2ZpbGwsXG4gICAgICAgIHtcbiAgICAgICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgICAgICAuLi5wcm9wc1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoaGFzUGFzc2tleUF1dG9maWxsUHJvcCAmJiAhYWxsb3dlZFR5cGVGb3JQYXNza2V5KSB7XG4gICAgICBsb2dnZXIud2Fybk9uY2UoXG4gICAgICAgIGA8SW5wdXQgYXV0b0NvbXBsZXRlPVwid2ViYXV0aG5cIj4gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIDxJbnB1dCB0eXBlPVwidGV4dFwiPiBvciA8SW5wdXQgdHlwZT1cImVtYWlsXCI+YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGhhc1Bhc3NrZXlBdXRvZmlsbFByb3ApIHtcbiAgICAgIGxvZ2dlci53YXJuT25jZShcbiAgICAgICAgYDxJbnB1dCBhdXRvQ29tcGxldGU9XCJ3ZWJhdXRoblwiPiBjYW4gb25seSBiZSB1c2VkIGluc2lkZSA8U2lnbkluPiBpbiBvcmRlciB0byB0cmlnZ2VyIGEgc2lnbi1pbiBhdHRlbXB0LCBvdGhlcndpc2UgaXQgd2lsbCBiZSBpZ25vcmVkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NihcbiAgICAgIGZpZWxkLkVsZW1lbnQsXG4gICAgICB7XG4gICAgICAgIHJlZjogZm9yd2FyZGVkUmVmLFxuICAgICAgICAuLi5maWVsZC5wcm9wc1xuICAgICAgfVxuICAgICk7XG4gIH1cbik7XG5JbnB1dC5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRTY7XG52YXIgSW5wdXRXaXRoUGFzc2tleUF1dG9maWxsID0gUmVhY3QxMy5mb3J3YXJkUmVmKFxuICAocHJvcHMsIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIGNvbnN0IHNpZ25JblJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgICBjb25zdCBwYXNza2V5QXV0b2ZpbGxTdXBwb3J0ZWQgPSB1c2VTaWduSW5QYXNza2V5QXV0b2ZpbGwoKTtcbiAgICBSZWFjdDEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAocGFzc2tleUF1dG9maWxsU3VwcG9ydGVkKSB7XG4gICAgICAgIHNpZ25JblJvdXRlclJlZiA9PSBudWxsID8gdm9pZCAwIDogc2lnbkluUm91dGVyUmVmLnNlbmQoeyB0eXBlOiBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZLkFVVE9GSUxMXCIgfSk7XG4gICAgICB9XG4gICAgfSwgW3Bhc3NrZXlBdXRvZmlsbFN1cHBvcnRlZCwgc2lnbkluUm91dGVyUmVmXSk7XG4gICAgY29uc3QgZmllbGQgPSB1c2VJbnB1dChwcm9wcyk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g2KFxuICAgICAgZmllbGQuRWxlbWVudCxcbiAgICAgIHtcbiAgICAgICAgcmVmOiBmb3J3YXJkZWRSZWYsXG4gICAgICAgIC4uLmZpZWxkLnByb3BzXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbklucHV0V2l0aFBhc3NrZXlBdXRvZmlsbC5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRV9QQVNTS0VZU19BVVRPRklMTDtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2xhYmVsLnRzeFxuaW1wb3J0IHsgTGFiZWwgYXMgUmFkaXhMYWJlbCB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xudmFyIERJU1BMQVlfTkFNRTcgPSBcIkNsZXJrRWxlbWVudHNMYWJlbFwiO1xudmFyIExhYmVsID0gUmFkaXhMYWJlbDtcbkxhYmVsLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FNztcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL3N1Ym1pdC50c3hcbmltcG9ydCB7IFN1Ym1pdCBhcyBSYWRpeFN1Ym1pdCB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xudmFyIERJU1BMQVlfTkFNRTggPSBcIkNsZXJrRWxlbWVudHNTdWJtaXRcIjtcbnZhciBTdWJtaXQgPSBSYWRpeFN1Ym1pdDtcblN1Ym1pdC5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRTg7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vY29ubmVjdGlvbnMudHN4XG5pbXBvcnQgeyBTbG90IGFzIFNsb3QzIH0gZnJvbSBcIkByYWRpeC11aS9yZWFjdC1zbG90XCI7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0IGFzIGNyZWF0ZUNvbnRleHQ2LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ2IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9yZWFjdC9ob29rcy91c2UtYWN0aXZlLXRhZ3MuaG9vay50c1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tIFwiQHhzdGF0ZS9yZWFjdFwiO1xudmFyIEFjdGl2ZVRhZ3NNb2RlID0ge1xuICBhbnk6IFwiYW55XCIsXG4gIGFsbDogXCJhbGxcIlxufTtcbmZ1bmN0aW9uIHVzZUFjdGl2ZVRhZ3MoYWN0b3IsIHRhZ3MsIG1vZGUgPSBBY3RpdmVUYWdzTW9kZS5hbnkpIHtcbiAgY29uc3Qgc3RhdGUgPSB1c2VTZWxlY3RvcihcbiAgICBhY3RvcixcbiAgICAocykgPT4gcyxcbiAgICAocHJldiwgbmV4dCkgPT4gcHJldi50YWdzID09PSBuZXh0LnRhZ3NcbiAgKTtcbiAgaWYgKCFzdGF0ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIHRhZ3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gc3RhdGUuaGFzVGFnKHRhZ3MpO1xuICB9XG4gIGlmICghQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdGFncyBwYXJhbWV0ZXIgcHJvdmlkZWQgdG8gdXNlQWN0aXZlVGFnc1wiKTtcbiAgfVxuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlIEFjdGl2ZVRhZ3NNb2RlLmFueToge1xuICAgICAgY29uc3QgbWF0Y2hpbmcgPSBuZXcgU2V0KHRhZ3MuZmlsdGVyKCh0YWcpID0+IHN0YXRlLmhhc1RhZyh0YWcpKSk7XG4gICAgICByZXR1cm4geyBhY3RpdmU6IG1hdGNoaW5nLnNpemUgPiAwLCBhY3RpdmVUYWdzOiBtYXRjaGluZyB9O1xuICAgIH1cbiAgICBjYXNlIEFjdGl2ZVRhZ3NNb2RlLmFsbDpcbiAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA9PT0gc3RhdGUudGFncy5zaXplID8gdGFncy5ldmVyeSgodGFnKSA9PiBzdGF0ZS5oYXNUYWcodGFnKSkgOiBmYWxzZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIHNyYy9yZWFjdC9ob29rcy91c2UtdGhpcmQtcGFydHktcHJvdmlkZXIuaG9vay50c1xuaW1wb3J0IHsgdXNlQ2xlcmsgYXMgdXNlQ2xlcmszIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdXRpbHMvdGhpcmQtcGFydHktc3RyYXRlZ2llcy50c1xuaW1wb3J0IHsgaWNvbkltYWdlVXJsIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBPQVVUSF9QUk9WSURFUlMgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9vYXV0aFwiO1xuaW1wb3J0IHsgV0VCM19QUk9WSURFUlMgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC93ZWIzXCI7XG5cbi8vIHNyYy91dGlscy9jbGVyay1qcy50c1xudmFyIGZyb21FbnRyaWVzID0gKGl0ZXJhYmxlKSA9PiB7XG4gIHJldHVybiBbLi4uaXRlcmFibGVdLnJlZHVjZSgob2JqLCBba2V5LCB2YWxdKSA9PiB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxuLy8gc3JjL3V0aWxzL3RoaXJkLXBhcnR5LXN0cmF0ZWdpZXMudHNcbnZhciBvYXV0aFN0cmF0ZWdpZXMgPSBPQVVUSF9QUk9WSURFUlMubWFwKChwKSA9PiBwLnN0cmF0ZWd5KTtcbnZhciBwcm92aWRlclRvRGlzcGxheURhdGEgPSBmcm9tRW50cmllcyhcbiAgWy4uLk9BVVRIX1BST1ZJREVSUywgLi4uV0VCM19QUk9WSURFUlNdLm1hcCgocCkgPT4ge1xuICAgIHJldHVybiBbcC5wcm92aWRlciwgeyBpY29uVXJsOiBpY29uSW1hZ2VVcmwocC5wcm92aWRlciksIG5hbWU6IHAubmFtZSwgc3RyYXRlZ3k6IHAuc3RyYXRlZ3kgfV07XG4gIH0pXG4pO1xudmFyIHN0cmF0ZWd5VG9EaXNwbGF5RGF0YSA9IGZyb21FbnRyaWVzKFxuICBbLi4uT0FVVEhfUFJPVklERVJTLCAuLi5XRUIzX1BST1ZJREVSU10ubWFwKChwKSA9PiB7XG4gICAgcmV0dXJuIFtwLnN0cmF0ZWd5LCB7IGljb25Vcmw6IGljb25JbWFnZVVybChwLnByb3ZpZGVyKSwgaWQ6IHAucHJvdmlkZXIsIG5hbWU6IHAubmFtZSB9XTtcbiAgfSlcbik7XG5mdW5jdGlvbiBpc1NhbWxTdHJhdGVneShzdHJhdGVneSkge1xuICByZXR1cm4gc3RyYXRlZ3kgPT09IFwic2FtbFwiO1xufVxuZnVuY3Rpb24gaXNXZWIzU3RyYXRlZ3koc3RyYXRlZ3ksIGF2YWlsYWJsZSkge1xuICByZXR1cm4gYXZhaWxhYmxlLmluY2x1ZGVzKHN0cmF0ZWd5LnN0YXJ0c1dpdGgoXCJ3ZWIzX1wiKSA/IHN0cmF0ZWd5IDogYHdlYjNfJHtzdHJhdGVneX1fc2lnbmF0dXJlYCk7XG59XG5mdW5jdGlvbiBpc0F1dGhlbnRpY2F0YWJsZU9hdXRoU3RyYXRlZ3koc3RyYXRlZ3ksIGF2YWlsYWJsZSkge1xuICByZXR1cm4gYXZhaWxhYmxlLmluY2x1ZGVzKHN0cmF0ZWd5LnN0YXJ0c1dpdGgoXCJvYXV0aF9cIikgPyBzdHJhdGVneSA6IGBvYXV0aF8ke3N0cmF0ZWd5fWApO1xufVxudmFyIGVtcHR5VGhpcmRQYXJ0eVByb3ZpZGVycyA9IHtcbiAgYXV0aGVudGljYXRhYmxlT2F1dGhTdHJhdGVnaWVzOiBbXSxcbiAgcHJvdmlkZXJUb0Rpc3BsYXlEYXRhOiB7fSxcbiAgc3RyYXRlZ2llczogW10sXG4gIHN0cmF0ZWd5VG9EaXNwbGF5RGF0YToge30sXG4gIHdlYjNTdHJhdGVnaWVzOiBbXVxufTtcbnZhciBnZXRFbmFibGVkVGhpcmRQYXJ0eVByb3ZpZGVycyA9IChlbnZpcm9ubWVudCkgPT4ge1xuICBpZiAoIShlbnZpcm9ubWVudCA9PSBudWxsID8gdm9pZCAwIDogZW52aXJvbm1lbnQudXNlclNldHRpbmdzKSkge1xuICAgIHJldHVybiBlbXB0eVRoaXJkUGFydHlQcm92aWRlcnM7XG4gIH1cbiAgY29uc3QgeyBzb2NpYWxQcm92aWRlclN0cmF0ZWdpZXMsIHdlYjNGaXJzdEZhY3RvcnMsIGF1dGhlbnRpY2F0YWJsZVNvY2lhbFN0cmF0ZWdpZXMgfSA9IGVudmlyb25tZW50LnVzZXJTZXR0aW5ncztcbiAgY29uc3Qga25vd25Tb2NpYWxQcm92aWRlclN0cmF0ZWdpZXMgPSBzb2NpYWxQcm92aWRlclN0cmF0ZWdpZXMuZmlsdGVyKChzKSA9PiBvYXV0aFN0cmF0ZWdpZXMuaW5jbHVkZXMocykpO1xuICBjb25zdCBrbm93bkF1dGhlbnRpY2F0YWJsZVNvY2lhbFN0cmF0ZWdpZXMgPSBhdXRoZW50aWNhdGFibGVTb2NpYWxTdHJhdGVnaWVzLmZpbHRlcigocykgPT4gb2F1dGhTdHJhdGVnaWVzLmluY2x1ZGVzKHMpKTtcbiAgcmV0dXJuIHtcbiAgICBhdXRoZW50aWNhdGFibGVPYXV0aFN0cmF0ZWdpZXM6IFsuLi5rbm93bkF1dGhlbnRpY2F0YWJsZVNvY2lhbFN0cmF0ZWdpZXNdLFxuICAgIHByb3ZpZGVyVG9EaXNwbGF5RGF0YSxcbiAgICBzdHJhdGVnaWVzOiBbLi4ua25vd25Tb2NpYWxQcm92aWRlclN0cmF0ZWdpZXMsIC4uLndlYjNGaXJzdEZhY3RvcnNdLFxuICAgIHN0cmF0ZWd5VG9EaXNwbGF5RGF0YSxcbiAgICB3ZWIzU3RyYXRlZ2llczogd2ViM0ZpcnN0RmFjdG9yc1xuICB9O1xufTtcblxuLy8gc3JjL3JlYWN0L2hvb2tzL3VzZS10aGlyZC1wYXJ0eS1wcm92aWRlci5ob29rLnRzXG52YXIgdXNlSXNQcm92aWRlckVuYWJsZWQgPSAocHJvdmlkZXIpID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgY2xlcmsgPSB1c2VDbGVyazMoKTtcbiAgaWYgKCFjbGVyay5sb2FkZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAocHJvdmlkZXIgPT09IFwic2FtbFwiKSB7XG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGNsZXJrLl9fdW5zdGFibGVfX2Vudmlyb25tZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EudXNlclNldHRpbmdzLnNhbWwuZW5hYmxlZCkgIT0gbnVsbCA/IF9iIDogZmFsc2U7XG4gIH1cbiAgY29uc3QgZGF0YSA9IGdldEVuYWJsZWRUaGlyZFBhcnR5UHJvdmlkZXJzKGNsZXJrLl9fdW5zdGFibGVfX2Vudmlyb25tZW50KTtcbiAgcmV0dXJuIGlzQXV0aGVudGljYXRhYmxlT2F1dGhTdHJhdGVneShwcm92aWRlciwgZGF0YS5hdXRoZW50aWNhdGFibGVPYXV0aFN0cmF0ZWdpZXMpIHx8IGlzV2ViM1N0cmF0ZWd5KHByb3ZpZGVyLCBkYXRhLndlYjNTdHJhdGVnaWVzKTtcbn07XG52YXIgdXNlVGhpcmRQYXJ0eVByb3ZpZGVyID0gKHJlZiwgcHJvdmlkZXIpID0+IHtcbiAgY29uc3QgaXNQcm92aWRlckVuYWJsZWQgPSB1c2VJc1Byb3ZpZGVyRW5hYmxlZChwcm92aWRlcik7XG4gIGNvbnN0IGlzU2FtbCA9IGlzU2FtbFN0cmF0ZWd5KHByb3ZpZGVyKTtcbiAgY29uc3QgZGV0YWlscyA9IGlzU2FtbCA/IHtcbiAgICBuYW1lOiBcIlNBTUxcIixcbiAgICBzdHJhdGVneTogXCJzYW1sXCJcbiAgfSA6IHByb3ZpZGVyVG9EaXNwbGF5RGF0YVtwcm92aWRlcl07XG4gIGNvbnN0IGF1dGhlbnRpY2F0ZSA9IHVzZUNhbGxiYWNrNChcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNQcm92aWRlckVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChpc1NhbWwpIHtcbiAgICAgICAgcmV0dXJuIHJlZi5zZW5kKHsgdHlwZTogXCJBVVRIRU5USUNBVEUuU0FNTFwiIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHByb3ZpZGVyID09PSBcIm1ldGFtYXNrXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlZi5zZW5kKHsgdHlwZTogXCJBVVRIRU5USUNBVEUuV0VCM1wiLCBzdHJhdGVneTogXCJ3ZWIzX21ldGFtYXNrX3NpZ25hdHVyZVwiIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHByb3ZpZGVyID09PSBcImNvaW5iYXNlX3dhbGxldFwiKSB7XG4gICAgICAgIHJldHVybiByZWYuc2VuZCh7IHR5cGU6IFwiQVVUSEVOVElDQVRFLldFQjNcIiwgc3RyYXRlZ3k6IFwid2ViM19jb2luYmFzZV93YWxsZXRfc2lnbmF0dXJlXCIgfSk7XG4gICAgICB9XG4gICAgICBpZiAocHJvdmlkZXIgPT09IFwib2t4X3dhbGxldFwiKSB7XG4gICAgICAgIHJldHVybiByZWYuc2VuZCh7IHR5cGU6IFwiQVVUSEVOVElDQVRFLldFQjNcIiwgc3RyYXRlZ3k6IFwid2ViM19va3hfd2FsbGV0X3NpZ25hdHVyZVwiIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlZi5zZW5kKHsgdHlwZTogXCJBVVRIRU5USUNBVEUuT0FVVEhcIiwgc3RyYXRlZ3k6IGBvYXV0aF8ke3Byb3ZpZGVyfWAgfSk7XG4gICAgfSxcbiAgICBbcHJvdmlkZXIsIGlzUHJvdmlkZXJFbmFibGVkLCBpc1NhbWwsIHJlZl1cbiAgKTtcbiAgaWYgKGlzUHJvdmlkZXJFbmFibGVkID09PSBmYWxzZSkge1xuICAgIGNvbnN0IGRhc2hib2FyZFBhdGggPSBgaHR0cHM6Ly9kYXNoYm9hcmQuY2xlcmsuY29tL2xhc3QtYWN0aXZlP3BhdGg9L3VzZXItYXV0aGVudGljYXRpb24vJHtwcm92aWRlciA9PT0gXCJtZXRhbWFza1wiID8gXCJ3ZWIzXCIgOiBcInNvY2lhbC1jb25uZWN0aW9uc1wifWA7XG4gICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICBgWW91IGhhdmUgdXNlZCA8Q29ubmVjdGlvbiBuYW1lPVwiJHtwcm92aWRlcn1cIj4gd2hpY2ggaXNuJ3QgZW5hYmxlZCBmb3IgeW91ciBwcm9qZWN0LiBFbmFibGUgJHtkZXRhaWxzLm5hbWV9IGluIHlvdXIgQ2xlcmsgZGFzaGJvYXJkOiAke2Rhc2hib2FyZFBhdGh9YFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBldmVudHM6IHtcbiAgICAgIGF1dGhlbnRpY2F0ZVxuICAgIH0sXG4gICAgLi4uZGV0YWlsc1xuICB9O1xufTtcblxuLy8gc3JjL3JlYWN0L3NpZ24tdXAvY29udGV4dC9yb3V0ZXIuY29udGV4dC50c1xudmFyIFNpZ25VcFJvdXRlckN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduVXBSb3V0ZXJDdHhcIik7XG5mdW5jdGlvbiB1c2VTaWduVXBTdGVwKG5hbWUpIHtcbiAgcmV0dXJuIFNpZ25VcFJvdXRlckN0eC51c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmNoaWxkcmVuW25hbWVdKTtcbn1cbnZhciB1c2VTaWduVXBTdGFydFN0ZXAgPSAoKSA9PiB1c2VTaWduVXBTdGVwKFwic3RhcnRcIik7XG52YXIgdXNlU2lnblVwQ29udGludWVTdGVwID0gKCkgPT4gdXNlU2lnblVwU3RlcChcImNvbnRpbnVlXCIpO1xudmFyIHVzZVNpZ25VcFZlcmlmaWNhdGlvblN0ZXAgPSAoKSA9PiB1c2VTaWduVXBTdGVwKFwidmVyaWZpY2F0aW9uXCIpO1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Nvbm5lY3Rpb25zLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDcgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBDb25uZWN0aW9uQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ2KG51bGwpO1xudmFyIHVzZUNvbm5lY3Rpb25Db250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjdHggPSB1c2VDb250ZXh0NihDb25uZWN0aW9uQ29udGV4dCk7XG4gIGlmICghY3R4KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlQ29ubmVjdGlvbkNvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiA8Q2xlcmsuQ29ubmVjdGlvbj5cIik7XG4gIH1cbiAgcmV0dXJuIGN0eDtcbn07XG5mdW5jdGlvbiBDb25uZWN0aW9uKHsgYXNDaGlsZCwgbmFtZSwgLi4ucmVzdCB9KSB7XG4gIGNvbnN0IHNpZ25JblJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgY29uc3Qgc2lnblVwUmVmID0gU2lnblVwUm91dGVyQ3R4LnVzZUFjdG9yUmVmKHRydWUpO1xuICBjb25zdCBwcm92aWRlciA9IHVzZVRoaXJkUGFydHlQcm92aWRlcihzaWduSW5SZWYgfHwgc2lnblVwUmVmLCBuYW1lKTtcbiAgaWYgKCFwcm92aWRlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDMgOiBcImJ1dHRvblwiO1xuICBjb25zdCBkZWZhdWx0UHJvcHMgPSBhc0NoaWxkID8ge30gOiB7IHR5cGU6IFwiYnV0dG9uXCIgfTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g3KENvbm5lY3Rpb25Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBwcm92aWRlciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g3KFxuICAgIENvbXAsXG4gICAge1xuICAgICAgb25DbGljazogcHJvdmlkZXIuZXZlbnRzLmF1dGhlbnRpY2F0ZSxcbiAgICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAgIC4uLnJlc3RcbiAgICB9XG4gICkgfSk7XG59XG5mdW5jdGlvbiBJY29uKHsgYXNDaGlsZCwgLi4ucmVzdCB9KSB7XG4gIGNvbnN0IHsgaWNvblVybCwgbmFtZSB9ID0gdXNlQ29ubmVjdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90MyA6IFwiaW1nXCI7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NyhcbiAgICBDb21wLFxuICAgIHtcbiAgICAgIGFsdDogYCR7bmFtZX0gbG9nb2AsXG4gICAgICBzcmM6IGljb25VcmwsXG4gICAgICAuLi5yZXN0XG4gICAgfVxuICApO1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2xvYWRpbmcudHN4XG5pbXBvcnQgeyB1c2VDbGVyayBhcyB1c2VDbGVyazYgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9yZWFjdFwiO1xuaW1wb3J0IHsgZXZlbnRDb21wb25lbnRNb3VudGVkIGFzIGV2ZW50Q29tcG9uZW50TW91bnRlZDQgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC90ZWxlbWV0cnlcIjtcbmltcG9ydCB7IHVzZVNlbGVjdG9yIGFzIHVzZVNlbGVjdG9yNSB9IGZyb20gXCJAeHN0YXRlL3JlYWN0XCI7XG5cbi8vIHNyYy9yZWFjdC9ob29rcy91c2UtbG9hZGluZy5ob29rLnRzXG5pbXBvcnQgeyB1c2VTZWxlY3RvciBhcyB1c2VTZWxlY3RvcjIgfSBmcm9tIFwiQHhzdGF0ZS9yZWFjdFwiO1xudmFyIHNlbGVjdExvYWRpbmcgPSAoc25hcHNob3QpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gKF9hID0gc25hcHNob3QgPT0gbnVsbCA/IHZvaWQgMCA6IHNuYXBzaG90LmNvbnRleHQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5sb2FkaW5nO1xufTtcbnZhciBjb21wYXJlTG9hZGluZ1ZhbHVlID0gKHByZXYsIG5leHQpID0+IChwcmV2ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2LmlzTG9hZGluZykgPT09IChuZXh0ID09IG51bGwgPyB2b2lkIDAgOiBuZXh0LmlzTG9hZGluZyk7XG5mdW5jdGlvbiB1c2VMb2FkaW5nKGFjdG9yKSB7XG4gIGNvbnN0IGxvYWRpbmdDdHggPSB1c2VTZWxlY3RvcjIoYWN0b3IsIHNlbGVjdExvYWRpbmcsIGNvbXBhcmVMb2FkaW5nVmFsdWUpO1xuICBpZiAoIWxvYWRpbmdDdHgpIHtcbiAgICByZXR1cm4gW2ZhbHNlLCB7IHN0ZXA6IHZvaWQgMCwgc3RyYXRlZ3k6IHZvaWQgMCwgYWN0aW9uOiB2b2lkIDAgfV07XG4gIH1cbiAgcmV0dXJuIFtsb2FkaW5nQ3R4LmlzTG9hZGluZywgeyBzdGVwOiBsb2FkaW5nQ3R4LnN0ZXAsIHN0cmF0ZWd5OiBsb2FkaW5nQ3R4LnN0cmF0ZWd5LCBhY3Rpb246IGxvYWRpbmdDdHguYWN0aW9uIH1dO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9zdGVwLnRzeFxuaW1wb3J0IHsgdXNlQ2xlcmsgYXMgdXNlQ2xlcms0IH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IGV2ZW50Q29tcG9uZW50TW91bnRlZCBhcyBldmVudENvbXBvbmVudE1vdW50ZWQyIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdGVsZW1ldHJ5XCI7XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2Nob29zZS1zZXNzaW9uL2Nob29zZS1zZXNzaW9uLnRzeFxuaW1wb3J0IHsgU2xvdCBhcyBTbG90NCB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0ICogYXMgUmVhY3QxNyBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3JlYWN0L3V0aWxzL2NyZWF0ZS1jb250ZXh0LWZvci1kb20tdmFsaWRhdGlvbi50c1xuaW1wb3J0ICogYXMgUmVhY3QxNCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHRGb3JEb21WYWxpZGF0aW9uKGRpc3BsYXlOYW1lKSB7XG4gIGNvbnN0IFJlYWN0Q29udGV4dCA9IFJlYWN0MTQuY3JlYXRlQ29udGV4dChmYWxzZSk7XG4gIGNvbnN0IE9yaWdpbmFsUHJvdmlkZXIgPSBSZWFjdENvbnRleHQuUHJvdmlkZXI7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKHsgY2hpbGRyZW4gfSkge1xuICAgIHJldHVybiBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBPcmlnaW5hbFByb3ZpZGVyLFxuICAgICAge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuXG4gICAgKTtcbiAgfVxuICBQcm92aWRlci5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICBmdW5jdGlvbiB1c2VDb250ZXh0OShhbGxvd01pc3NpbmdDb250ZXh0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gUmVhY3QxNC51c2VDb250ZXh0KFJlYWN0Q29udGV4dCk7XG4gICAgaWYgKCFhbGxvd01pc3NpbmdDb250ZXh0ICYmICFjb250ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBZb3UgdXNlZCBhIGhvb2sgZnJvbSBcIiR7UHJvdmlkZXIuZGlzcGxheU5hbWV9XCIgYnV0IGl0J3Mgbm90IGluc2lkZSBhIDwke1Byb3ZpZGVyLmRpc3BsYXlOYW1lfS5Qcm92aWRlcj4gY29tcG9uZW50LmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG4gIHJldHVybiB7XG4gICAgUHJvdmlkZXIsXG4gICAgdXNlRG9tVmFsaWRhdGlvbjogdXNlQ29udGV4dDlcbiAgfTtcbn1cblxuLy8gc3JjL3JlYWN0L3V0aWxzL2lzLXZhbGlkLWNvbXBvbmVudC10eXBlLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gaXNWYWxpZENvbXBvbmVudFR5cGUoY2hpbGQsIHR5cGUpIHtcbiAgcmV0dXJuIFJlYWN0MTUuaXNWYWxpZEVsZW1lbnQoY2hpbGQpICYmIGNoaWxkLnR5cGUgPT09IHR5cGU7XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2Nob29zZS1zZXNzaW9uL2Nob29zZS1zZXNzaW9uLmhvb2tzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDE2IGZyb20gXCJyZWFjdFwiO1xudmFyIFNpZ25JbkFjdGl2ZVNlc3Npb25Db250ZXh0ID0gUmVhY3QxNi5jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gdXNlU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQoKSB7XG4gIGNvbnN0IGN0eCA9IFJlYWN0MTYudXNlQ29udGV4dChTaWduSW5BY3RpdmVTZXNzaW9uQ29udGV4dCk7XG4gIGlmICghY3R4KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFNlc3Npb25MaXN0L1NpZ25JblNlc3Npb25MaXN0SXRlbVwiKTtcbiAgfVxuICByZXR1cm4gY3R4O1xufVxuZnVuY3Rpb24gdXNlU2lnbkluQ2hvb3NlU2Vzc2lvbklzQWN0aXZlKCkge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgcmV0dXJuIHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6Y2hvb3NlLXNlc3Npb25cIik7XG59XG5mdW5jdGlvbiB1c2VTaWduSW5BY3RpdmVTZXNzaW9uTGlzdChwYXJhbXMpIHtcbiAgY29uc3QgeyBvbWl0Q3VycmVudCA9IHRydWUgfSA9IHBhcmFtcyB8fCB7fTtcbiAgcmV0dXJuIFNpZ25JblJvdXRlckN0eC51c2VTZWxlY3Rvcigoc3RhdGUpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgYWN0aXZlU2Vzc2lvbnMgPSAoKF9iID0gKF9hID0gc3RhdGUuY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNsaWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmFjdGl2ZVNlc3Npb25zKSB8fCBbXTtcbiAgICBjb25zdCBjdXJyZW50U2Vzc2lvbklkID0gKF9kID0gKF9jID0gc3RhdGUuY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnNlc3Npb24pID09IG51bGwgPyB2b2lkIDAgOiBfZC5pZDtcbiAgICBjb25zdCBmaWx0ZXJlZFNlc3Npb25zID0gb21pdEN1cnJlbnQgPyBhY3RpdmVTZXNzaW9ucy5maWx0ZXIoKHMpID0+IHMuaWQgIT09IGN1cnJlbnRTZXNzaW9uSWQpIDogYWN0aXZlU2Vzc2lvbnM7XG4gICAgcmV0dXJuIGZpbHRlcmVkU2Vzc2lvbnMubWFwKChzKSA9PiAoe1xuICAgICAgaWQ6IHMuaWQsXG4gICAgICAuLi5zLnB1YmxpY1VzZXJEYXRhXG4gICAgfSkpO1xuICB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY2hvb3NlLXNlc3Npb24vY2hvb3NlLXNlc3Npb24udHN4XG5pbXBvcnQgeyBqc3ggYXMganN4OCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNpZ25JbkNob29zZVNlc3Npb25DdHggPSBjcmVhdGVDb250ZXh0Rm9yRG9tVmFsaWRhdGlvbihcIlNpZ25JbkNob29zZVNlc3Npb25DdHhcIik7XG5mdW5jdGlvbiBTaWduSW5DaG9vc2VTZXNzaW9uKHsgYXNDaGlsZCwgY2hpbGRyZW4sIC4uLnByb3BzIH0pIHtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VTaWduSW5DaG9vc2VTZXNzaW9uSXNBY3RpdmUoKTtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90NCA6IFwiZGl2XCI7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3g4KFNpZ25JbkNob29zZVNlc3Npb25DdHguUHJvdmlkZXIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g4KENvbXAsIHsgLi4ucHJvcHMsIGNoaWxkcmVuIH0pIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblNlc3Npb25MaXN0KHsgYXNDaGlsZCwgY2hpbGRyZW4sIGluY2x1ZGVDdXJyZW50U2Vzc2lvbiwgLi4ucHJvcHMgfSkge1xuICBjb25zdCBzZXNzaW9ucyA9IHVzZVNpZ25JbkFjdGl2ZVNlc3Npb25MaXN0KHsgb21pdEN1cnJlbnQ6ICFpbmNsdWRlQ3VycmVudFNlc3Npb24gfSk7XG4gIGlmICghY2hpbGRyZW4gfHwgIShzZXNzaW9ucyA9PSBudWxsID8gdm9pZCAwIDogc2Vzc2lvbnMubGVuZ3RoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChSZWFjdDE3LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA+IDEpIHtcbiAgICByZXR1cm4gUmVhY3QxNy5DaGlsZHJlbi5vbmx5KG51bGwpO1xuICB9XG4gIGlmIChhc0NoaWxkICYmIGlzVmFsaWRDb21wb25lbnRUeXBlKGNoaWxkcmVuLCBTaWduSW5TZXNzaW9uTGlzdEl0ZW0pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYXNDaGlsZCBjYW5ub3QgYmUgdXNlZCB3aXRoIFNlc3Npb25MaXN0SXRlbSBhcyB0aGUgZGlyZWN0IGNoaWxkXCIpO1xuICB9XG4gIGlmICghUmVhY3QxNy5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJjaGlsZHJlbiBtdXN0IGJlIGEgdmFsaWQgUmVhY3QgZWxlbWVudFwiKTtcbiAgfVxuICBjb25zdCBuZXdDaGlsZHJlbiA9IGFzQ2hpbGQgPyBjaGlsZHJlbi5wcm9wcy5jaGlsZHJlbiA6IGNoaWxkcmVuO1xuICBjb25zdCBjaGlsZHJlbldpdGhDdHggPSBzZXNzaW9ucy5tYXAoKHNlc3Npb24pID0+IHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDgoXG4gICAgICBTaWduSW5BY3RpdmVTZXNzaW9uQ29udGV4dC5Qcm92aWRlcixcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IHNlc3Npb24sXG4gICAgICAgIGNoaWxkcmVuOiBuZXdDaGlsZHJlblxuICAgICAgfSxcbiAgICAgIGBTaWduSW5BY3RpdmVTZXNzaW9uQ29udGV4dC0ke3Nlc3Npb24uaWR9YFxuICAgICk7XG4gIH0pO1xuICBpZiAoYXNDaGlsZCkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4OChTbG90NCwgeyAuLi5wcm9wcywgY2hpbGRyZW46IFJlYWN0MTcuY2xvbmVFbGVtZW50KGNoaWxkcmVuLCB2b2lkIDAsIGNoaWxkcmVuV2l0aEN0eCkgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFwidWxcIiwgeyAuLi5wcm9wcywgY2hpbGRyZW46IGNoaWxkcmVuV2l0aEN0eCB9KTtcbn1cbmZ1bmN0aW9uIFNpZ25JblNlc3Npb25MaXN0SXRlbShwcm9wcykge1xuICBjb25zdCB7IGFzQ2hpbGQgPSBmYWxzZSwgY2hpbGRyZW4sIC4uLnBhc3N0aHJvdWdoUHJvcHMgfSA9IHByb3BzO1xuICBjb25zdCBzZXNzaW9uID0gdXNlU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQoKTtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90NCA6IFwibGlcIjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g4KENvbXAsIHsgLi4ucGFzc3Rocm91Z2hQcm9wcywgY2hpbGRyZW46IGNoaWxkcmVuKHsgc2Vzc2lvbiB9KSB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY2hvb3NlLXN0cmF0ZWd5LnRzeFxuaW1wb3J0IHsgU2xvdCBhcyBTbG90NSB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgYXMgdXNlU2VsZWN0b3IzIH0gZnJvbSBcIkB4c3RhdGUvcmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTggZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi92ZXJpZmljYXRpb24ubWFjaGluZS50c1xuaW1wb3J0IHsgaXNDbGVya0FQSVJlc3BvbnNlRXJyb3IgYXMgaXNDbGVya0FQSVJlc3BvbnNlRXJyb3IyIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvZXJyb3JcIjtcbmltcG9ydCB7IGFzc2lnbiBhcyBhc3NpZ24yLCBmcm9tUHJvbWlzZSwgbG9nLCBzZW5kVG8sIHNldHVwIGFzIHNldHVwMiB9IGZyb20gXCJ4c3RhdGVcIjtcblxuLy8gc3JjL2ludGVybmFscy9jb25zdGFudHMvaW5kZXgudHNcbnZhciBTU09fQ0FMTEJBQ0tfUEFUSF9ST1VURSA9IFwiL3Nzby1jYWxsYmFja1wiO1xudmFyIENIT09TRV9TRVNTSU9OX1BBVEhfUk9VVEUgPSBcIi9jaG9vc2VcIjtcbnZhciBNQUdJQ19MSU5LX1ZFUklGWV9QQVRIX1JPVVRFID0gXCIvdmVyaWZ5XCI7XG52YXIgU0lHTl9VUF9NT0RFUyA9IHtcbiAgUFVCTElDOiBcInB1YmxpY1wiLFxuICBSRVNUUklDVEVEOiBcInJlc3RyaWN0ZWRcIlxufTtcbnZhciBTSUdOX0lOX0RFRkFVTFRfQkFTRV9QQVRIID0gc2FmZUFjY2VzcyhcbiAgKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0gcHJvY2Vzcy5lbnYuQ0xFUktfU0lHTl9JTl9VUkwpICE9IG51bGwgPyBfYSA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NMRVJLX1NJR05fSU5fVVJMO1xuICB9LFxuICBcIi9zaWduLWluXCJcbik7XG52YXIgU0lHTl9VUF9ERUZBVUxUX0JBU0VfUEFUSCA9IHNhZmVBY2Nlc3MoXG4gICgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHByb2Nlc3MuZW52LkNMRVJLX1NJR05fVVBfVVJMKSAhPSBudWxsID8gX2EgOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DTEVSS19TSUdOX1VQX1VSTDtcbiAgfSxcbiAgXCIvc2lnbi11cFwiXG4pO1xudmFyIE5FWFRfV0lORE9XX0hJU1RPUllfU1VQUE9SVF9WRVJTSU9OID0gXCIxNC4xLjBcIjtcbnZhciBTRUFSQ0hfUEFSQU1TID0ge1xuICBjcmVhdGVkU2Vzc2lvbjogXCJfX2NsZXJrX2NyZWF0ZWRfc2Vzc2lvblwiLFxuICBoYW5kc2hha2U6IFwiX19jbGVya19oYW5kc2hha2VcIixcbiAgaGVscDogXCJfX2NsZXJrX2hlbHBcIixcbiAgaW52aXRhdGlvblRva2VuOiBcIl9fY2xlcmtfaW52aXRhdGlvbl90b2tlblwiLFxuICBtb2RhbFN0YXRlOiBcIl9fY2xlcmtfbW9kYWxfc3RhdGVcIixcbiAgc2F0ZWxsaXRlVXJsOiBcIl9fY2xlcmtfc2F0ZWxsaXRlX3VybFwiLFxuICBzdGF0dXM6IFwiX19jbGVya19zdGF0dXNcIixcbiAgc3luY2VkOiBcIl9fY2xlcmtfc3luY2VkXCIsXG4gIHRpY2tldDogXCJfX2NsZXJrX3RpY2tldFwiLFxuICB0cmFuc2ZlcjogXCJfX2NsZXJrX3RyYW5zZmVyXCJcbn07XG52YXIgUkVTRU5EQUJMRV9DT1VOVERPV05fREVGQVVMVCA9IDYwO1xudmFyIENBUFRDSEFfRUxFTUVOVF9JRCA9IFwiY2xlcmstY2FwdGNoYVwiO1xudmFyIEVSUk9SX0NPREVTID0ge1xuICBGT1JNX0lERU5USUZJRVJfTk9UX0ZPVU5EOiBcImZvcm1faWRlbnRpZmllcl9ub3RfZm91bmRcIixcbiAgRk9STV9QQVNTV09SRF9JTkNPUlJFQ1Q6IFwiZm9ybV9wYXNzd29yZF9pbmNvcnJlY3RcIixcbiAgSU5WQUxJRF9TVFJBVEVHWV9GT1JfVVNFUjogXCJzdHJhdGVneV9mb3JfdXNlcl9pbnZhbGlkXCIsXG4gIE5PVF9BTExPV0VEX1RPX1NJR05fVVA6IFwibm90X2FsbG93ZWRfdG9fc2lnbl91cFwiLFxuICBPQVVUSF9BQ0NFU1NfREVOSUVEOiBcIm9hdXRoX2FjY2Vzc19kZW5pZWRcIixcbiAgT0FVVEhfRU1BSUxfRE9NQUlOX1JFU0VSVkVEX0JZX1NBTUw6IFwib2F1dGhfZW1haWxfZG9tYWluX3Jlc2VydmVkX2J5X3NhbWxcIixcbiAgTk9UX0FMTE9XRURfQUNDRVNTOiBcIm5vdF9hbGxvd2VkX2FjY2Vzc1wiLFxuICBTQU1MX1VTRVJfQVRUUklCVVRFX01JU1NJTkc6IFwic2FtbF91c2VyX2F0dHJpYnV0ZV9taXNzaW5nXCIsXG4gIFVTRVJfTE9DS0VEOiBcInVzZXJfbG9ja2VkXCIsXG4gIEVOVEVSUFJJU0VfU1NPX1VTRVJfQVRUUklCVVRFX01JU1NJTkc6IFwiZW50ZXJwcmlzZV9zc29fdXNlcl9hdHRyaWJ1dGVfbWlzc2luZ1wiLFxuICBFTlRFUlBSSVNFX1NTT19FTUFJTF9BRERSRVNTX0RPTUFJTl9NSVNNQVRDSDogXCJlbnRlcnByaXNlX3Nzb19lbWFpbF9hZGRyZXNzX2RvbWFpbl9taXNtYXRjaFwiLFxuICBFTlRFUlBSSVNFX1NTT19IT1NURURfRE9NQUlOX01JU01BVENIOiBcImVudGVycHJpc2Vfc3NvX2hvc3RlZF9kb21haW5fbWlzbWF0Y2hcIixcbiAgU0FNTF9FTUFJTF9BRERSRVNTX0RPTUFJTl9NSVNNQVRDSDogXCJzYW1sX2VtYWlsX2FkZHJlc3NfZG9tYWluX21pc21hdGNoXCIsXG4gIE9SR0FOSVpBVElPTl9NRU1CRVJTSElQX1FVT1RBX0VYQ0VFREVEX0ZPUl9TU086IFwib3JnYW5pemF0aW9uX21lbWJlcnNoaXBfcXVvdGFfZXhjZWVkZWRfZm9yX3Nzb1wiXG59O1xudmFyIFJPVVRJTkcgPSB7XG4gIHBhdGg6IFwicGF0aFwiLFxuICB2aXJ0dWFsOiBcInZpcnR1YWxcIixcbiAgaGFzaDogXCJoYXNoXCJcbn07XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2hhcmVkL3NoYXJlZC5hY3Rpb25zLnRzXG5mdW5jdGlvbiBzZW5kVG9Mb2FkaW5nKHsgY29udGV4dCwgZXZlbnQgfSkge1xuICBsZXQgc3RlcDtcbiAgbGV0IHN0cmF0ZWd5O1xuICBsZXQgYWN0aW9uO1xuICBpZiAoZXZlbnQudHlwZS5zdGFydHNXaXRoKFwieHN0YXRlLmRvbmUuXCIpIHx8IGV2ZW50LnR5cGUuc3RhcnRzV2l0aChcInhzdGF0ZS5lcnJvci5cIikpIHtcbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBzdGVwOiB2b2lkIDAsXG4gICAgICBzdHJhdGVneTogdm9pZCAwXG4gICAgfSk7XG4gIH1cbiAgaWYgKGNvbnRleHQubG9hZGluZ1N0ZXAgPT09IFwic3RyYXRlZ3lcIikge1xuICAgIHN0ZXAgPSB2b2lkIDA7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiUkVESVJFQ1RcIikge1xuICAgICAgc3RyYXRlZ3kgPSBldmVudC5wYXJhbXMuc3RyYXRlZ3k7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LnBhcmVudC5zZW5kKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR1wiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc3RlcCxcbiAgICAgIHN0cmF0ZWd5XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoY29udGV4dC5sb2FkaW5nU3RlcCA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgc3RlcCA9IFwiY29udGludWVcIjtcbiAgICBzdHJhdGVneSA9IHZvaWQgMDtcbiAgICBhY3Rpb24gPSBcImFjdGlvblwiIGluIGV2ZW50ID8gZXZlbnQuYWN0aW9uIDogdm9pZCAwO1xuICAgIHJldHVybiBjb250ZXh0LnBhcmVudC5zZW5kKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR1wiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc3RlcCxcbiAgICAgIHN0cmF0ZWd5LFxuICAgICAgYWN0aW9uXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoY29udGV4dC5sb2FkaW5nU3RlcCA9PT0gXCJyZXNldC1wYXNzd29yZFwiKSB7XG4gICAgc3RlcCA9IFwicmVzZXQtcGFzc3dvcmRcIjtcbiAgICBzdHJhdGVneSA9IHZvaWQgMDtcbiAgICBhY3Rpb24gPSBcImFjdGlvblwiIGluIGV2ZW50ID8gZXZlbnQuYWN0aW9uIDogdm9pZCAwO1xuICAgIHJldHVybiBjb250ZXh0LnBhcmVudC5zZW5kKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR1wiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc3RlcCxcbiAgICAgIHN0cmF0ZWd5LFxuICAgICAgYWN0aW9uXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoY29udGV4dC5sb2FkaW5nU3RlcCA9PT0gXCJzdGFydFwiKSB7XG4gICAgc3RlcCA9IFwic3RhcnRcIjtcbiAgICBzdHJhdGVneSA9IHZvaWQgMDtcbiAgICBhY3Rpb24gPSBcImFjdGlvblwiIGluIGV2ZW50ID8gZXZlbnQuYWN0aW9uIDogdm9pZCAwO1xuICAgIHJldHVybiBjb250ZXh0LnBhcmVudC5zZW5kKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR1wiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc3RlcCxcbiAgICAgIHN0cmF0ZWd5LFxuICAgICAgYWN0aW9uXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3RlcCA9IGNvbnRleHQubG9hZGluZ1N0ZXA7XG4gICAgc3RyYXRlZ3kgPSB2b2lkIDA7XG4gICAgYWN0aW9uID0gXCJhY3Rpb25cIiBpbiBldmVudCA/IGV2ZW50LmFjdGlvbiA6IHZvaWQgMDtcbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0ZXAsXG4gICAgICBzdHJhdGVneSxcbiAgICAgIGFjdGlvblxuICAgIH0pO1xuICB9XG59XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi91dGlscy9zdGFydGluZy1mYWN0b3JzLnRzXG5pbXBvcnQgeyBpc1dlYkF1dGhuU3VwcG9ydGVkIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvd2ViYXV0aG5cIjtcbnZhciBtYWtlU29ydGluZ09yZGVyTWFwID0gKGFycikgPT4gYXJyLnJlZHVjZShcbiAgKGFjYywgaywgaSkgPT4ge1xuICAgIGFjY1trXSA9IGk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSxcbiAge31cbik7XG52YXIgU1RSQVRFR1lfU09SVF9PUkRFUl9QQVNTV09SRF9QUkVGID0gbWFrZVNvcnRpbmdPcmRlck1hcChbXG4gIFwicGFzc2tleVwiLFxuICBcInBhc3N3b3JkXCIsXG4gIFwiZW1haWxfbGlua1wiLFxuICBcImVtYWlsX2NvZGVcIixcbiAgXCJwaG9uZV9jb2RlXCJcbl0pO1xudmFyIFNUUkFURUdZX1NPUlRfT1JERVJfT1RQX1BSRUYgPSBtYWtlU29ydGluZ09yZGVyTWFwKFtcbiAgXCJlbWFpbF9jb2RlXCIsXG4gIFwiZW1haWxfbGlua1wiLFxuICBcInBob25lX2NvZGVcIixcbiAgXCJwYXNza2V5XCIsXG4gIFwicGFzc3dvcmRcIlxuXSk7XG52YXIgbWFrZVNvcnRpbmdGdW5jdGlvbiA9IChzb3J0aW5nTWFwKSA9PiAoYSwgYikgPT4ge1xuICBjb25zdCBvcmRlckEgPSBzb3J0aW5nTWFwW2Euc3RyYXRlZ3ldO1xuICBjb25zdCBvcmRlckIgPSBzb3J0aW5nTWFwW2Iuc3RyYXRlZ3ldO1xuICBpZiAob3JkZXJBID09PSB2b2lkIDAgfHwgb3JkZXJCID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gb3JkZXJBIC0gb3JkZXJCO1xufTtcbnZhciBwYXNzd29yZFByZWZGYWN0b3JDb21wYXJhdG9yID0gbWFrZVNvcnRpbmdGdW5jdGlvbihTVFJBVEVHWV9TT1JUX09SREVSX1BBU1NXT1JEX1BSRUYpO1xudmFyIG90cFByZWZGYWN0b3JDb21wYXJhdG9yID0gbWFrZVNvcnRpbmdGdW5jdGlvbihTVFJBVEVHWV9TT1JUX09SREVSX09UUF9QUkVGKTtcbnZhciBmaW5kRmFjdG9yRm9ySWRlbnRpZmllciA9IChpKSA9PiAoZikgPT4ge1xuICByZXR1cm4gXCJzYWZlSWRlbnRpZmllclwiIGluIGYgJiYgZi5zYWZlSWRlbnRpZmllciA9PT0gaTtcbn07XG5mdW5jdGlvbiBkZXRlcm1pbmVTdGFydGluZ1NpZ25JbkZhY3RvcihmaXJzdEZhY3RvcnMsIGlkZW50aWZpZXIsIHByZWZlcnJlZFNpZ25JblN0cmF0ZWd5KSB7XG4gIGlmICghZmlyc3RGYWN0b3JzIHx8IGZpcnN0RmFjdG9ycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gcHJlZmVycmVkU2lnbkluU3RyYXRlZ3kgPT09IFwicGFzc3dvcmRcIiA/IGRldGVybWluZVN0cmF0ZWd5V2hlblBhc3N3b3JkSXNQcmVmZXJyZWQoZmlyc3RGYWN0b3JzLCBpZGVudGlmaWVyKSA6IGRldGVybWluZVN0cmF0ZWd5V2hlbk9UUElzUHJlZmVycmVkKGZpcnN0RmFjdG9ycywgaWRlbnRpZmllcik7XG59XG5mdW5jdGlvbiBmaW5kUGFzc2tleVN0cmF0ZWd5KGZhY3RvcnMpIHtcbiAgaWYgKGlzV2ViQXV0aG5TdXBwb3J0ZWQoKSkge1xuICAgIGNvbnN0IHBhc3NrZXlGYWN0b3IgPSBmYWN0b3JzLmZpbmQoKHsgc3RyYXRlZ3kgfSkgPT4gc3RyYXRlZ3kgPT09IFwicGFzc2tleVwiKTtcbiAgICBpZiAocGFzc2tleUZhY3Rvcikge1xuICAgICAgcmV0dXJuIHBhc3NrZXlGYWN0b3I7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZGV0ZXJtaW5lU3RyYXRlZ3lXaGVuUGFzc3dvcmRJc1ByZWZlcnJlZChmYWN0b3JzLCBpZGVudGlmaWVyKSB7XG4gIGNvbnN0IHBhc3NrZXlGYWN0b3IgPSBmaW5kUGFzc2tleVN0cmF0ZWd5KGZhY3RvcnMpO1xuICBpZiAocGFzc2tleUZhY3Rvcikge1xuICAgIHJldHVybiBwYXNza2V5RmFjdG9yO1xuICB9XG4gIGNvbnN0IHNlbGVjdGVkID0gZmFjdG9ycy5zb3J0KHBhc3N3b3JkUHJlZkZhY3RvckNvbXBhcmF0b3IpWzBdO1xuICBpZiAoc2VsZWN0ZWQuc3RyYXRlZ3kgPT09IFwicGFzc3dvcmRcIikge1xuICAgIHJldHVybiBzZWxlY3RlZDtcbiAgfVxuICByZXR1cm4gZmFjdG9ycy5maW5kKGZpbmRGYWN0b3JGb3JJZGVudGlmaWVyKGlkZW50aWZpZXIpKSB8fCBzZWxlY3RlZCB8fCBudWxsO1xufVxuZnVuY3Rpb24gZGV0ZXJtaW5lU3RyYXRlZ3lXaGVuT1RQSXNQcmVmZXJyZWQoZmFjdG9ycywgaWRlbnRpZmllcikge1xuICBjb25zdCBwYXNza2V5RmFjdG9yID0gZmluZFBhc3NrZXlTdHJhdGVneShmYWN0b3JzKTtcbiAgaWYgKHBhc3NrZXlGYWN0b3IpIHtcbiAgICByZXR1cm4gcGFzc2tleUZhY3RvcjtcbiAgfVxuICBjb25zdCBzb3J0ZWRCYXNlZE9uUHJlZkZhY3RvciA9IGZhY3RvcnMuc29ydChvdHBQcmVmRmFjdG9yQ29tcGFyYXRvcik7XG4gIGNvbnN0IGZvcklkZW50aWZpZXIgPSBzb3J0ZWRCYXNlZE9uUHJlZkZhY3Rvci5maW5kKGZpbmRGYWN0b3JGb3JJZGVudGlmaWVyKGlkZW50aWZpZXIpKTtcbiAgaWYgKGZvcklkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gZm9ySWRlbnRpZmllcjtcbiAgfVxuICBjb25zdCBmaXJzdEJhc2VkT25QcmVmID0gc29ydGVkQmFzZWRPblByZWZGYWN0b3JbMF07XG4gIGlmIChmaXJzdEJhc2VkT25QcmVmLnN0cmF0ZWd5ID09PSBcImVtYWlsX2xpbmtcIikge1xuICAgIHJldHVybiBmaXJzdEJhc2VkT25QcmVmO1xuICB9XG4gIHJldHVybiBmYWN0b3JzLmZpbmQoZmluZEZhY3RvckZvcklkZW50aWZpZXIoaWRlbnRpZmllcikpIHx8IGZpcnN0QmFzZWRPblByZWYgfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIGRldGVybWluZVN0YXJ0aW5nU2lnbkluU2Vjb25kRmFjdG9yKHNlY29uZEZhY3RvcnMpIHtcbiAgaWYgKCFzZWNvbmRGYWN0b3JzIHx8IHNlY29uZEZhY3RvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgdG90cEZhY3RvciA9IHNlY29uZEZhY3RvcnMuZmluZCgoZikgPT4gZi5zdHJhdGVneSA9PT0gXCJ0b3RwXCIpO1xuICBpZiAodG90cEZhY3Rvcikge1xuICAgIHJldHVybiB0b3RwRmFjdG9yO1xuICB9XG4gIGNvbnN0IHBob25lQ29kZUZhY3RvciA9IHNlY29uZEZhY3RvcnMuZmluZCgoZikgPT4gZi5zdHJhdGVneSA9PT0gXCJwaG9uZV9jb2RlXCIpO1xuICBpZiAocGhvbmVDb2RlRmFjdG9yKSB7XG4gICAgcmV0dXJuIHBob25lQ29kZUZhY3RvcjtcbiAgfVxuICByZXR1cm4gc2Vjb25kRmFjdG9yc1swXTtcbn1cblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy91dGlscy9hc3NlcnQudHNcbmZ1bmN0aW9uIGFzc2VydElzRGVmaW5lZCh2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlID09PSB2b2lkIDAgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bGFiZWwgfHwgdmFsdWV9IGlzIG5vdCBkZWZpbmVkYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCkge1xuICBpZiAoXCJlcnJvclwiIGluIGV2ZW50ID09PSBmYWxzZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYW4gZXJyb3IgZXZlbnQsIGdvdCBcIiR7ZXZlbnQudHlwZX1cImApO1xuICB9XG59XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi92ZXJpZmljYXRpb24udHlwZXMudHNcbnZhciBTaWduSW5WZXJpZmljYXRpb25EZWxheXMgPSB7XG4gIHJlc2VuZGFibGVUaW1lb3V0OiAxZTNcbiAgLy8gMSBzZWNvbmRcbn07XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi92ZXJpZmljYXRpb24ubWFjaGluZS50c1xudmFyIGlzTm9uUHJlcGFyYWJsZVN0cmF0ZWd5ID0gKHN0cmF0ZWd5KSA9PiB7XG4gIGlmICghc3RyYXRlZ3kpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIFtcInBhc3NrZXlcIiwgXCJwYXNzd29yZFwiXS5pbmNsdWRlcyhzdHJhdGVneSk7XG59O1xudmFyIFNpZ25JblZlcmlmaWNhdGlvbk1hY2hpbmVJZCA9IFwiU2lnbkluVmVyaWZpY2F0aW9uXCI7XG52YXIgU2lnbkluVmVyaWZpY2F0aW9uTWFjaGluZSA9IHNldHVwMih7XG4gIGFjdG9yczoge1xuICAgIGRldGVybWluZVN0YXJ0aW5nRmFjdG9yOiBmcm9tUHJvbWlzZShcbiAgICAgICgpID0+IFByb21pc2UucmVqZWN0KG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiQWN0b3IgYGRldGVybWluZVN0YXJ0aW5nRmFjdG9yYCBtdXN0IGJlIG92ZXJyaWRkZW5cIikpXG4gICAgKSxcbiAgICBwcmVwYXJlOiBmcm9tUHJvbWlzZShcbiAgICAgICgpID0+IFByb21pc2UucmVqZWN0KG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiQWN0b3IgYHByZXBhcmVgIG11c3QgYmUgb3ZlcnJpZGRlblwiKSlcbiAgICApLFxuICAgIGF0dGVtcHQ6IGZyb21Qcm9taXNlKFxuICAgICAgKCkgPT4gUHJvbWlzZS5yZWplY3QobmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXCJBY3RvciBgYXR0ZW1wdGAgbXVzdCBiZSBvdmVycmlkZGVuXCIpKVxuICAgICksXG4gICAgYXR0ZW1wdFBhc3NrZXk6IGZyb21Qcm9taXNlKCh7IGlucHV0OiB7IHBhcmVudCwgZmxvdyB9IH0pID0+IHtcbiAgICAgIHJldHVybiBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uYXV0aGVudGljYXRlV2l0aFBhc3NrZXkoe1xuICAgICAgICBmbG93XG4gICAgICB9KTtcbiAgICB9KVxuICB9LFxuICBhY3Rpb25zOiB7XG4gICAgcmVzZW5kYWJsZVRpY2s6IGFzc2lnbjIoKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgcmVzZW5kYWJsZTogY29udGV4dC5yZXNlbmRhYmxlQWZ0ZXIgPT09IDAsXG4gICAgICByZXNlbmRhYmxlQWZ0ZXI6IGNvbnRleHQucmVzZW5kYWJsZUFmdGVyID4gMCA/IGNvbnRleHQucmVzZW5kYWJsZUFmdGVyIC0gMSA6IGNvbnRleHQucmVzZW5kYWJsZUFmdGVyXG4gICAgfSkpLFxuICAgIHJlc2VuZGFibGVSZXNldDogYXNzaWduMih7XG4gICAgICByZXNlbmRhYmxlOiBmYWxzZSxcbiAgICAgIHJlc2VuZGFibGVBZnRlcjogUkVTRU5EQUJMRV9DT1VOVERPV05fREVGQVVMVFxuICAgIH0pLFxuICAgIHZhbGlkYXRlUmVnaXN0ZXJlZFN0cmF0ZWdpZXM6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgY2xlcmsgPSBjb250ZXh0LnBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcms7XG4gICAgICBpZiAoKF9hID0gY2xlcmsuX191bnN0YWJsZV9fZW52aXJvbm1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZmFsc2UpIHtcbiAgICAgICAgaWYgKGNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzICYmICFjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZEZpcnN0RmFjdG9ycy5ldmVyeSgoZmFjdG9yKSA9PiBjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzLmhhcyhmYWN0b3Iuc3RyYXRlZ3kpKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBDbGVyazogWW91ciBpbnN0YW5jZSBpcyBjb25maWd1cmVkIHRvIHN1cHBvcnQgdGhlc2Ugc3RyYXRlZ2llczogJHtjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZEZpcnN0RmFjdG9ycy5tYXAoKGZhY3RvcikgPT4gZmFjdG9yLnN0cmF0ZWd5KS5qb2luKFwiLCBcIil9LCBidXQgdGhlIHJlbmRlcmVkIHN0cmF0ZWdpZXMgYXJlOiAke0FycmF5LmZyb20oY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcykuam9pbihcbiAgICAgICAgICAgICAgXCIsIFwiXG4gICAgICAgICAgICApfS4gTWFrZSBzdXJlIHRvIHJlbmRlciBhIDxTdHJhdGVneT4gY29tcG9uZW50IGZvciBlYWNoIHN1cHBvcnRlZCBzdHJhdGVneS4gTW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9jbGVyay5jb20vZG9jcy9lbGVtZW50cy9yZWZlcmVuY2Uvc2lnbi1pbiNzdHJhdGVneWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZFNlY29uZEZhY3RvcnMgJiYgIWNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkU2Vjb25kRmFjdG9ycy5ldmVyeSgoZmFjdG9yKSA9PiBjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzLmhhcyhmYWN0b3Iuc3RyYXRlZ3kpKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBDbGVyazogWW91ciBpbnN0YW5jZSBpcyBjb25maWd1cmVkIHRvIHN1cHBvcnQgdGhlc2UgMkZBIHN0cmF0ZWdpZXM6ICR7Y2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRTZWNvbmRGYWN0b3JzLm1hcCgoZikgPT4gZi5zdHJhdGVneSkuam9pbihcIiwgXCIpfSwgYnV0IHRoZSByZW5kZXJlZCBzdHJhdGVnaWVzIGFyZTogJHtBcnJheS5mcm9tKGNvbnRleHQucmVnaXN0ZXJlZFN0cmF0ZWdpZXMpLmpvaW4oXG4gICAgICAgICAgICAgIFwiLCBcIlxuICAgICAgICAgICAgKX0uIE1ha2Ugc3VyZSB0byByZW5kZXIgYSA8U3RyYXRlZ3k+IGNvbXBvbmVudCBmb3IgZWFjaCBzdXBwb3J0ZWQgc3RyYXRlZ3kuIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vY2xlcmsuY29tL2RvY3MvZWxlbWVudHMvcmVmZXJlbmNlL3NpZ24taW4jc3RyYXRlZ3lgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJhdGVnaWVzVXNlZEJ1dE5vdEFjdGl2YXRlZCA9IEFycmF5LmZyb20oY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcykuZmlsdGVyKFxuICAgICAgICAgIChzdHJhdGVneSkgPT4gISgoX2EyID0gY2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRGaXJzdEZhY3RvcnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuc29tZSgoc3VwcG9ydGVkKSA9PiBzdXBwb3J0ZWQuc3RyYXRlZ3kgPT09IHN0cmF0ZWd5KSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHN0cmF0ZWdpZXNVc2VkQnV0Tm90QWN0aXZhdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgQ2xlcms6IFRoZXNlIHJlbmRlcmVkIHN0cmF0ZWdpZXMgYXJlIG5vdCBjb25maWd1cmVkIGZvciB5b3VyIGluc3RhbmNlOiAke3N0cmF0ZWdpZXNVc2VkQnV0Tm90QWN0aXZhdGVkLmpvaW4oXCIsIFwiKX0uIElmIHRoaXMgaXMgdW5leHBlY3RlZCwgbWFrZSBzdXJlIHRvIGVuYWJsZSB0aGVtIGluIHlvdXIgQ2xlcmsgZGFzaGJvYXJkOiBodHRwczovL2Rhc2hib2FyZC5jbGVyay5jb20vbGFzdC1hY3RpdmU/cGF0aD0vdXNlci1hdXRoZW50aWNhdGlvbi9lbWFpbC1waG9uZS11c2VybmFtZWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoKF9iID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RyYXRlZ3kpICYmICFjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzLmhhcygoX2MgPSBjb250ZXh0LmN1cnJlbnRGYWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zdHJhdGVneSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcbiAgICAgICAgICAgIGBZb3VyIHNpZ24taW4gYXR0ZW1wdCBpcyBtaXNzaW5nIGEgJHsoX2QgPSBjb250ZXh0LmN1cnJlbnRGYWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfZC5zdHJhdGVneX0gc3RyYXRlZ3kuIE1ha2Ugc3VyZSA8U3RyYXRlZ3kgbmFtZT1cIiR7KF9lID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Uuc3RyYXRlZ3l9XCI+IGlzIHJlbmRlcmVkIGluIHlvdXIgZmxvdy4gTW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9jbGVyay5jb20vZG9jcy9lbGVtZW50cy9yZWZlcmVuY2Uvc2lnbi1pbiNzdHJhdGVneWBcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCEoKF9mID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Yuc3RyYXRlZ3kpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICAgICAgICBcIlVuYWJsZSB0byBkZXRlcm1pbmUgYW4gYXV0aGVudGljYXRpb24gc3RyYXRlZ3kgdG8gdmVyaWZ5LiBUaGlzIG1lYW5zIHlvdXIgaW5zdGFuY2UgaXMgbWlzY29uZmlndXJlZC4gVmlzaXQgdGhlIENsZXJrIERhc2hib2FyZCBhbmQgdmVyaWZ5IHRoYXQgeW91ciBpbnN0YW5jZSBoYXMgYXV0aGVudGljYXRpb24gc3RyYXRlZ2llcyBlbmFibGVkOiBodHRwczovL2Rhc2hib2FyZC5jbGVyay5jb20vbGFzdC1hY3RpdmU/cGF0aD0vdXNlci1hdXRoZW50aWNhdGlvbi9lbWFpbC1waG9uZS11c2VybmFtZVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2VuZFRvTmV4dDogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4gY29udGV4dC5wYXJlbnQuc2VuZCh7IHR5cGU6IFwiTkVYVFwiLCByZXNvdXJjZTogZXZlbnQub3V0cHV0IH0pLFxuICAgIHNlbmRUb0xvYWRpbmcsXG4gICAgc2V0Rm9ybUVycm9yczogc2VuZFRvKFxuICAgICAgKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJFUlJPUlMuU0VUXCIsXG4gICAgICAgICAgZXJyb3I6IGV2ZW50LmVycm9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKSxcbiAgICBzZXRDb25zb2xlRXJyb3I6ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGlmICh0cnVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCk7XG4gICAgICBjb25zdCBlcnJvciA9IGlzQ2xlcmtBUElSZXNwb25zZUVycm9yMihldmVudC5lcnJvcikgPyBldmVudC5lcnJvci5lcnJvcnNbMF0ubG9uZ01lc3NhZ2UgOiBldmVudC5lcnJvci5tZXNzYWdlO1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGZ1bGZpbGwgdGhlIHByZXBhcmUgb3IgYXR0ZW1wdCByZXF1ZXN0IGZvciB0aGUgc2lnbi1pbiB2ZXJpZmljYXRpb24uXG4gICAgICBFcnJvcjogJHtlcnJvcn1cbiAgICAgIFBsZWFzZSBvcGVuIGFuIGlzc3VlIGlmIHlvdSBjb250aW51ZSB0byBydW4gaW50byB0aGlzIGlzc3VlLmApO1xuICAgIH1cbiAgfSxcbiAgZ3VhcmRzOiB7XG4gICAgaXNSZXNlbmRhYmxlOiAoeyBjb250ZXh0IH0pID0+IGNvbnRleHQucmVzZW5kYWJsZSB8fCBjb250ZXh0LnJlc2VuZGFibGVBZnRlciA9PT0gMCxcbiAgICBpc05ldmVyUmVzZW5kYWJsZTogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4gaXNOb25QcmVwYXJhYmxlU3RyYXRlZ3koKF9hID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RyYXRlZ3kpO1xuICAgIH1cbiAgfSxcbiAgZGVsYXlzOiBTaWduSW5WZXJpZmljYXRpb25EZWxheXMsXG4gIHR5cGVzOiB7fVxufSkuY3JlYXRlTWFjaGluZSh7XG4gIGlkOiBTaWduSW5WZXJpZmljYXRpb25NYWNoaW5lSWQsXG4gIGNvbnRleHQ6ICh7IGlucHV0IH0pID0+ICh7XG4gICAgY3VycmVudEZhY3RvcjogbnVsbCxcbiAgICBiYXNlUGF0aDogaW5wdXQuYmFzZVBhdGggfHwgU0lHTl9JTl9ERUZBVUxUX0JBU0VfUEFUSCxcbiAgICBmb3JtUmVmOiBpbnB1dC5mb3JtUmVmLFxuICAgIGxvYWRpbmdTdGVwOiBcInZlcmlmaWNhdGlvbnNcIixcbiAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICByZWdpc3RlcmVkU3RyYXRlZ2llczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSxcbiAgICByZXNlbmRhYmxlOiBmYWxzZSxcbiAgICByZXNlbmRhYmxlQWZ0ZXI6IFJFU0VOREFCTEVfQ09VTlRET1dOX0RFRkFVTFRcbiAgfSksXG4gIGluaXRpYWw6IFwiSW5pdFwiLFxuICBvbjoge1xuICAgIFwiTkFWSUdBVEUuUFJFVklPVVNcIjogXCIuSGlzdFwiLFxuICAgIFwiU1RSQVRFR1kuUkVHSVNURVJcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduMih7XG4gICAgICAgIHJlZ2lzdGVyZWRTdHJhdGVnaWVzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiBjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzLmFkZChldmVudC5mYWN0b3IpXG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJTVFJBVEVHWS5VTlJFR0lTVEVSXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbjIoe1xuICAgICAgICByZWdpc3RlcmVkU3RyYXRlZ2llczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIGNvbnRleHQucmVnaXN0ZXJlZFN0cmF0ZWdpZXMuZGVsZXRlKGV2ZW50LmZhY3Rvcik7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVnaXN0ZXJlZFN0cmF0ZWdpZXM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LFxuICBzdGF0ZXM6IHtcbiAgICBJbml0OiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTpwcmVwYXJpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImRldGVybWluZVN0YXJ0aW5nRmFjdG9yXCIsXG4gICAgICAgIHNyYzogXCJkZXRlcm1pbmVTdGFydGluZ0ZhY3RvclwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgICAgIHBhcmVudDogY29udGV4dC5wYXJlbnRcbiAgICAgICAgfSksXG4gICAgICAgIG9uRG9uZToge1xuICAgICAgICAgIHRhcmdldDogXCJQcmVwYXJpbmdcIixcbiAgICAgICAgICBhY3Rpb25zOiBhc3NpZ24yKHtcbiAgICAgICAgICAgIGN1cnJlbnRGYWN0b3I6ICh7IGV2ZW50IH0pID0+IGV2ZW50Lm91dHB1dFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIG9uRXJyb3I6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiUHJlcGFyaW5nXCIsXG4gICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgbG9nKFwiQ2xlcmsgW1NpZ24gSW4gVmVyaWZpY2F0aW9uXTogRXJyb3IgZGV0ZXJtaW5pbmcgc3RhcnRpbmcgZmFjdG9yXCIpLFxuICAgICAgICAgICAgYXNzaWduMih7XG4gICAgICAgICAgICAgIGN1cnJlbnRGYWN0b3I6IHsgc3RyYXRlZ3k6IFwicGFzc3dvcmRcIiB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgUHJlcGFyaW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTpwcmVwYXJpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcInByZXBhcmVcIixcbiAgICAgICAgc3JjOiBcInByZXBhcmVcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50LFxuICAgICAgICAgIHJlc2VuZGFibGU6IGNvbnRleHQucmVzZW5kYWJsZSxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIC4uLmNvbnRleHQuY3VycmVudEZhY3RvcixcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufSR7Y29udGV4dC5iYXNlUGF0aH0ke01BR0lDX0xJTktfVkVSSUZZX1BBVEhfUk9VVEV9YFxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIG9uRG9uZToge1xuICAgICAgICAgIGFjdGlvbnM6IFwicmVzZW5kYWJsZVJlc2V0XCIsXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNldENvbnNvbGVFcnJvclwiXSxcbiAgICAgICAgICB0YXJnZXQ6IFwiUGVuZGluZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFBlbmRpbmc6IHtcbiAgICAgIHRhZ3M6IFtcInN0YXRlOnBlbmRpbmdcIl0sXG4gICAgICBkZXNjcmlwdGlvbjogXCJXYWl0aW5nIGZvciB1c2VyIGlucHV0XCIsXG4gICAgICBvbjoge1xuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiQXR0ZW1wdGluZ1Bhc3NrZXlcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIFwiTkFWSUdBVEUuQ0hPT1NFX1NUUkFURUdZXCI6IFwiQ2hvb3NlU3RyYXRlZ3lcIixcbiAgICAgICAgXCJOQVZJR0FURS5GT1JHT1RfUEFTU1dPUkRcIjogXCJDaG9vc2VTdHJhdGVneVwiLFxuICAgICAgICBSRVRSWTogXCJQcmVwYXJpbmdcIixcbiAgICAgICAgU1VCTUlUOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbml0aWFsOiBcIkluaXRcIixcbiAgICAgIHN0YXRlczoge1xuICAgICAgICBJbml0OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiTWFya3MgYXBwcm9wcmlhdGUgZmFjdG9ycyBhcyBuZXZlciByZXNlbmRhYmxlLlwiLFxuICAgICAgICAgIGFsd2F5czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBndWFyZDogXCJpc05ldmVyUmVzZW5kYWJsZVwiLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiTmV2ZXJSZXNlbmRhYmxlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhcmdldDogXCJOb3RSZXNlbmRhYmxlXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIFJlc2VuZGFibGU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJXYWl0aW5nIGZvciB1c2VyIHRvIHJldHJ5XCJcbiAgICAgICAgfSxcbiAgICAgICAgTmV2ZXJSZXNlbmRhYmxlOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiSGFuZGxlcyBuZXZlciByZXNlbmRhYmxlXCIsXG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFJFVFJZOiB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IGxvZyhcIk5ldmVyIHJldHJpYWJsZVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgTm90UmVzZW5kYWJsZToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkhhbmRsZSBjb3VudGRvd25zXCIsXG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFJFVFJZOiB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IGxvZygoeyBjb250ZXh0IH0pID0+IGBOb3QgcmV0cmlhYmxlOyBUcnkgYWdhaW4gaW4gJHtjb250ZXh0LnJlc2VuZGFibGVBZnRlcn1zYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyOiB7XG4gICAgICAgICAgICByZXNlbmRhYmxlVGltZW91dDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU2V0IGFzIHJldHJpYWJsZSBpZiBjb3VudGRvd24gaXMgMFwiLFxuICAgICAgICAgICAgICAgIGd1YXJkOiBcImlzUmVzZW5kYWJsZVwiLFxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFwicmVzZW5kYWJsZVRpY2tcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiUmVzZW5kYWJsZVwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJDb250aW51ZSBjb3VudGRvd24gaWYgbm90IHJldHJpYWJsZVwiLFxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFwicmVzZW5kYWJsZVRpY2tcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiTm90UmVzZW5kYWJsZVwiLFxuICAgICAgICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFmdGVyOiB7XG4gICAgICAgIDNlMzoge1xuICAgICAgICAgIGFjdGlvbnM6IFwidmFsaWRhdGVSZWdpc3RlcmVkU3RyYXRlZ2llc1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIENob29zZVN0cmF0ZWd5OiB7XG4gICAgICBkZXNjcmlwdGlvbjogXCJIYW5kbGVzIGJvdGggY2hvb3NlIHN0cmF0ZWd5IGFuZCBmb3Jnb3QgcGFzc3dvcmQgYXMgdGhlIGxhdHRlciBpcyBzaW1pbGFyIGluIGZ1bmN0aW9uYWxpdHlcIixcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmNob29zZS1zdHJhdGVneVwiLCBcInN0YXRlOmZvcmdvdC1wYXNzd29yZFwiXSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiU1RSQVRFR1kuVVBEQVRFXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBhc3NpZ24yKHsgY3VycmVudEZhY3RvcjogKHsgZXZlbnQgfSkgPT4gZXZlbnQuZmFjdG9yIHx8IG51bGwgfSksXG4gICAgICAgICAgdGFyZ2V0OiBcIlByZXBhcmluZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEF0dGVtcHRpbmc6IHtcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmF0dGVtcHRpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgZW50cnk6IFwic2VuZFRvTG9hZGluZ1wiLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImF0dGVtcHRcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50LFxuICAgICAgICAgIGN1cnJlbnRGYWN0b3I6IGNvbnRleHQuY3VycmVudEZhY3RvcixcbiAgICAgICAgICBmaWVsZHM6IGNvbnRleHQuZm9ybVJlZi5nZXRTbmFwc2hvdCgpLmNvbnRleHQuZmllbGRzXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNldENvbnNvbGVFcnJvclwiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nUGFzc2tleToge1xuICAgICAgdGFnczogW1wic3RhdGU6YXR0ZW1wdGluZ1wiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBlbnRyeTogXCJzZW5kVG9Mb2FkaW5nXCIsXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiYXR0ZW1wdFBhc3NrZXlcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRQYXNza2V5XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICBmbG93OiBcImRpc2NvdmVyYWJsZVwiXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBIaXN0OiB7XG4gICAgICB0eXBlOiBcImhpc3RvcnlcIlxuICAgIH1cbiAgfVxufSk7XG52YXIgU2lnbkluRmlyc3RGYWN0b3JNYWNoaW5lID0gU2lnbkluVmVyaWZpY2F0aW9uTWFjaGluZS5wcm92aWRlKHtcbiAgYWN0b3JzOiB7XG4gICAgZGV0ZXJtaW5lU3RhcnRpbmdGYWN0b3I6IGZyb21Qcm9taXNlKGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGNsZXJrID0gaW5wdXQucGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyaztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgIGRldGVybWluZVN0YXJ0aW5nU2lnbkluRmFjdG9yKFxuICAgICAgICAgIGNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzLFxuICAgICAgICAgIGNsZXJrLmNsaWVudC5zaWduSW4uaWRlbnRpZmllcixcbiAgICAgICAgICAoX2EgPSBjbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRpc3BsYXlDb25maWcucHJlZmVycmVkU2lnbkluU3RyYXRlZ3lcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KSxcbiAgICBwcmVwYXJlOiBmcm9tUHJvbWlzZShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IHBhcmFtcywgcGFyZW50LCByZXNlbmRhYmxlIH0gPSBpbnB1dDtcbiAgICAgIGNvbnN0IGNsZXJrID0gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyaztcbiAgICAgIGNvbnN0IGN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uID0gY2xlcmsuY2xpZW50LnNpZ25Jbi5maXJzdEZhY3RvclZlcmlmaWNhdGlvbi5leHBpcmVBdDtcbiAgICAgIGNvbnN0IG5lZWRzUHJlcGFyZSA9IHJlc2VuZGFibGUgfHwgIWN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uIHx8IGN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICBpZiAoaXNOb25QcmVwYXJhYmxlU3RyYXRlZ3kocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuc3RyYXRlZ3kpIHx8ICFuZWVkc1ByZXBhcmUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjbGVyay5jbGllbnQuc2lnbkluKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydElzRGVmaW5lZChwYXJhbXMsIFwiRmlyc3QgZmFjdG9yIHBhcmFtc1wiKTtcbiAgICAgIHJldHVybiBhd2FpdCBjbGVyay5jbGllbnQuc2lnbkluLnByZXBhcmVGaXJzdEZhY3RvcihwYXJhbXMpO1xuICAgIH0pLFxuICAgIGF0dGVtcHQ6IGZyb21Qcm9taXNlKGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICBjb25zdCB7IGN1cnJlbnRGYWN0b3IsIGZpZWxkcywgcGFyZW50IH0gPSBpbnB1dDtcbiAgICAgIGFzc2VydElzRGVmaW5lZChjdXJyZW50RmFjdG9yLCBcIkN1cnJlbnQgZmFjdG9yXCIpO1xuICAgICAgbGV0IGF0dGVtcHRQYXJhbXM7XG4gICAgICBjb25zdCBzdHJhdGVneSA9IGN1cnJlbnRGYWN0b3Iuc3RyYXRlZ3k7XG4gICAgICBjb25zdCBjb2RlID0gKF9hID0gZmllbGRzLmdldChcImNvZGVcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gKF9iID0gZmllbGRzLmdldChcInBhc3N3b3JkXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWU7XG4gICAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgXCJwYXNza2V5XCI6IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF1dGhlbnRpY2F0ZVdpdGhQYXNza2V5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBhc3N3b3JkXCI6IHtcbiAgICAgICAgICBhc3NlcnRJc0RlZmluZWQocGFzc3dvcmQsIFwiUGFzc3dvcmRcIik7XG4gICAgICAgICAgYXR0ZW1wdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyZXNldF9wYXNzd29yZF9waG9uZV9jb2RlXCI6XG4gICAgICAgIGNhc2UgXCJyZXNldF9wYXNzd29yZF9lbWFpbF9jb2RlXCI6IHtcbiAgICAgICAgICBhc3NlcnRJc0RlZmluZWQoY29kZSwgXCJDb2RlIGZvciByZXNldHRpbmcgcGhvbmUvZW1haWxcIik7XG4gICAgICAgICAgYXR0ZW1wdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGhvbmVfY29kZVwiOlxuICAgICAgICBjYXNlIFwiZW1haWxfY29kZVwiOiB7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKGNvZGUsIFwiQ29kZSBmb3IgcGhvbmUvZW1haWxcIik7XG4gICAgICAgICAgYXR0ZW1wdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgY29kZVxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIndlYjNfbWV0YW1hc2tfc2lnbmF0dXJlXCI6IHtcbiAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSAoX2MgPSBmaWVsZHMuZ2V0KFwic2lnbmF0dXJlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2MudmFsdWU7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKHNpZ25hdHVyZSwgXCJXZWIzIE1ldGFtYXNrIHNpZ25hdHVyZVwiKTtcbiAgICAgICAgICBhdHRlbXB0UGFyYW1zID0ge1xuICAgICAgICAgICAgc3RyYXRlZ3ksXG4gICAgICAgICAgICBzaWduYXR1cmVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ3ZWIzX2NvaW5iYXNlX3dhbGxldF9zaWduYXR1cmVcIjoge1xuICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IChfZCA9IGZpZWxkcy5nZXQoXCJzaWduYXR1cmVcIikpID09IG51bGwgPyB2b2lkIDAgOiBfZC52YWx1ZTtcbiAgICAgICAgICBhc3NlcnRJc0RlZmluZWQoc2lnbmF0dXJlLCBcIldlYjMgQ29pbmJhc2UgV2FsbGV0IHNpZ25hdHVyZVwiKTtcbiAgICAgICAgICBhdHRlbXB0UGFyYW1zID0ge1xuICAgICAgICAgICAgc3RyYXRlZ3ksXG4gICAgICAgICAgICBzaWduYXR1cmVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ3ZWIzX29reF93YWxsZXRfc2lnbmF0dXJlXCI6IHtcbiAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSAoX2UgPSBmaWVsZHMuZ2V0KFwic2lnbmF0dXJlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2UudmFsdWU7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKHNpZ25hdHVyZSwgXCJXZWIzIE9LWCBXYWxsZXQgc2lnbmF0dXJlXCIpO1xuICAgICAgICAgIGF0dGVtcHRQYXJhbXMgPSB7XG4gICAgICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgICAgIHNpZ25hdHVyZVxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihgSW52YWxpZCBzdHJhdGVneTogJHtzdHJhdGVneX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uYXR0ZW1wdEZpcnN0RmFjdG9yKGF0dGVtcHRQYXJhbXMpO1xuICAgIH0pXG4gIH1cbn0pO1xudmFyIFNpZ25JblNlY29uZEZhY3Rvck1hY2hpbmUgPSBTaWduSW5WZXJpZmljYXRpb25NYWNoaW5lLnByb3ZpZGUoe1xuICBhY3RvcnM6IHtcbiAgICBkZXRlcm1pbmVTdGFydGluZ0ZhY3RvcjogZnJvbVByb21pc2UoXG4gICAgICBhc3luYyAoeyBpbnB1dCB9KSA9PiBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgIGRldGVybWluZVN0YXJ0aW5nU2lnbkluU2Vjb25kRmFjdG9yKFxuICAgICAgICAgIGlucHV0LnBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRTZWNvbmRGYWN0b3JzXG4gICAgICAgIClcbiAgICAgIClcbiAgICApLFxuICAgIHByZXBhcmU6IGZyb21Qcm9taXNlKGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgcGFyYW1zLCBwYXJlbnQsIHJlc2VuZGFibGUgfSA9IGlucHV0O1xuICAgICAgY29uc3QgY2xlcmsgPSBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrO1xuICAgICAgY29uc3QgY3VycmVudFZlcmlmaWNhdGlvbkV4cGlyYXRpb24gPSBjbGVyay5jbGllbnQuc2lnbkluLnNlY29uZEZhY3RvclZlcmlmaWNhdGlvbi5leHBpcmVBdDtcbiAgICAgIGNvbnN0IG5lZWRzUHJlcGFyZSA9IHJlc2VuZGFibGUgfHwgIWN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uIHx8IGN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICBhc3NlcnRJc0RlZmluZWQocGFyYW1zLCBcIlNlY29uZCBmYWN0b3IgcGFyYW1zXCIpO1xuICAgICAgaWYgKHBhcmFtcy5zdHJhdGVneSAhPT0gXCJwaG9uZV9jb2RlXCIgfHwgIW5lZWRzUHJlcGFyZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNsZXJrLmNsaWVudC5zaWduSW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IGNsZXJrLmNsaWVudC5zaWduSW4ucHJlcGFyZVNlY29uZEZhY3Rvcih7XG4gICAgICAgIHN0cmF0ZWd5OiBwYXJhbXMuc3RyYXRlZ3ksXG4gICAgICAgIHBob25lTnVtYmVySWQ6IHBhcmFtcy5waG9uZU51bWJlcklkXG4gICAgICB9KTtcbiAgICB9KSxcbiAgICBhdHRlbXB0OiBmcm9tUHJvbWlzZShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCB7IGZpZWxkcywgcGFyZW50LCBjdXJyZW50RmFjdG9yIH0gPSBpbnB1dDtcbiAgICAgIGNvbnN0IGNvZGUgPSAoX2EgPSBmaWVsZHMuZ2V0KFwiY29kZVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgICAgYXNzZXJ0SXNEZWZpbmVkKGN1cnJlbnRGYWN0b3IsIFwiQ3VycmVudCBmYWN0b3JcIik7XG4gICAgICBhc3NlcnRJc0RlZmluZWQoY29kZSwgXCJDb2RlXCIpO1xuICAgICAgcmV0dXJuIGF3YWl0IHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdHRlbXB0U2Vjb25kRmFjdG9yKHtcbiAgICAgICAgc3RyYXRlZ3k6IGN1cnJlbnRGYWN0b3Iuc3RyYXRlZ3ksXG4gICAgICAgIGNvZGVcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cbn0pO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vcm91dGVyLm1hY2hpbmUudHNcbmltcG9ydCB7IGpvaW5VUkwgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC91cmxcIjtcbmltcG9ydCB7IGlzV2ViQXV0aG5BdXRvZmlsbFN1cHBvcnRlZCB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3dlYmF1dGhuXCI7XG5pbXBvcnQgeyBhbmQsIGFzc2lnbiBhcyBhc3NpZ240LCBlbnF1ZXVlQWN0aW9ucyBhcyBlbnF1ZXVlQWN0aW9uczMsIGZyb21Qcm9taXNlIGFzIGZyb21Qcm9taXNlNSwgbG9nIGFzIGxvZzMsIG5vdCBhcyBub3QzLCBvciwgcmFpc2UsIHNlbmRUbyBhcyBzZW5kVG81LCBzZXR1cCBhcyBzZXR1cDYgfSBmcm9tIFwieHN0YXRlXCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvdGhpcmQtcGFydHkvdGhpcmQtcGFydHkuYWN0b3JzLnRzXG5pbXBvcnQgeyBmcm9tQ2FsbGJhY2ssIGZyb21Qcm9taXNlIGFzIGZyb21Qcm9taXNlMiB9IGZyb20gXCJ4c3RhdGVcIjtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy91dGlscy9jbGVya2pzLnRzXG5mdW5jdGlvbiBpc0NsZXJrSlNFdmVudChldmVudE9iaiwgZXZlbnQpIHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZXZlbnRPYmopLmluY2x1ZGVzKGV2ZW50KTtcbn1cbnZhciBDbGVya0pTTmF2aWdhdGlvbkV2ZW50ID0ge1xuICBjb21wbGV0ZTogXCJDTEVSS0pTLk5BVklHQVRFLkNPTVBMRVRFXCIsXG4gIHNpZ25VcDogXCJDTEVSS0pTLk5BVklHQVRFLlNJR05fVVBcIixcbiAgY29udGludWU6IFwiQ0xFUktKUy5OQVZJR0FURS5DT05USU5VRVwiLFxuICBnZW5lcmljOiBcIkNMRVJLSlMuTkFWSUdBVEUuR0VORVJJQ1wiLFxuICByZXNldFBhc3N3b3JkOiBcIkNMRVJLSlMuTkFWSUdBVEUuUkVTRVRfUEFTU1dPUkRcIixcbiAgc2lnbkluOiBcIkNMRVJLSlMuTkFWSUdBVEUuU0lHTl9JTlwiLFxuICB2ZXJpZmljYXRpb246IFwiQ0xFUktKUy5OQVZJR0FURS5WRVJJRklDQVRJT05cIlxufTtcbmZ1bmN0aW9uIGlzQ2xlcmtKU05hdmlnYXRpb25FdmVudChldmVudCkge1xuICByZXR1cm4gaXNDbGVya0pTRXZlbnQoQ2xlcmtKU05hdmlnYXRpb25FdmVudCwgZXZlbnQpO1xufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3RoaXJkLXBhcnR5L3RoaXJkLXBhcnR5LmFjdG9ycy50c1xudmFyIHJlZGlyZWN0ID0gZnJvbVByb21pc2UyKFxuICBhc3luYyAoeyBpbnB1dDogeyBmbG93LCBwYXJhbXMsIHBhcmVudCB9IH0pID0+IHtcbiAgICBjb25zdCBjbGVyayA9IHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcms7XG4gICAgcmV0dXJuIGNsZXJrLmNsaWVudFtmbG93XS5hdXRoZW50aWNhdGVXaXRoUmVkaXJlY3Qoe1xuICAgICAgcmVkaXJlY3RVcmw6IGNsZXJrLmJ1aWxkVXJsV2l0aEF1dGgocGFyYW1zLnJlZGlyZWN0VXJsIHx8IFwiL1wiKSxcbiAgICAgIHJlZGlyZWN0VXJsQ29tcGxldGU6IGNsZXJrLmJ1aWxkVXJsV2l0aEF1dGgocGFyYW1zLnJlZGlyZWN0VXJsQ29tcGxldGUgfHwgXCIvXCIpLFxuICAgICAgLi4ucGFyYW1zXG4gICAgfSk7XG4gIH1cbik7XG52YXIgaGFuZGxlUmVkaXJlY3RDYWxsYmFjayA9IGZyb21DYWxsYmFjayhcbiAgKHsgc2VuZEJhY2ssIGlucHV0OiBwYXJlbnQgfSkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgY2xlcmsgPSBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrO1xuICAgIGNvbnN0IGRpc3BsYXlDb25maWcgPSAoX2EgPSBjbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRpc3BsYXlDb25maWc7XG4gICAgY29uc3QgY3VzdG9tTmF2aWdhdGUgPSAodG9FdnQpID0+IHtcbiAgICAgIGNvbnN0IHRvID0gdG9FdnQuc3BsaXQoXCIvXCIpLnNsaWNlKC0xKVswXTtcbiAgICAgIGlmIChpc0NsZXJrSlNOYXZpZ2F0aW9uRXZlbnQodG8pKSB7XG4gICAgICAgIHNlbmRCYWNrKHsgdHlwZTogdG8gfSk7XG4gICAgICB9IGVsc2UgaWYgKHRvID09PSAoZGlzcGxheUNvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogZGlzcGxheUNvbmZpZy5zaWduSW5VcmwpKSB7XG4gICAgICAgIHNlbmRCYWNrKHsgdHlwZTogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5zaWduSW4gfSk7XG4gICAgICB9IGVsc2UgaWYgKHRvID09PSAoZGlzcGxheUNvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogZGlzcGxheUNvbmZpZy5zaWduVXBVcmwpKSB7XG4gICAgICAgIHNlbmRCYWNrKHsgdHlwZTogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5zaWduVXAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZW5kQmFjayh7IHR5cGU6IFwiRkFJTFVSRVwiLCBlcnJvcjogbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYFVua25vd24gbmF2aWdhdGlvbiBldmVudDogJHt0b31gKSB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRlZENsZXJrID0gKF9iID0gY2xlcmsuY2xlcmtqcykgIT0gbnVsbCA/IF9iIDogY2xlcms7XG4gICAgdm9pZCBsb2FkZWRDbGVyay5oYW5kbGVSZWRpcmVjdENhbGxiYWNrKFxuICAgICAge1xuICAgICAgICBjb250aW51ZVNpZ25VcFVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5jb250aW51ZSxcbiAgICAgICAgZmlyc3RGYWN0b3JVcmw6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQuc2lnbkluLFxuICAgICAgICByZXNldFBhc3N3b3JkVXJsOiBDbGVya0pTTmF2aWdhdGlvbkV2ZW50LnJlc2V0UGFzc3dvcmQsXG4gICAgICAgIHNlY29uZEZhY3RvclVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5zaWduSW4sXG4gICAgICAgIHZlcmlmeUVtYWlsQWRkcmVzc1VybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC52ZXJpZmljYXRpb24sXG4gICAgICAgIHZlcmlmeVBob25lTnVtYmVyVXJsOiBDbGVya0pTTmF2aWdhdGlvbkV2ZW50LnZlcmlmaWNhdGlvbixcbiAgICAgICAgc2lnblVwVXJsOiBDbGVya0pTTmF2aWdhdGlvbkV2ZW50LnNpZ25VcCxcbiAgICAgICAgc2lnbkluVXJsOiBDbGVya0pTTmF2aWdhdGlvbkV2ZW50LnNpZ25JblxuICAgICAgfSxcbiAgICAgIGN1c3RvbU5hdmlnYXRlXG4gICAgKTtcbiAgICByZXR1cm4gKCkgPT4gdm9pZCAwO1xuICB9XG4pO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3RoaXJkLXBhcnR5L3RoaXJkLXBhcnR5Lm1hY2hpbmUudHNcbmltcG9ydCB7IGFzc2VydEV2ZW50LCBhc3NpZ24gYXMgYXNzaWduMywgbG9nIGFzIGxvZzIsIG5vdCwgc2VuZFRvIGFzIHNlbmRUbzIsIHNldHVwIGFzIHNldHVwMyB9IGZyb20gXCJ4c3RhdGVcIjtcbnZhciBUaGlyZFBhcnR5TWFjaGluZUlkID0gXCJUaGlyZFBhcnR5XCI7XG52YXIgVGhpcmRQYXJ0eU1hY2hpbmUgPSBzZXR1cDMoe1xuICBhY3RvcnM6IHtcbiAgICBoYW5kbGVSZWRpcmVjdENhbGxiYWNrLFxuICAgIHJlZGlyZWN0XG4gIH0sXG4gIGFjdGlvbnM6IHtcbiAgICBsb2dFcnJvcjogbG9nMigoeyBldmVudCB9KSA9PiBgRXJyb3I6ICR7ZXZlbnQudHlwZX1gKSxcbiAgICBhc3NpZ25BY3RpdmVTdHJhdGVneTogYXNzaWduMyh7XG4gICAgICBhY3RpdmVTdHJhdGVneTogKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBhc3NlcnRFdmVudChldmVudCwgXCJSRURJUkVDVFwiKTtcbiAgICAgICAgcmV0dXJuIGV2ZW50LnBhcmFtcy5zdHJhdGVneTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICB1bmFzc2lnbkFjdGl2ZVN0cmF0ZWd5OiBhc3NpZ24zKHtcbiAgICAgIGFjdGl2ZVN0cmF0ZWd5OiBudWxsXG4gICAgfSksXG4gICAgc2VuZFRvTmV4dDogKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LnBhcmVudC5zZW5kKHsgdHlwZTogXCJORVhUXCIgfSksXG4gICAgc2VuZFRvTG9hZGluZyxcbiAgICBzZXRGb3JtRXJyb3JzOiBzZW5kVG8yKFxuICAgICAgKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJFUlJPUlMuU0VUXCIsXG4gICAgICAgICAgZXJyb3I6IGV2ZW50LmVycm9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKVxuICB9LFxuICBndWFyZHM6IHtcbiAgICBpc0V4YW1wbGVNb2RlOiAoeyBjb250ZXh0IH0pID0+IEJvb2xlYW4oY29udGV4dC5wYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmV4YW1wbGVNb2RlKVxuICB9LFxuICB0eXBlczoge31cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICBpZDogVGhpcmRQYXJ0eU1hY2hpbmVJZCxcbiAgY29udGV4dDogKHsgaW5wdXQgfSkgPT4gKHtcbiAgICBhY3RpdmVTdHJhdGVneTogbnVsbCxcbiAgICBiYXNlUGF0aDogaW5wdXQuYmFzZVBhdGgsXG4gICAgZm9ybVJlZjogaW5wdXQuZm9ybVJlZixcbiAgICBmbG93OiBpbnB1dC5mbG93LFxuICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgIGxvYWRpbmdTdGVwOiBcInN0cmF0ZWd5XCJcbiAgfSksXG4gIGluaXRpYWw6IFwiSWRsZVwiLFxuICBzdGF0ZXM6IHtcbiAgICBJZGxlOiB7XG4gICAgICBkZXNjcmlwdGlvbjogXCJTZXRzIHRoaXJkLXBhcnR5IHByb3ZpZGVycyBpZiBub3QgYWxyZWFkeSBzZXQsIGFuZCB3YWl0cyBmb3IgYSByZWRpcmVjdCBvciBjYWxsYmFjayBldmVudFwiLFxuICAgICAgb246IHtcbiAgICAgICAgQ0FMTEJBQ0s6IFwiSGFuZGxpbmdDYWxsYmFja1wiLFxuICAgICAgICBSRURJUkVDVDoge1xuICAgICAgICAgIGd1YXJkOiBub3QoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJSZWRpcmVjdGluZ1wiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgUmVkaXJlY3Rpbmc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlJlZGlyZWN0cyB0byB0aGUgdGhpcmQtcGFydHkgcHJvdmlkZXIgZm9yIGF1dGhlbnRpY2F0aW9uXCIsXG4gICAgICB0YWdzOiBbXCJzdGF0ZTpyZWRpcmVjdFwiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBlbnRyeTogW1wiYXNzaWduQWN0aXZlU3RyYXRlZ3lcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgZXhpdDogW1widW5hc3NpZ25BY3RpdmVTdHJhdGVneVwiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwicmVkaXJlY3RcIixcbiAgICAgICAgc3JjOiBcInJlZGlyZWN0XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgIGFzc2VydEV2ZW50KGV2ZW50LCBcIlJFRElSRUNUXCIpO1xuICAgICAgICAgIGNvbnN0IGxlZ2FsQWNjZXB0ZWRGaWVsZCA9IChfYSA9IGNvbnRleHQuZm9ybVJlZi5nZXRTbmFwc2hvdCgpLmNvbnRleHQuZmllbGRzLmdldChcImxlZ2FsQWNjZXB0ZWRcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jaGVja2VkO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXNlUGF0aDogY29udGV4dC5iYXNlUGF0aCxcbiAgICAgICAgICAgIGZsb3c6IGNvbnRleHQuZmxvdyxcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAuLi5ldmVudC5wYXJhbXMsXG4gICAgICAgICAgICAgIGxlZ2FsQWNjZXB0ZWQ6IGxlZ2FsQWNjZXB0ZWRGaWVsZCB8fCB2b2lkIDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50XG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFwic2V0Rm9ybUVycm9yc1wiLFxuICAgICAgICAgIHRhcmdldDogXCJJZGxlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgSGFuZGxpbmdDYWxsYmFjazoge1xuICAgICAgZGVzY3JpcHRpb246IFwiSGFuZGxlcyB0aGUgY2FsbGJhY2sgZnJvbSB0aGUgdGhpcmQtcGFydHkgcHJvdmlkZXJcIixcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmNhbGxiYWNrXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJoYW5kbGVSZWRpcmVjdENhbGxiYWNrXCIsXG4gICAgICAgIHNyYzogXCJoYW5kbGVSZWRpcmVjdENhbGxiYWNrXCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+IGNvbnRleHQucGFyZW50LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wibG9nRXJyb3JcIiwgXCJzZXRGb3JtRXJyb3JzXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJJZGxlXCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiQ0xFUktKUy5OQVZJR0FURS4qXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInNlbmRUb05leHRcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiSWRsZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3V0aWxzL25leHQudHNcbmZ1bmN0aW9uIHNob3VsZFVzZVZpcnR1YWxSb3V0aW5nKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIXdpbmRvdy5uZXh0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB3aW5kb3cubmV4dC52ZXJzaW9uIDwgTkVYVF9XSU5ET1dfSElTVE9SWV9TVVBQT1JUX1ZFUlNJT047XG59XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi9yZXNldC1wYXNzd29yZC5tYWNoaW5lLnRzXG5pbXBvcnQgeyBmcm9tUHJvbWlzZSBhcyBmcm9tUHJvbWlzZTMsIHNlbmRUbyBhcyBzZW5kVG8zLCBzZXR1cCBhcyBzZXR1cDQgfSBmcm9tIFwieHN0YXRlXCI7XG52YXIgU2lnbkluUmVzZXRQYXNzd29yZE1hY2hpbmVJZCA9IFwiU2lnbkluUmVzZXRQYXNzd29yZE1hY2hpbmVcIjtcbnZhciBTaWduSW5SZXNldFBhc3N3b3JkTWFjaGluZSA9IHNldHVwNCh7XG4gIGFjdG9yczoge1xuICAgIGF0dGVtcHQ6IGZyb21Qcm9taXNlMyhcbiAgICAgICh7IGlucHV0OiB7IGZpZWxkcywgcGFyZW50IH0gfSkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9ICgoX2EgPSBmaWVsZHMuZ2V0KFwicGFzc3dvcmRcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZSkgfHwgXCJcIjtcbiAgICAgICAgY29uc3Qgc2lnbk91dE9mT3RoZXJTZXNzaW9ucyA9ICgoX2IgPSBmaWVsZHMuZ2V0KFwic2lnbk91dE9mT3RoZXJTZXNzaW9uc1wiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNoZWNrZWQpIHx8IGZhbHNlO1xuICAgICAgICByZXR1cm4gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLnJlc2V0UGFzc3dvcmQoeyBwYXNzd29yZCwgc2lnbk91dE9mT3RoZXJTZXNzaW9ucyB9KTtcbiAgICAgIH1cbiAgICApXG4gIH0sXG4gIGFjdGlvbnM6IHtcbiAgICBzZW5kVG9Mb2FkaW5nLFxuICAgIHNlbmRUb05leHQ6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IGNvbnRleHQucGFyZW50LnNlbmQoeyB0eXBlOiBcIk5FWFRcIiwgcmVzb3VyY2U6IGV2ZW50Lm91dHB1dCB9KSxcbiAgICBzZXRGb3JtRXJyb3JzOiBzZW5kVG8zKFxuICAgICAgKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJFUlJPUlMuU0VUXCIsXG4gICAgICAgICAgZXJyb3I6IGV2ZW50LmVycm9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKVxuICB9LFxuICB0eXBlczoge31cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICBpZDogU2lnbkluUmVzZXRQYXNzd29yZE1hY2hpbmVJZCxcbiAgY29udGV4dDogKHsgaW5wdXQgfSkgPT4gKHtcbiAgICBsb2FkaW5nU3RlcDogXCJyZXNldC1wYXNzd29yZFwiLFxuICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgIGZvcm1SZWY6IGlucHV0LmZvcm1SZWZcbiAgfSksXG4gIGluaXRpYWw6IFwiUGVuZGluZ1wiLFxuICBzdGF0ZXM6IHtcbiAgICBQZW5kaW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTpwZW5kaW5nXCJdLFxuICAgICAgZGVzY3JpcHRpb246IFwiV2FpdGluZyBmb3IgdXNlciBpbnB1dFwiLFxuICAgICAgb246IHtcbiAgICAgICAgU1VCTUlUOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEF0dGVtcHRpbmc6IHtcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmF0dGVtcHRpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgZW50cnk6IFwic2VuZFRvTG9hZGluZ1wiLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImF0dGVtcHRcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50LFxuICAgICAgICAgIGZpZWxkczogY29udGV4dC5mb3JtUmVmLmdldFNuYXBzaG90KCkuY29udGV4dC5maWVsZHNcbiAgICAgICAgfSksXG4gICAgICAgIG9uRG9uZToge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNlbmRUb05leHRcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdXG4gICAgICAgIH0sXG4gICAgICAgIG9uRXJyb3I6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRGb3JtRXJyb3JzXCIsIFwic2VuZFRvTG9hZGluZ1wiXSxcbiAgICAgICAgICB0YXJnZXQ6IFwiUGVuZGluZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vc3RhcnQubWFjaGluZS50c1xuaW1wb3J0IHsgYXNzZXJ0RXZlbnQgYXMgYXNzZXJ0RXZlbnQyLCBlbnF1ZXVlQWN0aW9ucyBhcyBlbnF1ZXVlQWN0aW9uczIsIGZyb21Qcm9taXNlIGFzIGZyb21Qcm9taXNlNCwgbm90IGFzIG5vdDIsIHNlbmRUbyBhcyBzZW5kVG80LCBzZXR1cCBhcyBzZXR1cDUgfSBmcm9tIFwieHN0YXRlXCI7XG52YXIgRElTQUJMRUFCTEVfRklFTERTID0gW1wiZW1haWxBZGRyZXNzXCIsIFwicGhvbmVOdW1iZXJcIl07XG52YXIgU2lnbkluU3RhcnRNYWNoaW5lSWQgPSBcIlNpZ25JblN0YXJ0XCI7XG52YXIgU2lnbkluU3RhcnRNYWNoaW5lID0gc2V0dXA1KHtcbiAgYWN0b3JzOiB7XG4gICAgYXR0ZW1wdFBhc3NrZXk6IGZyb21Qcm9taXNlNCgoeyBpbnB1dDogeyBwYXJlbnQsIGZsb3cgfSB9KSA9PiB7XG4gICAgICByZXR1cm4gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF1dGhlbnRpY2F0ZVdpdGhQYXNza2V5KHtcbiAgICAgICAgZmxvd1xuICAgICAgfSk7XG4gICAgfSksXG4gICAgYXR0ZW1wdFdlYjM6IGZyb21Qcm9taXNlNChcbiAgICAgICh7IGlucHV0OiB7IHBhcmVudCwgc3RyYXRlZ3kgfSB9KSA9PiB7XG4gICAgICAgIGlmIChzdHJhdGVneSA9PT0gXCJ3ZWIzX21ldGFtYXNrX3NpZ25hdHVyZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdXRoZW50aWNhdGVXaXRoTWV0YW1hc2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyYXRlZ3kgPT09IFwid2ViM19jb2luYmFzZV93YWxsZXRfc2lnbmF0dXJlXCIpIHtcbiAgICAgICAgICByZXR1cm4gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF1dGhlbnRpY2F0ZVdpdGhDb2luYmFzZVdhbGxldCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJhdGVneSA9PT0gXCJ3ZWIzX29reF93YWxsZXRfc2lnbmF0dXJlXCIpIHtcbiAgICAgICAgICByZXR1cm4gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF1dGhlbnRpY2F0ZVdpdGhPS1hXYWxsZXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihgVW5zdXBwb3J0ZWQgV2ViMyBzdHJhdGVneTogJHtzdHJhdGVneX1gKTtcbiAgICAgIH1cbiAgICApLFxuICAgIGF0dGVtcHQ6IGZyb21Qcm9taXNlNCgoeyBpbnB1dDogeyBmaWVsZHMsIHBhcmVudCwgcGFyYW1zIH0gfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgY2xlcmsgPSBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrO1xuICAgICAgY29uc3QgcGFzc3dvcmQgPSBmaWVsZHMuZ2V0KFwicGFzc3dvcmRcIik7XG4gICAgICBjb25zdCBpZGVudGlmaWVyID0gZmllbGRzLmdldChcImlkZW50aWZpZXJcIik7XG4gICAgICBjb25zdCBwYXNzd29yZFBhcmFtcyA9IChwYXNzd29yZCA9PSBudWxsID8gdm9pZCAwIDogcGFzc3dvcmQudmFsdWUpID8ge1xuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUsXG4gICAgICAgIHN0cmF0ZWd5OiBcInBhc3N3b3JkXCJcbiAgICAgIH0gOiB7fTtcbiAgICAgIHJldHVybiBjbGVyay5jbGllbnQuc2lnbkluLmNyZWF0ZSh7XG4gICAgICAgIC4uLnBhc3N3b3JkUGFyYW1zLFxuICAgICAgICAuLi4ocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMudGlja2V0KSA/IHBhcmFtcyA6IHtcbiAgICAgICAgICBpZGVudGlmaWVyOiAoX2EgPSBpZGVudGlmaWVyID09IG51bGwgPyB2b2lkIDAgOiBpZGVudGlmaWVyLnZhbHVlKSAhPSBudWxsID8gX2EgOiBcIlwiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pXG4gIH0sXG4gIGFjdGlvbnM6IHtcbiAgICBzZW5kVG9OZXh0OiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7IHR5cGU6IFwiTkVYVFwiLCByZXNvdXJjZTogZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50Lm91dHB1dCB9KTtcbiAgICB9LFxuICAgIHNlbmRUb0xvYWRpbmcsXG4gICAgc2V0Rm9ybURpc2FibGVkVGlja2V0RmllbGRzOiBlbnF1ZXVlQWN0aW9uczIoKHsgY29udGV4dCwgZW5xdWV1ZSB9KSA9PiB7XG4gICAgICBpZiAoIWNvbnRleHQudGlja2V0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRGaWVsZHMgPSBjb250ZXh0LmZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0LmZpZWxkcztcbiAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBESVNBQkxFQUJMRV9GSUVMRFMpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGaWVsZHMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgZW5xdWV1ZS5zZW5kVG8oY29udGV4dC5mb3JtUmVmLCB7IHR5cGU6IFwiRklFTEQuRElTQUJMRVwiLCBmaWVsZDogeyBuYW1lIH0gfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBzZXRGb3JtRXJyb3JzOiBzZW5kVG80KFxuICAgICAgKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGFzc2VydEFjdG9yRXZlbnRFcnJvcihldmVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJFUlJPUlMuU0VUXCIsXG4gICAgICAgICAgZXJyb3I6IGV2ZW50LmVycm9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKVxuICB9LFxuICBndWFyZHM6IHtcbiAgICBoYXNUaWNrZXQ6ICh7IGNvbnRleHQgfSkgPT4gQm9vbGVhbihjb250ZXh0LnRpY2tldCksXG4gICAgaXNFeGFtcGxlTW9kZTogKHsgY29udGV4dCB9KSA9PiBCb29sZWFuKGNvbnRleHQucGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5leGFtcGxlTW9kZSlcbiAgfSxcbiAgdHlwZXM6IHt9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgaWQ6IFNpZ25JblN0YXJ0TWFjaGluZUlkLFxuICBjb250ZXh0OiAoeyBpbnB1dCB9KSA9PiAoe1xuICAgIGJhc2VQYXRoOiBpbnB1dC5iYXNlUGF0aCB8fCBTSUdOX0lOX0RFRkFVTFRfQkFTRV9QQVRILFxuICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgIGZvcm1SZWY6IGlucHV0LmZvcm1SZWYsXG4gICAgbG9hZGluZ1N0ZXA6IFwic3RhcnRcIixcbiAgICB0aWNrZXQ6IGlucHV0LnRpY2tldFxuICB9KSxcbiAgaW5pdGlhbDogXCJJbml0XCIsXG4gIHN0YXRlczoge1xuICAgIEluaXQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkhhbmRsZSB0aWNrZXQsIGlmIHByZXNlbnQ7IEVsc2UsIGRlZmF1bHQgdG8gUGVuZGluZyBzdGF0ZS5cIixcbiAgICAgIGFsd2F5czogW1xuICAgICAgICB7XG4gICAgICAgICAgZ3VhcmQ6IFwiaGFzVGlja2V0XCIsXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBQZW5kaW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTpwZW5kaW5nXCJdLFxuICAgICAgZGVzY3JpcHRpb246IFwiV2FpdGluZyBmb3IgdXNlciBpbnB1dFwiLFxuICAgICAgb246IHtcbiAgICAgICAgU1VCTUlUOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZXCI6IHtcbiAgICAgICAgICBndWFyZDogbm90MihcImlzRXhhbXBsZU1vZGVcIiksXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdQYXNza2V5XCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZLkFVVE9GSUxMXCI6IHtcbiAgICAgICAgICBndWFyZDogbm90MihcImlzRXhhbXBsZU1vZGVcIiksXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdQYXNza2V5QXV0b0ZpbGxcIixcbiAgICAgICAgICByZWVudGVyOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBcIkFVVEhFTlRJQ0FURS5XRUIzXCI6IHtcbiAgICAgICAgICBndWFyZDogbm90MihcImlzRXhhbXBsZU1vZGVcIiksXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdXZWIzXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTphdHRlbXB0aW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGVudHJ5OiBcInNlbmRUb0xvYWRpbmdcIixcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJhdHRlbXB0XCIsXG4gICAgICAgIHNyYzogXCJhdHRlbXB0XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0UGFyYW1zID0ge1xuICAgICAgICAgICAgZmllbGRzOiBjb250ZXh0LmZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0LmZpZWxkcyxcbiAgICAgICAgICAgIHBhcmVudDogY29udGV4dC5wYXJlbnRcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNvbnRleHQudGlja2V0ID8ge1xuICAgICAgICAgICAgc3RyYXRlZ3k6IFwidGlja2V0XCIsXG4gICAgICAgICAgICB0aWNrZXQ6IGNvbnRleHQudGlja2V0XG4gICAgICAgICAgfSA6IHt9O1xuICAgICAgICAgIHJldHVybiB7IC4uLmRlZmF1bHRQYXJhbXMsIHBhcmFtcyB9O1xuICAgICAgICB9LFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRGb3JtRGlzYWJsZWRUaWNrZXRGaWVsZHNcIiwgXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybURpc2FibGVkVGlja2V0RmllbGRzXCIsIFwic2V0Rm9ybUVycm9yc1wiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nUGFzc2tleToge1xuICAgICAgdGFnczogW1wic3RhdGU6YXR0ZW1wdGluZ1wiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBlbnRyeTogXCJzZW5kVG9Mb2FkaW5nXCIsXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiYXR0ZW1wdFBhc3NrZXlcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRQYXNza2V5XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICBmbG93OiBcImRpc2NvdmVyYWJsZVwiXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nUGFzc2tleUF1dG9GaWxsOiB7XG4gICAgICBvbjoge1xuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZXCI6IHtcbiAgICAgICAgICBndWFyZDogbm90MihcImlzRXhhbXBsZU1vZGVcIiksXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdQYXNza2V5XCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBTVUJNSVQ6IHtcbiAgICAgICAgICBndWFyZDogbm90MihcImlzRXhhbXBsZU1vZGVcIiksXG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiYXR0ZW1wdFBhc3NrZXlBdXRvZmlsbFwiLFxuICAgICAgICBzcmM6IFwiYXR0ZW1wdFBhc3NrZXlcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50LFxuICAgICAgICAgIGZsb3c6IFwiYXV0b2ZpbGxcIlxuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2VuZFRvTmV4dFwiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiXSxcbiAgICAgICAgICB0YXJnZXQ6IFwiUGVuZGluZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEF0dGVtcHRpbmdXZWIzOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTphdHRlbXB0aW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGVudHJ5OiBcInNlbmRUb0xvYWRpbmdcIixcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJhdHRlbXB0V2ViM1wiLFxuICAgICAgICBzcmM6IFwiYXR0ZW1wdFdlYjNcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgICBhc3NlcnRFdmVudDIoZXZlbnQsIFwiQVVUSEVOVElDQVRFLldFQjNcIik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcmVudDogY29udGV4dC5wYXJlbnQsXG4gICAgICAgICAgICBzdHJhdGVneTogZXZlbnQuc3RyYXRlZ3lcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy9zaWduLWluL3JvdXRlci5tYWNoaW5lLnRzXG52YXIgaXNDdXJyZW50UGF0aCA9IChwYXRoKSA9PiAoeyBjb250ZXh0IH0sIF9wYXJhbXMpID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgcmV0dXJuIChfYiA9IChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWF0Y2gocGF0aCkpICE9IG51bGwgPyBfYiA6IGZhbHNlO1xufTtcbnZhciBuZWVkc1N0YXR1cyA9IChzdGF0dXMpID0+ICh7IGNvbnRleHQsIGV2ZW50IH0sIF8pID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgcmV0dXJuICgoX2EgPSBldmVudCA9PSBudWxsID8gdm9pZCAwIDogZXZlbnQucmVzb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdGF0dXMpID09PSBzdGF0dXMgfHwgKChfYiA9IGNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYi5jbGllbnQuc2lnbkluLnN0YXR1cykgPT09IHN0YXR1cztcbn07XG52YXIgU2lnbkluUm91dGVyTWFjaGluZUlkID0gXCJTaWduSW5Sb3V0ZXJcIjtcbnZhciBTaWduSW5Sb3V0ZXJNYWNoaW5lID0gc2V0dXA2KHtcbiAgYWN0b3JzOiB7XG4gICAgZmlyc3RGYWN0b3JNYWNoaW5lOiBTaWduSW5GaXJzdEZhY3Rvck1hY2hpbmUsXG4gICAgZm9ybU1hY2hpbmU6IEZvcm1NYWNoaW5lLFxuICAgIHJlc2V0UGFzc3dvcmRNYWNoaW5lOiBTaWduSW5SZXNldFBhc3N3b3JkTWFjaGluZSxcbiAgICBzdGFydE1hY2hpbmU6IFNpZ25JblN0YXJ0TWFjaGluZSxcbiAgICBzZWNvbmRGYWN0b3JNYWNoaW5lOiBTaWduSW5TZWNvbmRGYWN0b3JNYWNoaW5lLFxuICAgIHRoaXJkUGFydHlNYWNoaW5lOiBUaGlyZFBhcnR5TWFjaGluZSxcbiAgICB3ZWJBdXRobkF1dG9maWxsU3VwcG9ydDogZnJvbVByb21pc2U1KCgpID0+IGlzV2ViQXV0aG5BdXRvZmlsbFN1cHBvcnRlZCgpKVxuICB9LFxuICBhY3Rpb25zOiB7XG4gICAgY2xlYXJGb3JtRXJyb3JzOiBzZW5kVG81KCh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5mb3JtUmVmLCB7IHR5cGU6IFwiRVJST1JTLkNMRUFSXCIgfSksXG4gICAgbmF2aWdhdGVJbnRlcm5hbDogKHsgY29udGV4dCB9LCB7IHBhdGgsIGZvcmNlID0gZmFsc2UgfSkgPT4ge1xuICAgICAgaWYgKCFjb250ZXh0LnJvdXRlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWZvcmNlICYmIHNob3VsZFVzZVZpcnR1YWxSb3V0aW5nKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnRleHQuZXhhbXBsZU1vZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZWRQYXRoID0gam9pblVSTChjb250ZXh0LnJvdXRlci5iYXNlUGF0aCwgcGF0aCk7XG4gICAgICBpZiAocmVzb2x2ZWRQYXRoID09PSBjb250ZXh0LnJvdXRlci5wYXRobmFtZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQucm91dGVyLnNoYWxsb3dQdXNoKHJlc29sdmVkUGF0aCk7XG4gICAgfSxcbiAgICBuYXZpZ2F0ZUV4dGVybmFsOiAoeyBjb250ZXh0IH0sIHsgcGF0aCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4gKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wdXNoKHBhdGgpO1xuICAgIH0sXG4gICAgcmFpc2VOZXh0OiByYWlzZSh7IHR5cGU6IFwiTkVYVFwiIH0pLFxuICAgIHNldEFjdGl2ZTogZW5xdWV1ZUFjdGlvbnMzKCh7IGVucXVldWUsIGNoZWNrLCBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBpZiAoY2hlY2soXCJpc0V4YW1wbGVNb2RlXCIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlkID0gZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50LmlkO1xuICAgICAgY29uc3QgbGFzdEFjdGl2ZVNlc3Npb25JZCA9IGNvbnRleHQuY2xlcmsuY2xpZW50Lmxhc3RBY3RpdmVTZXNzaW9uSWQ7XG4gICAgICBjb25zdCBjcmVhdGVkU2Vzc2lvbklkID0gKChldmVudCA9PSBudWxsID8gdm9pZCAwIDogZXZlbnQucmVzb3VyY2UpIHx8IGNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25JbikuY3JlYXRlZFNlc3Npb25JZDtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBpZCB8fCBjcmVhdGVkU2Vzc2lvbklkIHx8IGxhc3RBY3RpdmVTZXNzaW9uSWQgfHwgbnVsbDtcbiAgICAgIHZvaWQgY29udGV4dC5jbGVyay5zZXRBY3RpdmUoe1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICByZWRpcmVjdFVybDogKChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc2VhcmNoUGFyYW1zKCkuZ2V0KFwicmVkaXJlY3RfdXJsXCIpKSB8fCBjb250ZXh0LmNsZXJrLmJ1aWxkQWZ0ZXJTaWduSW5VcmwoKVxuICAgICAgfSk7XG4gICAgICBlbnF1ZXVlLnJhaXNlKHsgdHlwZTogXCJSRVNFVFwiIH0sIHsgZGVsYXk6IDJlMyB9KTtcbiAgICB9KSxcbiAgICBzZXRFcnJvcjogYXNzaWduNCh7XG4gICAgICBlcnJvcjogKF8sIHsgZXJyb3IgfSkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiVW5rbm93biBlcnJvclwiKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBzZXRGb3JtRXJyb3JzOiAoeyBjb250ZXh0IH0sIHBhcmFtcykgPT4gc2VuZFRvNShjb250ZXh0LmZvcm1SZWYsIHtcbiAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgZXJyb3I6IHBhcmFtcy5lcnJvclxuICAgIH0pLFxuICAgIHNldEZvcm1PQXV0aEVycm9yczogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICBjb25zdCBlcnJvck9yaWcgPSBjb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uZmlyc3RGYWN0b3JWZXJpZmljYXRpb24uZXJyb3I7XG4gICAgICBpZiAoIWVycm9yT3JpZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgZXJyb3I7XG4gICAgICBzd2l0Y2ggKGVycm9yT3JpZy5jb2RlKSB7XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuTk9UX0FMTE9XRURfVE9fU0lHTl9VUDpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5PQVVUSF9BQ0NFU1NfREVOSUVEOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLk5PVF9BTExPV0VEX0FDQ0VTUzpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5TQU1MX1VTRVJfQVRUUklCVVRFX01JU1NJTkc6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuT0FVVEhfRU1BSUxfRE9NQUlOX1JFU0VSVkVEX0JZX1NBTUw6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuVVNFUl9MT0NLRUQ6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuRU5URVJQUklTRV9TU09fVVNFUl9BVFRSSUJVVEVfTUlTU0lORzpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5FTlRFUlBSSVNFX1NTT19FTUFJTF9BRERSRVNTX0RPTUFJTl9NSVNNQVRDSDpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5FTlRFUlBSSVNFX1NTT19IT1NURURfRE9NQUlOX01JU01BVENIOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLlNBTUxfRU1BSUxfQUREUkVTU19ET01BSU5fTUlTTUFUQ0g6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX01FTUJFUlNISVBfUVVPVEFfRVhDRUVERURfRk9SX1NTTzpcbiAgICAgICAgICBlcnJvciA9IG5ldyBDbGVya0VsZW1lbnRzRXJyb3IoZXJyb3JPcmlnLmNvZGUsIGVycm9yT3JpZy5sb25nTWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBlcnJvciA9IG5ldyBDbGVya0VsZW1lbnRzRXJyb3IoXG4gICAgICAgICAgICBcInVuYWJsZV90b19jb21wbGV0ZVwiLFxuICAgICAgICAgICAgXCJVbmFibGUgdG8gY29tcGxldGUgYWN0aW9uIGF0IHRoaXMgdGltZS4gSWYgdGhlIHByb2JsZW0gcGVyc2lzdHMgcGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC5cIlxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb250ZXh0LmZvcm1SZWYuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgICBlcnJvclxuICAgICAgfSk7XG4gICAgfSxcbiAgICB0cmFuc2ZlcjogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgX19jbGVya190cmFuc2ZlcjogXCIxXCIgfSk7XG4gICAgICAoX2EgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnB1c2goYCR7Y29udGV4dC5zaWduVXBQYXRofT8ke3NlYXJjaFBhcmFtc31gKTtcbiAgICB9XG4gIH0sXG4gIGd1YXJkczoge1xuICAgIGhhc0F1dGhlbnRpY2F0ZWRWaWFDbGVya0pTOiAoeyBjb250ZXh0IH0pID0+IEJvb2xlYW4oY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLnN0YXR1cyA9PT0gbnVsbCAmJiBjb250ZXh0LmNsZXJrLmNsaWVudC5sYXN0QWN0aXZlU2Vzc2lvbklkKSxcbiAgICBoYXNPQXV0aEVycm9yOiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgIHJldHVybiBCb29sZWFuKChfZCA9IChfYyA9IChfYiA9IChfYSA9IGNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jbGllbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5zaWduSW4pID09IG51bGwgPyB2b2lkIDAgOiBfYy5maXJzdEZhY3RvclZlcmlmaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmVycm9yKTtcbiAgICB9LFxuICAgIGhhc1Jlc291cmNlOiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgcmV0dXJuIEJvb2xlYW4oKF9jID0gKF9iID0gKF9hID0gY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNsaWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNpZ25JbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnN0YXR1cyk7XG4gICAgfSxcbiAgICBoYXNUaWNrZXQ6ICh7IGNvbnRleHQgfSkgPT4gQm9vbGVhbihjb250ZXh0LnRpY2tldCksXG4gICAgaXNMb2dnZWRJbkFuZFNpbmdsZVNlc3Npb246IGFuZChbXCJpc0xvZ2dlZEluXCIsIFwiaXNTaW5nbGVTZXNzaW9uTW9kZVwiLCBub3QzKFwiaXNFeGFtcGxlTW9kZVwiKV0pLFxuICAgIGlzQWN0aXZlUGF0aFJvb3Q6IGlzQ3VycmVudFBhdGgoXCIvXCIpLFxuICAgIGlzQ29tcGxldGU6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50LnJlc291cmNlO1xuICAgICAgY29uc3Qgc2lnbkluID0gY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluO1xuICAgICAgcmV0dXJuIChyZXNvdXJjZSA9PSBudWxsID8gdm9pZCAwIDogcmVzb3VyY2Uuc3RhdHVzKSA9PT0gXCJjb21wbGV0ZVwiICYmIEJvb2xlYW4ocmVzb3VyY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc291cmNlLmNyZWF0ZWRTZXNzaW9uSWQpIHx8IHNpZ25Jbi5zdGF0dXMgPT09IFwiY29tcGxldGVcIiAmJiBCb29sZWFuKHNpZ25Jbi5jcmVhdGVkU2Vzc2lvbklkKTtcbiAgICB9LFxuICAgIGlzTG9nZ2VkSW46ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIEJvb2xlYW4oKF9hID0gY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnVzZXIpO1xuICAgIH0sXG4gICAgaXNTaW5nbGVTZXNzaW9uTW9kZTogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICB2YXIgX2EsIF9iO1xuICAgICAgcmV0dXJuIEJvb2xlYW4oKF9iID0gKF9hID0gY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9fdW5zdGFibGVfX2Vudmlyb25tZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuYXV0aENvbmZpZy5zaW5nbGVTZXNzaW9uTW9kZSk7XG4gICAgfSxcbiAgICBpc0V4YW1wbGVNb2RlOiAoeyBjb250ZXh0IH0pID0+IEJvb2xlYW4oY29udGV4dC5leGFtcGxlTW9kZSksXG4gICAgbmVlZHNTdGFydDogb3IoW25vdDMoXCJoYXNSZXNvdXJjZVwiKSwgXCJzdGF0dXNOZWVkc0lkZW50aWZpZXJcIiwgaXNDdXJyZW50UGF0aChcIi9cIildKSxcbiAgICBuZWVkc0ZpcnN0RmFjdG9yOiBhbmQoW1wic3RhdHVzTmVlZHNGaXJzdEZhY3RvclwiLCBpc0N1cnJlbnRQYXRoKFwiL2NvbnRpbnVlXCIpXSksXG4gICAgbmVlZHNTZWNvbmRGYWN0b3I6IGFuZChbXCJzdGF0dXNOZWVkc1NlY29uZEZhY3RvclwiLCBpc0N1cnJlbnRQYXRoKFwiL2NvbnRpbnVlXCIpXSksXG4gICAgbmVlZHNDYWxsYmFjazogaXNDdXJyZW50UGF0aChTU09fQ0FMTEJBQ0tfUEFUSF9ST1VURSksXG4gICAgbmVlZHNDaG9vc2VTZXNzaW9uOiBpc0N1cnJlbnRQYXRoKENIT09TRV9TRVNTSU9OX1BBVEhfUk9VVEUpLFxuICAgIG5lZWRzTmV3UGFzc3dvcmQ6IGFuZChbXCJzdGF0dXNOZWVkc05ld1Bhc3N3b3JkXCIsIGlzQ3VycmVudFBhdGgoXCIvbmV3LXBhc3N3b3JkXCIpXSksXG4gICAgc3RhdHVzTmVlZHNJZGVudGlmaWVyOiBuZWVkc1N0YXR1cyhcIm5lZWRzX2lkZW50aWZpZXJcIiksXG4gICAgc3RhdHVzTmVlZHNGaXJzdEZhY3RvcjogbmVlZHNTdGF0dXMoXCJuZWVkc19maXJzdF9mYWN0b3JcIiksXG4gICAgc3RhdHVzTmVlZHNTZWNvbmRGYWN0b3I6IG5lZWRzU3RhdHVzKFwibmVlZHNfc2Vjb25kX2ZhY3RvclwiKSxcbiAgICBzdGF0dXNOZWVkc05ld1Bhc3N3b3JkOiBuZWVkc1N0YXR1cyhcIm5lZWRzX25ld19wYXNzd29yZFwiKVxuICB9LFxuICB0eXBlczoge31cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICBpZDogU2lnbkluUm91dGVyTWFjaGluZUlkLFxuICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gU2V0IGluIElOSVQgZXZlbnRcbiAgY29udGV4dDoge30sXG4gIGluaXRpYWw6IFwiSWRsZVwiLFxuICBvbjoge1xuICAgIFwiQVVUSEVOVElDQVRFLk9BVVRIXCI6IHtcbiAgICAgIGFjdGlvbnM6IHNlbmRUbzUoVGhpcmRQYXJ0eU1hY2hpbmVJZCwgKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJSRURJUkVDVFwiLFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgc3RyYXRlZ3k6IGV2ZW50LnN0cmF0ZWd5LFxuICAgICAgICAgICAgcmVkaXJlY3RVcmw6IGAkeygoX2EgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1vZGUpID09PSBST1VUSU5HLnZpcnR1YWwgPyAoX2IgPSBjb250ZXh0LmNsZXJrLl9fdW5zdGFibGVfX2Vudmlyb25tZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuZGlzcGxheUNvbmZpZy5zaWduSW5VcmwgOiAoX2MgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmJhc2VQYXRofSR7U1NPX0NBTExCQUNLX1BBVEhfUk9VVEV9YCxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsQ29tcGxldGU6ICgoX2QgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnNlYXJjaFBhcmFtcygpLmdldChcInJlZGlyZWN0X3VybFwiKSkgfHwgY29udGV4dC5jbGVyay5idWlsZEFmdGVyU2lnbkluVXJsKClcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJBVVRIRU5USUNBVEUuU0FNTFwiOiB7XG4gICAgICBhY3Rpb25zOiBzZW5kVG81KFRoaXJkUGFydHlNYWNoaW5lSWQsICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiUkVESVJFQ1RcIixcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5OiBcInNhbWxcIixcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IChfYSA9IGNvbnRleHQuZm9ybVJlZi5nZXRTbmFwc2hvdCgpLmNvbnRleHQuZmllbGRzLmdldChcImlkZW50aWZpZXJcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsOiBgJHsoKF9iID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYi5tb2RlKSA9PT0gUk9VVElORy52aXJ0dWFsID8gKF9jID0gY29udGV4dC5jbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmRpc3BsYXlDb25maWcuc2lnbkluVXJsIDogKF9kID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZC5iYXNlUGF0aH0ke1NTT19DQUxMQkFDS19QQVRIX1JPVVRFfWAsXG4gICAgICAgICAgICByZWRpcmVjdFVybENvbXBsZXRlOiAoKF9lID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZS5zZWFyY2hQYXJhbXMoKS5nZXQoXCJyZWRpcmVjdF91cmxcIikpIHx8IGNvbnRleHQuY2xlcmsuYnVpbGRBZnRlclNpZ25JblVybCgpXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRk9STS5BVFRBQ0hcIjoge1xuICAgICAgZGVzY3JpcHRpb246IFwiQXR0YWNoL3JlLWF0dGFjaCB0aGUgZm9ybSB0byB0aGUgcm91dGVyLlwiLFxuICAgICAgYWN0aW9uczogZW5xdWV1ZUFjdGlvbnMzKCh7IGVucXVldWUsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgZW5xdWV1ZS5hc3NpZ24oe1xuICAgICAgICAgIGZvcm1SZWY6IGV2ZW50LmZvcm1SZWZcbiAgICAgICAgfSk7XG4gICAgICAgIGVucXVldWUucmFpc2UoeyB0eXBlOiBcIlJFU0VULlNURVBcIiB9KTtcbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIk5BVklHQVRFLlBSRVZJT1VTXCI6IFwiLkhpc3RcIixcbiAgICBcIk5BVklHQVRFLlNUQVJUXCI6IFwiLlN0YXJ0XCIsXG4gICAgTE9BRElORzoge1xuICAgICAgYWN0aW9uczogYXNzaWduNCgoeyBldmVudCB9KSA9PiAoe1xuICAgICAgICBsb2FkaW5nOiB7XG4gICAgICAgICAgaXNMb2FkaW5nOiBldmVudC5pc0xvYWRpbmcsXG4gICAgICAgICAgc3RlcDogZXZlbnQuc3RlcCxcbiAgICAgICAgICBzdHJhdGVneTogZXZlbnQuc3RyYXRlZ3ksXG4gICAgICAgICAgYWN0aW9uOiBldmVudC5hY3Rpb25cbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgfSxcbiAgICBSRVNFVDogXCIuSWRsZVwiXG4gIH0sXG4gIHN0YXRlczoge1xuICAgIElkbGU6IHtcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJ3ZWJBdXRobkF1dG9maWxsXCIsXG4gICAgICAgIHNyYzogXCJ3ZWJBdXRobkF1dG9maWxsU3VwcG9ydFwiLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBhc3NpZ240KHsgd2ViQXV0aG5BdXRvZmlsbFN1cHBvcnQ6ICh7IGV2ZW50IH0pID0+IGV2ZW50Lm91dHB1dCB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgSU5JVDoge1xuICAgICAgICAgIGFjdGlvbnM6IGFzc2lnbjQoKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gKF9hID0gZXZlbnQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc2VhcmNoUGFyYW1zKCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBjbGVyazogZXZlbnQuY2xlcmssXG4gICAgICAgICAgICAgIGV4YW1wbGVNb2RlOiBldmVudC5leGFtcGxlTW9kZSB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgZm9ybVJlZjogZXZlbnQuZm9ybVJlZixcbiAgICAgICAgICAgICAgbG9hZGluZzoge1xuICAgICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcm91dGVyOiBldmVudC5yb3V0ZXIsXG4gICAgICAgICAgICAgIHNpZ25VcFBhdGg6IGV2ZW50LnNpZ25VcFBhdGggfHwgU0lHTl9VUF9ERUZBVUxUX0JBU0VfUEFUSCxcbiAgICAgICAgICAgICAgdGlja2V0OiAoc2VhcmNoUGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBzZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTVMudGlja2V0KSkgfHwgdm9pZCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRhcmdldDogXCJJbml0XCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgSW5pdDoge1xuICAgICAgZW50cnk6IGVucXVldWVBY3Rpb25zMygoeyBjb250ZXh0LCBlbnF1ZXVlLCBzZWxmIH0pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKCFzZWxmLmdldFNuYXBzaG90KCkuY2hpbGRyZW5bVGhpcmRQYXJ0eU1hY2hpbmVJZF0pIHtcbiAgICAgICAgICBlbnF1ZXVlLnNwYXduQ2hpbGQoXCJ0aGlyZFBhcnR5TWFjaGluZVwiLCB7XG4gICAgICAgICAgICBpZDogVGhpcmRQYXJ0eU1hY2hpbmVJZCxcbiAgICAgICAgICAgIHN5c3RlbUlkOiBUaGlyZFBhcnR5TWFjaGluZUlkLFxuICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgYmFzZVBhdGg6IChfYiA9IChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYmFzZVBhdGgpICE9IG51bGwgPyBfYiA6IFNJR05fSU5fREVGQVVMVF9CQVNFX1BBVEgsXG4gICAgICAgICAgICAgIGZsb3c6IFwic2lnbkluXCIsXG4gICAgICAgICAgICAgIGZvcm1SZWY6IGNvbnRleHQuZm9ybVJlZixcbiAgICAgICAgICAgICAgcGFyZW50OiBzZWxmXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgYWx3YXlzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJuZWVkc0NhbGxiYWNrXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcIkNhbGxiYWNrXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcIm5lZWRzQ2hvb3NlU2Vzc2lvblwiLFxuICAgICAgICAgIHRhcmdldDogXCJDaG9vc2VTZXNzaW9uXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcImlzQ29tcGxldGVcIixcbiAgICAgICAgICBhY3Rpb25zOiBcInNldEFjdGl2ZVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJpc0xvZ2dlZEluQW5kU2luZ2xlU2Vzc2lvblwiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgIGxvZzMoXCJBbHJlYWR5IGxvZ2dlZCBpblwiKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJuYXZpZ2F0ZUV4dGVybmFsXCIsXG4gICAgICAgICAgICAgIHBhcmFtczogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBwYXRoOiAoKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zZWFyY2hQYXJhbXMoKS5nZXQoXCJyZWRpcmVjdF91cmxcIikpIHx8IGNvbnRleHQuY2xlcmsuYnVpbGRBZnRlclNpZ25JblVybCgpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcIm5lZWRzU3RhcnRcIixcbiAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL1wiIH0gfSxcbiAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZ3VhcmQ6IFwibmVlZHNGaXJzdEZhY3RvclwiLFxuICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBmb3JjZTogdHJ1ZSwgcGF0aDogXCIvY29udGludWVcIiB9IH0sXG4gICAgICAgICAgdGFyZ2V0OiBcIkZpcnN0RmFjdG9yXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcIm5lZWRzU2Vjb25kRmFjdG9yXCIsXG4gICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IGZvcmNlOiB0cnVlLCBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICB0YXJnZXQ6IFwiU2Vjb25kRmFjdG9yXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcIm5lZWRzTmV3UGFzc3dvcmRcIixcbiAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL3Jlc2V0LXBhc3N3b3JkXCIgfSB9LFxuICAgICAgICAgIHRhcmdldDogXCJSZXNldFBhc3N3b3JkXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBmb3JjZTogdHJ1ZSwgcGF0aDogXCIvXCIgfSB9LFxuICAgICAgICAgIHRhcmdldDogXCJTdGFydFwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJoYXNUaWNrZXRcIixcbiAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL1wiIH0gfSxcbiAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBTdGFydDoge1xuICAgICAgdGFnczogW1wic3RlcDpzdGFydFwiXSxcbiAgICAgIGV4aXQ6IFwiY2xlYXJGb3JtRXJyb3JzXCIsXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwic3RhcnRcIixcbiAgICAgICAgc3JjOiBcInN0YXJ0TWFjaGluZVwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCwgc2VsZiB9KSA9PiB7XG4gICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXNlUGF0aDogKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5iYXNlUGF0aCxcbiAgICAgICAgICAgIGZvcm1SZWY6IGNvbnRleHQuZm9ybVJlZixcbiAgICAgICAgICAgIHBhcmVudDogc2VsZixcbiAgICAgICAgICAgIHRpY2tldDogY29udGV4dC50aWNrZXRcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInJhaXNlTmV4dFwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcIlJFU0VULlNURVBcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJTdGFydFwiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWVwiOiB7XG4gICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcInN0YXJ0XCIsICh7IGV2ZW50IH0pID0+IGV2ZW50KVxuICAgICAgICB9LFxuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZLkFVVE9GSUxMXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwic3RhcnRcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpXG4gICAgICAgIH0sXG4gICAgICAgIFwiQVVUSEVOVElDQVRFLldFQjNcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJzdGFydFwiLCAoeyBldmVudCB9KSA9PiBldmVudClcbiAgICAgICAgfSxcbiAgICAgICAgTkVYVDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImlzQ29tcGxldGVcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFwic2V0QWN0aXZlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzRmlyc3RGYWN0b3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJGaXJzdEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc1NlY29uZEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlNlY29uZEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc05ld1Bhc3N3b3JkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvcmVzZXQtcGFzc3dvcmRcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSxcbiAgICBGaXJzdEZhY3Rvcjoge1xuICAgICAgdGFnczogW1wic3RlcDpmaXJzdC1mYWN0b3JcIiwgXCJzdGVwOnZlcmlmaWNhdGlvbnNcIl0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiZmlyc3RGYWN0b3JcIixcbiAgICAgICAgc3JjOiBcImZpcnN0RmFjdG9yTWFjaGluZVwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCwgc2VsZiB9KSA9PiB7XG4gICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtUmVmOiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAgICAgICBwYXJlbnQ6IHNlbGYsXG4gICAgICAgICAgICBiYXNlUGF0aDogKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5iYXNlUGF0aFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIG9uRG9uZToge1xuICAgICAgICAgIGFjdGlvbnM6IFwicmFpc2VOZXh0XCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiQVVUSEVOVElDQVRFLlBBU1NLRVlcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJmaXJzdEZhY3RvclwiLCAoeyBldmVudCB9KSA9PiBldmVudClcbiAgICAgICAgfSxcbiAgICAgICAgXCJSRVNFVC5TVEVQXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiRmlyc3RGYWN0b3JcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIE5FWFQ6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc0NvbXBsZXRlXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBcInNldEFjdGl2ZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc1NlY29uZEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlNlY29uZEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc05ld1Bhc3N3b3JkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvcmVzZXQtcGFzc3dvcmRcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIlNUUkFURUdZLlVQREFURVwiOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiU2VuZCBldmVudCB0byB2ZXJpZmljYXRpb24gbWFjaGluZSB0byB1cGRhdGUgdGhlIGN1cnJlbnQgc3RyYXRlZ3kuXCIsXG4gICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcImZpcnN0RmFjdG9yXCIsICh7IGV2ZW50IH0pID0+IGV2ZW50KSxcbiAgICAgICAgICB0YXJnZXQ6IFwiLklkbGVcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5pdGlhbDogXCJJZGxlXCIsXG4gICAgICBzdGF0ZXM6IHtcbiAgICAgICAgSWRsZToge1xuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBcIk5BVklHQVRFLkZPUkdPVF9QQVNTV09SRFwiOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk5hdmlnYXRlIHRvIGZvcmdvdCBwYXNzd29yZCBzY3JlZW4uXCIsXG4gICAgICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJmaXJzdEZhY3RvclwiLCAoeyBldmVudCB9KSA9PiBldmVudCksXG4gICAgICAgICAgICAgIHRhcmdldDogXCJGb3Jnb3RQYXNzd29yZFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJOQVZJR0FURS5DSE9PU0VfU1RSQVRFR1lcIjoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJOYXZpZ2F0ZSB0byBjaG9vc2Ugc3RyYXRlZ3kgc2NyZWVuLlwiLFxuICAgICAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwiZmlyc3RGYWN0b3JcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiQ2hvb3NpbmdTdHJhdGVneVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBDaG9vc2luZ1N0cmF0ZWd5OiB7XG4gICAgICAgICAgdGFnczogW1wic3RlcDpjaG9vc2Utc3RyYXRlZ3lcIl0sXG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFwiTkFWSUdBVEUuUFJFVklPVVNcIjoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJHbyB0byBJZGxlLCBhbmQgYWxzbyB0ZWxsIGZpcnN0RmFjdG9yIHRvIGdvIHRvIFBlbmRpbmdcIixcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIklkbGVcIixcbiAgICAgICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcImZpcnN0RmFjdG9yXCIsIHsgdHlwZTogXCJOQVZJR0FURS5QUkVWSU9VU1wiIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBGb3Jnb3RQYXNzd29yZDoge1xuICAgICAgICAgIHRhZ3M6IFtcInN0ZXA6Zm9yZ290LXBhc3N3b3JkXCJdLFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBcIk5BVklHQVRFLlBSRVZJT1VTXCI6IFwiSWRsZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBTZWNvbmRGYWN0b3I6IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6c2Vjb25kLWZhY3RvclwiLCBcInN0ZXA6dmVyaWZpY2F0aW9uc1wiXSxcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJzZWNvbmRGYWN0b3JcIixcbiAgICAgICAgc3JjOiBcInNlY29uZEZhY3Rvck1hY2hpbmVcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQsIHNlbGYgfSkgPT4gKHtcbiAgICAgICAgICBmb3JtUmVmOiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAgICAgcGFyZW50OiBzZWxmXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInJhaXNlTmV4dFwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcIlJFU0VULlNURVBcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJTZWNvbmRGYWN0b3JcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIE5FWFQ6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc0NvbXBsZXRlXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBcInNldEFjdGl2ZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc05ld1Bhc3N3b3JkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvcmVzZXQtcGFzc3dvcmRcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIlNUUkFURUdZLlVQREFURVwiOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiU2VuZCBldmVudCB0byB2ZXJpZmljYXRpb24gbWFjaGluZSB0byB1cGRhdGUgdGhlIGN1cnJlbnQgc3RyYXRlZ3kuXCIsXG4gICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcInNlY29uZEZhY3RvclwiLCAoeyBldmVudCB9KSA9PiBldmVudCksXG4gICAgICAgICAgdGFyZ2V0OiBcIi5JZGxlXCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluaXRpYWw6IFwiSWRsZVwiLFxuICAgICAgc3RhdGVzOiB7XG4gICAgICAgIElkbGU6IHtcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgXCJOQVZJR0FURS5DSE9PU0VfU1RSQVRFR1lcIjoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJOYXZpZ2F0ZSB0byBjaG9vc2Ugc3RyYXRlZ3kgc2NyZWVuLlwiLFxuICAgICAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwic2Vjb25kRmFjdG9yXCIsICh7IGV2ZW50IH0pID0+IGV2ZW50KSxcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIkNob29zaW5nU3RyYXRlZ3lcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgQ2hvb3NpbmdTdHJhdGVneToge1xuICAgICAgICAgIHRhZ3M6IFtcInN0ZXA6Y2hvb3NlLXN0cmF0ZWd5XCJdLFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBcIk5BVklHQVRFLlBSRVZJT1VTXCI6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiR28gdG8gSWRsZSwgYW5kIGFsc28gdGVsbCBmaXJzdEZhY3RvciB0byBnbyB0byBQZW5kaW5nXCIsXG4gICAgICAgICAgICAgIHRhcmdldDogXCJJZGxlXCIsXG4gICAgICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJzZWNvbmRGYWN0b3JcIiwgeyB0eXBlOiBcIk5BVklHQVRFLlBSRVZJT1VTXCIgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFJlc2V0UGFzc3dvcmQ6IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6cmVzZXQtcGFzc3dvcmRcIl0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwicmVzZXRQYXNzd29yZFwiLFxuICAgICAgICBzcmM6IFwicmVzZXRQYXNzd29yZE1hY2hpbmVcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQsIHNlbGYgfSkgPT4gKHtcbiAgICAgICAgICBmb3JtUmVmOiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAgICAgcGFyZW50OiBzZWxmXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInJhaXNlTmV4dFwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcIlJFU0VULlNURVBcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJSZXNldFBhc3N3b3JkXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBORVhUOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNDb21wbGV0ZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogXCJzZXRBY3RpdmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNGaXJzdEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIkZpcnN0RmFjdG9yXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzU2Vjb25kRmFjdG9yXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvY29udGludWVcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiU2Vjb25kRmFjdG9yXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9LFxuICAgIENhbGxiYWNrOiB7XG4gICAgICB0YWdzOiBbXCJzdGVwOmNhbGxiYWNrXCJdLFxuICAgICAgZW50cnk6IHNlbmRUbzUoVGhpcmRQYXJ0eU1hY2hpbmVJZCwgeyB0eXBlOiBcIkNBTExCQUNLXCIgfSksXG4gICAgICBvbjoge1xuICAgICAgICBORVhUOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaGFzT0F1dGhFcnJvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybU9BdXRoRXJyb3JzXCIsIHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBmb3JjZTogdHJ1ZSwgcGF0aDogXCIvXCIgfSB9XSxcbiAgICAgICAgICAgIHRhcmdldDogXCJTdGFydFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogb3IoW1wiaXNMb2dnZWRJblwiLCBcImlzQ29tcGxldGVcIiwgXCJoYXNBdXRoZW50aWNhdGVkVmlhQ2xlcmtKU1wiXSksXG4gICAgICAgICAgICBhY3Rpb25zOiBcInNldEFjdGl2ZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc0lkZW50aWZpZXJcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFwidHJhbnNmZXJcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNGaXJzdEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIkZpcnN0RmFjdG9yXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzU2Vjb25kRmFjdG9yXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvY29udGludWVcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiU2Vjb25kRmFjdG9yXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzTmV3UGFzc3dvcmRcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9yZXNldC1wYXNzd29yZFwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJSZXNldFBhc3N3b3JkXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9LFxuICAgIENob29zZVNlc3Npb246IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6Y2hvb3NlLXNlc3Npb25cIl0sXG4gICAgICBvbjoge1xuICAgICAgICBcIlNFU1NJT04uU0VUX0FDVElWRVwiOiB7XG4gICAgICAgICAgYWN0aW9uczoge1xuICAgICAgICAgICAgdHlwZTogXCJzZXRBY3RpdmVcIixcbiAgICAgICAgICAgIHBhcmFtczogKHsgZXZlbnQgfSkgPT4gKHsgaWQ6IGV2ZW50LmlkIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBFcnJvcjoge1xuICAgICAgdGFnczogW1wic3RlcDplcnJvclwiXSxcbiAgICAgIG9uOiB7XG4gICAgICAgIE5FWFQ6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIixcbiAgICAgICAgICBhY3Rpb25zOiBcImNsZWFyRm9ybUVycm9yc1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEhpc3Q6IHtcbiAgICAgIHR5cGU6IFwiaGlzdG9yeVwiLFxuICAgICAgZXhpdDogXCJjbGVhckZvcm1FcnJvcnNcIlxuICAgIH1cbiAgfVxufSk7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvdXRpbHMvZm9ybWF0dGVycy50c1xuaW1wb3J0IHsgdGl0bGVpemUgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC91bmRlcnNjb3JlXCI7XG5mdW5jdGlvbiBmb3JtYXROYW1lKC4uLmFyZ3MpIHtcbiAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIHRpdGxlaXplKGFyZ3NbMF0pO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gYXJncy5maWx0ZXIoQm9vbGVhbikubWFwKHRpdGxlaXplKS5qb2luKFwiIFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gZm9ybWF0U2FsdXRhdGlvbih7XG4gIGZpcnN0TmFtZSxcbiAgbGFzdE5hbWUsXG4gIGlkZW50aWZpZXJcbn0pIHtcbiAgcmV0dXJuIGZpcnN0TmFtZSAmJiBmb3JtYXROYW1lKGZpcnN0TmFtZSkgfHwgbGFzdE5hbWUgJiYgZm9ybWF0TmFtZShsYXN0TmFtZSkgfHwgaWRlbnRpZmllciB8fCBcIlwiO1xufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vcm91dGVyLnNlbGVjdG9ycy50c1xuZnVuY3Rpb24gU2lnbkluU2FmZUlkZW50aWZpZXJTZWxlY3RvckZvclN0cmF0ZWd5KHN0cmF0ZWd5KSB7XG4gIHJldHVybiAocykgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IHNpZ25JbiA9IChfYSA9IHMuY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNsaWVudC5zaWduSW47XG4gICAgaWYgKHN0cmF0ZWd5KSB7XG4gICAgICBjb25zdCBtYXRjaGluZ0ZhY3RvcnMgPSBbXG4gICAgICAgIC4uLihfYiA9IHNpZ25Jbi5zdXBwb3J0ZWRGaXJzdEZhY3RvcnMpICE9IG51bGwgPyBfYiA6IFtdLFxuICAgICAgICAuLi4oX2MgPSBzaWduSW4uc3VwcG9ydGVkU2Vjb25kRmFjdG9ycykgIT0gbnVsbCA/IF9jIDogW11cbiAgICAgIF0uZmlsdGVyKChmKSA9PiBmLnN0cmF0ZWd5ID09PSBzdHJhdGVneSk7XG4gICAgICBjb25zdCBtYXRjaGluZ0ZhY3RvckZvcklkZW50aWZpZXIgPSBzaWduSW4uaWRlbnRpZmllciAmJiBtYXRjaGluZ0ZhY3RvcnMubGVuZ3RoID4gMCA/IG1hdGNoaW5nRmFjdG9ycy5maW5kKChmKSA9PiBcInNhZmVJZGVudGlmaWVyXCIgaW4gZiAmJiBmLnNhZmVJZGVudGlmaWVyID09PSBzaWduSW4uaWRlbnRpZmllcikgOiBudWxsO1xuICAgICAgY29uc3QgbWF0Y2hpbmdGYWN0b3JGb3JTdHJhdGVneSA9IG1hdGNoaW5nRmFjdG9yc1swXTtcbiAgICAgIGlmIChtYXRjaGluZ0ZhY3RvckZvcklkZW50aWZpZXIgJiYgXCJzYWZlSWRlbnRpZmllclwiIGluIG1hdGNoaW5nRmFjdG9yRm9ySWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm4gbWF0Y2hpbmdGYWN0b3JGb3JJZGVudGlmaWVyLnNhZmVJZGVudGlmaWVyO1xuICAgICAgfVxuICAgICAgaWYgKG1hdGNoaW5nRmFjdG9yRm9yU3RyYXRlZ3kgJiYgXCJzYWZlSWRlbnRpZmllclwiIGluIG1hdGNoaW5nRmFjdG9yRm9yU3RyYXRlZ3kpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nRmFjdG9yRm9yU3RyYXRlZ3kuc2FmZUlkZW50aWZpZXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaWduSW4uaWRlbnRpZmllciB8fCBcIlwiO1xuICB9O1xufVxuZnVuY3Rpb24gU2lnbkluU2FsdXRhdGlvblNlbGVjdG9yKHMpIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIGNvbnN0IHNpZ25JbiA9IChfYSA9IHMuY29udGV4dC5jbGVyaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNsaWVudC5zaWduSW47XG4gIHJldHVybiBmb3JtYXRTYWx1dGF0aW9uKHtcbiAgICBmaXJzdE5hbWU6IChfYiA9IHNpZ25JbiA9PSBudWxsID8gdm9pZCAwIDogc2lnbkluLnVzZXJEYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZmlyc3ROYW1lLFxuICAgIGlkZW50aWZpZXI6IHNpZ25JbiA9PSBudWxsID8gdm9pZCAwIDogc2lnbkluLmlkZW50aWZpZXIsXG4gICAgbGFzdE5hbWU6IChfYyA9IHNpZ25JbiA9PSBudWxsID8gdm9pZCAwIDogc2lnbkluLnVzZXJEYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2MubGFzdE5hbWVcbiAgfSk7XG59XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi9yb3V0ZXIudHlwZXMudHNcbnZhciBTaWduSW5Sb3V0ZXJTeXN0ZW1JZCA9IHtcbiAgc3RhcnQ6IFwic3RhcnRcIixcbiAgZmlyc3RGYWN0b3I6IFwiZmlyc3RGYWN0b3JcIixcbiAgc2Vjb25kRmFjdG9yOiBcInNlY29uZEZhY3RvclwiLFxuICByZXNldFBhc3N3b3JkOiBcInJlc2V0UGFzc3dvcmRcIlxufTtcblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY2hvb3NlLXN0cmF0ZWd5LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDkgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduSW5DaG9vc2VTdHJhdGVneUN0eCA9IGNyZWF0ZUNvbnRleHRGb3JEb21WYWxpZGF0aW9uKFwiU2lnbkluQ2hvb3NlU3RyYXRlZ3lDdHhcIik7XG5mdW5jdGlvbiBTaWduSW5DaG9vc2VTdHJhdGVneSh7IGFzQ2hpbGQsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZUZpcnN0RmFjdG9yID0gdXNlQWN0aXZlVGFncyhcbiAgICByb3V0ZXJSZWYsXG4gICAgW1wic3RlcDp2ZXJpZmljYXRpb25zXCIsIFwic3RlcDpmaXJzdC1mYWN0b3JcIiwgXCJzdGVwOmNob29zZS1zdHJhdGVneVwiXSxcbiAgICBBY3RpdmVUYWdzTW9kZS5hbGxcbiAgKTtcbiAgY29uc3QgYWN0aXZlU3RhdGVTZWNvbmRGYWN0b3IgPSB1c2VBY3RpdmVUYWdzKFxuICAgIHJvdXRlclJlZixcbiAgICBbXCJzdGVwOnZlcmlmaWNhdGlvbnNcIiwgXCJzdGVwOnNlY29uZC1mYWN0b3JcIiwgXCJzdGVwOmNob29zZS1zdHJhdGVneVwiXSxcbiAgICBBY3RpdmVUYWdzTW9kZS5hbGxcbiAgKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSBhY3RpdmVTdGF0ZUZpcnN0RmFjdG9yIHx8IGFjdGl2ZVN0YXRlU2Vjb25kRmFjdG9yO1xuICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3Q1IDogXCJkaXZcIjtcbiAgcmV0dXJuIGFjdGl2ZVN0YXRlID8gLyogQF9fUFVSRV9fICovIGpzeDkoU2lnbkluQ2hvb3NlU3RyYXRlZ3lDdHguUHJvdmlkZXIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g5KENvbXAsIHsgLi4ucHJvcHMsIGNoaWxkcmVuIH0pIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JbkZvcmdvdFBhc3N3b3JkKHsgYXNDaGlsZCwgY2hpbGRyZW4sIC4uLnByb3BzIH0pIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhcbiAgICByb3V0ZXJSZWYsXG4gICAgW1wic3RlcDp2ZXJpZmljYXRpb25zXCIsIFwic3RlcDpmaXJzdC1mYWN0b3JcIiwgXCJzdGVwOmZvcmdvdC1wYXNzd29yZFwiXSxcbiAgICBBY3RpdmVUYWdzTW9kZS5hbGxcbiAgKTtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90NSA6IFwiZGl2XCI7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3g5KFNpZ25JbkNob29zZVN0cmF0ZWd5Q3R4LlByb3ZpZGVyLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OShDb21wLCB7IC4uLnByb3BzLCBjaGlsZHJlbiB9KSB9KSA6IG51bGw7XG59XG52YXIgU1VQUE9SVEVEX1NUUkFURUdZX05BTUUgPSBcIlNpZ25JblN1cHBvcnRlZFN0cmF0ZWd5XCI7XG52YXIgU2lnbkluU3VwcG9ydGVkU3RyYXRlZ3kgPSBSZWFjdDE4LmZvcndhcmRSZWYoXG4gICh7IGFzQ2hpbGQsIGNoaWxkcmVuLCBuYW1lLCAuLi5yZXN0IH0sIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gcm91dGVyUmVmLmdldFNuYXBzaG90KCk7XG4gICAgY29uc3Qgc3RhdHVzID0gc25hcHNob3QuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLnN0YXR1cztcbiAgICBjb25zdCBzdXBwb3J0ZWRGaXJzdEZhY3RvcnMgPSBzdGF0dXMgPT09IFwibmVlZHNfZmlyc3RfZmFjdG9yXCIgPyBzbmFwc2hvdC5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzIHx8IFtdIDogW107XG4gICAgY29uc3Qgc3VwcG9ydGVkU2Vjb25kRmFjdG9ycyA9IHN0YXR1cyA9PT0gXCJuZWVkc19zZWNvbmRfZmFjdG9yXCIgPyBzbmFwc2hvdC5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkU2Vjb25kRmFjdG9ycyB8fCBbXSA6IFtdO1xuICAgIGNvbnN0IGZhY3RvciA9IFsuLi5zdXBwb3J0ZWRGaXJzdEZhY3RvcnMsIC4uLnN1cHBvcnRlZFNlY29uZEZhY3RvcnNdLmZpbmQoKGZhY3RvcjIpID0+IG5hbWUgPT09IGZhY3RvcjIuc3RyYXRlZ3kpO1xuICAgIGNvbnN0IGN1cnJlbnRGYWN0b3IgPSB1c2VTZWxlY3RvcjMoXG4gICAgICBzbmFwc2hvdC5jaGlsZHJlbltTaWduSW5Sb3V0ZXJTeXN0ZW1JZC5maXJzdEZhY3Rvcl0gfHwgc25hcHNob3QuY2hpbGRyZW5bU2lnbkluUm91dGVyU3lzdGVtSWQuc2Vjb25kRmFjdG9yXSxcbiAgICAgIChzdGF0ZSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSBzdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogc3RhdGUuY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RyYXRlZ3k7XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBzZW5kVXBkYXRlU3RyYXRlZ3lFdmVudCA9IFJlYWN0MTgudXNlQ2FsbGJhY2soXG4gICAgICAoKSA9PiByb3V0ZXJSZWYuc2VuZCh7IHR5cGU6IFwiU1RSQVRFR1kuVVBEQVRFXCIsIGZhY3RvciB9KSxcbiAgICAgIFtyb3V0ZXJSZWYsIGZhY3Rvcl1cbiAgICApO1xuICAgIGlmIChjdXJyZW50RmFjdG9yID09PSBuYW1lKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90NSA6IFwiYnV0dG9uXCI7XG4gICAgY29uc3QgZGVmYXVsdFByb3BzID0gYXNDaGlsZCA/IHt9IDogeyB0eXBlOiBcImJ1dHRvblwiIH07XG4gICAgcmV0dXJuIGZhY3RvciA/IC8qIEBfX1BVUkVfXyAqLyBqc3g5KFNpZ25JblN0cmF0ZWd5Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBzdHJhdGVneTogbmFtZSB9LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDkoXG4gICAgICBDb21wLFxuICAgICAge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIHJlZjogZm9yd2FyZGVkUmVmLFxuICAgICAgICBvbkNsaWNrOiBzZW5kVXBkYXRlU3RyYXRlZ3lFdmVudCxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuIHx8IGZhY3Rvci5zdHJhdGVneVxuICAgICAgfVxuICAgICkgfSkgOiBudWxsO1xuICB9XG4pO1xuU2lnbkluU3VwcG9ydGVkU3RyYXRlZ3kuZGlzcGxheU5hbWUgPSBTVVBQT1JURURfU1RSQVRFR1lfTkFNRTtcblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vcmVzZXQtcGFzc3dvcmQudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTAgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduSW5SZXNldFBhc3N3b3JkQ3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25JblJlc2V0UGFzc3dvcmRDdHhcIik7XG5mdW5jdGlvbiBTaWduSW5SZXNldFBhc3N3b3JkKHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6cmVzZXQtcGFzc3dvcmRcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMChTaWduSW5SZXNldFBhc3N3b3JkSW5uZXIsIHsgLi4ucHJvcHMgfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gU2lnbkluUmVzZXRQYXNzd29yZElubmVyKHByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVNpZ25JblJlc2V0UGFzc3dvcmRTdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMChTaWduSW5SZXNldFBhc3N3b3JkQ3R4LlByb3ZpZGVyLCB7IGFjdG9yUmVmOiByZWYsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTAoXG4gICAgRm9ybSxcbiAgICB7XG4gICAgICBmbG93QWN0b3I6IHJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIH0pO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9zc28tY2FsbGJhY2sudHN4XG5mdW5jdGlvbiBTaWduSW5TU09DYWxsYmFjayh7IGNoaWxkcmVuIH0pIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpjYWxsYmFja1wiKTtcbiAgcmV0dXJuIGFjdGl2ZVN0YXRlID8gY2hpbGRyZW4gOiBudWxsO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9zdGFydC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxMSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNpZ25JblN0YXJ0Q3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25JblN0YXJ0Q3R4XCIpO1xuZnVuY3Rpb24gU2lnbkluU3RhcnQocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpzdGFydFwiKTtcbiAgcmV0dXJuIGFjdGl2ZVN0YXRlID8gLyogQF9fUFVSRV9fICovIGpzeDExKFNpZ25JblN0YXJ0SW5uZXIsIHsgLi4ucHJvcHMgfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gU2lnbkluU3RhcnRJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduSW5TdGFydFN0ZXAoKTtcbiAgaWYgKCFyZWYpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDExKFNpZ25JblN0YXJ0Q3R4LlByb3ZpZGVyLCB7IGFjdG9yUmVmOiByZWYsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTEoXG4gICAgRm9ybSxcbiAgICB7XG4gICAgICBmbG93QWN0b3I6IHJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIH0pO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi92ZXJpZmljYXRpb25zLnRzeFxuaW1wb3J0IHsgdXNlU2VsZWN0b3IgYXMgdXNlU2VsZWN0b3I0IH0gZnJvbSBcIkB4c3RhdGUvcmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNiwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDUgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy91dGlscy9zdHJhdGVnaWVzLnRzXG52YXIgbWF0Y2hTdHJhdGVneSA9IChjdXJyZW50LCBkZXNpcmVkKSA9PiB7XG4gIGlmICghY3VycmVudCB8fCAhZGVzaXJlZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoY3VycmVudCA9PT0gZGVzaXJlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBjdXJyZW50LnN0YXJ0c1dpdGgoYCR7ZGVzaXJlZH1fYCk7XG59O1xuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi92ZXJpZmljYXRpb25zLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEyIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU2lnbkluRmlyc3RGYWN0b3JDdHggPSBjcmVhdGVDb250ZXh0RnJvbUFjdG9yUmVmKFwiU2lnbkluRmlyc3RGYWN0b3JDdHhcIik7XG52YXIgU2lnbkluU2Vjb25kRmFjdG9yQ3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25JblNlY29uZEZhY3RvckN0eFwiKTtcbnZhciBzdHJhdGVnaWVzU2VsZWN0b3IgPSAoc3RhdGUpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gKF9hID0gc3RhdGUuY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RyYXRlZ3k7XG59O1xuZnVuY3Rpb24gU2lnbkluU3RyYXRlZ2llc1Byb3ZpZGVyKHtcbiAgY2hpbGRyZW4sXG4gIHByZWZlcnJlZCxcbiAgYWN0b3JSZWYsXG4gIC4uLnByb3BzXG59KSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBjdXJyZW50ID0gdXNlU2VsZWN0b3I0KGFjdG9yUmVmLCBzdHJhdGVnaWVzU2VsZWN0b3IpO1xuICBjb25zdCBpc0Nob29zaW5nQWx0U3RyYXRlZ3kgPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgW1wic3RlcDpjaG9vc2Utc3RyYXRlZ3lcIiwgXCJzdGVwOmZvcmdvdC1wYXNzd29yZFwiXSk7XG4gIGNvbnN0IGlzQWN0aXZlID0gdXNlQ2FsbGJhY2s2KChuYW1lKSA9PiBjdXJyZW50ID8gbWF0Y2hTdHJhdGVneShjdXJyZW50LCBuYW1lKSA6IGZhbHNlLCBbY3VycmVudF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFN0cmF0ZWdpZXNDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7IGN1cnJlbnQsIHByZWZlcnJlZCwgaXNBY3RpdmUgfSwgY2hpbGRyZW46IGlzQ2hvb3NpbmdBbHRTdHJhdGVneS5hY3RpdmUgPyBudWxsIDogLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiBhY3RvclJlZixcbiAgICAgIC4uLnByb3BzLFxuICAgICAgY2hpbGRyZW5cbiAgICB9XG4gICkgfSk7XG59XG5mdW5jdGlvbiB1c2VGYWN0b3JDdHgoKSB7XG4gIGNvbnN0IGZpcnN0RmFjdG9yUmVmID0gU2lnbkluRmlyc3RGYWN0b3JDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIGNvbnN0IHNlY29uZEZhY3RvclJlZiA9IFNpZ25JblNlY29uZEZhY3RvckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgcmV0dXJuIGZpcnN0RmFjdG9yUmVmIHx8IHNlY29uZEZhY3RvclJlZjtcbn1cbmZ1bmN0aW9uIFNpZ25JblN0cmF0ZWd5KHsgY2hpbGRyZW4sIG5hbWUgfSkge1xuICBjb25zdCB7IGFjdGl2ZSB9ID0gdXNlU3RyYXRlZ3kobmFtZSk7XG4gIGNvbnN0IGZhY3RvckN0eCA9IHVzZUZhY3RvckN0eCgpO1xuICB1c2VFZmZlY3Q1KCgpID0+IHtcbiAgICBpZiAoZmFjdG9yQ3R4KSB7XG4gICAgICBmYWN0b3JDdHguc2VuZCh7IHR5cGU6IFwiU1RSQVRFR1kuUkVHSVNURVJcIiwgZmFjdG9yOiBuYW1lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKChmYWN0b3JDdHggPT0gbnVsbCA/IHZvaWQgMCA6IGZhY3RvckN0eC5nZXRTbmFwc2hvdCgpLnN0YXR1cykgPT09IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgZmFjdG9yQ3R4LnNlbmQoeyB0eXBlOiBcIlNUUkFURUdZLlVOUkVHSVNURVJcIiwgZmFjdG9yOiBuYW1lIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtmYWN0b3JDdHgsIG5hbWVdKTtcbiAgcmV0dXJuIGFjdGl2ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5TdHJhdGVneUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgc3RyYXRlZ3k6IG5hbWUgfSwgY2hpbGRyZW4gfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gU2lnbkluVmVyaWZpY2F0aW9ucyhwcm9wcykge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgeyBhY3RpdmVUYWdzOiBhY3RpdmVSb3V0ZXMgfSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBbXCJzdGVwOmZpcnN0LWZhY3RvclwiLCBcInN0ZXA6c2Vjb25kLWZhY3RvclwiXSk7XG4gIGlmIChhY3RpdmVSb3V0ZXMuaGFzKFwic3RlcDpmaXJzdC1mYWN0b3JcIikpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFNpZ25JbkZpcnN0RmFjdG9ySW5uZXIsIHsgLi4ucHJvcHMgfSk7XG4gIH1cbiAgaWYgKGFjdGl2ZVJvdXRlcy5oYXMoXCJzdGVwOnNlY29uZC1mYWN0b3JcIikpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFNpZ25JblNlY29uZEZhY3RvcklubmVyLCB7IC4uLnByb3BzIH0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gU2lnbkluRmlyc3RGYWN0b3IocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpmaXJzdC1mYWN0b3JcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5GaXJzdEZhY3RvcklubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblNlY29uZEZhY3Rvcihwcm9wcykge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgXCJzdGVwOnNlY29uZC1mYWN0b3JcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5TZWNvbmRGYWN0b3JJbm5lciwgeyAuLi5wcm9wcyB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduSW5GaXJzdEZhY3RvcklubmVyKHByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVNpZ25JbkZpcnN0RmFjdG9yU3RlcCgpO1xuICBpZiAoIXJlZikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiByZWYgPyAvKiBAX19QVVJFX18gKi8ganN4MTIoU2lnbkluRmlyc3RGYWN0b3JDdHguUHJvdmlkZXIsIHsgYWN0b3JSZWY6IHJlZiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICBTaWduSW5TdHJhdGVnaWVzUHJvdmlkZXIsXG4gICAge1xuICAgICAgYWN0b3JSZWY6IHJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblNlY29uZEZhY3RvcklubmVyKHByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVNpZ25JblNlY29uZEZhY3RvclN0ZXAoKTtcbiAgaWYgKCFyZWYpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gcmVmID8gLyogQF9fUFVSRV9fICovIGpzeDEyKFNpZ25JblNlY29uZEZhY3RvckN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgIFNpZ25JblN0cmF0ZWdpZXNQcm92aWRlcixcbiAgICB7XG4gICAgICBhY3RvclJlZjogcmVmLFxuICAgICAgLi4ucHJvcHNcbiAgICB9XG4gICkgfSkgOiBudWxsO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9zdGVwLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU0lHTl9JTl9TVEVQUyA9IHtcbiAgc3RhcnQ6IFwic3RhcnRcIixcbiAgdmVyaWZpY2F0aW9uczogXCJ2ZXJpZmljYXRpb25zXCIsXG4gIFwiY2hvb3NlLXN0cmF0ZWd5XCI6IFwiY2hvb3NlLXN0cmF0ZWd5XCIsXG4gIFwiY2hvb3NlLXNlc3Npb25cIjogXCJjaG9vc2Utc2Vzc2lvblwiLFxuICBcImZvcmdvdC1wYXNzd29yZFwiOiBcImZvcmdvdC1wYXNzd29yZFwiLFxuICBcInJlc2V0LXBhc3N3b3JkXCI6IFwicmVzZXQtcGFzc3dvcmRcIixcbiAgXCJzc28tY2FsbGJhY2tcIjogXCJzc28tY2FsbGJhY2tcIlxufTtcbmZ1bmN0aW9uIFNpZ25JblN0ZXAocHJvcHMpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBjbGVyayA9IHVzZUNsZXJrNCgpO1xuICAoX2EgPSBjbGVyay50ZWxlbWV0cnkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZWNvcmQoZXZlbnRDb21wb25lbnRNb3VudGVkMihcIkVsZW1lbnRzX1NpZ25JblN0ZXBcIiwgeyBuYW1lOiBwcm9wcy5uYW1lIH0pKTtcbiAgc3dpdGNoIChwcm9wcy5uYW1lKSB7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTLnN0YXJ0OlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhTaWduSW5TdGFydCwgeyAuLi5wcm9wcyB9KTtcbiAgICBjYXNlIFNJR05fSU5fU1RFUFMudmVyaWZpY2F0aW9uczpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTMoU2lnbkluVmVyaWZpY2F0aW9ucywgeyAuLi5wcm9wcyB9KTtcbiAgICBjYXNlIFNJR05fSU5fU1RFUFNbXCJjaG9vc2Utc3RyYXRlZ3lcIl06XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFNpZ25JbkNob29zZVN0cmF0ZWd5LCB7IC4uLnByb3BzIH0pO1xuICAgIGNhc2UgU0lHTl9JTl9TVEVQU1tcImZvcmdvdC1wYXNzd29yZFwiXTpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTMoU2lnbkluRm9yZ290UGFzc3dvcmQsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTW1wicmVzZXQtcGFzc3dvcmRcIl06XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFNpZ25JblJlc2V0UGFzc3dvcmQsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTW1wiY2hvb3NlLXNlc3Npb25cIl06XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFNpZ25JbkNob29zZVNlc3Npb24sIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTW1wic3NvLWNhbGxiYWNrXCJdOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhTaWduSW5TU09DYWxsYmFjaywgeyAuLi5wcm9wcyB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYEludmFsaWQgc3RlcCBuYW1lLiBVc2U6ICR7T2JqZWN0LmtleXMoU0lHTl9JTl9TVEVQUykuam9pbihcIixcIil9LmApO1xuICB9XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLXVwL3N0ZXAudHN4XG5pbXBvcnQgeyB1c2VDbGVyayBhcyB1c2VDbGVyazUgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9yZWFjdFwiO1xuaW1wb3J0IHsgZXZlbnRDb21wb25lbnRNb3VudGVkIGFzIGV2ZW50Q29tcG9uZW50TW91bnRlZDMgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC90ZWxlbWV0cnlcIjtcblxuLy8gc3JjL3JlYWN0L3NpZ24tdXAvY29udGludWUudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduVXBDb250aW51ZUN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduVXBDb250aW51ZUN0eFwiKTtcbmZ1bmN0aW9uIFNpZ25VcENvbnRpbnVlKHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25VcFJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6Y29udGludWVcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxNChTaWduVXBDb250aW51ZUlubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25VcENvbnRpbnVlSW5uZXIocHJvcHMpIHtcbiAgY29uc3QgcmVmID0gdXNlU2lnblVwQ29udGludWVTdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNChTaWduVXBDb250aW51ZUN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE0KFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24tdXAvcmVzdHJpY3RlZC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxNSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gU2lnblVwUmVzdHJpY3RlZChwcm9wcykge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduVXBSb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgXCJzdGVwOnJlc3RyaWN0ZWRcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShcbiAgICBGb3JtLFxuICAgIHtcbiAgICAgIGZsb3dBY3Rvcjogcm91dGVyUmVmLFxuICAgICAgLi4ucHJvcHNcbiAgICB9XG4gICkgOiBudWxsO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi11cC9zdGFydC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxNiB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNpZ25VcFN0YXJ0Q3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25VcFN0YXJ0Q3R4XCIpO1xuZnVuY3Rpb24gU2lnblVwU3RhcnQocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnblVwUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpzdGFydFwiKTtcbiAgcmV0dXJuIGFjdGl2ZVN0YXRlID8gLyogQF9fUFVSRV9fICovIGpzeDE2KFNpZ25VcFN0YXJ0SW5uZXIsIHsgLi4ucHJvcHMgfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gU2lnblVwU3RhcnRJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduVXBTdGFydFN0ZXAoKTtcbiAgaWYgKCFyZWYpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE2KFNpZ25VcFN0YXJ0Q3R4LlByb3ZpZGVyLCB7IGFjdG9yUmVmOiByZWYsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTYoXG4gICAgRm9ybSxcbiAgICB7XG4gICAgICBmbG93QWN0b3I6IHJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIH0pO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi11cC92ZXJpZmljYXRpb25zLnRzeFxuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQzLCBqc3ggYXMganN4MTcgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduVXBWZXJpZmljYXRpb25DdHggPSBjcmVhdGVDb250ZXh0RnJvbUFjdG9yUmVmKFwiU2lnblVwVmVyaWZpY2F0aW9uQ3R4XCIpO1xuZnVuY3Rpb24gU2lnblVwVmVyaWZpY2F0aW9ucyhwcm9wcykge1xuICBjb25zdCByZWYgPSBTaWduVXBSb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VBY3RpdmVUYWdzKHJlZiwgXCJzdGVwOnZlcmlmaWNhdGlvblwiKTtcbiAgcmV0dXJuIGFjdGl2ZVN0YXRlID8gLyogQF9fUFVSRV9fICovIGpzeDE3KFNpZ25VcFZlcmlmeUlubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25VcFZlcmlmeUlubmVyKHByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVNpZ25VcFZlcmlmaWNhdGlvblN0ZXAoKTtcbiAgaWYgKCFyZWYpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE3KFNpZ25VcFZlcmlmaWNhdGlvbkN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE3KFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KTtcbn1cbmZ1bmN0aW9uIFNpZ25VcFN0cmF0ZWd5KHsgY2hpbGRyZW4sIG5hbWU6IHRhZyB9KSB7XG4gIGNvbnN0IHJlZiA9IFNpZ25VcFZlcmlmaWNhdGlvbkN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgaWYgKCFyZWYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnPFN0cmF0ZWd5PiB1c2VkIG91dHNpZGUgb2YgPFNpZ25VcD4uIERpZCB5b3UgbWVhbiB0byBgaW1wb3J0IHsgU3RyYXRlZ3kgfSBmcm9tIFwiQGNsZXJrL2VsZW1lbnRzL3NpZ24taW5cImAgaW5zdGVhZD8nXG4gICAgKTtcbiAgfVxuICBjb25zdCB7IGFjdGl2ZSB9ID0gdXNlQWN0aXZlVGFncyhyZWYsIFtcbiAgICBgdmVyaWZpY2F0aW9uOiR7dGFnfWAsXG4gICAgYHZlcmlmaWNhdGlvbjpjYXRlZ29yeToke3RhZ31gXG4gIF0pO1xuICByZXR1cm4gYWN0aXZlID8gLyogQF9fUFVSRV9fICovIGpzeDE3KEZyYWdtZW50MywgeyBjaGlsZHJlbiB9KSA6IG51bGw7XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLXVwL3N0ZXAudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTSUdOX1VQX1NURVBTID0ge1xuICBzdGFydDogXCJzdGFydFwiLFxuICBjb250aW51ZTogXCJjb250aW51ZVwiLFxuICB2ZXJpZmljYXRpb25zOiBcInZlcmlmaWNhdGlvbnNcIixcbiAgcmVzdHJpY3RlZDogXCJyZXN0cmljdGVkXCJcbn07XG5mdW5jdGlvbiBTaWduVXBTdGVwKHByb3BzKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgY2xlcmsgPSB1c2VDbGVyazUoKTtcbiAgKF9hID0gY2xlcmsudGVsZW1ldHJ5KSA9PSBudWxsID8gdm9pZCAwIDogX2EucmVjb3JkKGV2ZW50Q29tcG9uZW50TW91bnRlZDMoXCJFbGVtZW50c19TaWduVXBTdGVwXCIsIHsgbmFtZTogcHJvcHMubmFtZSB9KSk7XG4gIHN3aXRjaCAocHJvcHMubmFtZSkge1xuICAgIGNhc2UgU0lHTl9VUF9TVEVQUy5zdGFydDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTgoU2lnblVwU3RhcnQsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX1VQX1NURVBTLmNvbnRpbnVlOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxOChTaWduVXBDb250aW51ZSwgeyAuLi5wcm9wcyB9KTtcbiAgICBjYXNlIFNJR05fVVBfU1RFUFMudmVyaWZpY2F0aW9uczpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTgoU2lnblVwVmVyaWZpY2F0aW9ucywgeyAuLi5wcm9wcyB9KTtcbiAgICBjYXNlIFNJR05fVVBfU1RFUFMucmVzdHJpY3RlZDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTgoU2lnblVwUmVzdHJpY3RlZCwgeyAuLi5wcm9wcyB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIHN0ZXAgbmFtZS4gVXNlICdzdGFydCcsICdjb250aW51ZScsICd2ZXJpZmljYXRpb25zJywgb3IgJ3Jlc3RyaWN0ZWQnLmBcbiAgICAgICk7XG4gIH1cbn1cblxuLy8gc3JjL3JlYWN0L3V0aWxzL21hcC1zY29wZS10by1zdHJhdGVneS50c1xuZnVuY3Rpb24gaXNQcm92aWRlclN0cmF0ZWd5U2NvcGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnN0YXJ0c1dpdGgoXCJwcm92aWRlcjpcIik7XG59XG5mdW5jdGlvbiBtYXBTY29wZVRvU3RyYXRlZ3koc2NvcGUpIHtcbiAgaWYgKHNjb3BlID09PSBcInByb3ZpZGVyOm1ldGFtYXNrXCIpIHtcbiAgICByZXR1cm4gXCJ3ZWIzX21ldGFtYXNrX3NpZ25hdHVyZVwiO1xuICB9XG4gIGlmIChzY29wZSA9PT0gXCJwcm92aWRlcjpjb2luYmFzZV93YWxsZXRcIikge1xuICAgIHJldHVybiBcIndlYjNfY29pbmJhc2Vfd2FsbGV0X3NpZ25hdHVyZVwiO1xuICB9XG4gIGlmIChzY29wZSA9PT0gXCJwcm92aWRlcjpva3hfd2FsbGV0XCIpIHtcbiAgICByZXR1cm4gXCJ3ZWIzX29reF93YWxsZXRfc2lnbmF0dXJlXCI7XG4gIH1cbiAgaWYgKHNjb3BlID09PSBcInByb3ZpZGVyOnNhbWxcIikge1xuICAgIHJldHVybiBcInNhbWxcIjtcbiAgfVxuICBjb25zdCBzY29wZVdpdGhvdXRQcmVmaXggPSBzY29wZS5yZXBsYWNlKFwicHJvdmlkZXI6XCIsIFwiXCIpO1xuICByZXR1cm4gYG9hdXRoXyR7c2NvcGVXaXRob3V0UHJlZml4fWA7XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vbG9hZGluZy50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxOSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gaXNTaWduSW5TY29wZShzY29wZSkge1xuICBpZiAoIXNjb3BlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHNjb3BlLnN0YXJ0c1dpdGgoXCJzdGVwOlwiKSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoU0lHTl9JTl9TVEVQUywgc2NvcGUucmVwbGFjZShcInN0ZXA6XCIsIFwiXCIpKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGlzU2lnblVwU2NvcGUoc2NvcGUpIHtcbiAgaWYgKCFzY29wZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChzY29wZS5zdGFydHNXaXRoKFwic3RlcDpcIikpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFNJR05fVVBfU1RFUFMsIHNjb3BlLnJlcGxhY2UoXCJzdGVwOlwiLCBcIlwiKSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBMb2FkaW5nKHsgY2hpbGRyZW4sIHNjb3BlIH0pIHtcbiAgdmFyIF9hO1xuICBjb25zdCBjbGVyayA9IHVzZUNsZXJrNigpO1xuICAoX2EgPSBjbGVyay50ZWxlbWV0cnkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZWNvcmQoZXZlbnRDb21wb25lbnRNb3VudGVkNChcIkVsZW1lbnRzX0xvYWRpbmdcIiwgeyBzY29wZTogc2NvcGUgIT0gbnVsbCA/IHNjb3BlIDogZmFsc2UgfSkpO1xuICBjb25zdCBzaWduSW5Sb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIGNvbnN0IHNpZ25VcFJvdXRlclJlZiA9IFNpZ25VcFJvdXRlckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgaWYgKCFzaWduSW5Sb3V0ZXJSZWYgJiYgIXNpZ25VcFJvdXRlclJlZikge1xuICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKGA8TG9hZGluZz4gbXVzdCBiZSB1c2VkIHdpdGhpbiBhIDxTaWduSW4+IG9yIDxTaWduVXA+IGNvbXBvbmVudC5gKTtcbiAgfVxuICBpZiAoc2lnbkluUm91dGVyUmVmKSB7XG4gICAgaWYgKGlzU2lnbkluU2NvcGUoc2NvcGUpKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE5KFxuICAgICAgICBTaWduSW5Mb2FkaW5nLFxuICAgICAgICB7XG4gICAgICAgICAgc2NvcGUsXG4gICAgICAgICAgcm91dGVyUmVmOiBzaWduSW5Sb3V0ZXJSZWYsXG4gICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYEludmFsaWQgc2NvcGUgXCIke3Njb3BlfVwiIHVzZWQgZm9yIDxMb2FkaW5nPiBpbnNpZGUgPFNpZ25Jbj4uYCk7XG4gICAgfVxuICB9XG4gIGlmIChzaWduVXBSb3V0ZXJSZWYpIHtcbiAgICBpZiAoaXNTaWduVXBTY29wZShzY29wZSkpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTkoXG4gICAgICAgIFNpZ25VcExvYWRpbmcsXG4gICAgICAgIHtcbiAgICAgICAgICBzY29wZSxcbiAgICAgICAgICByb3V0ZXJSZWY6IHNpZ25VcFJvdXRlclJlZixcbiAgICAgICAgICBjaGlsZHJlblxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihgSW52YWxpZCBzY29wZSBcIiR7c2NvcGV9XCIgdXNlZCBmb3IgPExvYWRpbmc+IGluc2lkZSA8U2lnblVwPi5gKTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXCJJbnZhbGlkIHN0YXRlIGZvciA8TG9hZGluZz4uIFBsZWFzZSBvcGVuIGFuIGlzc3VlLlwiKTtcbn1cbmZ1bmN0aW9uIFNpZ25JbkxvYWRpbmcoeyBjaGlsZHJlbiwgc2NvcGUsIHJvdXRlclJlZiB9KSB7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHsgc3RlcDogbG9hZGluZ1N0ZXAsIHN0cmF0ZWd5LCBhY3Rpb24gfV0gPSB1c2VMb2FkaW5nKHJvdXRlclJlZik7XG4gIGNvbnN0IHRhZ3MgPSB1c2VTZWxlY3RvcjUocm91dGVyUmVmLCAocykgPT4gcy50YWdzKTtcbiAgY29uc3QgaXNTdGVwTG9hZGluZyA9IChzdGVwKSA9PiBpc0xvYWRpbmcgJiYgbG9hZGluZ1N0ZXAgPT09IHN0ZXA7XG4gIGNvbnN0IGlzSW5mZXJyZWRTdGVwTG9hZGluZyA9IChzdGVwKSA9PiB0YWdzLmhhcyhgc3RlcDoke3N0ZXB9YCkgJiYgaXNTdGVwTG9hZGluZyhzdGVwKTtcbiAgbGV0IGxvYWRpbmdSZXN1bHQgPSBmYWxzZTtcbiAgaWYgKHNjb3BlID09PSBcImdsb2JhbFwiKSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzTG9hZGluZztcbiAgfSBlbHNlIGlmIChzY29wZSAmJiBpc1Byb3ZpZGVyU3RyYXRlZ3lTY29wZShzY29wZSkpIHtcbiAgICBsb2FkaW5nUmVzdWx0ID0gaXNMb2FkaW5nICYmIGxvYWRpbmdTdGVwID09PSB2b2lkIDAgJiYgc3RyYXRlZ3kgPT09IG1hcFNjb3BlVG9TdHJhdGVneShzY29wZSk7XG4gIH0gZWxzZSBpZiAoc2NvcGUpIHtcbiAgICBsb2FkaW5nUmVzdWx0ID0gaXNTdGVwTG9hZGluZyhzY29wZS5yZXBsYWNlKFwic3RlcDpcIiwgXCJcIikpIHx8IHNjb3BlID09PSBhY3Rpb247XG4gIH0gZWxzZSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzSW5mZXJyZWRTdGVwTG9hZGluZyhcInN0YXJ0XCIpIHx8IGlzSW5mZXJyZWRTdGVwTG9hZGluZyhcInZlcmlmaWNhdGlvbnNcIikgfHwgaXNJbmZlcnJlZFN0ZXBMb2FkaW5nKFwiY2hvb3NlLXN0cmF0ZWd5XCIpIHx8IGlzSW5mZXJyZWRTdGVwTG9hZGluZyhcImZvcmdvdC1wYXNzd29yZFwiKSB8fCBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJyZXNldC1wYXNzd29yZFwiKTtcbiAgfVxuICByZXR1cm4gY2hpbGRyZW4obG9hZGluZ1Jlc3VsdCk7XG59XG5mdW5jdGlvbiBTaWduVXBMb2FkaW5nKHsgY2hpbGRyZW4sIHNjb3BlLCByb3V0ZXJSZWYgfSkge1xuICBjb25zdCBbaXNMb2FkaW5nLCB7IHN0ZXA6IGxvYWRpbmdTdGVwLCBzdHJhdGVneSwgYWN0aW9uIH1dID0gdXNlTG9hZGluZyhyb3V0ZXJSZWYpO1xuICBjb25zdCB0YWdzID0gdXNlU2VsZWN0b3I1KHJvdXRlclJlZiwgKHMpID0+IHMudGFncyk7XG4gIGNvbnN0IGlzU3RlcExvYWRpbmcgPSAoc3RlcCkgPT4gaXNMb2FkaW5nICYmIGxvYWRpbmdTdGVwID09PSBzdGVwO1xuICBjb25zdCBpc0luZmVycmVkU3RlcExvYWRpbmcgPSAoc3RlcCkgPT4gdGFncy5oYXMoYHN0ZXA6JHtzdGVwfWApICYmIGlzU3RlcExvYWRpbmcoc3RlcCk7XG4gIGxldCBsb2FkaW5nUmVzdWx0ID0gZmFsc2U7XG4gIGlmIChzY29wZSA9PT0gXCJnbG9iYWxcIikge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc0xvYWRpbmc7XG4gIH0gZWxzZSBpZiAoc2NvcGUgJiYgaXNQcm92aWRlclN0cmF0ZWd5U2NvcGUoc2NvcGUpKSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzTG9hZGluZyAmJiBsb2FkaW5nU3RlcCA9PT0gdm9pZCAwICYmIHN0cmF0ZWd5ID09PSBtYXBTY29wZVRvU3RyYXRlZ3koc2NvcGUpO1xuICB9IGVsc2UgaWYgKHNjb3BlKSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzU3RlcExvYWRpbmcoc2NvcGUucmVwbGFjZShcInN0ZXA6XCIsIFwiXCIpKSB8fCBzY29wZSA9PT0gYWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJzdGFydFwiKSB8fCBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJjb250aW51ZVwiKSB8fCBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJ2ZXJpZmljYXRpb25zXCIpO1xuICB9XG4gIHJldHVybiBjaGlsZHJlbihsb2FkaW5nUmVzdWx0KTtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9saW5rLnRzeFxuaW1wb3J0IHsgdXNlQ2xlcmsgYXMgdXNlQ2xlcms3IH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IHVzZUNsZXJrUm91dGVyIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcm91dGVyXCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MjAgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBwYXRocyA9IHtcbiAgXCJzaWduLWluXCI6IFwic2lnbkluVXJsXCIsXG4gIFwic2lnbi11cFwiOiBcInNpZ25VcFVybFwiXG59O1xuZnVuY3Rpb24gTGluayh7IG5hdmlnYXRlLCBjaGlsZHJlbiwgLi4ucmVzdCB9KSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZUNsZXJrUm91dGVyKCk7XG4gIGNvbnN0IGNsZXJrID0gdXNlQ2xlcms3KCk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uVXJsID0gcm91dGVyLm1ha2VEZXN0aW5hdGlvblVybFdpdGhQcmVzZXJ2ZWRRdWVyeVBhcmFtZXRlcnMoXG4gICAgY2xlcmsuX19pbnRlcm5hbF9nZXRPcHRpb24ocGF0aHNbbmF2aWdhdGVdKVxuICApO1xuICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gY2hpbGRyZW4oeyB1cmw6IGRlc3RpbmF0aW9uVXJsIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjAoXG4gICAgXCJhXCIsXG4gICAge1xuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByb3V0ZXIucHVzaChkZXN0aW5hdGlvblVybCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBocmVmOiBkZXN0aW5hdGlvblVybCxcbiAgICAgIC4uLnJlc3QsXG4gICAgICBjaGlsZHJlblxuICAgIH1cbiAgKTtcbn1cblxuZXhwb3J0IHtcbiAgX19wcml2YXRlR2V0LFxuICBfX3ByaXZhdGVBZGQsXG4gIF9fcHJpdmF0ZVNldCxcbiAgQ2xlcmtFbGVtZW50c0Vycm9yLFxuICBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yLFxuICBpbnNwZWN0LFxuICBGb3JtU3RvcmVQcm92aWRlcixcbiAgdXNlRm9ybVN0b3JlLFxuICBGaWVsZCxcbiAgRmllbGRFcnJvcixcbiAgRmllbGRTdGF0ZSxcbiAgRm9ybSxcbiAgR2xvYmFsRXJyb3IsXG4gIFNpZ25JblJvdXRlckN0eCxcbiAgdXNlU2lnbkluU3RyYXRlZ3ksXG4gIElucHV0LFxuICBMYWJlbCxcbiAgU3VibWl0LFxuICB1c2VBY3RpdmVUYWdzLFxuICBTaWduVXBSb3V0ZXJDdHgsXG4gIENvbm5lY3Rpb24sXG4gIEljb24sXG4gIHVzZVNpZ25JbkFjdGl2ZVNlc3Npb25Db250ZXh0LFxuICBTaWduSW5TZXNzaW9uTGlzdCxcbiAgU2lnbkluU2Vzc2lvbkxpc3RJdGVtLFxuICBTU09fQ0FMTEJBQ0tfUEFUSF9ST1VURSxcbiAgTUFHSUNfTElOS19WRVJJRllfUEFUSF9ST1VURSxcbiAgU0lHTl9VUF9NT0RFUyxcbiAgU0lHTl9JTl9ERUZBVUxUX0JBU0VfUEFUSCxcbiAgU0lHTl9VUF9ERUZBVUxUX0JBU0VfUEFUSCxcbiAgTkVYVF9XSU5ET1dfSElTVE9SWV9TVVBQT1JUX1ZFUlNJT04sXG4gIFNFQVJDSF9QQVJBTVMsXG4gIFJFU0VOREFCTEVfQ09VTlRET1dOX0RFRkFVTFQsXG4gIENBUFRDSEFfRUxFTUVOVF9JRCxcbiAgRVJST1JfQ09ERVMsXG4gIFJPVVRJTkcsXG4gIHNlbmRUb0xvYWRpbmcsXG4gIGFzc2VydEFjdG9yRXZlbnRFcnJvcixcbiAgVGhpcmRQYXJ0eU1hY2hpbmVJZCxcbiAgVGhpcmRQYXJ0eU1hY2hpbmUsXG4gIHNob3VsZFVzZVZpcnR1YWxSb3V0aW5nLFxuICBTaWduSW5Sb3V0ZXJNYWNoaW5lLFxuICBTaWduSW5TYWZlSWRlbnRpZmllclNlbGVjdG9yRm9yU3RyYXRlZ3ksXG4gIFNpZ25JblNhbHV0YXRpb25TZWxlY3RvcixcbiAgU2lnbkluU3VwcG9ydGVkU3RyYXRlZ3ksXG4gIFNpZ25JbkZpcnN0RmFjdG9yQ3R4LFxuICBTaWduSW5TZWNvbmRGYWN0b3JDdHgsXG4gIFNpZ25JblN0cmF0ZWd5LFxuICBTaWduSW5GaXJzdEZhY3RvcixcbiAgU2lnbkluU2Vjb25kRmFjdG9yLFxuICBTaWduSW5TdGVwLFxuICBTaWduVXBTdGFydEN0eCxcbiAgU2lnblVwVmVyaWZpY2F0aW9uQ3R4LFxuICBTaWduVXBTdHJhdGVneSxcbiAgU2lnblVwU3RlcCxcbiAgTG9hZGluZyxcbiAgTGlua1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTdCM0lXV1dMLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs\n"));

/***/ })

});