"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/sign-in/[[...sign-in]]/page",{

/***/ "(app-pages-browser)/./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAPTCHA_ELEMENT_ID: () => (/* binding */ CAPTCHA_ELEMENT_ID),\n/* harmony export */   ClerkElementsError: () => (/* binding */ ClerkElementsError),\n/* harmony export */   ClerkElementsRuntimeError: () => (/* binding */ ClerkElementsRuntimeError),\n/* harmony export */   Connection: () => (/* binding */ Connection),\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   Field: () => (/* binding */ Field),\n/* harmony export */   FieldError: () => (/* binding */ FieldError),\n/* harmony export */   FieldState: () => (/* binding */ FieldState),\n/* harmony export */   Form: () => (/* binding */ Form),\n/* harmony export */   FormStoreProvider: () => (/* binding */ FormStoreProvider),\n/* harmony export */   GlobalError: () => (/* binding */ GlobalError),\n/* harmony export */   Icon: () => (/* binding */ Icon),\n/* harmony export */   Input: () => (/* binding */ Input),\n/* harmony export */   Label: () => (/* binding */ Label),\n/* harmony export */   Link: () => (/* binding */ Link),\n/* harmony export */   Loading: () => (/* binding */ Loading),\n/* harmony export */   MAGIC_LINK_VERIFY_PATH_ROUTE: () => (/* binding */ MAGIC_LINK_VERIFY_PATH_ROUTE),\n/* harmony export */   NEXT_WINDOW_HISTORY_SUPPORT_VERSION: () => (/* binding */ NEXT_WINDOW_HISTORY_SUPPORT_VERSION),\n/* harmony export */   RESENDABLE_COUNTDOWN_DEFAULT: () => (/* binding */ RESENDABLE_COUNTDOWN_DEFAULT),\n/* harmony export */   ROUTING: () => (/* binding */ ROUTING),\n/* harmony export */   SEARCH_PARAMS: () => (/* binding */ SEARCH_PARAMS),\n/* harmony export */   SIGN_IN_DEFAULT_BASE_PATH: () => (/* binding */ SIGN_IN_DEFAULT_BASE_PATH),\n/* harmony export */   SIGN_UP_DEFAULT_BASE_PATH: () => (/* binding */ SIGN_UP_DEFAULT_BASE_PATH),\n/* harmony export */   SIGN_UP_MODES: () => (/* binding */ SIGN_UP_MODES),\n/* harmony export */   SSO_CALLBACK_PATH_ROUTE: () => (/* binding */ SSO_CALLBACK_PATH_ROUTE),\n/* harmony export */   SignInFirstFactor: () => (/* binding */ SignInFirstFactor),\n/* harmony export */   SignInFirstFactorCtx: () => (/* binding */ SignInFirstFactorCtx),\n/* harmony export */   SignInRouterCtx: () => (/* binding */ SignInRouterCtx),\n/* harmony export */   SignInRouterMachine: () => (/* binding */ SignInRouterMachine),\n/* harmony export */   SignInSafeIdentifierSelectorForStrategy: () => (/* binding */ SignInSafeIdentifierSelectorForStrategy),\n/* harmony export */   SignInSalutationSelector: () => (/* binding */ SignInSalutationSelector),\n/* harmony export */   SignInSecondFactor: () => (/* binding */ SignInSecondFactor),\n/* harmony export */   SignInSecondFactorCtx: () => (/* binding */ SignInSecondFactorCtx),\n/* harmony export */   SignInSessionList: () => (/* binding */ SignInSessionList),\n/* harmony export */   SignInSessionListItem: () => (/* binding */ SignInSessionListItem),\n/* harmony export */   SignInStep: () => (/* binding */ SignInStep),\n/* harmony export */   SignInStrategy: () => (/* binding */ SignInStrategy),\n/* harmony export */   SignInSupportedStrategy: () => (/* binding */ SignInSupportedStrategy),\n/* harmony export */   SignUpRouterCtx: () => (/* binding */ SignUpRouterCtx),\n/* harmony export */   SignUpStartCtx: () => (/* binding */ SignUpStartCtx),\n/* harmony export */   SignUpStep: () => (/* binding */ SignUpStep),\n/* harmony export */   SignUpStrategy: () => (/* binding */ SignUpStrategy),\n/* harmony export */   SignUpVerificationCtx: () => (/* binding */ SignUpVerificationCtx),\n/* harmony export */   Submit: () => (/* binding */ Submit),\n/* harmony export */   ThirdPartyMachine: () => (/* binding */ ThirdPartyMachine),\n/* harmony export */   ThirdPartyMachineId: () => (/* binding */ ThirdPartyMachineId),\n/* harmony export */   __privateAdd: () => (/* binding */ __privateAdd),\n/* harmony export */   __privateGet: () => (/* binding */ __privateGet),\n/* harmony export */   __privateSet: () => (/* binding */ __privateSet),\n/* harmony export */   assertActorEventError: () => (/* binding */ assertActorEventError),\n/* harmony export */   inspect: () => (/* binding */ inspect),\n/* harmony export */   sendToLoading: () => (/* binding */ sendToLoading),\n/* harmony export */   shouldUseVirtualRouting: () => (/* binding */ shouldUseVirtualRouting),\n/* harmony export */   useActiveTags: () => (/* binding */ useActiveTags),\n/* harmony export */   useFormStore: () => (/* binding */ useFormStore),\n/* harmony export */   useSignInActiveSessionContext: () => (/* binding */ useSignInActiveSessionContext),\n/* harmony export */   useSignInStrategy: () => (/* binding */ useSignInStrategy)\n/* harmony export */ });\n/* harmony import */ var client_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! client-only */ \"(app-pages-browser)/./node_modules/next/dist/compiled/client-only/index.js\");\n/* harmony import */ var _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @radix-ui/react-form */ \"(app-pages-browser)/./node_modules/@clerk/elements/node_modules/@radix-ui/react-form/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var _xstate_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @xstate/react */ \"(app-pages-browser)/./node_modules/@xstate/react/dist/xstate-react.development.esm.js\");\n/* harmony import */ var _clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @clerk/shared/error */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/error.mjs\");\n/* harmony import */ var _clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/shared/underscore */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/underscore.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/xstate.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/log-0acd9069.development.esm.js\");\n/* harmony import */ var _clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @clerk/shared/react */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/react/index.mjs\");\n/* harmony import */ var _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @clerk/shared/utils */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/utils/index.mjs\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @radix-ui/react-slot */ \"(app-pages-browser)/./node_modules/@radix-ui/react-slot/dist/index.mjs\");\n/* harmony import */ var _radix_ui_primitive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @radix-ui/primitive */ \"(app-pages-browser)/./node_modules/@radix-ui/primitive/dist/index.mjs\");\n/* harmony import */ var _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @clerk/shared/logger */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/logger.mjs\");\n/* harmony import */ var _clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @clerk/shared/telemetry */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/telemetry.mjs\");\n/* harmony import */ var _clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @clerk/shared/constants */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/constants.mjs\");\n/* harmony import */ var _clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @clerk/shared/oauth */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/oauth.mjs\");\n/* harmony import */ var _clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @clerk/shared/web3 */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/web3.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/actors/dist/xstate-actors.development.esm.js\");\n/* harmony import */ var _clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @clerk/shared/webauthn */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/webauthn.mjs\");\n/* harmony import */ var _clerk_shared_url__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @clerk/shared/url */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/url.mjs\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! xstate */ \"(app-pages-browser)/./node_modules/xstate/dist/raise-1db27a82.development.esm.js\");\n/* harmony import */ var _clerk_shared_router__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @clerk/shared/router */ \"(app-pages-browser)/./node_modules/@clerk/shared/dist/router.mjs\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\n\n// src/react/common/index.ts\n\n\n// src/react/common/form/field.tsx\n\n\n\n// src/internals/machines/form/form.context.ts\n\n\n// src/internals/machines/form/form.machine.ts\n\n\n\n\n// src/internals/errors/index.ts\nvar ClerkElementsErrorBase = class extends Error {\n  constructor(code, message) {\n    super(message);\n    this.code = code;\n    this.clerkError = true;\n    this.clerkElementsError = true;\n    this.name = \"ClerkElementsError\";\n    this.rawMessage = message;\n  }\n  toString() {\n    return `[${this.name}]\nCode: ${this.code}\nMessage: ${this.message}`;\n  }\n};\nvar ClerkElementsError = class _ClerkElementsError extends ClerkElementsErrorBase {\n  static fromAPIError(error) {\n    return new _ClerkElementsError(\n      error.code.toString(),\n      // @ts-expect-error - Expected that longMessage isn't a property of MetamaskError\n      error.longMessage || error.message\n    );\n  }\n  constructor(code, message) {\n    super(code, message);\n    this.name = \"ClerkElementsError\";\n  }\n};\nvar ClerkElementsRuntimeError = class extends ClerkElementsErrorBase {\n  constructor(message) {\n    super(\"elements_runtime_error\", message);\n    this.name = \"ClerkElementsRuntimeError\";\n  }\n};\nvar ClerkElementsFieldError = class _ClerkElementsFieldError extends ClerkElementsErrorBase {\n  constructor(code, message) {\n    super(code, message);\n    this.matchFn = () => true;\n    this.name = \"ClerkElementsFieldError\";\n  }\n  static fromAPIError(error) {\n    return new _ClerkElementsFieldError(error.code, error.longMessage || error.message);\n  }\n  get validityState() {\n    return this.code;\n  }\n  get forceMatch() {\n    return true;\n  }\n};\n\n// src/internals/machines/form/form.machine.ts\nvar FormMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actions: {\n    setGlobalErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      errors: (_, params) => [...params.errors]\n    }),\n    setFieldFeedback: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      fields: ({ context }, params) => {\n        if (!params.name) {\n          throw new Error(\"Field name is required\");\n        }\n        const fieldName = params.name;\n        if (context.fields.has(fieldName)) {\n          context.fields.get(fieldName).feedback = params.feedback;\n        }\n        return context.fields;\n      }\n    })\n  },\n  types: {}\n}).createMachine({\n  id: \"Form\",\n  context: () => ({\n    defaultValues: /* @__PURE__ */ new Map(),\n    errors: [],\n    fields: /* @__PURE__ */ new Map(),\n    progressive: false\n  }),\n  on: {\n    \"ERRORS.SET\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, event }) => {\n        var _a, _b, _c;\n        const isClerkAPIError = (err) => \"meta\" in err;\n        if ((0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isKnownError)(event.error)) {\n          const fields = {};\n          const globalErrors = [];\n          const errors = (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isClerkAPIResponseError)(event.error) ? (_a = event.error) == null ? void 0 : _a.errors : [event.error];\n          for (const error of errors) {\n            const name = isClerkAPIError(error) ? (0,_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.snakeToCamel)((_b = error.meta) == null ? void 0 : _b.paramName) : null;\n            if (!name || (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isMetamaskError)(error)) {\n              globalErrors.push(ClerkElementsError.fromAPIError(error));\n              continue;\n            }\n            if (!fields[name]) {\n              fields[name] = [];\n            }\n            (_c = fields[name]) == null ? void 0 : _c.push(ClerkElementsFieldError.fromAPIError(error));\n          }\n          enqueue({\n            type: \"setGlobalErrors\",\n            params: {\n              errors: globalErrors\n            }\n          });\n          for (const field in fields) {\n            enqueue({\n              type: \"setFieldFeedback\",\n              params: {\n                name: field,\n                feedback: {\n                  type: \"error\",\n                  message: fields[field][0]\n                }\n              }\n            });\n          }\n        }\n      })\n    },\n    \"ERRORS.CLEAR\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        errors: () => []\n      })\n    },\n    \"FIELD.ADD\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          event.field.value = event.field.value || context.defaultValues.get(event.field.name) || void 0;\n          context.fields.set(event.field.name, event.field);\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.UPDATE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          var _a;\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.checked = event.field.checked;\n            field.disabled = (_a = event.field.disabled) != null ? _a : field.disabled;\n            field.value = event.field.value;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.DISABLE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.disabled = true;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.ENABLE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          const field = context.fields.get(event.field.name);\n          if (field) {\n            field.disabled = false;\n            context.fields.set(event.field.name, field);\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.REMOVE\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          context.fields.delete(event.field.name);\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.FEEDBACK.SET\": {\n      actions: [\n        {\n          type: \"setFieldFeedback\",\n          params: ({ event }) => event.field\n        }\n      ]\n    },\n    \"FIELD.FEEDBACK.CLEAR\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error(\"Field name is required\");\n          }\n          if (context.fields.has(event.field.name)) {\n            context.fields.get(event.field.name).feedback = void 0;\n          }\n          return context.fields;\n        }\n      })\n    },\n    \"FIELD.FEEDBACK.CLEAR.ALL\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        fields: ({ context }) => {\n          context.fields.forEach((field) => {\n            field.feedback = void 0;\n          });\n          return context.fields;\n        }\n      })\n    },\n    MARK_AS_PROGRESSIVE: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n        const missing = new Set(event.missing);\n        return {\n          defaultValues: event.defaultValues,\n          hidden: /* @__PURE__ */ new Set([...event.required.filter((f) => !missing.has(f)), ...event.optional]),\n          missing,\n          optional: new Set(event.optional),\n          progressive: true,\n          required: new Set(event.required)\n        };\n      })\n    },\n    UNMARK_AS_PROGRESSIVE: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        defaultValues: /* @__PURE__ */ new Map(),\n        hidden: void 0,\n        missing: void 0,\n        optional: void 0,\n        progressive: false,\n        required: void 0\n      })\n    },\n    PREFILL_DEFAULT_VALUES: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n        return {\n          defaultValues: event.defaultValues\n        };\n      })\n    }\n  }\n});\n\n// src/utils/safe-access.ts\nfunction safeAccess(fn, fallback) {\n  try {\n    return fn();\n  } catch (e) {\n    return fallback;\n  }\n}\n\n// src/internals/utils/inspector/index.ts\nvar inspect;\nif (false) {}\n\n// src/internals/machines/form/form.context.ts\nvar FormMachineContext = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.createActorContext)(FormMachine, { inspect });\nvar FormStoreProvider = FormMachineContext.Provider;\nvar useFormStore = FormMachineContext.useActorRef;\nvar useFormSelector = FormMachineContext.useSelector;\nvar globalErrorsSelector = (state) => state.context.errors;\nvar fieldValueSelector = (name) => (state) => {\n  var _a;\n  return name ? (_a = state.context.fields.get(name)) == null ? void 0 : _a.value : \"\";\n};\nvar fieldHasValueSelector = (name) => (state) => Boolean(fieldValueSelector(name)(state));\nvar fieldFeedbackSelector = (name) => (state) => {\n  var _a;\n  return name ? (_a = state.context.fields.get(name)) == null ? void 0 : _a.feedback : void 0;\n};\n\n// src/react/common/form/hooks/use-field-feedback.ts\nfunction useFieldFeedback({ name }) {\n  const feedback = useFormSelector(fieldFeedbackSelector(name));\n  return {\n    feedback\n  };\n}\n\n// src/react/common/form/hooks/use-field.ts\nfunction useField({ name }) {\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n  const { feedback } = useFieldFeedback({ name });\n  const shouldBeHidden = false;\n  const hasError = feedback ? feedback.type === \"error\" : false;\n  return {\n    hasValue,\n    props: {\n      \"data-hidden\": shouldBeHidden ? true : void 0,\n      serverInvalid: hasError\n    }\n  };\n}\n\n// src/react/common/form/hooks/use-field-context.ts\n\nvar FieldContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nvar useFieldContext = () => react__WEBPACK_IMPORTED_MODULE_1__.useContext(FieldContext);\n\n// src/react/common/form/types.ts\nvar FIELD_STATES = {\n  success: \"success\",\n  error: \"error\",\n  idle: \"idle\",\n  warning: \"warning\",\n  info: \"info\"\n};\n\n// src/react/common/form/hooks/use-field-state.ts\nfunction useFieldState({ name }) {\n  const { feedback } = useFieldFeedback({ name });\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n  let state = FIELD_STATES.idle;\n  if (!hasValue) {\n    state = FIELD_STATES.idle;\n  }\n  switch (feedback == null ? void 0 : feedback.type) {\n    case \"error\":\n      state = FIELD_STATES.error;\n      break;\n    case \"warning\":\n      state = FIELD_STATES.warning;\n      break;\n    case \"info\":\n      state = FIELD_STATES.info;\n      break;\n    case \"success\":\n      state = FIELD_STATES.success;\n      break;\n    default:\n      break;\n  }\n  return {\n    state\n  };\n}\n\n// src/react/common/form/hooks/use-form.ts\n\n\n// src/react/common/form/hooks/use-global-errors.ts\nfunction useGlobalErrors() {\n  const errors = useFormSelector(globalErrorsSelector);\n  return {\n    errors\n  };\n}\n\n// src/react/common/form/hooks/use-form.ts\nfunction useForm({ flowActor }) {\n  const { errors } = useGlobalErrors();\n  const onSubmit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (event) => {\n      event.preventDefault();\n      if (flowActor) {\n        flowActor.send({ type: \"SUBMIT\", action: \"submit\" });\n      }\n    },\n    [flowActor]\n  );\n  return {\n    props: {\n      ...errors.length > 0 ? { \"data-global-error\": true } : {},\n      onSubmit\n    }\n  };\n}\n\n// src/react/common/form/hooks/use-input.tsx\n\n\n\n// src/react/hooks/use-password.hook.ts\n\n\n\n\n// src/react/utils/generate-password-error-text.ts\nvar errorMessages = {\n  max_length: [\"less than %length% characters\", \"length\"],\n  min_length: [\"%length% or more characters\", \"length\"],\n  require_numbers: \"a number\",\n  require_lowercase: \"a lowercase letter\",\n  require_uppercase: \"an uppercase letter\",\n  require_special_char: \"a special character\"\n};\nvar createListFormat = (message) => {\n  let messageWithPrefix;\n  if (\"ListFormat\" in Intl) {\n    const formatter = new Intl.ListFormat(\"en\", { style: \"long\", type: \"conjunction\" });\n    messageWithPrefix = formatter.format(message);\n  } else {\n    messageWithPrefix = message.join(\", \");\n  }\n  return messageWithPrefix;\n};\nfunction buildErrorTuple(key, config) {\n  switch (key) {\n    case \"max_length\":\n      return [key, { max_length: config.max_length }];\n    case \"min_length\":\n      return [key, { min_length: config.min_length }];\n    case \"require_special_char\":\n      return [key, { allowed_special_characters: config.allowed_special_characters }];\n    default:\n      return key;\n  }\n}\nvar generatePasswordErrorText = ({ config, failedValidations }) => {\n  const codes = [];\n  if (!failedValidations || Object.keys(failedValidations).length === 0) {\n    return {\n      codes,\n      message: \"\"\n    };\n  }\n  const hasMinLengthError = (failedValidations == null ? void 0 : failedValidations.min_length) || false;\n  const messages = Object.entries(failedValidations).filter((k) => hasMinLengthError ? k[0] === \"min_length\" : true).filter(([, v]) => !!v).map(([k]) => {\n    const entry = k;\n    const errorTuple = buildErrorTuple(entry, config);\n    codes.push(errorTuple);\n    const errorKey = errorMessages[entry];\n    if (Array.isArray(errorKey)) {\n      const [msg, replaceValue] = errorKey;\n      return msg.replace(`%${replaceValue}%`, config[k]);\n    }\n    return errorKey;\n  });\n  const messageWithPrefix = createListFormat(messages);\n  return {\n    codes,\n    message: `Your password must contain ${messageWithPrefix}.`\n  };\n};\n\n// src/react/hooks/use-password.hook.ts\nvar usePassword = (callbacks) => {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  const passwordSettings = (_a = clerk.__unstable__environment) == null ? void 0 : _a.userSettings.passwordSettings;\n  const { disable_hibp, min_zxcvbn_strength, show_zxcvbn, ...config } = passwordSettings || {};\n  const {\n    onValidationError = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationSuccess = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationWarning = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationInfo = _clerk_shared_utils__WEBPACK_IMPORTED_MODULE_8__.noop,\n    onValidationComplexity\n  } = callbacks || {};\n  const onValidate = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (res) => {\n      var _a2, _b, _c;\n      if (res.complexity) {\n        if (Object.values(res == null ? void 0 : res.complexity).length > 0) {\n          const { message, codes } = generatePasswordErrorText({\n            config,\n            failedValidations: res.complexity\n          });\n          if ((_a2 = res.complexity) == null ? void 0 : _a2.min_length) {\n            return onValidationInfo(message, codes);\n          }\n          return onValidationError(message, codes);\n        }\n      }\n      if (((_b = res == null ? void 0 : res.strength) == null ? void 0 : _b.state) === \"fail\") {\n        const keys = res.strength.keys;\n        const error = keys.map((key) => get(zxcvbnKeys, key)).join(\" \");\n        return onValidationError(error, keys);\n      }\n      if (((_c = res == null ? void 0 : res.strength) == null ? void 0 : _c.state) === \"pass\") {\n        const keys = res.strength.keys;\n        const error = keys.map((key) => get(zxcvbnKeys, key)).join(\" \");\n        return onValidationWarning(error, keys);\n      }\n      return onValidationSuccess();\n    },\n    [callbacks, config]\n  );\n  const validatePassword = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => {\n    return (password) => {\n      return clerk.client.signUp.validatePassword(password, {\n        onValidation: onValidate,\n        onValidationComplexity\n      });\n    };\n  }, [onValidate]);\n  return {\n    validatePassword\n  };\n};\nvar get = (t, path) => path.split(\".\").reduce((r, k) => r == null ? void 0 : r[k], t);\nvar zxcvbnKeys = {\n  unstable__errors: {\n    zxcvbn: {\n      couldBeStronger: \"Your password works, but could be stronger. Try adding more characters.\",\n      goodPassword: \"Your password meets all the necessary requirements.\",\n      notEnough: \"Your password is not strong enough.\",\n      suggestions: {\n        allUppercase: \"Capitalize some, but not all letters.\",\n        anotherWord: \"Add more words that are less common.\",\n        associatedYears: \"Avoid years that are associated with you.\",\n        capitalization: \"Capitalize more than the first letter.\",\n        dates: \"Avoid dates and years that are associated with you.\",\n        l33t: \"Avoid predictable letter substitutions like '@' for 'a'.\",\n        longerKeyboardPattern: \"Use longer keyboard patterns and change typing direction multiple times.\",\n        noNeed: \"You can create strong passwords without using symbols, numbers, or uppercase letters.\",\n        pwned: \"If you use this password elsewhere, you should change it.\",\n        recentYears: \"Avoid recent years.\",\n        repeated: \"Avoid repeated words and characters.\",\n        reverseWords: \"Avoid reversed spellings of common words.\",\n        sequences: \"Avoid common character sequences.\",\n        useWords: \"Use multiple words, but avoid common phrases.\"\n      },\n      warnings: {\n        common: \"This is a commonly used password.\",\n        commonNames: \"Common names and surnames are easy to guess.\",\n        dates: \"Dates are easy to guess.\",\n        extendedRepeat: 'Repeated character patterns like \"abcabcabc\" are easy to guess.',\n        keyPattern: \"Short keyboard patterns are easy to guess.\",\n        namesByThemselves: \"Single names or surnames are easy to guess.\",\n        pwned: \"Your password was exposed by a data breach on the Internet.\",\n        recentYears: \"Recent years are easy to guess.\",\n        sequences: 'Common character sequences like \"abc\" are easy to guess.',\n        similarToCommon: \"This is similar to a commonly used password.\",\n        simpleRepeat: 'Repeated characters like \"aaa\" are easy to guess.',\n        straightRow: \"Straight rows of keys on your keyboard are easy to guess.\",\n        topHundred: \"This is a frequently used password.\",\n        topTen: \"This is a heavily used password.\",\n        userInputs: \"There should not be any personal or page related data.\",\n        wordByItself: \"Single words are easy to guess.\"\n      }\n    }\n  }\n};\n\n// src/react/common/form/otp.tsx\n\n\n\nvar ZERO = [0, 0];\nvar OUTSIDE = [-1, -1];\nvar OTP_LENGTH_DEFAULT = 6;\nvar PASSWORD_MANAGER_OFFSET_DEFAULT = 40;\nvar OTPInput = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function OTPInput2(props, ref) {\n  const { render, length, autoSubmit, ...rest } = props;\n  const hasRenderProp = typeof render !== \"undefined\";\n  if (hasRenderProp) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      OTPInputSegmented,\n      {\n        ...rest,\n        ref,\n        render,\n        length,\n        autoSubmit\n      }\n    );\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    OTPInputStandard,\n    {\n      ...rest,\n      ref,\n      length,\n      autoSubmit\n    }\n  );\n});\nvar OTPInputStandard = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  function OTPInput3(props, ref) {\n    const { length = OTP_LENGTH_DEFAULT, autoSubmit = false, ...rest } = props;\n    const innerRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, () => innerRef.current, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      var _a, _b;\n      if (String(props.value).length === length && autoSubmit) {\n        (_b = (_a = innerRef.current) == null ? void 0 : _a.form) == null ? void 0 : _b.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control,\n      {\n        ref: innerRef,\n        ...rest,\n        \"data-otp-input-standard\": true\n      }\n    );\n  }\n);\nvar OTPInputSegmented = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  function OTPInput4(props, ref) {\n    const {\n      className: userProvidedClassName,\n      render,\n      length = OTP_LENGTH_DEFAULT,\n      autoSubmit = false,\n      passwordManagerOffset = PASSWORD_MANAGER_OFFSET_DEFAULT,\n      ...rest\n    } = props;\n    const innerRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    const [selectionRange, setSelectionRange] = react__WEBPACK_IMPORTED_MODULE_1__.useState(props.autoFocus ? ZERO : OUTSIDE);\n    const [isHovering, setIsHovering] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n    const isFocused = () => document.activeElement === innerRef.current;\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, () => innerRef.current, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n      if (document.activeElement !== innerRef.current) {\n        return;\n      }\n      setSelectionRange((cur) => selectionRangeUpdater(cur, innerRef));\n    }, [props.value]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      function onSelectionChange() {\n        if (!isFocused()) {\n          return;\n        }\n        setSelectionRange((cur) => selectionRangeUpdater(cur, innerRef));\n      }\n      document.addEventListener(\"selectionchange\", onSelectionChange, { capture: true });\n      return () => document.removeEventListener(\"selectionchange\", onSelectionChange);\n    }, []);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      var _a, _b;\n      if (String(props.value).length === length && autoSubmit) {\n        (_b = (_a = innerRef.current) == null ? void 0 : _a.form) == null ? void 0 : _b.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\n      \"div\",\n      {\n        \"data-otp-input-wrapper\": true,\n        style: wrapperStyle,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"style\", { children: `\n      input[data-otp-input-segmented]::selection {\n        color: transparent;\n        background-color: transparent;\n      }\n      ` }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n            _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control,\n            {\n              \"data-otp-input-segmented\": true,\n              ref: innerRef,\n              ...rest,\n              onFocus: (event) => {\n                var _a;\n                if (innerRef.current) {\n                  const start = Math.min(innerRef.current.value.length, length - 1);\n                  const end = innerRef.current.value.length;\n                  innerRef.current.setSelectionRange(start, end);\n                  setSelectionRange([start, end]);\n                }\n                (_a = rest == null ? void 0 : rest.onFocus) == null ? void 0 : _a.call(rest, event);\n              },\n              onBlur: (event) => {\n                var _a;\n                setSelectionRange([-1, -1]);\n                (_a = rest == null ? void 0 : rest.onBlur) == null ? void 0 : _a.call(rest, event);\n              },\n              onMouseOver: (event) => {\n                var _a;\n                if (!isFocused()) {\n                  setIsHovering(true);\n                }\n                (_a = props.onMouseOver) == null ? void 0 : _a.call(props, event);\n              },\n              onMouseLeave: (event) => {\n                var _a;\n                setIsHovering(false);\n                (_a = props.onMouseLeave) == null ? void 0 : _a.call(props, event);\n              },\n              style: {\n                ...inputStyle,\n                clipPath: `inset(0 calc(1ch + ${passwordManagerOffset}px) 0 0)`,\n                width: `calc(100% + 1ch + ${passwordManagerOffset}px)`\n              }\n            }\n          ),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n            \"div\",\n            {\n              className: userProvidedClassName,\n              \"aria-hidden\": true,\n              style: segmentWrapperStyle,\n              children: Array.from({ length }).map((_, i) => {\n                var _a, _b;\n                const isHovered = isHovering && !isFocused();\n                const isCursor = selectionRange[0] === selectionRange[1] && selectionRange[0] === i;\n                const isSelected = ((_a = selectionRange[0]) != null ? _a : -1) <= i && ((_b = selectionRange[1]) != null ? _b : -1) > i;\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: render({\n                  value: String(props.value)[i] || \"\",\n                  status: isHovered ? \"hovered\" : isCursor ? \"cursor\" : isSelected ? \"selected\" : \"none\",\n                  index: i\n                }) }, `otp-segment-${i}`);\n              })\n            }\n          )\n        ]\n      }\n    );\n  }\n);\nfunction selectionRangeUpdater(cur, inputRef) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  let updated = [\n    (_b = (_a = inputRef.current) == null ? void 0 : _a.selectionStart) != null ? _b : 0,\n    (_d = (_c = inputRef.current) == null ? void 0 : _c.selectionEnd) != null ? _d : 0,\n    (_f = (_e = inputRef.current) == null ? void 0 : _e.selectionDirection) != null ? _f : null\n  ];\n  if (cur[0] === updated[0] && cur[1] === updated[1]) {\n    return cur;\n  }\n  if (updated[0] === 0 && updated[1] === 1) {\n    updated[2] = \"forward\";\n  }\n  if (updated[0] === updated[1]) {\n    if (updated[0] > 0 && cur[0] === updated[0] && cur[1] === updated[0] + 1) {\n      updated = [updated[0] - 1, updated[1], \"backward\"];\n    } else if (typeof ((_g = inputRef.current) == null ? void 0 : _g.value[updated[0]]) !== \"undefined\") {\n      updated = [updated[0], updated[1] + 1, \"backward\"];\n    } else if (updated[0] >= OTP_LENGTH_DEFAULT) {\n      updated = [updated[0] - 1, updated[1], \"backward\"];\n    }\n  }\n  (_i = inputRef.current) == null ? void 0 : _i.setSelectionRange(updated[0], updated[1], (_h = updated[2]) != null ? _h : void 0);\n  return [updated[0], updated[1]];\n}\nvar wrapperStyle = {\n  position: \"relative\",\n  userSelect: \"none\"\n};\nvar inputStyle = {\n  display: \"block\",\n  background: \"transparent\",\n  opacity: 0,\n  outline: \"transparent solid 0px\",\n  appearance: \"none\",\n  color: \"transparent\",\n  position: \"absolute\",\n  inset: 0,\n  caretColor: \"transparent\",\n  border: \"0px solid transparent\",\n  // width is handled inline\n  height: \"100%\",\n  letterSpacing: \"-1rem\"\n};\nvar segmentWrapperStyle = {\n  zIndex: 1,\n  pointerEvents: \"none\"\n};\n\n// src/react/common/form/utils/enrich-field-state.ts\nfunction enrichFieldState(validity, fieldState) {\n  return (validity == null ? void 0 : validity.valid) === false ? FIELD_STATES.error : fieldState;\n}\n\n// src/react/common/form/utils/determine-input-type-from-name.ts\nfunction determineInputTypeFromName(name) {\n  if (name === \"password\" || name === \"confirmPassword\" || name === \"currentPassword\" || name === \"newPassword\") {\n    return \"password\";\n  }\n  if (name === \"emailAddress\") {\n    return \"email\";\n  }\n  if (name === \"phoneNumber\") {\n    return \"tel\";\n  }\n  if (name === \"code\") {\n    return \"otp\";\n  }\n  if (name === \"backup_code\") {\n    return \"backup_code\";\n  }\n  return \"text\";\n}\n\n// src/react/common/form/hooks/use-previous.ts\n\nfunction usePrevious(value) {\n  const ref = react__WEBPACK_IMPORTED_MODULE_1__.useRef();\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\n// src/react/common/form/hooks/use-validity-state-context.ts\n\nvar ValidityStateContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nvar useValidityStateContext = () => react__WEBPACK_IMPORTED_MODULE_1__.useContext(ValidityStateContext);\n\n// src/react/common/form/hooks/use-input.tsx\nfunction useInput({\n  name: inputName,\n  value: providedValue,\n  checked: providedChecked,\n  onChange: onChangeProp,\n  onBlur: onBlurProp,\n  onFocus: onFocusProp,\n  type: inputType,\n  ...passthroughProps\n}) {\n  const fieldContext = useFieldContext();\n  const rawName = inputName || (fieldContext == null ? void 0 : fieldContext.name);\n  const name = rawName === \"backup_code\" ? \"code\" : rawName;\n  const { state: fieldState } = useFieldState({ name });\n  const validity = useValidityStateContext();\n  if (!rawName || !name) {\n    throw new Error(\"Clerk: <Input /> must be wrapped in a <Field> component or have a name prop.\");\n  }\n  const ref = useFormStore();\n  const [hasPassedValiation, setHasPassedValidation] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const { validatePassword } = usePassword({\n    onValidationComplexity: (hasPassed) => setHasPassedValidation(hasPassed),\n    onValidationSuccess: () => {\n      ref.send({\n        type: \"FIELD.FEEDBACK.SET\",\n        field: { name, feedback: { type: \"success\", message: \"Your password meets all the necessary requirements.\" } }\n      });\n    },\n    onValidationError: (error, codes) => {\n      if (error) {\n        ref.send({\n          type: \"FIELD.FEEDBACK.SET\",\n          field: {\n            name,\n            feedback: {\n              type: \"error\",\n              message: new ClerkElementsFieldError(\"password-validation-error\", error),\n              codes\n            }\n          }\n        });\n      }\n    },\n    onValidationWarning: (warning, codes) => ref.send({\n      type: \"FIELD.FEEDBACK.SET\",\n      field: { name, feedback: { type: \"warning\", message: warning, codes } }\n    }),\n    onValidationInfo: (info, codes) => {\n      ref.send({\n        type: \"FIELD.FEEDBACK.SET\",\n        field: {\n          name,\n          feedback: {\n            type: \"info\",\n            message: info,\n            codes\n          }\n        }\n      });\n    }\n  });\n  const value = useFormSelector(fieldValueSelector(name));\n  const prevValue = usePrevious(value);\n  const hasValue = Boolean(value);\n  const type = inputType != null ? inputType : determineInputTypeFromName(rawName);\n  let nativeFieldType = type;\n  let shouldValidatePassword = false;\n  if (type === \"password\" || type === \"text\") {\n    shouldValidatePassword = Boolean(passthroughProps.validatePassword);\n  }\n  if (nativeFieldType === \"otp\" || nativeFieldType === \"backup_code\") {\n    nativeFieldType = \"text\";\n  }\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (!name) {\n      return;\n    }\n    ref.send({\n      type: \"FIELD.ADD\",\n      field: { name, type: nativeFieldType, value: providedValue, checked: providedChecked }\n    });\n    return () => ref.send({ type: \"FIELD.REMOVE\", field: { name } });\n  }, [ref]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (!name) {\n      return;\n    }\n    if (type === \"checkbox\" && providedChecked !== void 0 || type !== \"checkbox\" && providedValue !== void 0) {\n      ref.send({\n        type: \"FIELD.UPDATE\",\n        field: { name, value: providedValue, checked: providedChecked }\n      });\n    }\n  }, [name, type, ref, providedValue, providedChecked]);\n  const onChange = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onChangeProp == null ? void 0 : onChangeProp(event);\n      if (!name) {\n        return;\n      }\n      ref.send({ type: \"FIELD.UPDATE\", field: { name, value: event.target.value, checked: event.target.checked } });\n      if (shouldValidatePassword) {\n        validatePassword(event.target.value);\n      }\n    },\n    [ref, name, onChangeProp, shouldValidatePassword, validatePassword]\n  );\n  const onBlur = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onBlurProp == null ? void 0 : onBlurProp(event);\n      if (shouldValidatePassword && event.target.value !== prevValue) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onBlurProp, shouldValidatePassword, validatePassword, prevValue]\n  );\n  const onFocus = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n    (event) => {\n      onFocusProp == null ? void 0 : onFocusProp(event);\n      if (shouldValidatePassword && event.target.value !== prevValue) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onFocusProp, shouldValidatePassword, validatePassword, prevValue]\n  );\n  const shouldBeHidden = false;\n  const Element = type === \"otp\" ? OTPInput : _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Control;\n  let props = {};\n  if (type === \"otp\") {\n    const p = passthroughProps;\n    const length = p.length || OTP_LENGTH_DEFAULT;\n    props = {\n      \"data-otp-input\": true,\n      autoComplete: \"one-time-code\",\n      inputMode: \"numeric\",\n      pattern: `[0-9]{${length}}`,\n      minLength: length,\n      maxLength: length,\n      onChange: (event) => {\n        event.currentTarget.value = event.currentTarget.value.replace(/\\D+/g, \"\");\n        onChange(event);\n      },\n      type: \"text\",\n      spellCheck: false\n    };\n  } else if (type === \"backup_code\") {\n    props = {\n      autoComplete: \"off\",\n      type: \"text\",\n      spellCheck: false\n    };\n  } else if (type === \"password\" && shouldValidatePassword) {\n    props = {\n      \"data-has-passed-validation\": hasPassedValiation ? true : void 0\n    };\n  }\n  const { validatePassword: _1, ...rest } = passthroughProps;\n  return {\n    Element,\n    props: {\n      type,\n      value: value != null ? value : \"\",\n      onChange,\n      onBlur,\n      onFocus,\n      \"data-hidden\": shouldBeHidden ? true : void 0,\n      \"data-has-value\": hasValue ? true : void 0,\n      \"data-state\": enrichFieldState(validity, fieldState),\n      ...props,\n      ...rest\n    }\n  };\n}\n\n// src/react/common/form/field.tsx\n\nvar DISPLAY_NAME = \"ClerkElementsField\";\nvar DISPLAY_NAME_INNER = \"ClerkElementsFieldInner\";\nvar Field = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ alwaysShow, ...rest }, forwardedRef) => {\n  var _a;\n  const formRef = useFormStore();\n  const formCtx = formRef.getSnapshot().context;\n  const isHiddenField = formCtx.progressive && Boolean((_a = formCtx.hidden) == null ? void 0 : _a.has(rest.name));\n  const shouldHide = alwaysShow ? false : isHiddenField;\n  return shouldHide ? null : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(FieldContext.Provider, { value: { name: rest.name }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    FieldInner,\n    {\n      ...rest,\n      ref: forwardedRef\n    }\n  ) });\n});\nField.displayName = DISPLAY_NAME;\nvar FieldInner = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((props, forwardedRef) => {\n  const { children, ...rest } = props;\n  const field = useField({ name: rest.name });\n  const { state: fieldState } = useFieldState({ name: rest.name });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Field,\n    {\n      ...field.props,\n      ...rest,\n      ref: forwardedRef,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.ValidityState, { children: (validity) => {\n        const enrichedFieldState = enrichFieldState(validity, fieldState);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ValidityStateContext.Provider, { value: validity, children: typeof children === \"function\" ? children(enrichedFieldState) : children });\n      } })\n    }\n  );\n});\nFieldInner.displayName = DISPLAY_NAME_INNER;\n\n// src/react/common/form/field-error.tsx\n\n\n\n\n// src/react/utils/is-react-fragment.ts\n\nfunction isReactFragment(node) {\n  return react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(node) && node.type === react__WEBPACK_IMPORTED_MODULE_1__.Fragment;\n}\n\n// src/react/common/form/field-error.tsx\n\nvar DISPLAY_NAME2 = \"ClerkElementsFieldError\";\nvar FieldError = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild = false, children, code, name, ...rest }, forwardedRef) => {\n    const fieldContext = useFieldContext();\n    const rawFieldName = (fieldContext == null ? void 0 : fieldContext.name) || name;\n    const fieldName = rawFieldName === \"backup_code\" ? \"code\" : rawFieldName;\n    const { feedback } = useFieldFeedback({ name: fieldName });\n    if (!((feedback == null ? void 0 : feedback.type) === \"error\")) {\n      return null;\n    }\n    const error = feedback.message;\n    if (!error) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"span\";\n    const child = typeof children === \"function\" ? children(error) : children;\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError(\"<FieldError /> cannot render a Fragment as a child.\");\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.FormMessage,\n      {\n        \"data-error-code\": error.code,\n        ...rest,\n        ref: forwardedRef,\n        asChild: true,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { children: child || error.message })\n      }\n    );\n  }\n);\nFieldError.displayName = DISPLAY_NAME2;\n\n// src/react/common/form/field-state.tsx\nvar DISPLAY_NAME3 = \"ClerkElementsFieldState\";\nfunction FieldState({ children }) {\n  const field = useFieldContext();\n  const { feedback } = useFieldFeedback({ name: field == null ? void 0 : field.name });\n  const { state } = useFieldState({ name: field == null ? void 0 : field.name });\n  const validity = useValidityStateContext();\n  const message = (feedback == null ? void 0 : feedback.message) instanceof ClerkElementsFieldError ? feedback.message.message : feedback == null ? void 0 : feedback.message;\n  const codes = feedback == null ? void 0 : feedback.codes;\n  const fieldState = { state: enrichFieldState(validity, state), message, codes };\n  return children(fieldState);\n}\nFieldState.displayName = DISPLAY_NAME3;\n\n// src/react/common/form/form.tsx\n\n\n\n\nvar DISPLAY_NAME4 = \"ClerkElementsForm\";\nvar Form = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ flowActor, onSubmit, ...rest }, forwardedRef) => {\n  const form = useForm({ flowActor });\n  const { onSubmit: internalOnSubmit, ...internalFormProps } = form.props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Form,\n    {\n      ...internalFormProps,\n      ...rest,\n      onSubmit: (0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_12__.composeEventHandlers)(internalOnSubmit, onSubmit),\n      ref: forwardedRef\n    }\n  );\n});\nForm.displayName = DISPLAY_NAME4;\n\n// src/react/common/form/global-error.tsx\n\n\n\nvar DISPLAY_NAME5 = \"ClerkElementsGlobalError\";\nvar GlobalError = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild = false, children, code, ...rest }, forwardedRef) => {\n    const { errors } = useGlobalErrors();\n    const error = errors == null ? void 0 : errors[0];\n    if (!error || code && error.code !== code) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n    const child = typeof children === \"function\" ? children(error) : children;\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError(\"<GlobalError /> cannot render a Fragment as a child.\");\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      Comp,\n      {\n        role: \"alert\",\n        ...rest,\n        ref: forwardedRef,\n        children: child || error.message\n      }\n    );\n  }\n);\nGlobalError.displayName = DISPLAY_NAME5;\n\n// src/react/common/form/input.tsx\n\n\n\n\n\n// src/react/utils/create-context-from-actor-ref.ts\n\n\nfunction createContextFromActorRef(displayName) {\n  const ReactContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\n  const OriginalProvider = ReactContext.Provider;\n  function Provider({ children, actorRef }) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\n      OriginalProvider,\n      {\n        value: actorRef\n      },\n      children\n    );\n  }\n  Provider.displayName = displayName;\n  function useContext9(allowMissingActor = false) {\n    const actorRef = react__WEBPACK_IMPORTED_MODULE_1__.useContext(ReactContext);\n    if (!allowMissingActor && !actorRef) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`\n      );\n    }\n    return actorRef;\n  }\n  function useSelector6(selector, compare) {\n    const actor = useContext9();\n    return (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actor, selector, compare);\n  }\n  return {\n    Provider,\n    useActorRef: useContext9,\n    useSelector: useSelector6\n  };\n}\n\n// src/react/sign-in/context/router.context.ts\nvar SignInRouterCtx = createContextFromActorRef(\"SignInRouterCtx\");\nfunction useSignInStep(name) {\n  return SignInRouterCtx.useSelector((state) => state.children[name]);\n}\nvar useSignInStartStep = () => useSignInStep(\"start\");\nvar useSignInFirstFactorStep = () => useSignInStep(\"firstFactor\");\nvar useSignInSecondFactorStep = () => useSignInStep(\"secondFactor\");\nvar useSignInResetPasswordStep = () => useSignInStep(\"resetPassword\");\nvar useSignInPasskeyAutofill = () => SignInRouterCtx.useSelector((state) => state.context.webAuthnAutofillSupport);\n\n// src/react/sign-in/context/sign-in-strategy.context.ts\n\nvar SignInStrategyContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n  strategy: void 0\n});\nfunction useSignInStrategy() {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SignInStrategyContext);\n  if (!ctx) {\n    throw new ClerkElementsRuntimeError(\n      \"useSignInStrategy must be used within a <SignIn.Strategy> or <SignIn.SupportedStrategy> component.\"\n    );\n  }\n  const { strategy } = ctx;\n  return strategy;\n}\n\n// src/react/sign-in/context/strategies.context.ts\n\nvar StrategiesContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n  current: void 0,\n  isActive: (_name) => false,\n  preferred: void 0\n});\nfunction useStrategy(name) {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StrategiesContext);\n  if (!ctx) {\n    throw new ClerkElementsRuntimeError(\n      'useStrategy must be used within a <SignIn.Step name=\"verifications\"> component. Did you mean to `import { Step } from \"@clerk/elements/sign-up\"` instead?'\n    );\n  }\n  const { current, preferred, isActive } = ctx;\n  return {\n    current,\n    preferred,\n    get active() {\n      return isActive(name);\n    }\n  };\n}\n\n// src/react/common/form/input.tsx\n\nvar DISPLAY_NAME6 = \"ClerkElementsInput\";\nvar DISPLAY_NAME_PASSKEYS_AUTOFILL = \"ClerkElementsInputWithPasskeyAutofill\";\nvar Input = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  (props, forwardedRef) => {\n    var _a, _b, _c;\n    const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n    const field = useInput(props);\n    const hasPasskeyAutofillProp = Boolean((_a = field.props.autoComplete) == null ? void 0 : _a.includes(\"webauthn\"));\n    const allowedTypeForPasskey = [\"text\", \"email\", \"tel\"].includes(field.props.type);\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n    (_c = clerk.telemetry) == null ? void 0 : _c.record(\n      (0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_Input\", {\n        type: (_b = props.type) != null ? _b : false,\n        // @ts-expect-error - Depending on type the props can be different\n        render: Boolean(props == null ? void 0 : props.render),\n        // @ts-expect-error - Depending on type the props can be different\n        asChild: Boolean(props == null ? void 0 : props.asChild),\n        // @ts-expect-error - Depending on type the props can be different\n        validatePassword: Boolean(props == null ? void 0 : props.validatePassword)\n      })\n    );\n    if (signInRouterRef && hasPasskeyAutofillProp && allowedTypeForPasskey) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        InputWithPasskeyAutofill,\n        {\n          ref: forwardedRef,\n          ...props\n        }\n      );\n    }\n    if (hasPasskeyAutofillProp && !allowedTypeForPasskey) {\n      _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__.logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used with <Input type=\"text\"> or <Input type=\"email\">`\n      );\n    } else if (hasPasskeyAutofillProp) {\n      _clerk_shared_logger__WEBPACK_IMPORTED_MODULE_13__.logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used inside <SignIn> in order to trigger a sign-in attempt, otherwise it will be ignored.`\n      );\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      field.Element,\n      {\n        ref: forwardedRef,\n        ...field.props\n      }\n    );\n  }\n);\nInput.displayName = DISPLAY_NAME6;\nvar InputWithPasskeyAutofill = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  (props, forwardedRef) => {\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n    const passkeyAutofillSupported = useSignInPasskeyAutofill();\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n      if (passkeyAutofillSupported) {\n        signInRouterRef == null ? void 0 : signInRouterRef.send({ type: \"AUTHENTICATE.PASSKEY.AUTOFILL\" });\n      }\n    }, [passkeyAutofillSupported, signInRouterRef]);\n    const field = useInput(props);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      field.Element,\n      {\n        ref: forwardedRef,\n        ...field.props\n      }\n    );\n  }\n);\nInputWithPasskeyAutofill.displayName = DISPLAY_NAME_PASSKEYS_AUTOFILL;\n\n// src/react/common/form/label.tsx\n\nvar DISPLAY_NAME7 = \"ClerkElementsLabel\";\nvar Label = _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Label;\nLabel.displayName = DISPLAY_NAME7;\n\n// src/react/common/form/submit.tsx\n\nvar DISPLAY_NAME8 = \"ClerkElementsSubmit\";\nvar Submit = _radix_ui_react_form__WEBPACK_IMPORTED_MODULE_10__.Submit;\nSubmit.displayName = DISPLAY_NAME8;\n\n// src/react/common/connections.tsx\n\n\n\n// src/react/hooks/use-active-tags.hook.ts\n\nvar ActiveTagsMode = {\n  any: \"any\",\n  all: \"all\"\n};\nfunction useActiveTags(actor, tags, mode = ActiveTagsMode.any) {\n  const state = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(\n    actor,\n    (s) => s,\n    (prev, next) => prev.tags === next.tags\n  );\n  if (!state) {\n    return false;\n  }\n  if (typeof tags === \"string\") {\n    return state.hasTag(tags);\n  }\n  if (!Array.isArray(tags)) {\n    throw new Error(\"Invalid tags parameter provided to useActiveTags\");\n  }\n  switch (mode) {\n    case ActiveTagsMode.any: {\n      const matching = new Set(tags.filter((tag) => state.hasTag(tag)));\n      return { active: matching.size > 0, activeTags: matching };\n    }\n    case ActiveTagsMode.all:\n      return tags.length === state.tags.size ? tags.every((tag) => state.hasTag(tag)) : false;\n    default:\n      return false;\n  }\n}\n\n// src/react/hooks/use-third-party-provider.hook.ts\n\n\n\n// src/utils/third-party-strategies.ts\n\n\n\n\n// src/utils/clerk-js.ts\nvar fromEntries = (iterable) => {\n  return [...iterable].reduce((obj, [key, val]) => {\n    obj[key] = val;\n    return obj;\n  }, {});\n};\n\n// src/utils/third-party-strategies.ts\nvar oauthStrategies = _clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS.map((p) => p.strategy);\nvar providerToDisplayData = fromEntries(\n  [..._clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS, ..._clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__.WEB3_PROVIDERS].map((p) => {\n    return [p.provider, { iconUrl: (0,_clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__.iconImageUrl)(p.provider), name: p.name, strategy: p.strategy }];\n  })\n);\nvar strategyToDisplayData = fromEntries(\n  [..._clerk_shared_oauth__WEBPACK_IMPORTED_MODULE_16__.OAUTH_PROVIDERS, ..._clerk_shared_web3__WEBPACK_IMPORTED_MODULE_17__.WEB3_PROVIDERS].map((p) => {\n    return [p.strategy, { iconUrl: (0,_clerk_shared_constants__WEBPACK_IMPORTED_MODULE_15__.iconImageUrl)(p.provider), id: p.provider, name: p.name }];\n  })\n);\nfunction isSamlStrategy(strategy) {\n  return strategy === \"saml\";\n}\nfunction isWeb3Strategy(strategy, available) {\n  return available.includes(strategy.startsWith(\"web3_\") ? strategy : `web3_${strategy}_signature`);\n}\nfunction isAuthenticatableOauthStrategy(strategy, available) {\n  return available.includes(strategy.startsWith(\"oauth_\") ? strategy : `oauth_${strategy}`);\n}\nvar emptyThirdPartyProviders = {\n  authenticatableOauthStrategies: [],\n  providerToDisplayData: {},\n  strategies: [],\n  strategyToDisplayData: {},\n  web3Strategies: []\n};\nvar getEnabledThirdPartyProviders = (environment) => {\n  if (!(environment == null ? void 0 : environment.userSettings)) {\n    return emptyThirdPartyProviders;\n  }\n  const { socialProviderStrategies, web3FirstFactors, authenticatableSocialStrategies } = environment.userSettings;\n  const knownSocialProviderStrategies = socialProviderStrategies.filter((s) => oauthStrategies.includes(s));\n  const knownAuthenticatableSocialStrategies = authenticatableSocialStrategies.filter((s) => oauthStrategies.includes(s));\n  return {\n    authenticatableOauthStrategies: [...knownAuthenticatableSocialStrategies],\n    providerToDisplayData,\n    strategies: [...knownSocialProviderStrategies, ...web3FirstFactors],\n    strategyToDisplayData,\n    web3Strategies: web3FirstFactors\n  };\n};\n\n// src/react/hooks/use-third-party-provider.hook.ts\nvar useIsProviderEnabled = (provider) => {\n  var _a, _b;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  if (!clerk.loaded) {\n    return null;\n  }\n  if (provider === \"saml\") {\n    return (_b = (_a = clerk.__unstable__environment) == null ? void 0 : _a.userSettings.saml.enabled) != null ? _b : false;\n  }\n  const data = getEnabledThirdPartyProviders(clerk.__unstable__environment);\n  return isAuthenticatableOauthStrategy(provider, data.authenticatableOauthStrategies) || isWeb3Strategy(provider, data.web3Strategies);\n};\nvar useThirdPartyProvider = (ref, provider) => {\n  const isProviderEnabled = useIsProviderEnabled(provider);\n  const isSaml = isSamlStrategy(provider);\n  const details = isSaml ? {\n    name: \"SAML\",\n    strategy: \"saml\"\n  } : providerToDisplayData[provider];\n  const authenticate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (event) => {\n      if (!isProviderEnabled) {\n        return;\n      }\n      event.preventDefault();\n      if (isSaml) {\n        return ref.send({ type: \"AUTHENTICATE.SAML\" });\n      }\n      if (provider === \"metamask\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_metamask_signature\" });\n      }\n      if (provider === \"coinbase_wallet\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_coinbase_wallet_signature\" });\n      }\n      if (provider === \"okx_wallet\") {\n        return ref.send({ type: \"AUTHENTICATE.WEB3\", strategy: \"web3_okx_wallet_signature\" });\n      }\n      return ref.send({ type: \"AUTHENTICATE.OAUTH\", strategy: `oauth_${provider}` });\n    },\n    [provider, isProviderEnabled, isSaml, ref]\n  );\n  if (isProviderEnabled === false) {\n    const dashboardPath = `https://dashboard.clerk.com/last-active?path=/user-authentication/${provider === \"metamask\" ? \"web3\" : \"social-connections\"}`;\n    throw new ClerkElementsRuntimeError(\n      `You have used <Connection name=\"${provider}\"> which isn't enabled for your project. Enable ${details.name} in your Clerk dashboard: ${dashboardPath}`\n    );\n  }\n  return {\n    events: {\n      authenticate\n    },\n    ...details\n  };\n};\n\n// src/react/sign-up/context/router.context.ts\nvar SignUpRouterCtx = createContextFromActorRef(\"SignUpRouterCtx\");\nfunction useSignUpStep(name) {\n  return SignUpRouterCtx.useSelector((state) => state.children[name]);\n}\nvar useSignUpStartStep = () => useSignUpStep(\"start\");\nvar useSignUpContinueStep = () => useSignUpStep(\"continue\");\nvar useSignUpVerificationStep = () => useSignUpStep(\"verification\");\n\n// src/react/common/connections.tsx\n\nvar ConnectionContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nvar useConnectionContext = () => {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConnectionContext);\n  if (!ctx) {\n    throw new Error(\"useConnectionContext must be used within <Clerk.Connection>\");\n  }\n  return ctx;\n};\nfunction Connection({ asChild, name, ...rest }) {\n  const signInRef = SignInRouterCtx.useActorRef(true);\n  const signUpRef = SignUpRouterCtx.useActorRef(true);\n  const provider = useThirdPartyProvider(signInRef || signUpRef, name);\n  if (!provider) {\n    return null;\n  }\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"button\";\n  const defaultProps = asChild ? {} : { type: \"button\" };\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ConnectionContext.Provider, { value: provider, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Comp,\n    {\n      onClick: provider.events.authenticate,\n      ...defaultProps,\n      ...rest\n    }\n  ) });\n}\nfunction Icon({ asChild, ...rest }) {\n  const { iconUrl, name } = useConnectionContext();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"img\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Comp,\n    {\n      alt: `${name} logo`,\n      src: iconUrl,\n      ...rest\n    }\n  );\n}\n\n// src/react/common/loading.tsx\n\n\n\n\n// src/react/hooks/use-loading.hook.ts\n\nvar selectLoading = (snapshot) => {\n  var _a;\n  return (_a = snapshot == null ? void 0 : snapshot.context) == null ? void 0 : _a.loading;\n};\nvar compareLoadingValue = (prev, next) => (prev == null ? void 0 : prev.isLoading) === (next == null ? void 0 : next.isLoading);\nfunction useLoading(actor) {\n  const loadingCtx = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actor, selectLoading, compareLoadingValue);\n  if (!loadingCtx) {\n    return [false, { step: void 0, strategy: void 0, action: void 0 }];\n  }\n  return [loadingCtx.isLoading, { step: loadingCtx.step, strategy: loadingCtx.strategy, action: loadingCtx.action }];\n}\n\n// src/react/sign-in/step.tsx\n\n\n\n// src/react/sign-in/choose-session/choose-session.tsx\n\n\n\n// src/react/utils/create-context-for-dom-validation.ts\n\nfunction createContextForDomValidation(displayName) {\n  const ReactContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(false);\n  const OriginalProvider = ReactContext.Provider;\n  function Provider({ children }) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\n      OriginalProvider,\n      {\n        value: true\n      },\n      children\n    );\n  }\n  Provider.displayName = displayName;\n  function useContext9(allowMissingContext = false) {\n    const context = react__WEBPACK_IMPORTED_MODULE_1__.useContext(ReactContext);\n    if (!allowMissingContext && !context) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`\n      );\n    }\n    return context;\n  }\n  return {\n    Provider,\n    useDomValidation: useContext9\n  };\n}\n\n// src/react/utils/is-valid-component-type.ts\n\nfunction isValidComponentType(child, type) {\n  return react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(child) && child.type === type;\n}\n\n// src/react/sign-in/choose-session/choose-session.hooks.ts\n\nvar SignInActiveSessionContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nfunction useSignInActiveSessionContext() {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_1__.useContext(SignInActiveSessionContext);\n  if (!ctx) {\n    throw new Error(\"SignInActiveSessionContext must be used within a SessionList/SignInSessionListItem\");\n  }\n  return ctx;\n}\nfunction useSignInChooseSessionIsActive() {\n  const routerRef = SignInRouterCtx.useActorRef();\n  return useActiveTags(routerRef, \"step:choose-session\");\n}\nfunction useSignInActiveSessionList(params) {\n  const { omitCurrent = true } = params || {};\n  return SignInRouterCtx.useSelector((state) => {\n    var _a, _b, _c, _d;\n    const activeSessions = ((_b = (_a = state.context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.activeSessions) || [];\n    const currentSessionId = (_d = (_c = state.context.clerk) == null ? void 0 : _c.session) == null ? void 0 : _d.id;\n    const filteredSessions = omitCurrent ? activeSessions.filter((s) => s.id !== currentSessionId) : activeSessions;\n    return filteredSessions.map((s) => ({\n      id: s.id,\n      ...s.publicUserData\n    }));\n  });\n}\n\n// src/react/sign-in/choose-session/choose-session.tsx\n\nvar SignInChooseSessionCtx = createContextForDomValidation(\"SignInChooseSessionCtx\");\nfunction SignInChooseSession({ asChild, children, ...props }) {\n  const activeState = useSignInChooseSessionIsActive();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseSessionCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nfunction SignInSessionList({ asChild, children, includeCurrentSession, ...props }) {\n  const sessions = useSignInActiveSessionList({ omitCurrent: !includeCurrentSession });\n  if (!children || !(sessions == null ? void 0 : sessions.length)) {\n    return null;\n  }\n  if (react__WEBPACK_IMPORTED_MODULE_1__.Children.count(children) > 1) {\n    return react__WEBPACK_IMPORTED_MODULE_1__.Children.only(null);\n  }\n  if (asChild && isValidComponentType(children, SignInSessionListItem)) {\n    throw new Error(\"asChild cannot be used with SessionListItem as the direct child\");\n  }\n  if (!react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(children)) {\n    throw new Error(\"children must be a valid React element\");\n  }\n  const newChildren = asChild ? children.props.children : children;\n  const childrenWithCtx = sessions.map((session) => {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      SignInActiveSessionContext.Provider,\n      {\n        value: session,\n        children: newChildren\n      },\n      `SignInActiveSessionContext-${session.id}`\n    );\n  });\n  if (asChild) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot, { ...props, children: react__WEBPACK_IMPORTED_MODULE_1__.cloneElement(children, void 0, childrenWithCtx) });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"ul\", { ...props, children: childrenWithCtx });\n}\nfunction SignInSessionListItem(props) {\n  const { asChild = false, children, ...passthroughProps } = props;\n  const session = useSignInActiveSessionContext();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"li\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...passthroughProps, children: children({ session }) });\n}\n\n// src/react/sign-in/choose-strategy.tsx\n\n\n\n\n// src/internals/machines/sign-in/verification.machine.ts\n\n\n\n// src/internals/constants/index.ts\nvar SSO_CALLBACK_PATH_ROUTE = \"/sso-callback\";\nvar CHOOSE_SESSION_PATH_ROUTE = \"/choose\";\nvar MAGIC_LINK_VERIFY_PATH_ROUTE = \"/verify\";\nvar SIGN_UP_MODES = {\n  PUBLIC: \"public\",\n  RESTRICTED: \"restricted\"\n};\nvar SIGN_IN_DEFAULT_BASE_PATH = safeAccess(\n  () => {\n    var _a;\n    return (_a = process.env.CLERK_SIGN_IN_URL) != null ? _a : \"/sign-in\";\n  },\n  \"/sign-in\"\n);\nvar SIGN_UP_DEFAULT_BASE_PATH = safeAccess(\n  () => {\n    var _a;\n    return (_a = process.env.CLERK_SIGN_UP_URL) != null ? _a : \"/sign-up\";\n  },\n  \"/sign-up\"\n);\nvar NEXT_WINDOW_HISTORY_SUPPORT_VERSION = \"14.1.0\";\nvar SEARCH_PARAMS = {\n  createdSession: \"__clerk_created_session\",\n  handshake: \"__clerk_handshake\",\n  help: \"__clerk_help\",\n  invitationToken: \"__clerk_invitation_token\",\n  modalState: \"__clerk_modal_state\",\n  satelliteUrl: \"__clerk_satellite_url\",\n  status: \"__clerk_status\",\n  synced: \"__clerk_synced\",\n  ticket: \"__clerk_ticket\",\n  transfer: \"__clerk_transfer\"\n};\nvar RESENDABLE_COUNTDOWN_DEFAULT = 60;\nvar CAPTCHA_ELEMENT_ID = \"clerk-captcha\";\nvar ERROR_CODES = {\n  FORM_IDENTIFIER_NOT_FOUND: \"form_identifier_not_found\",\n  FORM_PASSWORD_INCORRECT: \"form_password_incorrect\",\n  INVALID_STRATEGY_FOR_USER: \"strategy_for_user_invalid\",\n  NOT_ALLOWED_TO_SIGN_UP: \"not_allowed_to_sign_up\",\n  OAUTH_ACCESS_DENIED: \"oauth_access_denied\",\n  OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML: \"oauth_email_domain_reserved_by_saml\",\n  NOT_ALLOWED_ACCESS: \"not_allowed_access\",\n  SAML_USER_ATTRIBUTE_MISSING: \"saml_user_attribute_missing\",\n  USER_LOCKED: \"user_locked\",\n  ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING: \"enterprise_sso_user_attribute_missing\",\n  ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH: \"enterprise_sso_email_address_domain_mismatch\",\n  ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH: \"enterprise_sso_hosted_domain_mismatch\",\n  SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH: \"saml_email_address_domain_mismatch\",\n  ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO: \"organization_membership_quota_exceeded_for_sso\"\n};\nvar ROUTING = {\n  path: \"path\",\n  virtual: \"virtual\",\n  hash: \"hash\"\n};\n\n// src/internals/machines/shared/shared.actions.ts\nfunction sendToLoading({ context, event }) {\n  let step;\n  let strategy;\n  let action;\n  if (event.type.startsWith(\"xstate.done.\") || event.type.startsWith(\"xstate.error.\")) {\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: false,\n      step: void 0,\n      strategy: void 0\n    });\n  }\n  if (context.loadingStep === \"strategy\") {\n    step = void 0;\n    if (event.type === \"REDIRECT\") {\n      strategy = event.params.strategy;\n    }\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy\n    });\n  } else if (context.loadingStep === \"continue\") {\n    step = \"continue\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else if (context.loadingStep === \"reset-password\") {\n    step = \"reset-password\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else if (context.loadingStep === \"start\") {\n    step = \"start\";\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  } else {\n    step = context.loadingStep;\n    strategy = void 0;\n    action = \"action\" in event ? event.action : void 0;\n    return context.parent.send({\n      type: \"LOADING\",\n      isLoading: true,\n      step,\n      strategy,\n      action\n    });\n  }\n}\n\n// src/internals/machines/sign-in/utils/starting-factors.ts\n\nvar makeSortingOrderMap = (arr) => arr.reduce(\n  (acc, k, i) => {\n    acc[k] = i;\n    return acc;\n  },\n  {}\n);\nvar STRATEGY_SORT_ORDER_PASSWORD_PREF = makeSortingOrderMap([\n  \"passkey\",\n  \"password\",\n  \"email_link\",\n  \"email_code\",\n  \"phone_code\"\n]);\nvar STRATEGY_SORT_ORDER_OTP_PREF = makeSortingOrderMap([\n  \"email_code\",\n  \"email_link\",\n  \"phone_code\",\n  \"passkey\",\n  \"password\"\n]);\nvar makeSortingFunction = (sortingMap) => (a, b) => {\n  const orderA = sortingMap[a.strategy];\n  const orderB = sortingMap[b.strategy];\n  if (orderA === void 0 || orderB === void 0) {\n    return 0;\n  }\n  return orderA - orderB;\n};\nvar passwordPrefFactorComparator = makeSortingFunction(STRATEGY_SORT_ORDER_PASSWORD_PREF);\nvar otpPrefFactorComparator = makeSortingFunction(STRATEGY_SORT_ORDER_OTP_PREF);\nvar findFactorForIdentifier = (i) => (f) => {\n  return \"safeIdentifier\" in f && f.safeIdentifier === i;\n};\nfunction determineStartingSignInFactor(firstFactors, identifier, preferredSignInStrategy) {\n  if (!firstFactors || firstFactors.length === 0) {\n    return null;\n  }\n  return preferredSignInStrategy === \"password\" ? determineStrategyWhenPasswordIsPreferred(firstFactors, identifier) : determineStrategyWhenOTPIsPreferred(firstFactors, identifier);\n}\nfunction findPasskeyStrategy(factors) {\n  if ((0,_clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__.isWebAuthnSupported)()) {\n    const passkeyFactor = factors.find(({ strategy }) => strategy === \"passkey\");\n    if (passkeyFactor) {\n      return passkeyFactor;\n    }\n  }\n  return null;\n}\nfunction determineStrategyWhenPasswordIsPreferred(factors, identifier) {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n  const selected = factors.sort(passwordPrefFactorComparator)[0];\n  if (selected.strategy === \"password\") {\n    return selected;\n  }\n  return factors.find(findFactorForIdentifier(identifier)) || selected || null;\n}\nfunction determineStrategyWhenOTPIsPreferred(factors, identifier) {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n  const sortedBasedOnPrefFactor = factors.sort(otpPrefFactorComparator);\n  const forIdentifier = sortedBasedOnPrefFactor.find(findFactorForIdentifier(identifier));\n  if (forIdentifier) {\n    return forIdentifier;\n  }\n  const firstBasedOnPref = sortedBasedOnPrefFactor[0];\n  if (firstBasedOnPref.strategy === \"email_link\") {\n    return firstBasedOnPref;\n  }\n  return factors.find(findFactorForIdentifier(identifier)) || firstBasedOnPref || null;\n}\nfunction determineStartingSignInSecondFactor(secondFactors) {\n  if (!secondFactors || secondFactors.length === 0) {\n    return null;\n  }\n  const totpFactor = secondFactors.find((f) => f.strategy === \"totp\");\n  if (totpFactor) {\n    return totpFactor;\n  }\n  const phoneCodeFactor = secondFactors.find((f) => f.strategy === \"phone_code\");\n  if (phoneCodeFactor) {\n    return phoneCodeFactor;\n  }\n  return secondFactors[0];\n}\n\n// src/internals/machines/utils/assert.ts\nfunction assertIsDefined(value, label) {\n  if (value === void 0 || value === null) {\n    throw new Error(`${label || value} is not defined`);\n  }\n}\nfunction assertActorEventError(event) {\n  if (\"error\" in event === false) {\n    throw new Error(`Expected an error event, got \"${event.type}\"`);\n  }\n}\n\n// src/internals/machines/sign-in/verification.types.ts\nvar SignInVerificationDelays = {\n  resendableTimeout: 1e3\n  // 1 second\n};\n\n// src/internals/machines/sign-in/verification.machine.ts\nvar isNonPreparableStrategy = (strategy) => {\n  if (!strategy) {\n    return false;\n  }\n  return [\"passkey\", \"password\"].includes(strategy);\n};\nvar SignInVerificationMachineId = \"SignInVerification\";\nvar SignInVerificationMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `determineStartingFactor` must be overridden\"))\n    ),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `prepare` must be overridden\"))\n    ),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      () => Promise.reject(new ClerkElementsRuntimeError(\"Actor `attempt` must be overridden\"))\n    ),\n    attemptPasskey: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { parent, flow } }) => {\n      return parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey({\n        flow\n      });\n    })\n  },\n  actions: {\n    resendableTick: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ context }) => ({\n      resendable: context.resendableAfter === 0,\n      resendableAfter: context.resendableAfter > 0 ? context.resendableAfter - 1 : context.resendableAfter\n    })),\n    resendableReset: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      resendable: false,\n      resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT\n    }),\n    validateRegisteredStrategies: ({ context }) => {\n      var _a;\n      const clerk = context.parent.getSnapshot().context.clerk;\n      if ((_a = clerk.__unstable__environment) == null ? void 0 : _a.isProduction()) {\n        return;\n      }\n      if (false) {}\n    },\n    sendToNext: ({ context, event }) => context.parent.send({ type: \"NEXT\", resource: event.output }),\n    sendToLoading,\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    ),\n    setConsoleError: ({ event }) => {\n      if (true) {\n        return;\n      }\n      assertActorEventError(event);\n      const error = (0,_clerk_shared_error__WEBPACK_IMPORTED_MODULE_2__.isClerkAPIResponseError)(event.error) ? event.error.errors[0].longMessage : event.error.message;\n      console.error(`Unable to fulfill the prepare or attempt request for the sign-in verification.\n      Error: ${error}\n      Please open an issue if you continue to run into this issue.`);\n    }\n  },\n  guards: {\n    isResendable: ({ context }) => context.resendable || context.resendableAfter === 0,\n    isNeverResendable: ({ context }) => {\n      var _a;\n      return isNonPreparableStrategy((_a = context.currentFactor) == null ? void 0 : _a.strategy);\n    }\n  },\n  delays: SignInVerificationDelays,\n  types: {}\n}).createMachine({\n  id: SignInVerificationMachineId,\n  context: ({ input }) => ({\n    currentFactor: null,\n    basePath: input.basePath || SIGN_IN_DEFAULT_BASE_PATH,\n    formRef: input.formRef,\n    loadingStep: \"verifications\",\n    parent: input.parent,\n    registeredStrategies: /* @__PURE__ */ new Set(),\n    resendable: false,\n    resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT\n  }),\n  initial: \"Init\",\n  on: {\n    \"NAVIGATE.PREVIOUS\": \".Hist\",\n    \"STRATEGY.REGISTER\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        registeredStrategies: ({ context, event }) => context.registeredStrategies.add(event.factor)\n      })\n    },\n    \"STRATEGY.UNREGISTER\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n        registeredStrategies: ({ context, event }) => {\n          context.registeredStrategies.delete(event.factor);\n          return context.registeredStrategies;\n        }\n      })\n    }\n  },\n  states: {\n    Init: {\n      tags: [\"state:preparing\", \"state:loading\"],\n      invoke: {\n        id: \"determineStartingFactor\",\n        src: \"determineStartingFactor\",\n        input: ({ context }) => ({\n          parent: context.parent\n        }),\n        onDone: {\n          target: \"Preparing\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n            currentFactor: ({ event }) => event.output\n          })\n        },\n        onError: {\n          target: \"Preparing\",\n          actions: [\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Clerk [Sign In Verification]: Error determining starting factor\"),\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n              currentFactor: { strategy: \"password\" }\n            })\n          ]\n        }\n      }\n    },\n    Preparing: {\n      tags: [\"state:preparing\", \"state:loading\"],\n      invoke: {\n        id: \"prepare\",\n        src: \"prepare\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          resendable: context.resendable,\n          params: {\n            ...context.currentFactor,\n            redirectUrl: `${window.location.origin}${context.basePath}${MAGIC_LINK_VERIFY_PATH_ROUTE}`\n          }\n        }),\n        onDone: {\n          actions: \"resendableReset\",\n          target: \"Pending\"\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"setConsoleError\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        \"NAVIGATE.CHOOSE_STRATEGY\": \"ChooseStrategy\",\n        \"NAVIGATE.FORGOT_PASSWORD\": \"ChooseStrategy\",\n        RETRY: \"Preparing\",\n        SUBMIT: {\n          target: \"Attempting\",\n          reenter: true\n        }\n      },\n      initial: \"Init\",\n      states: {\n        Init: {\n          description: \"Marks appropriate factors as never resendable.\",\n          always: [\n            {\n              guard: \"isNeverResendable\",\n              target: \"NeverResendable\"\n            },\n            {\n              target: \"NotResendable\"\n            }\n          ]\n        },\n        Resendable: {\n          description: \"Waiting for user to retry\"\n        },\n        NeverResendable: {\n          description: \"Handles never resendable\",\n          on: {\n            RETRY: {\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Never retriable\")\n            }\n          }\n        },\n        NotResendable: {\n          description: \"Handle countdowns\",\n          on: {\n            RETRY: {\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(({ context }) => `Not retriable; Try again in ${context.resendableAfter}s`)\n            }\n          },\n          after: {\n            resendableTimeout: [\n              {\n                description: \"Set as retriable if countdown is 0\",\n                guard: \"isResendable\",\n                actions: \"resendableTick\",\n                target: \"Resendable\"\n              },\n              {\n                description: \"Continue countdown if not retriable\",\n                actions: \"resendableTick\",\n                target: \"NotResendable\",\n                reenter: true\n              }\n            ]\n          }\n        }\n      },\n      after: {\n        3e3: {\n          actions: \"validateRegisteredStrategies\"\n        }\n      }\n    },\n    ChooseStrategy: {\n      description: \"Handles both choose strategy and forgot password as the latter is similar in functionality\",\n      tags: [\"state:choose-strategy\", \"state:forgot-password\"],\n      on: {\n        \"STRATEGY.UPDATE\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({ currentFactor: ({ event }) => event.factor || null }),\n          target: \"Preparing\"\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          currentFactor: context.currentFactor,\n          fields: context.formRef.getSnapshot().context.fields\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"setConsoleError\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskey: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptPasskey\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"discoverable\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    Hist: {\n      type: \"history\"\n    }\n  }\n});\nvar SignInFirstFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a;\n      const clerk = input.parent.getSnapshot().context.clerk;\n      return Promise.resolve(\n        determineStartingSignInFactor(\n          clerk.client.signIn.supportedFirstFactors,\n          clerk.client.signIn.identifier,\n          (_a = clerk.__unstable__environment) == null ? void 0 : _a.displayConfig.preferredSignInStrategy\n        )\n      );\n    }),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n      const currentVerificationExpiration = clerk.client.signIn.firstFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < /* @__PURE__ */ new Date();\n      if (isNonPreparableStrategy(params == null ? void 0 : params.strategy) || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n      assertIsDefined(params, \"First factor params\");\n      return await clerk.client.signIn.prepareFirstFactor(params);\n    }),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a, _b, _c, _d, _e;\n      const { currentFactor, fields, parent } = input;\n      assertIsDefined(currentFactor, \"Current factor\");\n      let attemptParams;\n      const strategy = currentFactor.strategy;\n      const code = (_a = fields.get(\"code\")) == null ? void 0 : _a.value;\n      const password = (_b = fields.get(\"password\")) == null ? void 0 : _b.value;\n      switch (strategy) {\n        case \"passkey\": {\n          return await parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey();\n        }\n        case \"password\": {\n          assertIsDefined(password, \"Password\");\n          attemptParams = {\n            strategy,\n            password\n          };\n          break;\n        }\n        case \"reset_password_phone_code\":\n        case \"reset_password_email_code\": {\n          assertIsDefined(code, \"Code for resetting phone/email\");\n          attemptParams = {\n            strategy,\n            code,\n            password\n          };\n          break;\n        }\n        case \"phone_code\":\n        case \"email_code\": {\n          assertIsDefined(code, \"Code for phone/email\");\n          attemptParams = {\n            strategy,\n            code\n          };\n          break;\n        }\n        case \"web3_metamask_signature\": {\n          const signature = (_c = fields.get(\"signature\")) == null ? void 0 : _c.value;\n          assertIsDefined(signature, \"Web3 Metamask signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        case \"web3_coinbase_wallet_signature\": {\n          const signature = (_d = fields.get(\"signature\")) == null ? void 0 : _d.value;\n          assertIsDefined(signature, \"Web3 Coinbase Wallet signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        case \"web3_okx_wallet_signature\": {\n          const signature = (_e = fields.get(\"signature\")) == null ? void 0 : _e.value;\n          assertIsDefined(signature, \"Web3 OKX Wallet signature\");\n          attemptParams = {\n            strategy,\n            signature\n          };\n          break;\n        }\n        default:\n          throw new ClerkElementsRuntimeError(`Invalid strategy: ${strategy}`);\n      }\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptFirstFactor(attemptParams);\n    })\n  }\n});\nvar SignInSecondFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      async ({ input }) => Promise.resolve(\n        determineStartingSignInSecondFactor(\n          input.parent.getSnapshot().context.clerk.client.signIn.supportedSecondFactors\n        )\n      )\n    ),\n    prepare: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n      const currentVerificationExpiration = clerk.client.signIn.secondFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < /* @__PURE__ */ new Date();\n      assertIsDefined(params, \"Second factor params\");\n      if (params.strategy !== \"phone_code\" || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n      return await clerk.client.signIn.prepareSecondFactor({\n        strategy: params.strategy,\n        phoneNumberId: params.phoneNumberId\n      });\n    }),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(async ({ input }) => {\n      var _a;\n      const { fields, parent, currentFactor } = input;\n      const code = (_a = fields.get(\"code\")) == null ? void 0 : _a.value;\n      assertIsDefined(currentFactor, \"Current factor\");\n      assertIsDefined(code, \"Code\");\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptSecondFactor({\n        strategy: currentFactor.strategy,\n        code\n      });\n    })\n  }\n});\n\n// src/internals/machines/sign-in/router.machine.ts\n\n\n\n\n// src/internals/machines/third-party/third-party.actors.ts\n\n\n// src/internals/machines/utils/clerkjs.ts\nfunction isClerkJSEvent(eventObj, event) {\n  return Object.values(eventObj).includes(event);\n}\nvar ClerkJSNavigationEvent = {\n  complete: \"CLERKJS.NAVIGATE.COMPLETE\",\n  signUp: \"CLERKJS.NAVIGATE.SIGN_UP\",\n  continue: \"CLERKJS.NAVIGATE.CONTINUE\",\n  generic: \"CLERKJS.NAVIGATE.GENERIC\",\n  resetPassword: \"CLERKJS.NAVIGATE.RESET_PASSWORD\",\n  signIn: \"CLERKJS.NAVIGATE.SIGN_IN\",\n  verification: \"CLERKJS.NAVIGATE.VERIFICATION\"\n};\nfunction isClerkJSNavigationEvent(event) {\n  return isClerkJSEvent(ClerkJSNavigationEvent, event);\n}\n\n// src/internals/machines/third-party/third-party.actors.ts\nvar redirect = (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n  async ({ input: { flow, params, parent } }) => {\n    const clerk = parent.getSnapshot().context.clerk;\n    return clerk.client[flow].authenticateWithRedirect({\n      redirectUrl: clerk.buildUrlWithAuth(params.redirectUrl || \"/\"),\n      redirectUrlComplete: clerk.buildUrlWithAuth(params.redirectUrlComplete || \"/\"),\n      ...params\n    });\n  }\n);\nvar handleRedirectCallback = (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromCallback)(\n  ({ sendBack, input: parent }) => {\n    var _a, _b;\n    const clerk = parent.getSnapshot().context.clerk;\n    const displayConfig = (_a = clerk.__unstable__environment) == null ? void 0 : _a.displayConfig;\n    const customNavigate = (toEvt) => {\n      const to = toEvt.split(\"/\").slice(-1)[0];\n      if (isClerkJSNavigationEvent(to)) {\n        sendBack({ type: to });\n      } else if (to === (displayConfig == null ? void 0 : displayConfig.signInUrl)) {\n        sendBack({ type: ClerkJSNavigationEvent.signIn });\n      } else if (to === (displayConfig == null ? void 0 : displayConfig.signUpUrl)) {\n        sendBack({ type: ClerkJSNavigationEvent.signUp });\n      } else {\n        sendBack({ type: \"FAILURE\", error: new ClerkElementsRuntimeError(`Unknown navigation event: ${to}`) });\n      }\n      return Promise.resolve();\n    };\n    const loadedClerk = (_b = clerk.clerkjs) != null ? _b : clerk;\n    void loadedClerk.handleRedirectCallback(\n      {\n        continueSignUpUrl: ClerkJSNavigationEvent.continue,\n        firstFactorUrl: ClerkJSNavigationEvent.signIn,\n        resetPasswordUrl: ClerkJSNavigationEvent.resetPassword,\n        secondFactorUrl: ClerkJSNavigationEvent.signIn,\n        verifyEmailAddressUrl: ClerkJSNavigationEvent.verification,\n        verifyPhoneNumberUrl: ClerkJSNavigationEvent.verification,\n        signUpUrl: ClerkJSNavigationEvent.signUp,\n        signInUrl: ClerkJSNavigationEvent.signIn\n      },\n      customNavigate\n    );\n    return () => void 0;\n  }\n);\n\n// src/internals/machines/third-party/third-party.machine.ts\n\nvar ThirdPartyMachineId = \"ThirdParty\";\nvar ThirdPartyMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    handleRedirectCallback,\n    redirect\n  },\n  actions: {\n    logError: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(({ event }) => `Error: ${event.type}`),\n    assignActiveStrategy: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      activeStrategy: ({ event }) => {\n        (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"REDIRECT\");\n        return event.params.strategy;\n      }\n    }),\n    unassignActiveStrategy: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      activeStrategy: null\n    }),\n    sendToNext: ({ context }) => context.parent.send({ type: \"NEXT\" }),\n    sendToLoading,\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  guards: {\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode)\n  },\n  types: {}\n}).createMachine({\n  id: ThirdPartyMachineId,\n  context: ({ input }) => ({\n    activeStrategy: null,\n    basePath: input.basePath,\n    formRef: input.formRef,\n    flow: input.flow,\n    parent: input.parent,\n    loadingStep: \"strategy\"\n  }),\n  initial: \"Idle\",\n  states: {\n    Idle: {\n      description: \"Sets third-party providers if not already set, and waits for a redirect or callback event\",\n      on: {\n        CALLBACK: \"HandlingCallback\",\n        REDIRECT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Redirecting\",\n          reenter: true\n        }\n      }\n    },\n    Redirecting: {\n      description: \"Redirects to the third-party provider for authentication\",\n      tags: [\"state:redirect\", \"state:loading\"],\n      entry: [\"assignActiveStrategy\", \"sendToLoading\"],\n      exit: [\"unassignActiveStrategy\", \"sendToLoading\"],\n      invoke: {\n        id: \"redirect\",\n        src: \"redirect\",\n        input: ({ context, event }) => {\n          var _a;\n          (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"REDIRECT\");\n          const legalAcceptedField = (_a = context.formRef.getSnapshot().context.fields.get(\"legalAccepted\")) == null ? void 0 : _a.checked;\n          return {\n            basePath: context.basePath,\n            flow: context.flow,\n            params: {\n              ...event.params,\n              legalAccepted: legalAcceptedField || void 0\n            },\n            parent: context.parent\n          };\n        },\n        onError: {\n          actions: \"setFormErrors\",\n          target: \"Idle\"\n        }\n      }\n    },\n    HandlingCallback: {\n      description: \"Handles the callback from the third-party provider\",\n      tags: [\"state:callback\", \"state:loading\"],\n      invoke: {\n        id: \"handleRedirectCallback\",\n        src: \"handleRedirectCallback\",\n        input: ({ context }) => context.parent,\n        onError: {\n          actions: [\"logError\", \"setFormErrors\"],\n          target: \"Idle\"\n        }\n      },\n      on: {\n        \"CLERKJS.NAVIGATE.*\": {\n          actions: \"sendToNext\",\n          target: \"Idle\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/utils/next.ts\nfunction shouldUseVirtualRouting() {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  if (!window.next) {\n    return false;\n  }\n  return window.next.version < NEXT_WINDOW_HISTORY_SUPPORT_VERSION;\n}\n\n// src/internals/machines/sign-in/reset-password.machine.ts\n\nvar SignInResetPasswordMachineId = \"SignInResetPasswordMachine\";\nvar SignInResetPasswordMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      ({ input: { fields, parent } }) => {\n        var _a, _b;\n        const password = ((_a = fields.get(\"password\")) == null ? void 0 : _a.value) || \"\";\n        const signOutOfOtherSessions = ((_b = fields.get(\"signOutOfOtherSessions\")) == null ? void 0 : _b.checked) || false;\n        return parent.getSnapshot().context.clerk.client.signIn.resetPassword({ password, signOutOfOtherSessions });\n      }\n    )\n  },\n  actions: {\n    sendToLoading,\n    sendToNext: ({ context, event }) => context.parent.send({ type: \"NEXT\", resource: event.output }),\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  types: {}\n}).createMachine({\n  id: SignInResetPasswordMachineId,\n  context: ({ input }) => ({\n    loadingStep: \"reset-password\",\n    parent: input.parent,\n    formRef: input.formRef\n  }),\n  initial: \"Pending\",\n  states: {\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        SUBMIT: {\n          target: \"Attempting\",\n          reenter: true\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          fields: context.formRef.getSnapshot().context.fields\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/sign-in/start.machine.ts\n\nvar DISABLEABLE_FIELDS = [\"emailAddress\", \"phoneNumber\"];\nvar SignInStartMachineId = \"SignInStart\";\nvar SignInStartMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    attemptPasskey: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { parent, flow } }) => {\n      return parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey({\n        flow\n      });\n    }),\n    attemptWeb3: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(\n      ({ input: { parent, strategy } }) => {\n        if (strategy === \"web3_metamask_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithMetamask();\n        }\n        if (strategy === \"web3_coinbase_wallet_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithCoinbaseWallet();\n        }\n        if (strategy === \"web3_okx_wallet_signature\") {\n          return parent.getSnapshot().context.clerk.client.signIn.authenticateWithOKXWallet();\n        }\n        throw new ClerkElementsRuntimeError(`Unsupported Web3 strategy: ${strategy}`);\n      }\n    ),\n    attempt: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(({ input: { fields, parent, params } }) => {\n      var _a;\n      const clerk = parent.getSnapshot().context.clerk;\n      const password = fields.get(\"password\");\n      const identifier = fields.get(\"identifier\");\n      const passwordParams = (password == null ? void 0 : password.value) ? {\n        password: password.value,\n        strategy: \"password\"\n      } : {};\n      return clerk.client.signIn.create({\n        ...passwordParams,\n        ...(params == null ? void 0 : params.ticket) ? params : {\n          identifier: (_a = identifier == null ? void 0 : identifier.value) != null ? _a : \"\"\n        }\n      });\n    })\n  },\n  actions: {\n    sendToNext: ({ context, event }) => {\n      return context.parent.send({ type: \"NEXT\", resource: event == null ? void 0 : event.output });\n    },\n    sendToLoading,\n    setFormDisabledTicketFields: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ context, enqueue }) => {\n      if (!context.ticket) {\n        return;\n      }\n      const currentFields = context.formRef.getSnapshot().context.fields;\n      for (const name of DISABLEABLE_FIELDS) {\n        if (currentFields.has(name)) {\n          enqueue.sendTo(context.formRef, { type: \"FIELD.DISABLE\", field: { name } });\n        }\n      }\n    }),\n    setFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: \"ERRORS.SET\",\n          error: event.error\n        };\n      }\n    )\n  },\n  guards: {\n    hasTicket: ({ context }) => Boolean(context.ticket),\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode)\n  },\n  types: {}\n}).createMachine({\n  id: SignInStartMachineId,\n  context: ({ input }) => ({\n    basePath: input.basePath || SIGN_IN_DEFAULT_BASE_PATH,\n    parent: input.parent,\n    formRef: input.formRef,\n    loadingStep: \"start\",\n    ticket: input.ticket\n  }),\n  initial: \"Init\",\n  states: {\n    Init: {\n      description: \"Handle ticket, if present; Else, default to Pending state.\",\n      always: [\n        {\n          guard: \"hasTicket\",\n          target: \"Attempting\"\n        },\n        {\n          target: \"Pending\"\n        }\n      ]\n    },\n    Pending: {\n      tags: [\"state:pending\"],\n      description: \"Waiting for user input\",\n      on: {\n        SUBMIT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Attempting\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY.AUTOFILL\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskeyAutoFill\",\n          reenter: false\n        },\n        \"AUTHENTICATE.WEB3\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingWeb3\",\n          reenter: true\n        }\n      }\n    },\n    Attempting: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attempt\",\n        src: \"attempt\",\n        input: ({ context }) => {\n          const defaultParams = {\n            fields: context.formRef.getSnapshot().context.fields,\n            parent: context.parent\n          };\n          const params = context.ticket ? {\n            strategy: \"ticket\",\n            ticket: context.ticket\n          } : {};\n          return { ...defaultParams, params };\n        },\n        onDone: {\n          actions: [\"setFormDisabledTicketFields\", \"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormDisabledTicketFields\", \"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskey: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptPasskey\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"discoverable\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingPasskeyAutoFill: {\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"AttemptingPasskey\",\n          reenter: true\n        },\n        SUBMIT: {\n          guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\"),\n          target: \"Attempting\",\n          reenter: true\n        }\n      },\n      invoke: {\n        id: \"attemptPasskeyAutofill\",\n        src: \"attemptPasskey\",\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: \"autofill\"\n        }),\n        onDone: {\n          actions: [\"sendToNext\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\"],\n          target: \"Pending\"\n        }\n      }\n    },\n    AttemptingWeb3: {\n      tags: [\"state:attempting\", \"state:loading\"],\n      entry: \"sendToLoading\",\n      invoke: {\n        id: \"attemptWeb3\",\n        src: \"attemptWeb3\",\n        input: ({ context, event }) => {\n          (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"AUTHENTICATE.WEB3\");\n          return {\n            parent: context.parent,\n            strategy: event.strategy\n          };\n        },\n        onDone: {\n          actions: [\"sendToNext\", \"sendToLoading\"]\n        },\n        onError: {\n          actions: [\"setFormErrors\", \"sendToLoading\"],\n          target: \"Pending\"\n        }\n      }\n    }\n  }\n});\n\n// src/internals/machines/sign-in/router.machine.ts\nvar isCurrentPath = (path) => ({ context }, _params) => {\n  var _a, _b;\n  return (_b = (_a = context.router) == null ? void 0 : _a.match(path)) != null ? _b : false;\n};\nvar needsStatus = (status) => ({ context, event }, _) => {\n  var _a, _b;\n  return ((_a = event == null ? void 0 : event.resource) == null ? void 0 : _a.status) === status || ((_b = context.clerk) == null ? void 0 : _b.client.signIn.status) === status;\n};\nvar SignInRouterMachineId = \"SignInRouter\";\nvar SignInRouterMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  actors: {\n    firstFactorMachine: SignInFirstFactorMachine,\n    formMachine: FormMachine,\n    resetPasswordMachine: SignInResetPasswordMachine,\n    startMachine: SignInStartMachine,\n    secondFactorMachine: SignInSecondFactorMachine,\n    thirdPartyMachine: ThirdPartyMachine,\n    webAuthnAutofillSupport: (0,xstate__WEBPACK_IMPORTED_MODULE_19__.fromPromise)(() => (0,_clerk_shared_webauthn__WEBPACK_IMPORTED_MODULE_18__.isWebAuthnAutofillSupported)())\n  },\n  actions: {\n    clearFormErrors: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(({ context }) => context.formRef, { type: \"ERRORS.CLEAR\" }),\n    navigateInternal: ({ context }, { path, force = false }) => {\n      if (!context.router) {\n        return;\n      }\n      if (!force && shouldUseVirtualRouting()) {\n        return;\n      }\n      if (context.exampleMode) {\n        return;\n      }\n      const resolvedPath = (0,_clerk_shared_url__WEBPACK_IMPORTED_MODULE_20__.joinURL)(context.router.basePath, path);\n      if (resolvedPath === context.router.pathname()) {\n        return;\n      }\n      context.router.shallowPush(resolvedPath);\n    },\n    navigateExternal: ({ context }, { path }) => {\n      var _a;\n      return (_a = context.router) == null ? void 0 : _a.push(path);\n    },\n    raiseNext: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.O)({ type: \"NEXT\" }),\n    setActive: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, check, context, event }) => {\n      var _a;\n      if (check(\"isExampleMode\")) {\n        return;\n      }\n      const id = event == null ? void 0 : event.id;\n      const lastActiveSessionId = context.clerk.client.lastActiveSessionId;\n      const createdSessionId = ((event == null ? void 0 : event.resource) || context.clerk.client.signIn).createdSessionId;\n      const session = id || createdSessionId || lastActiveSessionId || null;\n      void context.clerk.setActive({\n        session,\n        redirectUrl: ((_a = context.router) == null ? void 0 : _a.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n      });\n      enqueue.raise({ type: \"RESET\" }, { delay: 2e3 });\n    }),\n    setError: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      error: (_, { error }) => {\n        if (error) {\n          return error;\n        }\n        return new ClerkElementsRuntimeError(\"Unknown error\");\n      }\n    }),\n    setFormErrors: ({ context }, params) => (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(context.formRef, {\n      type: \"ERRORS.SET\",\n      error: params.error\n    }),\n    setFormOAuthErrors: ({ context }) => {\n      const errorOrig = context.clerk.client.signIn.firstFactorVerification.error;\n      if (!errorOrig) {\n        return;\n      }\n      let error;\n      switch (errorOrig.code) {\n        case ERROR_CODES.NOT_ALLOWED_TO_SIGN_UP:\n        case ERROR_CODES.OAUTH_ACCESS_DENIED:\n        case ERROR_CODES.NOT_ALLOWED_ACCESS:\n        case ERROR_CODES.SAML_USER_ATTRIBUTE_MISSING:\n        case ERROR_CODES.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:\n        case ERROR_CODES.USER_LOCKED:\n        case ERROR_CODES.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:\n        case ERROR_CODES.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:\n        case ERROR_CODES.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:\n        case ERROR_CODES.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:\n        case ERROR_CODES.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:\n          error = new ClerkElementsError(errorOrig.code, errorOrig.longMessage || \"\");\n          break;\n        default:\n          error = new ClerkElementsError(\n            \"unable_to_complete\",\n            \"Unable to complete action at this time. If the problem persists please contact support.\"\n          );\n      }\n      context.formRef.send({\n        type: \"ERRORS.SET\",\n        error\n      });\n    },\n    transfer: ({ context }) => {\n      var _a;\n      const searchParams = new URLSearchParams({ __clerk_transfer: \"1\" });\n      (_a = context.router) == null ? void 0 : _a.push(`${context.signUpPath}?${searchParams}`);\n    }\n  },\n  guards: {\n    hasAuthenticatedViaClerkJS: ({ context }) => Boolean(context.clerk.client.signIn.status === null && context.clerk.client.lastActiveSessionId),\n    hasOAuthError: ({ context }) => {\n      var _a, _b, _c, _d;\n      return Boolean((_d = (_c = (_b = (_a = context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.signIn) == null ? void 0 : _c.firstFactorVerification) == null ? void 0 : _d.error);\n    },\n    hasResource: ({ context }) => {\n      var _a, _b, _c;\n      return Boolean((_c = (_b = (_a = context.clerk) == null ? void 0 : _a.client) == null ? void 0 : _b.signIn) == null ? void 0 : _c.status);\n    },\n    hasTicket: ({ context }) => Boolean(context.ticket),\n    isLoggedInAndSingleSession: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"isLoggedIn\", \"isSingleSessionMode\", (0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"isExampleMode\")]),\n    isActivePathRoot: isCurrentPath(\"/\"),\n    isComplete: ({ context, event }) => {\n      const resource = event == null ? void 0 : event.resource;\n      const signIn = context.clerk.client.signIn;\n      return (resource == null ? void 0 : resource.status) === \"complete\" && Boolean(resource == null ? void 0 : resource.createdSessionId) || signIn.status === \"complete\" && Boolean(signIn.createdSessionId);\n    },\n    isLoggedIn: ({ context }) => {\n      var _a;\n      return Boolean((_a = context.clerk) == null ? void 0 : _a.user);\n    },\n    isSingleSessionMode: ({ context }) => {\n      var _a, _b;\n      return Boolean((_b = (_a = context.clerk) == null ? void 0 : _a.__unstable__environment) == null ? void 0 : _b.authConfig.singleSessionMode);\n    },\n    isExampleMode: ({ context }) => Boolean(context.exampleMode),\n    needsStart: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.F)([(0,xstate__WEBPACK_IMPORTED_MODULE_21__.E)(\"hasResource\"), \"statusNeedsIdentifier\", isCurrentPath(\"/\")]),\n    needsFirstFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsFirstFactor\", isCurrentPath(\"/continue\")]),\n    needsSecondFactor: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsSecondFactor\", isCurrentPath(\"/continue\")]),\n    needsCallback: isCurrentPath(SSO_CALLBACK_PATH_ROUTE),\n    needsChooseSession: isCurrentPath(CHOOSE_SESSION_PATH_ROUTE),\n    needsNewPassword: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.D)([\"statusNeedsNewPassword\", isCurrentPath(\"/new-password\")]),\n    statusNeedsIdentifier: needsStatus(\"needs_identifier\"),\n    statusNeedsFirstFactor: needsStatus(\"needs_first_factor\"),\n    statusNeedsSecondFactor: needsStatus(\"needs_second_factor\"),\n    statusNeedsNewPassword: needsStatus(\"needs_new_password\")\n  },\n  types: {}\n}).createMachine({\n  id: SignInRouterMachineId,\n  // @ts-expect-error - Set in INIT event\n  context: {},\n  initial: \"Idle\",\n  on: {\n    \"AUTHENTICATE.OAUTH\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, ({ context, event }) => {\n        var _a, _b, _c, _d;\n        return {\n          type: \"REDIRECT\",\n          params: {\n            strategy: event.strategy,\n            redirectUrl: `${((_a = context.router) == null ? void 0 : _a.mode) === ROUTING.virtual ? (_b = context.clerk.__unstable__environment) == null ? void 0 : _b.displayConfig.signInUrl : (_c = context.router) == null ? void 0 : _c.basePath}${SSO_CALLBACK_PATH_ROUTE}`,\n            redirectUrlComplete: ((_d = context.router) == null ? void 0 : _d.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n          }\n        };\n      })\n    },\n    \"AUTHENTICATE.SAML\": {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, ({ context }) => {\n        var _a, _b, _c, _d, _e;\n        return {\n          type: \"REDIRECT\",\n          params: {\n            strategy: \"saml\",\n            identifier: (_a = context.formRef.getSnapshot().context.fields.get(\"identifier\")) == null ? void 0 : _a.value,\n            redirectUrl: `${((_b = context.router) == null ? void 0 : _b.mode) === ROUTING.virtual ? (_c = context.clerk.__unstable__environment) == null ? void 0 : _c.displayConfig.signInUrl : (_d = context.router) == null ? void 0 : _d.basePath}${SSO_CALLBACK_PATH_ROUTE}`,\n            redirectUrlComplete: ((_e = context.router) == null ? void 0 : _e.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n          }\n        };\n      })\n    },\n    \"FORM.ATTACH\": {\n      description: \"Attach/re-attach the form to the router.\",\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ enqueue, event }) => {\n        enqueue.assign({\n          formRef: event.formRef\n        });\n        enqueue.raise({ type: \"RESET.STEP\" });\n      })\n    },\n    \"NAVIGATE.PREVIOUS\": \".Hist\",\n    \"NAVIGATE.START\": \".Start\",\n    LOADING: {\n      actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => ({\n        loading: {\n          isLoading: event.isLoading,\n          step: event.step,\n          strategy: event.strategy,\n          action: event.action\n        }\n      }))\n    },\n    RESET: \".Idle\"\n  },\n  states: {\n    Idle: {\n      invoke: {\n        id: \"webAuthnAutofill\",\n        src: \"webAuthnAutofillSupport\",\n        onDone: {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({ webAuthnAutofillSupport: ({ event }) => event.output })\n        }\n      },\n      on: {\n        INIT: {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)(({ event }) => {\n            var _a;\n            const searchParams = (_a = event.router) == null ? void 0 : _a.searchParams();\n            return {\n              clerk: event.clerk,\n              exampleMode: event.exampleMode || false,\n              formRef: event.formRef,\n              loading: {\n                isLoading: false\n              },\n              router: event.router,\n              signUpPath: event.signUpPath || SIGN_UP_DEFAULT_BASE_PATH,\n              ticket: (searchParams == null ? void 0 : searchParams.get(SEARCH_PARAMS.ticket)) || void 0\n            };\n          }),\n          target: \"Init\"\n        }\n      }\n    },\n    Init: {\n      entry: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.b)(({ context, enqueue, self }) => {\n        var _a, _b;\n        if (!self.getSnapshot().children[ThirdPartyMachineId]) {\n          enqueue.spawnChild(\"thirdPartyMachine\", {\n            id: ThirdPartyMachineId,\n            systemId: ThirdPartyMachineId,\n            input: {\n              basePath: (_b = (_a = context.router) == null ? void 0 : _a.basePath) != null ? _b : SIGN_IN_DEFAULT_BASE_PATH,\n              flow: \"signIn\",\n              formRef: context.formRef,\n              parent: self\n            }\n          });\n        }\n      }),\n      always: [\n        {\n          guard: \"needsCallback\",\n          target: \"Callback\"\n        },\n        {\n          guard: \"needsChooseSession\",\n          target: \"ChooseSession\"\n        },\n        {\n          guard: \"isComplete\",\n          actions: \"setActive\"\n        },\n        {\n          guard: \"isLoggedInAndSingleSession\",\n          actions: [\n            (0,xstate__WEBPACK_IMPORTED_MODULE_5__.l)(\"Already logged in\"),\n            {\n              type: \"navigateExternal\",\n              params: ({ context }) => {\n                var _a;\n                return {\n                  path: ((_a = context.router) == null ? void 0 : _a.searchParams().get(\"redirect_url\")) || context.clerk.buildAfterSignInUrl()\n                };\n              }\n            }\n          ]\n        },\n        {\n          guard: \"needsStart\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        },\n        {\n          guard: \"needsFirstFactor\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/continue\" } },\n          target: \"FirstFactor\"\n        },\n        {\n          guard: \"needsSecondFactor\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/continue\" } },\n          target: \"SecondFactor\"\n        },\n        {\n          guard: \"needsNewPassword\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/reset-password\" } },\n          target: \"ResetPassword\"\n        },\n        {\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        },\n        {\n          guard: \"hasTicket\",\n          actions: { type: \"navigateInternal\", params: { force: true, path: \"/\" } },\n          target: \"Start\"\n        }\n      ]\n    },\n    Start: {\n      tags: [\"step:start\"],\n      exit: \"clearFormErrors\",\n      invoke: {\n        id: \"start\",\n        src: \"startMachine\",\n        input: ({ context, self }) => {\n          var _a;\n          return {\n            basePath: (_a = context.router) == null ? void 0 : _a.basePath,\n            formRef: context.formRef,\n            parent: self,\n            ticket: context.ticket\n          };\n        },\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"Start\",\n          reenter: true\n        },\n        \"AUTHENTICATE.PASSKEY\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        \"AUTHENTICATE.PASSKEY.AUTOFILL\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        \"AUTHENTICATE.WEB3\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"start\", ({ event }) => event)\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ]\n      }\n    },\n    FirstFactor: {\n      tags: [\"step:first-factor\", \"step:verifications\"],\n      invoke: {\n        id: \"firstFactor\",\n        src: \"firstFactorMachine\",\n        input: ({ context, self }) => {\n          var _a;\n          return {\n            formRef: context.formRef,\n            parent: self,\n            basePath: (_a = context.router) == null ? void 0 : _a.basePath\n          };\n        },\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"AUTHENTICATE.PASSKEY\": {\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event)\n        },\n        \"RESET.STEP\": {\n          target: \"FirstFactor\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ],\n        \"STRATEGY.UPDATE\": {\n          description: \"Send event to verification machine to update the current strategy.\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n          target: \".Idle\"\n        }\n      },\n      initial: \"Idle\",\n      states: {\n        Idle: {\n          on: {\n            \"NAVIGATE.FORGOT_PASSWORD\": {\n              description: \"Navigate to forgot password screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n              target: \"ForgotPassword\"\n            },\n            \"NAVIGATE.CHOOSE_STRATEGY\": {\n              description: \"Navigate to choose strategy screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", ({ event }) => event),\n              target: \"ChoosingStrategy\"\n            }\n          }\n        },\n        ChoosingStrategy: {\n          tags: [\"step:choose-strategy\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": {\n              description: \"Go to Idle, and also tell firstFactor to go to Pending\",\n              target: \"Idle\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"firstFactor\", { type: \"NAVIGATE.PREVIOUS\" })\n            }\n          }\n        },\n        ForgotPassword: {\n          tags: [\"step:forgot-password\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": \"Idle\"\n          }\n        }\n      }\n    },\n    SecondFactor: {\n      tags: [\"step:second-factor\", \"step:verifications\"],\n      invoke: {\n        id: \"secondFactor\",\n        src: \"secondFactorMachine\",\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self\n        }),\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"SecondFactor\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ],\n        \"STRATEGY.UPDATE\": {\n          description: \"Send event to verification machine to update the current strategy.\",\n          actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", ({ event }) => event),\n          target: \".Idle\"\n        }\n      },\n      initial: \"Idle\",\n      states: {\n        Idle: {\n          on: {\n            \"NAVIGATE.CHOOSE_STRATEGY\": {\n              description: \"Navigate to choose strategy screen.\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", ({ event }) => event),\n              target: \"ChoosingStrategy\"\n            }\n          }\n        },\n        ChoosingStrategy: {\n          tags: [\"step:choose-strategy\"],\n          on: {\n            \"NAVIGATE.PREVIOUS\": {\n              description: \"Go to Idle, and also tell firstFactor to go to Pending\",\n              target: \"Idle\",\n              actions: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(\"secondFactor\", { type: \"NAVIGATE.PREVIOUS\" })\n            }\n          }\n        }\n      }\n    },\n    ResetPassword: {\n      tags: [\"step:reset-password\"],\n      invoke: {\n        id: \"resetPassword\",\n        src: \"resetPasswordMachine\",\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self\n        }),\n        onDone: {\n          actions: \"raiseNext\"\n        }\n      },\n      on: {\n        \"RESET.STEP\": {\n          target: \"ResetPassword\",\n          reenter: true\n        },\n        NEXT: [\n          {\n            guard: \"isComplete\",\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          }\n        ]\n      }\n    },\n    Callback: {\n      tags: [\"step:callback\"],\n      entry: (0,xstate__WEBPACK_IMPORTED_MODULE_5__.c)(ThirdPartyMachineId, { type: \"CALLBACK\" }),\n      on: {\n        NEXT: [\n          {\n            guard: \"hasOAuthError\",\n            actions: [\"setFormOAuthErrors\", { type: \"navigateInternal\", params: { force: true, path: \"/\" } }],\n            target: \"Start\"\n          },\n          {\n            guard: (0,xstate__WEBPACK_IMPORTED_MODULE_21__.F)([\"isLoggedIn\", \"isComplete\", \"hasAuthenticatedViaClerkJS\"]),\n            actions: \"setActive\"\n          },\n          {\n            guard: \"statusNeedsIdentifier\",\n            actions: \"transfer\"\n          },\n          {\n            guard: \"statusNeedsFirstFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"FirstFactor\"\n          },\n          {\n            guard: \"statusNeedsSecondFactor\",\n            actions: { type: \"navigateInternal\", params: { path: \"/continue\" } },\n            target: \"SecondFactor\"\n          },\n          {\n            guard: \"statusNeedsNewPassword\",\n            actions: { type: \"navigateInternal\", params: { path: \"/reset-password\" } },\n            target: \"ResetPassword\"\n          }\n        ]\n      }\n    },\n    ChooseSession: {\n      tags: [\"step:choose-session\"],\n      on: {\n        \"SESSION.SET_ACTIVE\": {\n          actions: {\n            type: \"setActive\",\n            params: ({ event }) => ({ id: event.id })\n          }\n        }\n      }\n    },\n    Error: {\n      tags: [\"step:error\"],\n      on: {\n        NEXT: {\n          target: \"Start\",\n          actions: \"clearFormErrors\"\n        }\n      }\n    },\n    Hist: {\n      type: \"history\",\n      exit: \"clearFormErrors\"\n    }\n  }\n});\n\n// src/internals/machines/utils/formatters.ts\n\nfunction formatName(...args) {\n  switch (args.length) {\n    case 0:\n      return void 0;\n    case 1:\n      return (0,_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.titleize)(args[0]);\n    default:\n      return args.filter(Boolean).map(_clerk_shared_underscore__WEBPACK_IMPORTED_MODULE_3__.titleize).join(\" \");\n  }\n}\nfunction formatSalutation({\n  firstName,\n  lastName,\n  identifier\n}) {\n  return firstName && formatName(firstName) || lastName && formatName(lastName) || identifier || \"\";\n}\n\n// src/internals/machines/sign-in/router.selectors.ts\nfunction SignInSafeIdentifierSelectorForStrategy(strategy) {\n  return (s) => {\n    var _a, _b, _c;\n    const signIn = (_a = s.context.clerk) == null ? void 0 : _a.client.signIn;\n    if (strategy) {\n      const matchingFactors = [\n        ...(_b = signIn.supportedFirstFactors) != null ? _b : [],\n        ...(_c = signIn.supportedSecondFactors) != null ? _c : []\n      ].filter((f) => f.strategy === strategy);\n      const matchingFactorForIdentifier = signIn.identifier && matchingFactors.length > 0 ? matchingFactors.find((f) => \"safeIdentifier\" in f && f.safeIdentifier === signIn.identifier) : null;\n      const matchingFactorForStrategy = matchingFactors[0];\n      if (matchingFactorForIdentifier && \"safeIdentifier\" in matchingFactorForIdentifier) {\n        return matchingFactorForIdentifier.safeIdentifier;\n      }\n      if (matchingFactorForStrategy && \"safeIdentifier\" in matchingFactorForStrategy) {\n        return matchingFactorForStrategy.safeIdentifier;\n      }\n    }\n    return signIn.identifier || \"\";\n  };\n}\nfunction SignInSalutationSelector(s) {\n  var _a, _b, _c;\n  const signIn = (_a = s.context.clerk) == null ? void 0 : _a.client.signIn;\n  return formatSalutation({\n    firstName: (_b = signIn == null ? void 0 : signIn.userData) == null ? void 0 : _b.firstName,\n    identifier: signIn == null ? void 0 : signIn.identifier,\n    lastName: (_c = signIn == null ? void 0 : signIn.userData) == null ? void 0 : _c.lastName\n  });\n}\n\n// src/internals/machines/sign-in/router.types.ts\nvar SignInRouterSystemId = {\n  start: \"start\",\n  firstFactor: \"firstFactor\",\n  secondFactor: \"secondFactor\",\n  resetPassword: \"resetPassword\"\n};\n\n// src/react/sign-in/choose-strategy.tsx\n\nvar SignInChooseStrategyCtx = createContextForDomValidation(\"SignInChooseStrategyCtx\");\nfunction SignInChooseStrategy({ asChild, children, ...props }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeStateFirstFactor = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:first-factor\", \"step:choose-strategy\"],\n    ActiveTagsMode.all\n  );\n  const activeStateSecondFactor = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:second-factor\", \"step:choose-strategy\"],\n    ActiveTagsMode.all\n  );\n  const activeState = activeStateFirstFactor || activeStateSecondFactor;\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategyCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nfunction SignInForgotPassword({ asChild, children, ...props }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(\n    routerRef,\n    [\"step:verifications\", \"step:first-factor\", \"step:forgot-password\"],\n    ActiveTagsMode.all\n  );\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"div\";\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategyCtx.Provider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Comp, { ...props, children }) }) : null;\n}\nvar SUPPORTED_STRATEGY_NAME = \"SignInSupportedStrategy\";\nvar SignInSupportedStrategy = react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(\n  ({ asChild, children, name, ...rest }, forwardedRef) => {\n    const routerRef = SignInRouterCtx.useActorRef();\n    const snapshot = routerRef.getSnapshot();\n    const status = snapshot.context.clerk.client.signIn.status;\n    const supportedFirstFactors = status === \"needs_first_factor\" ? snapshot.context.clerk.client.signIn.supportedFirstFactors || [] : [];\n    const supportedSecondFactors = status === \"needs_second_factor\" ? snapshot.context.clerk.client.signIn.supportedSecondFactors || [] : [];\n    const factor = [...supportedFirstFactors, ...supportedSecondFactors].find((factor2) => name === factor2.strategy);\n    const currentFactor = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(\n      snapshot.children[SignInRouterSystemId.firstFactor] || snapshot.children[SignInRouterSystemId.secondFactor],\n      (state) => {\n        var _a;\n        return (_a = state == null ? void 0 : state.context.currentFactor) == null ? void 0 : _a.strategy;\n      }\n    );\n    const sendUpdateStrategyEvent = react__WEBPACK_IMPORTED_MODULE_1__.useCallback(\n      () => routerRef.send({ type: \"STRATEGY.UPDATE\", factor }),\n      [routerRef, factor]\n    );\n    if (currentFactor === name) {\n      return null;\n    }\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_11__.Slot : \"button\";\n    const defaultProps = asChild ? {} : { type: \"button\" };\n    return factor ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStrategyContext.Provider, { value: { strategy: name }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n      Comp,\n      {\n        ...defaultProps,\n        ...rest,\n        ref: forwardedRef,\n        onClick: sendUpdateStrategyEvent,\n        children: children || factor.strategy\n      }\n    ) }) : null;\n  }\n);\nSignInSupportedStrategy.displayName = SUPPORTED_STRATEGY_NAME;\n\n// src/react/sign-in/reset-password.tsx\n\nvar SignInResetPasswordCtx = createContextFromActorRef(\"SignInResetPasswordCtx\");\nfunction SignInResetPassword(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:reset-password\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPasswordInner, { ...props }) : null;\n}\nfunction SignInResetPasswordInner(props) {\n  const ref = useSignInResetPasswordStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPasswordCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-in/sso-callback.tsx\nfunction SignInSSOCallback({ children }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:callback\");\n  return activeState ? children : null;\n}\n\n// src/react/sign-in/start.tsx\n\nvar SignInStartCtx = createContextFromActorRef(\"SignInStartCtx\");\nfunction SignInStart(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:start\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStartInner, { ...props }) : null;\n}\nfunction SignInStartInner(props) {\n  const ref = useSignInStartStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStartCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-in/verifications.tsx\n\n\n\n// src/internals/machines/utils/strategies.ts\nvar matchStrategy = (current, desired) => {\n  if (!current || !desired) {\n    return false;\n  }\n  if (current === desired) {\n    return true;\n  }\n  return current.startsWith(`${desired}_`);\n};\n\n// src/react/sign-in/verifications.tsx\n\nvar SignInFirstFactorCtx = createContextFromActorRef(\"SignInFirstFactorCtx\");\nvar SignInSecondFactorCtx = createContextFromActorRef(\"SignInSecondFactorCtx\");\nvar strategiesSelector = (state) => {\n  var _a;\n  return (_a = state.context.currentFactor) == null ? void 0 : _a.strategy;\n};\nfunction SignInStrategiesProvider({\n  children,\n  preferred,\n  actorRef,\n  ...props\n}) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const current = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(actorRef, strategiesSelector);\n  const isChoosingAltStrategy = useActiveTags(routerRef, [\"step:choose-strategy\", \"step:forgot-password\"]);\n  const isActive = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((name) => current ? matchStrategy(current, name) : false, [current]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(StrategiesContext.Provider, { value: { current, preferred, isActive }, children: isChoosingAltStrategy.active ? null : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: actorRef,\n      ...props,\n      children\n    }\n  ) });\n}\nfunction useFactorCtx() {\n  const firstFactorRef = SignInFirstFactorCtx.useActorRef(true);\n  const secondFactorRef = SignInSecondFactorCtx.useActorRef(true);\n  return firstFactorRef || secondFactorRef;\n}\nfunction SignInStrategy({ children, name }) {\n  const { active } = useStrategy(name);\n  const factorCtx = useFactorCtx();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (factorCtx) {\n      factorCtx.send({ type: \"STRATEGY.REGISTER\", factor: name });\n    }\n    return () => {\n      if ((factorCtx == null ? void 0 : factorCtx.getSnapshot().status) === \"active\") {\n        factorCtx.send({ type: \"STRATEGY.UNREGISTER\", factor: name });\n      }\n    };\n  }, [factorCtx, name]);\n  return active ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStrategyContext.Provider, { value: { strategy: name }, children }) : null;\n}\nfunction SignInVerifications(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const { activeTags: activeRoutes } = useActiveTags(routerRef, [\"step:first-factor\", \"step:second-factor\"]);\n  if (activeRoutes.has(\"step:first-factor\")) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorInner, { ...props });\n  }\n  if (activeRoutes.has(\"step:second-factor\")) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorInner, { ...props });\n  }\n  return null;\n}\nfunction SignInFirstFactor(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:first-factor\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorInner, { ...props }) : null;\n}\nfunction SignInSecondFactor(props) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:second-factor\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorInner, { ...props }) : null;\n}\nfunction SignInFirstFactorInner(props) {\n  const ref = useSignInFirstFactorStep();\n  if (!ref) {\n    return null;\n  }\n  return ref ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInFirstFactorCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    SignInStrategiesProvider,\n    {\n      actorRef: ref,\n      ...props\n    }\n  ) }) : null;\n}\nfunction SignInSecondFactorInner(props) {\n  const ref = useSignInSecondFactorStep();\n  if (!ref) {\n    return null;\n  }\n  return ref ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSecondFactorCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    SignInStrategiesProvider,\n    {\n      actorRef: ref,\n      ...props\n    }\n  ) }) : null;\n}\n\n// src/react/sign-in/step.tsx\n\nvar SIGN_IN_STEPS = {\n  start: \"start\",\n  verifications: \"verifications\",\n  \"choose-strategy\": \"choose-strategy\",\n  \"choose-session\": \"choose-session\",\n  \"forgot-password\": \"forgot-password\",\n  \"reset-password\": \"reset-password\",\n  \"sso-callback\": \"sso-callback\"\n};\nfunction SignInStep(props) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_SignInStep\", { name: props.name }));\n  switch (props.name) {\n    case SIGN_IN_STEPS.start:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInStart, { ...props });\n    case SIGN_IN_STEPS.verifications:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInVerifications, { ...props });\n    case SIGN_IN_STEPS[\"choose-strategy\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseStrategy, { ...props });\n    case SIGN_IN_STEPS[\"forgot-password\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInForgotPassword, { ...props });\n    case SIGN_IN_STEPS[\"reset-password\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInResetPassword, { ...props });\n    case SIGN_IN_STEPS[\"choose-session\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInChooseSession, { ...props });\n    case SIGN_IN_STEPS[\"sso-callback\"]:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignInSSOCallback, { ...props });\n    default:\n      throw new ClerkElementsRuntimeError(`Invalid step name. Use: ${Object.keys(SIGN_IN_STEPS).join(\",\")}.`);\n  }\n}\n\n// src/react/sign-up/step.tsx\n\n\n\n// src/react/sign-up/continue.tsx\n\nvar SignUpContinueCtx = createContextFromActorRef(\"SignUpContinueCtx\");\nfunction SignUpContinue(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:continue\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinueInner, { ...props }) : null;\n}\nfunction SignUpContinueInner(props) {\n  const ref = useSignUpContinueStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinueCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-up/restricted.tsx\n\nfunction SignUpRestricted(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:restricted\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: routerRef,\n      ...props\n    }\n  ) : null;\n}\n\n// src/react/sign-up/start.tsx\n\nvar SignUpStartCtx = createContextFromActorRef(\"SignUpStartCtx\");\nfunction SignUpStart(props) {\n  const routerRef = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, \"step:start\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStartInner, { ...props }) : null;\n}\nfunction SignUpStartInner(props) {\n  const ref = useSignUpStartStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStartCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\n\n// src/react/sign-up/verifications.tsx\n\nvar SignUpVerificationCtx = createContextFromActorRef(\"SignUpVerificationCtx\");\nfunction SignUpVerifications(props) {\n  const ref = SignUpRouterCtx.useActorRef();\n  const activeState = useActiveTags(ref, \"step:verification\");\n  return activeState ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerifyInner, { ...props }) : null;\n}\nfunction SignUpVerifyInner(props) {\n  const ref = useSignUpVerificationStep();\n  if (!ref) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerificationCtx.Provider, { actorRef: ref, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    Form,\n    {\n      flowActor: ref,\n      ...props\n    }\n  ) });\n}\nfunction SignUpStrategy({ children, name: tag }) {\n  const ref = SignUpVerificationCtx.useActorRef(true);\n  if (!ref) {\n    throw new Error(\n      '<Strategy> used outside of <SignUp>. Did you mean to `import { Strategy } from \"@clerk/elements/sign-in\"` instead?'\n    );\n  }\n  const { active } = useActiveTags(ref, [\n    `verification:${tag}`,\n    `verification:category:${tag}`\n  ]);\n  return active ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment, { children }) : null;\n}\n\n// src/react/sign-up/step.tsx\n\nvar SIGN_UP_STEPS = {\n  start: \"start\",\n  continue: \"continue\",\n  verifications: \"verifications\",\n  restricted: \"restricted\"\n};\nfunction SignUpStep(props) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_SignUpStep\", { name: props.name }));\n  switch (props.name) {\n    case SIGN_UP_STEPS.start:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpStart, { ...props });\n    case SIGN_UP_STEPS.continue:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpContinue, { ...props });\n    case SIGN_UP_STEPS.verifications:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpVerifications, { ...props });\n    case SIGN_UP_STEPS.restricted:\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(SignUpRestricted, { ...props });\n    default:\n      throw new ClerkElementsRuntimeError(\n        `Invalid step name. Use 'start', 'continue', 'verifications', or 'restricted'.`\n      );\n  }\n}\n\n// src/react/utils/map-scope-to-strategy.ts\nfunction isProviderStrategyScope(value) {\n  return value.startsWith(\"provider:\");\n}\nfunction mapScopeToStrategy(scope) {\n  if (scope === \"provider:metamask\") {\n    return \"web3_metamask_signature\";\n  }\n  if (scope === \"provider:coinbase_wallet\") {\n    return \"web3_coinbase_wallet_signature\";\n  }\n  if (scope === \"provider:okx_wallet\") {\n    return \"web3_okx_wallet_signature\";\n  }\n  if (scope === \"provider:saml\") {\n    return \"saml\";\n  }\n  const scopeWithoutPrefix = scope.replace(\"provider:\", \"\");\n  return `oauth_${scopeWithoutPrefix}`;\n}\n\n// src/react/common/loading.tsx\n\nfunction isSignInScope(scope) {\n  if (!scope) {\n    return true;\n  }\n  if (scope.startsWith(\"step:\")) {\n    return Object.prototype.hasOwnProperty.call(SIGN_IN_STEPS, scope.replace(\"step:\", \"\"));\n  }\n  return true;\n}\nfunction isSignUpScope(scope) {\n  if (!scope) {\n    return true;\n  }\n  if (scope.startsWith(\"step:\")) {\n    return Object.prototype.hasOwnProperty.call(SIGN_UP_STEPS, scope.replace(\"step:\", \"\"));\n  }\n  return true;\n}\nfunction Loading({ children, scope }) {\n  var _a;\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  (_a = clerk.telemetry) == null ? void 0 : _a.record((0,_clerk_shared_telemetry__WEBPACK_IMPORTED_MODULE_14__.eventComponentMounted)(\"Elements_Loading\", { scope: scope != null ? scope : false }));\n  const signInRouterRef = SignInRouterCtx.useActorRef(true);\n  const signUpRouterRef = SignUpRouterCtx.useActorRef(true);\n  if (!signInRouterRef && !signUpRouterRef) {\n    throw new ClerkElementsRuntimeError(`<Loading> must be used within a <SignIn> or <SignUp> component.`);\n  }\n  if (signInRouterRef) {\n    if (isSignInScope(scope)) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        SignInLoading,\n        {\n          scope,\n          routerRef: signInRouterRef,\n          children\n        }\n      );\n    } else {\n      throw new ClerkElementsRuntimeError(`Invalid scope \"${scope}\" used for <Loading> inside <SignIn>.`);\n    }\n  }\n  if (signUpRouterRef) {\n    if (isSignUpScope(scope)) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n        SignUpLoading,\n        {\n          scope,\n          routerRef: signUpRouterRef,\n          children\n        }\n      );\n    } else {\n      throw new ClerkElementsRuntimeError(`Invalid scope \"${scope}\" used for <Loading> inside <SignUp>.`);\n    }\n  }\n  throw new ClerkElementsRuntimeError(\"Invalid state for <Loading>. Please open an issue.\");\n}\nfunction SignInLoading({ children, scope, routerRef }) {\n  const [isLoading, { step: loadingStep, strategy, action }] = useLoading(routerRef);\n  const tags = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(routerRef, (s) => s.tags);\n  const isStepLoading = (step) => isLoading && loadingStep === step;\n  const isInferredStepLoading = (step) => tags.has(`step:${step}`) && isStepLoading(step);\n  let loadingResult = false;\n  if (scope === \"global\") {\n    loadingResult = isLoading;\n  } else if (scope && isProviderStrategyScope(scope)) {\n    loadingResult = isLoading && loadingStep === void 0 && strategy === mapScopeToStrategy(scope);\n  } else if (scope) {\n    loadingResult = isStepLoading(scope.replace(\"step:\", \"\")) || scope === action;\n  } else {\n    loadingResult = isInferredStepLoading(\"start\") || isInferredStepLoading(\"verifications\") || isInferredStepLoading(\"choose-strategy\") || isInferredStepLoading(\"forgot-password\") || isInferredStepLoading(\"reset-password\");\n  }\n  return children(loadingResult);\n}\nfunction SignUpLoading({ children, scope, routerRef }) {\n  const [isLoading, { step: loadingStep, strategy, action }] = useLoading(routerRef);\n  const tags = (0,_xstate_react__WEBPACK_IMPORTED_MODULE_6__.useSelector)(routerRef, (s) => s.tags);\n  const isStepLoading = (step) => isLoading && loadingStep === step;\n  const isInferredStepLoading = (step) => tags.has(`step:${step}`) && isStepLoading(step);\n  let loadingResult = false;\n  if (scope === \"global\") {\n    loadingResult = isLoading;\n  } else if (scope && isProviderStrategyScope(scope)) {\n    loadingResult = isLoading && loadingStep === void 0 && strategy === mapScopeToStrategy(scope);\n  } else if (scope) {\n    loadingResult = isStepLoading(scope.replace(\"step:\", \"\")) || scope === action;\n  } else {\n    loadingResult = isInferredStepLoading(\"start\") || isInferredStepLoading(\"continue\") || isInferredStepLoading(\"verifications\");\n  }\n  return children(loadingResult);\n}\n\n// src/react/common/link.tsx\n\n\n\nvar paths = {\n  \"sign-in\": \"signInUrl\",\n  \"sign-up\": \"signUpUrl\"\n};\nfunction Link({ navigate, children, ...rest }) {\n  const router = (0,_clerk_shared_router__WEBPACK_IMPORTED_MODULE_22__.useClerkRouter)();\n  const clerk = (0,_clerk_shared_react__WEBPACK_IMPORTED_MODULE_7__.useClerk)();\n  const destinationUrl = router.makeDestinationUrlWithPreservedQueryParameters(\n    clerk.__internal_getOption(paths[navigate])\n  );\n  if (typeof children === \"function\") {\n    return children({ url: destinationUrl });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\n    \"a\",\n    {\n      onClick: (e) => {\n        if (router) {\n          e.preventDefault();\n          router.push(destinationUrl);\n        }\n      },\n      href: destinationUrl,\n      ...rest,\n      children\n    }\n  );\n}\n\n\n//# sourceMappingURL=chunk-7B3IWWWL.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AY2xlcmsvZWxlbWVudHMvZGlzdC9jaHVuay03QjNJV1dXTC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7O0FBRXJCO0FBQ2dHO0FBQ2hFOztBQUVoQztBQUNtRDs7QUFFbkQ7QUFDNkY7QUFDckM7QUFDRDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QixRQUFRO0FBQ1IsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLDZDQUFLO0FBQ3ZCO0FBQ0EscUJBQXFCLHlDQUFNO0FBQzNCO0FBQ0EsS0FBSztBQUNMLHNCQUFzQix5Q0FBTTtBQUM1QixpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZUFBZSx5Q0FBYyxJQUFJLGdCQUFnQjtBQUNqRDtBQUNBO0FBQ0EsWUFBWSxpRUFBWTtBQUN4QjtBQUNBO0FBQ0EseUJBQXlCLDRFQUF1QjtBQUNo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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUE0REU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxTSEFNXFxEZXNrdG9wXFxjcnVkLWFwaS1tYWluXFxub2RlX21vZHVsZXNcXEBjbGVya1xcZWxlbWVudHNcXGRpc3RcXGNodW5rLTdCM0lXV1dMLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX190eXBlRXJyb3IgPSAobXNnKSA9PiB7XG4gIHRocm93IFR5cGVFcnJvcihtc2cpO1xufTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG52YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpLCBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopKTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiBtZW1iZXIuaGFzKG9iaikgPyBfX3R5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIikgOiBtZW1iZXIgaW5zdGFuY2VvZiBXZWFrU2V0ID8gbWVtYmVyLmFkZChvYmopIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIiksIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKSwgdmFsdWUpO1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2luZGV4LnRzXG5pbXBvcnQgXCJjbGllbnQtb25seVwiO1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vZmllbGQudHN4XG5pbXBvcnQgeyBGaWVsZCBhcyBSYWRpeEZpZWxkLCBWYWxpZGl0eVN0YXRlIGFzIFJhZGl4VmFsaWRpdHlTdGF0ZSB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZm9ybVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q3IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL2Zvcm0vZm9ybS5jb250ZXh0LnRzXG5pbXBvcnQgeyBjcmVhdGVBY3RvckNvbnRleHQgfSBmcm9tIFwiQHhzdGF0ZS9yZWFjdFwiO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL2Zvcm0vZm9ybS5tYWNoaW5lLnRzXG5pbXBvcnQgeyBpc0NsZXJrQVBJUmVzcG9uc2VFcnJvciwgaXNLbm93bkVycm9yLCBpc01ldGFtYXNrRXJyb3IgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9lcnJvclwiO1xuaW1wb3J0IHsgc25ha2VUb0NhbWVsIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdW5kZXJzY29yZVwiO1xuaW1wb3J0IHsgYXNzaWduLCBlbnF1ZXVlQWN0aW9ucywgc2V0dXAgfSBmcm9tIFwieHN0YXRlXCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvZXJyb3JzL2luZGV4LnRzXG52YXIgQ2xlcmtFbGVtZW50c0Vycm9yQmFzZSA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLmNsZXJrRXJyb3IgPSB0cnVlO1xuICAgIHRoaXMuY2xlcmtFbGVtZW50c0Vycm9yID0gdHJ1ZTtcbiAgICB0aGlzLm5hbWUgPSBcIkNsZXJrRWxlbWVudHNFcnJvclwiO1xuICAgIHRoaXMucmF3TWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH1cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBbJHt0aGlzLm5hbWV9XVxuQ29kZTogJHt0aGlzLmNvZGV9XG5NZXNzYWdlOiAke3RoaXMubWVzc2FnZX1gO1xuICB9XG59O1xudmFyIENsZXJrRWxlbWVudHNFcnJvciA9IGNsYXNzIF9DbGVya0VsZW1lbnRzRXJyb3IgZXh0ZW5kcyBDbGVya0VsZW1lbnRzRXJyb3JCYXNlIHtcbiAgc3RhdGljIGZyb21BUElFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBuZXcgX0NsZXJrRWxlbWVudHNFcnJvcihcbiAgICAgIGVycm9yLmNvZGUudG9TdHJpbmcoKSxcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBFeHBlY3RlZCB0aGF0IGxvbmdNZXNzYWdlIGlzbid0IGEgcHJvcGVydHkgb2YgTWV0YW1hc2tFcnJvclxuICAgICAgZXJyb3IubG9uZ01lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZVxuICAgICk7XG4gIH1cbiAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSkge1xuICAgIHN1cGVyKGNvZGUsIG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiQ2xlcmtFbGVtZW50c0Vycm9yXCI7XG4gIH1cbn07XG52YXIgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvciA9IGNsYXNzIGV4dGVuZHMgQ2xlcmtFbGVtZW50c0Vycm9yQmFzZSB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihcImVsZW1lbnRzX3J1bnRpbWVfZXJyb3JcIiwgbWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJDbGVya0VsZW1lbnRzUnVudGltZUVycm9yXCI7XG4gIH1cbn07XG52YXIgQ2xlcmtFbGVtZW50c0ZpZWxkRXJyb3IgPSBjbGFzcyBfQ2xlcmtFbGVtZW50c0ZpZWxkRXJyb3IgZXh0ZW5kcyBDbGVya0VsZW1lbnRzRXJyb3JCYXNlIHtcbiAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSkge1xuICAgIHN1cGVyKGNvZGUsIG1lc3NhZ2UpO1xuICAgIHRoaXMubWF0Y2hGbiA9ICgpID0+IHRydWU7XG4gICAgdGhpcy5uYW1lID0gXCJDbGVya0VsZW1lbnRzRmllbGRFcnJvclwiO1xuICB9XG4gIHN0YXRpYyBmcm9tQVBJRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gbmV3IF9DbGVya0VsZW1lbnRzRmllbGRFcnJvcihlcnJvci5jb2RlLCBlcnJvci5sb25nTWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlKTtcbiAgfVxuICBnZXQgdmFsaWRpdHlTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlO1xuICB9XG4gIGdldCBmb3JjZU1hdGNoKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL2Zvcm0vZm9ybS5tYWNoaW5lLnRzXG52YXIgRm9ybU1hY2hpbmUgPSBzZXR1cCh7XG4gIGFjdGlvbnM6IHtcbiAgICBzZXRHbG9iYWxFcnJvcnM6IGFzc2lnbih7XG4gICAgICBlcnJvcnM6IChfLCBwYXJhbXMpID0+IFsuLi5wYXJhbXMuZXJyb3JzXVxuICAgIH0pLFxuICAgIHNldEZpZWxkRmVlZGJhY2s6IGFzc2lnbih7XG4gICAgICBmaWVsZHM6ICh7IGNvbnRleHQgfSwgcGFyYW1zKSA9PiB7XG4gICAgICAgIGlmICghcGFyYW1zLm5hbWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IHBhcmFtcy5uYW1lO1xuICAgICAgICBpZiAoY29udGV4dC5maWVsZHMuaGFzKGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICBjb250ZXh0LmZpZWxkcy5nZXQoZmllbGROYW1lKS5mZWVkYmFjayA9IHBhcmFtcy5mZWVkYmFjaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgdHlwZXM6IHt9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgaWQ6IFwiRm9ybVwiLFxuICBjb250ZXh0OiAoKSA9PiAoe1xuICAgIGRlZmF1bHRWYWx1ZXM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgZXJyb3JzOiBbXSxcbiAgICBmaWVsZHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgcHJvZ3Jlc3NpdmU6IGZhbHNlXG4gIH0pLFxuICBvbjoge1xuICAgIFwiRVJST1JTLlNFVFwiOiB7XG4gICAgICBhY3Rpb25zOiBlbnF1ZXVlQWN0aW9ucygoeyBlbnF1ZXVlLCBldmVudCB9KSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBpc0NsZXJrQVBJRXJyb3IgPSAoZXJyKSA9PiBcIm1ldGFcIiBpbiBlcnI7XG4gICAgICAgIGlmIChpc0tub3duRXJyb3IoZXZlbnQuZXJyb3IpKSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzID0ge307XG4gICAgICAgICAgY29uc3QgZ2xvYmFsRXJyb3JzID0gW107XG4gICAgICAgICAgY29uc3QgZXJyb3JzID0gaXNDbGVya0FQSVJlc3BvbnNlRXJyb3IoZXZlbnQuZXJyb3IpID8gKF9hID0gZXZlbnQuZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS5lcnJvcnMgOiBbZXZlbnQuZXJyb3JdO1xuICAgICAgICAgIGZvciAoY29uc3QgZXJyb3Igb2YgZXJyb3JzKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gaXNDbGVya0FQSUVycm9yKGVycm9yKSA/IHNuYWtlVG9DYW1lbCgoX2IgPSBlcnJvci5tZXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGFyYW1OYW1lKSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoIW5hbWUgfHwgaXNNZXRhbWFza0Vycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICBnbG9iYWxFcnJvcnMucHVzaChDbGVya0VsZW1lbnRzRXJyb3IuZnJvbUFQSUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmaWVsZHNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgZmllbGRzW25hbWVdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2MgPSBmaWVsZHNbbmFtZV0pID09IG51bGwgPyB2b2lkIDAgOiBfYy5wdXNoKENsZXJrRWxlbWVudHNGaWVsZEVycm9yLmZyb21BUElFcnJvcihlcnJvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbnF1ZXVlKHtcbiAgICAgICAgICAgIHR5cGU6IFwic2V0R2xvYmFsRXJyb3JzXCIsXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgZXJyb3JzOiBnbG9iYWxFcnJvcnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIGluIGZpZWxkcykge1xuICAgICAgICAgICAgZW5xdWV1ZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwic2V0RmllbGRGZWVkYmFja1wiLFxuICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBmaWVsZCxcbiAgICAgICAgICAgICAgICBmZWVkYmFjazoge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZmllbGRzW2ZpZWxkXVswXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJFUlJPUlMuQ0xFQVJcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZXJyb3JzOiAoKSA9PiBbXVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRklFTEQuQUREXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGZpZWxkczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIGlmICghZXZlbnQuZmllbGQubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmllbGQgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXZlbnQuZmllbGQudmFsdWUgPSBldmVudC5maWVsZC52YWx1ZSB8fCBjb250ZXh0LmRlZmF1bHRWYWx1ZXMuZ2V0KGV2ZW50LmZpZWxkLm5hbWUpIHx8IHZvaWQgMDtcbiAgICAgICAgICBjb250ZXh0LmZpZWxkcy5zZXQoZXZlbnQuZmllbGQubmFtZSwgZXZlbnQuZmllbGQpO1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRklFTEQuVVBEQVRFXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGZpZWxkczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICBpZiAoIWV2ZW50LmZpZWxkLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpZWxkIG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGZpZWxkID0gY29udGV4dC5maWVsZHMuZ2V0KGV2ZW50LmZpZWxkLm5hbWUpO1xuICAgICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgZmllbGQuY2hlY2tlZCA9IGV2ZW50LmZpZWxkLmNoZWNrZWQ7XG4gICAgICAgICAgICBmaWVsZC5kaXNhYmxlZCA9IChfYSA9IGV2ZW50LmZpZWxkLmRpc2FibGVkKSAhPSBudWxsID8gX2EgOiBmaWVsZC5kaXNhYmxlZDtcbiAgICAgICAgICAgIGZpZWxkLnZhbHVlID0gZXZlbnQuZmllbGQudmFsdWU7XG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkcy5zZXQoZXZlbnQuZmllbGQubmFtZSwgZmllbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkZJRUxELkRJU0FCTEVcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5maWVsZC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGNvbnRleHQuZmllbGRzLmdldChldmVudC5maWVsZC5uYW1lKTtcbiAgICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICAgIGZpZWxkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRleHQuZmllbGRzLnNldChldmVudC5maWVsZC5uYW1lLCBmaWVsZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkcztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiRklFTEQuRU5BQkxFXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGZpZWxkczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIGlmICghZXZlbnQuZmllbGQubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmllbGQgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZmllbGQgPSBjb250ZXh0LmZpZWxkcy5nZXQoZXZlbnQuZmllbGQubmFtZSk7XG4gICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICBmaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29udGV4dC5maWVsZHMuc2V0KGV2ZW50LmZpZWxkLm5hbWUsIGZpZWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGRzO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJGSUVMRC5SRU1PVkVcIjoge1xuICAgICAgYWN0aW9uczogYXNzaWduKHtcbiAgICAgICAgZmllbGRzOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5maWVsZC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWVsZCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZXh0LmZpZWxkcy5kZWxldGUoZXZlbnQuZmllbGQubmFtZSk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGRzO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJGSUVMRC5GRUVEQkFDSy5TRVRcIjoge1xuICAgICAgYWN0aW9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJzZXRGaWVsZEZlZWRiYWNrXCIsXG4gICAgICAgICAgcGFyYW1zOiAoeyBldmVudCB9KSA9PiBldmVudC5maWVsZFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBcIkZJRUxELkZFRURCQUNLLkNMRUFSXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGZpZWxkczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIGlmICghZXZlbnQuZmllbGQubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmllbGQgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbnRleHQuZmllbGRzLmhhcyhldmVudC5maWVsZC5uYW1lKSkge1xuICAgICAgICAgICAgY29udGV4dC5maWVsZHMuZ2V0KGV2ZW50LmZpZWxkLm5hbWUpLmZlZWRiYWNrID0gdm9pZCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkZJRUxELkZFRURCQUNLLkNMRUFSLkFMTFwiOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24oe1xuICAgICAgICBmaWVsZHM6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgICAgIGNvbnRleHQuZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgICAgICBmaWVsZC5mZWVkYmFjayA9IHZvaWQgMDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZHM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBNQVJLX0FTX1BST0dSRVNTSVZFOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24oKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBjb25zdCBtaXNzaW5nID0gbmV3IFNldChldmVudC5taXNzaW5nKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkZWZhdWx0VmFsdWVzOiBldmVudC5kZWZhdWx0VmFsdWVzLFxuICAgICAgICAgIGhpZGRlbjogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLmV2ZW50LnJlcXVpcmVkLmZpbHRlcigoZikgPT4gIW1pc3NpbmcuaGFzKGYpKSwgLi4uZXZlbnQub3B0aW9uYWxdKSxcbiAgICAgICAgICBtaXNzaW5nLFxuICAgICAgICAgIG9wdGlvbmFsOiBuZXcgU2V0KGV2ZW50Lm9wdGlvbmFsKSxcbiAgICAgICAgICBwcm9ncmVzc2l2ZTogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlZDogbmV3IFNldChldmVudC5yZXF1aXJlZClcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgfSxcbiAgICBVTk1BUktfQVNfUFJPR1JFU1NJVkU6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbih7XG4gICAgICAgIGRlZmF1bHRWYWx1ZXM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgICAgIGhpZGRlbjogdm9pZCAwLFxuICAgICAgICBtaXNzaW5nOiB2b2lkIDAsXG4gICAgICAgIG9wdGlvbmFsOiB2b2lkIDAsXG4gICAgICAgIHByb2dyZXNzaXZlOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZWQ6IHZvaWQgMFxuICAgICAgfSlcbiAgICB9LFxuICAgIFBSRUZJTExfREVGQVVMVF9WQUxVRVM6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbigoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGVmYXVsdFZhbHVlczogZXZlbnQuZGVmYXVsdFZhbHVlc1xuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBzcmMvdXRpbHMvc2FmZS1hY2Nlc3MudHNcbmZ1bmN0aW9uIHNhZmVBY2Nlc3MoZm4sIGZhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn1cblxuLy8gc3JjL2ludGVybmFscy91dGlscy9pbnNwZWN0b3IvaW5kZXgudHNcbnZhciBpbnNwZWN0O1xuaWYgKGZhbHNlKSB7XG4gIGluc3BlY3QgPSAoX2EgPSBnZXRCcm93c2VySW5zcGVjdG9yKCkpICE9IG51bGwgPyBfYSA6IGdldENvbnNvbGVJbnNwZWN0b3IoKTtcbn1cblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy9mb3JtL2Zvcm0uY29udGV4dC50c1xudmFyIEZvcm1NYWNoaW5lQ29udGV4dCA9IGNyZWF0ZUFjdG9yQ29udGV4dChGb3JtTWFjaGluZSwgeyBpbnNwZWN0IH0pO1xudmFyIEZvcm1TdG9yZVByb3ZpZGVyID0gRm9ybU1hY2hpbmVDb250ZXh0LlByb3ZpZGVyO1xudmFyIHVzZUZvcm1TdG9yZSA9IEZvcm1NYWNoaW5lQ29udGV4dC51c2VBY3RvclJlZjtcbnZhciB1c2VGb3JtU2VsZWN0b3IgPSBGb3JtTWFjaGluZUNvbnRleHQudXNlU2VsZWN0b3I7XG52YXIgZ2xvYmFsRXJyb3JzU2VsZWN0b3IgPSAoc3RhdGUpID0+IHN0YXRlLmNvbnRleHQuZXJyb3JzO1xudmFyIGZpZWxkVmFsdWVTZWxlY3RvciA9IChuYW1lKSA9PiAoc3RhdGUpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gbmFtZSA/IChfYSA9IHN0YXRlLmNvbnRleHQuZmllbGRzLmdldChuYW1lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlIDogXCJcIjtcbn07XG52YXIgZmllbGRIYXNWYWx1ZVNlbGVjdG9yID0gKG5hbWUpID0+IChzdGF0ZSkgPT4gQm9vbGVhbihmaWVsZFZhbHVlU2VsZWN0b3IobmFtZSkoc3RhdGUpKTtcbnZhciBmaWVsZEZlZWRiYWNrU2VsZWN0b3IgPSAobmFtZSkgPT4gKHN0YXRlKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIG5hbWUgPyAoX2EgPSBzdGF0ZS5jb250ZXh0LmZpZWxkcy5nZXQobmFtZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5mZWVkYmFjayA6IHZvaWQgMDtcbn07XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZmllbGQtZmVlZGJhY2sudHNcbmZ1bmN0aW9uIHVzZUZpZWxkRmVlZGJhY2soeyBuYW1lIH0pIHtcbiAgY29uc3QgZmVlZGJhY2sgPSB1c2VGb3JtU2VsZWN0b3IoZmllbGRGZWVkYmFja1NlbGVjdG9yKG5hbWUpKTtcbiAgcmV0dXJuIHtcbiAgICBmZWVkYmFja1xuICB9O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWZpZWxkLnRzXG5mdW5jdGlvbiB1c2VGaWVsZCh7IG5hbWUgfSkge1xuICBjb25zdCBoYXNWYWx1ZSA9IHVzZUZvcm1TZWxlY3RvcihmaWVsZEhhc1ZhbHVlU2VsZWN0b3IobmFtZSkpO1xuICBjb25zdCB7IGZlZWRiYWNrIH0gPSB1c2VGaWVsZEZlZWRiYWNrKHsgbmFtZSB9KTtcbiAgY29uc3Qgc2hvdWxkQmVIaWRkZW4gPSBmYWxzZTtcbiAgY29uc3QgaGFzRXJyb3IgPSBmZWVkYmFjayA/IGZlZWRiYWNrLnR5cGUgPT09IFwiZXJyb3JcIiA6IGZhbHNlO1xuICByZXR1cm4ge1xuICAgIGhhc1ZhbHVlLFxuICAgIHByb3BzOiB7XG4gICAgICBcImRhdGEtaGlkZGVuXCI6IHNob3VsZEJlSGlkZGVuID8gdHJ1ZSA6IHZvaWQgMCxcbiAgICAgIHNlcnZlckludmFsaWQ6IGhhc0Vycm9yXG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWZpZWxkLWNvbnRleHQudHNcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xudmFyIEZpZWxkQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG52YXIgdXNlRmllbGRDb250ZXh0ID0gKCkgPT4gUmVhY3QudXNlQ29udGV4dChGaWVsZENvbnRleHQpO1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vdHlwZXMudHNcbnZhciBGSUVMRF9TVEFURVMgPSB7XG4gIHN1Y2Nlc3M6IFwic3VjY2Vzc1wiLFxuICBlcnJvcjogXCJlcnJvclwiLFxuICBpZGxlOiBcImlkbGVcIixcbiAgd2FybmluZzogXCJ3YXJuaW5nXCIsXG4gIGluZm86IFwiaW5mb1wiXG59O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWZpZWxkLXN0YXRlLnRzXG5mdW5jdGlvbiB1c2VGaWVsZFN0YXRlKHsgbmFtZSB9KSB7XG4gIGNvbnN0IHsgZmVlZGJhY2sgfSA9IHVzZUZpZWxkRmVlZGJhY2soeyBuYW1lIH0pO1xuICBjb25zdCBoYXNWYWx1ZSA9IHVzZUZvcm1TZWxlY3RvcihmaWVsZEhhc1ZhbHVlU2VsZWN0b3IobmFtZSkpO1xuICBsZXQgc3RhdGUgPSBGSUVMRF9TVEFURVMuaWRsZTtcbiAgaWYgKCFoYXNWYWx1ZSkge1xuICAgIHN0YXRlID0gRklFTERfU1RBVEVTLmlkbGU7XG4gIH1cbiAgc3dpdGNoIChmZWVkYmFjayA9PSBudWxsID8gdm9pZCAwIDogZmVlZGJhY2sudHlwZSkge1xuICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgc3RhdGUgPSBGSUVMRF9TVEFURVMuZXJyb3I7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwid2FybmluZ1wiOlxuICAgICAgc3RhdGUgPSBGSUVMRF9TVEFURVMud2FybmluZztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJpbmZvXCI6XG4gICAgICBzdGF0ZSA9IEZJRUxEX1NUQVRFUy5pbmZvO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgIHN0YXRlID0gRklFTERfU1RBVEVTLnN1Y2Nlc3M7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzdGF0ZVxuICB9O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWZvcm0udHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtZ2xvYmFsLWVycm9ycy50c1xuZnVuY3Rpb24gdXNlR2xvYmFsRXJyb3JzKCkge1xuICBjb25zdCBlcnJvcnMgPSB1c2VGb3JtU2VsZWN0b3IoZ2xvYmFsRXJyb3JzU2VsZWN0b3IpO1xuICByZXR1cm4ge1xuICAgIGVycm9yc1xuICB9O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLWZvcm0udHNcbmZ1bmN0aW9uIHVzZUZvcm0oeyBmbG93QWN0b3IgfSkge1xuICBjb25zdCB7IGVycm9ycyB9ID0gdXNlR2xvYmFsRXJyb3JzKCk7XG4gIGNvbnN0IG9uU3VibWl0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGZsb3dBY3Rvcikge1xuICAgICAgICBmbG93QWN0b3Iuc2VuZCh7IHR5cGU6IFwiU1VCTUlUXCIsIGFjdGlvbjogXCJzdWJtaXRcIiB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtmbG93QWN0b3JdXG4gICk7XG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIC4uLmVycm9ycy5sZW5ndGggPiAwID8geyBcImRhdGEtZ2xvYmFsLWVycm9yXCI6IHRydWUgfSA6IHt9LFxuICAgICAgb25TdWJtaXRcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtaW5wdXQudHN4XG5pbXBvcnQgeyBDb250cm9sIGFzIFJhZGl4Q29udHJvbDIgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbmltcG9ydCAqIGFzIFJlYWN0NiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3JlYWN0L2hvb2tzL3VzZS1wYXNzd29yZC5ob29rLnRzXG5pbXBvcnQgeyB1c2VDbGVyayB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JlYWN0XCI7XG5pbXBvcnQgeyBub29wIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdXRpbHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3JlYWN0L3V0aWxzL2dlbmVyYXRlLXBhc3N3b3JkLWVycm9yLXRleHQudHNcbnZhciBlcnJvck1lc3NhZ2VzID0ge1xuICBtYXhfbGVuZ3RoOiBbXCJsZXNzIHRoYW4gJWxlbmd0aCUgY2hhcmFjdGVyc1wiLCBcImxlbmd0aFwiXSxcbiAgbWluX2xlbmd0aDogW1wiJWxlbmd0aCUgb3IgbW9yZSBjaGFyYWN0ZXJzXCIsIFwibGVuZ3RoXCJdLFxuICByZXF1aXJlX251bWJlcnM6IFwiYSBudW1iZXJcIixcbiAgcmVxdWlyZV9sb3dlcmNhc2U6IFwiYSBsb3dlcmNhc2UgbGV0dGVyXCIsXG4gIHJlcXVpcmVfdXBwZXJjYXNlOiBcImFuIHVwcGVyY2FzZSBsZXR0ZXJcIixcbiAgcmVxdWlyZV9zcGVjaWFsX2NoYXI6IFwiYSBzcGVjaWFsIGNoYXJhY3RlclwiXG59O1xudmFyIGNyZWF0ZUxpc3RGb3JtYXQgPSAobWVzc2FnZSkgPT4ge1xuICBsZXQgbWVzc2FnZVdpdGhQcmVmaXg7XG4gIGlmIChcIkxpc3RGb3JtYXRcIiBpbiBJbnRsKSB7XG4gICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChcImVuXCIsIHsgc3R5bGU6IFwibG9uZ1wiLCB0eXBlOiBcImNvbmp1bmN0aW9uXCIgfSk7XG4gICAgbWVzc2FnZVdpdGhQcmVmaXggPSBmb3JtYXR0ZXIuZm9ybWF0KG1lc3NhZ2UpO1xuICB9IGVsc2Uge1xuICAgIG1lc3NhZ2VXaXRoUHJlZml4ID0gbWVzc2FnZS5qb2luKFwiLCBcIik7XG4gIH1cbiAgcmV0dXJuIG1lc3NhZ2VXaXRoUHJlZml4O1xufTtcbmZ1bmN0aW9uIGJ1aWxkRXJyb3JUdXBsZShrZXksIGNvbmZpZykge1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgXCJtYXhfbGVuZ3RoXCI6XG4gICAgICByZXR1cm4gW2tleSwgeyBtYXhfbGVuZ3RoOiBjb25maWcubWF4X2xlbmd0aCB9XTtcbiAgICBjYXNlIFwibWluX2xlbmd0aFwiOlxuICAgICAgcmV0dXJuIFtrZXksIHsgbWluX2xlbmd0aDogY29uZmlnLm1pbl9sZW5ndGggfV07XG4gICAgY2FzZSBcInJlcXVpcmVfc3BlY2lhbF9jaGFyXCI6XG4gICAgICByZXR1cm4gW2tleSwgeyBhbGxvd2VkX3NwZWNpYWxfY2hhcmFjdGVyczogY29uZmlnLmFsbG93ZWRfc3BlY2lhbF9jaGFyYWN0ZXJzIH1dO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4ga2V5O1xuICB9XG59XG52YXIgZ2VuZXJhdGVQYXNzd29yZEVycm9yVGV4dCA9ICh7IGNvbmZpZywgZmFpbGVkVmFsaWRhdGlvbnMgfSkgPT4ge1xuICBjb25zdCBjb2RlcyA9IFtdO1xuICBpZiAoIWZhaWxlZFZhbGlkYXRpb25zIHx8IE9iamVjdC5rZXlzKGZhaWxlZFZhbGlkYXRpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZXMsXG4gICAgICBtZXNzYWdlOiBcIlwiXG4gICAgfTtcbiAgfVxuICBjb25zdCBoYXNNaW5MZW5ndGhFcnJvciA9IChmYWlsZWRWYWxpZGF0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZmFpbGVkVmFsaWRhdGlvbnMubWluX2xlbmd0aCkgfHwgZmFsc2U7XG4gIGNvbnN0IG1lc3NhZ2VzID0gT2JqZWN0LmVudHJpZXMoZmFpbGVkVmFsaWRhdGlvbnMpLmZpbHRlcigoaykgPT4gaGFzTWluTGVuZ3RoRXJyb3IgPyBrWzBdID09PSBcIm1pbl9sZW5ndGhcIiA6IHRydWUpLmZpbHRlcigoWywgdl0pID0+ICEhdikubWFwKChba10pID0+IHtcbiAgICBjb25zdCBlbnRyeSA9IGs7XG4gICAgY29uc3QgZXJyb3JUdXBsZSA9IGJ1aWxkRXJyb3JUdXBsZShlbnRyeSwgY29uZmlnKTtcbiAgICBjb2Rlcy5wdXNoKGVycm9yVHVwbGUpO1xuICAgIGNvbnN0IGVycm9yS2V5ID0gZXJyb3JNZXNzYWdlc1tlbnRyeV07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXJyb3JLZXkpKSB7XG4gICAgICBjb25zdCBbbXNnLCByZXBsYWNlVmFsdWVdID0gZXJyb3JLZXk7XG4gICAgICByZXR1cm4gbXNnLnJlcGxhY2UoYCUke3JlcGxhY2VWYWx1ZX0lYCwgY29uZmlnW2tdKTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yS2V5O1xuICB9KTtcbiAgY29uc3QgbWVzc2FnZVdpdGhQcmVmaXggPSBjcmVhdGVMaXN0Rm9ybWF0KG1lc3NhZ2VzKTtcbiAgcmV0dXJuIHtcbiAgICBjb2RlcyxcbiAgICBtZXNzYWdlOiBgWW91ciBwYXNzd29yZCBtdXN0IGNvbnRhaW4gJHttZXNzYWdlV2l0aFByZWZpeH0uYFxuICB9O1xufTtcblxuLy8gc3JjL3JlYWN0L2hvb2tzL3VzZS1wYXNzd29yZC5ob29rLnRzXG52YXIgdXNlUGFzc3dvcmQgPSAoY2FsbGJhY2tzKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgY2xlcmsgPSB1c2VDbGVyaygpO1xuICBjb25zdCBwYXNzd29yZFNldHRpbmdzID0gKF9hID0gY2xlcmsuX191bnN0YWJsZV9fZW52aXJvbm1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS51c2VyU2V0dGluZ3MucGFzc3dvcmRTZXR0aW5ncztcbiAgY29uc3QgeyBkaXNhYmxlX2hpYnAsIG1pbl96eGN2Ym5fc3RyZW5ndGgsIHNob3dfenhjdmJuLCAuLi5jb25maWcgfSA9IHBhc3N3b3JkU2V0dGluZ3MgfHwge307XG4gIGNvbnN0IHtcbiAgICBvblZhbGlkYXRpb25FcnJvciA9IG5vb3AsXG4gICAgb25WYWxpZGF0aW9uU3VjY2VzcyA9IG5vb3AsXG4gICAgb25WYWxpZGF0aW9uV2FybmluZyA9IG5vb3AsXG4gICAgb25WYWxpZGF0aW9uSW5mbyA9IG5vb3AsXG4gICAgb25WYWxpZGF0aW9uQ29tcGxleGl0eVxuICB9ID0gY2FsbGJhY2tzIHx8IHt9O1xuICBjb25zdCBvblZhbGlkYXRlID0gUmVhY3QyLnVzZUNhbGxiYWNrKFxuICAgIChyZXMpID0+IHtcbiAgICAgIHZhciBfYTIsIF9iLCBfYztcbiAgICAgIGlmIChyZXMuY29tcGxleGl0eSkge1xuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhyZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHJlcy5jb21wbGV4aXR5KS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgeyBtZXNzYWdlLCBjb2RlcyB9ID0gZ2VuZXJhdGVQYXNzd29yZEVycm9yVGV4dCh7XG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBmYWlsZWRWYWxpZGF0aW9uczogcmVzLmNvbXBsZXhpdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoKF9hMiA9IHJlcy5jb21wbGV4aXR5KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLm1pbl9sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBvblZhbGlkYXRpb25JbmZvKG1lc3NhZ2UsIGNvZGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UsIGNvZGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCgoX2IgPSByZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHJlcy5zdHJlbmd0aCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnN0YXRlKSA9PT0gXCJmYWlsXCIpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHJlcy5zdHJlbmd0aC5rZXlzO1xuICAgICAgICBjb25zdCBlcnJvciA9IGtleXMubWFwKChrZXkpID0+IGdldCh6eGN2Ym5LZXlzLCBrZXkpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGlvbkVycm9yKGVycm9yLCBrZXlzKTtcbiAgICAgIH1cbiAgICAgIGlmICgoKF9jID0gcmVzID09IG51bGwgPyB2b2lkIDAgOiByZXMuc3RyZW5ndGgpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zdGF0ZSkgPT09IFwicGFzc1wiKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSByZXMuc3RyZW5ndGgua2V5cztcbiAgICAgICAgY29uc3QgZXJyb3IgPSBrZXlzLm1hcCgoa2V5KSA9PiBnZXQoenhjdmJuS2V5cywga2V5KSkuam9pbihcIiBcIik7XG4gICAgICAgIHJldHVybiBvblZhbGlkYXRpb25XYXJuaW5nKGVycm9yLCBrZXlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvblZhbGlkYXRpb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgICBbY2FsbGJhY2tzLCBjb25maWddXG4gICk7XG4gIGNvbnN0IHZhbGlkYXRlUGFzc3dvcmQgPSBSZWFjdDIudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIChwYXNzd29yZCkgPT4ge1xuICAgICAgcmV0dXJuIGNsZXJrLmNsaWVudC5zaWduVXAudmFsaWRhdGVQYXNzd29yZChwYXNzd29yZCwge1xuICAgICAgICBvblZhbGlkYXRpb246IG9uVmFsaWRhdGUsXG4gICAgICAgIG9uVmFsaWRhdGlvbkNvbXBsZXhpdHlcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtvblZhbGlkYXRlXSk7XG4gIHJldHVybiB7XG4gICAgdmFsaWRhdGVQYXNzd29yZFxuICB9O1xufTtcbnZhciBnZXQgPSAodCwgcGF0aCkgPT4gcGF0aC5zcGxpdChcIi5cIikucmVkdWNlKChyLCBrKSA9PiByID09IG51bGwgPyB2b2lkIDAgOiByW2tdLCB0KTtcbnZhciB6eGN2Ym5LZXlzID0ge1xuICB1bnN0YWJsZV9fZXJyb3JzOiB7XG4gICAgenhjdmJuOiB7XG4gICAgICBjb3VsZEJlU3Ryb25nZXI6IFwiWW91ciBwYXNzd29yZCB3b3JrcywgYnV0IGNvdWxkIGJlIHN0cm9uZ2VyLiBUcnkgYWRkaW5nIG1vcmUgY2hhcmFjdGVycy5cIixcbiAgICAgIGdvb2RQYXNzd29yZDogXCJZb3VyIHBhc3N3b3JkIG1lZXRzIGFsbCB0aGUgbmVjZXNzYXJ5IHJlcXVpcmVtZW50cy5cIixcbiAgICAgIG5vdEVub3VnaDogXCJZb3VyIHBhc3N3b3JkIGlzIG5vdCBzdHJvbmcgZW5vdWdoLlwiLFxuICAgICAgc3VnZ2VzdGlvbnM6IHtcbiAgICAgICAgYWxsVXBwZXJjYXNlOiBcIkNhcGl0YWxpemUgc29tZSwgYnV0IG5vdCBhbGwgbGV0dGVycy5cIixcbiAgICAgICAgYW5vdGhlcldvcmQ6IFwiQWRkIG1vcmUgd29yZHMgdGhhdCBhcmUgbGVzcyBjb21tb24uXCIsXG4gICAgICAgIGFzc29jaWF0ZWRZZWFyczogXCJBdm9pZCB5ZWFycyB0aGF0IGFyZSBhc3NvY2lhdGVkIHdpdGggeW91LlwiLFxuICAgICAgICBjYXBpdGFsaXphdGlvbjogXCJDYXBpdGFsaXplIG1vcmUgdGhhbiB0aGUgZmlyc3QgbGV0dGVyLlwiLFxuICAgICAgICBkYXRlczogXCJBdm9pZCBkYXRlcyBhbmQgeWVhcnMgdGhhdCBhcmUgYXNzb2NpYXRlZCB3aXRoIHlvdS5cIixcbiAgICAgICAgbDMzdDogXCJBdm9pZCBwcmVkaWN0YWJsZSBsZXR0ZXIgc3Vic3RpdHV0aW9ucyBsaWtlICdAJyBmb3IgJ2EnLlwiLFxuICAgICAgICBsb25nZXJLZXlib2FyZFBhdHRlcm46IFwiVXNlIGxvbmdlciBrZXlib2FyZCBwYXR0ZXJucyBhbmQgY2hhbmdlIHR5cGluZyBkaXJlY3Rpb24gbXVsdGlwbGUgdGltZXMuXCIsXG4gICAgICAgIG5vTmVlZDogXCJZb3UgY2FuIGNyZWF0ZSBzdHJvbmcgcGFzc3dvcmRzIHdpdGhvdXQgdXNpbmcgc3ltYm9scywgbnVtYmVycywgb3IgdXBwZXJjYXNlIGxldHRlcnMuXCIsXG4gICAgICAgIHB3bmVkOiBcIklmIHlvdSB1c2UgdGhpcyBwYXNzd29yZCBlbHNld2hlcmUsIHlvdSBzaG91bGQgY2hhbmdlIGl0LlwiLFxuICAgICAgICByZWNlbnRZZWFyczogXCJBdm9pZCByZWNlbnQgeWVhcnMuXCIsXG4gICAgICAgIHJlcGVhdGVkOiBcIkF2b2lkIHJlcGVhdGVkIHdvcmRzIGFuZCBjaGFyYWN0ZXJzLlwiLFxuICAgICAgICByZXZlcnNlV29yZHM6IFwiQXZvaWQgcmV2ZXJzZWQgc3BlbGxpbmdzIG9mIGNvbW1vbiB3b3Jkcy5cIixcbiAgICAgICAgc2VxdWVuY2VzOiBcIkF2b2lkIGNvbW1vbiBjaGFyYWN0ZXIgc2VxdWVuY2VzLlwiLFxuICAgICAgICB1c2VXb3JkczogXCJVc2UgbXVsdGlwbGUgd29yZHMsIGJ1dCBhdm9pZCBjb21tb24gcGhyYXNlcy5cIlxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzOiB7XG4gICAgICAgIGNvbW1vbjogXCJUaGlzIGlzIGEgY29tbW9ubHkgdXNlZCBwYXNzd29yZC5cIixcbiAgICAgICAgY29tbW9uTmFtZXM6IFwiQ29tbW9uIG5hbWVzIGFuZCBzdXJuYW1lcyBhcmUgZWFzeSB0byBndWVzcy5cIixcbiAgICAgICAgZGF0ZXM6IFwiRGF0ZXMgYXJlIGVhc3kgdG8gZ3Vlc3MuXCIsXG4gICAgICAgIGV4dGVuZGVkUmVwZWF0OiAnUmVwZWF0ZWQgY2hhcmFjdGVyIHBhdHRlcm5zIGxpa2UgXCJhYmNhYmNhYmNcIiBhcmUgZWFzeSB0byBndWVzcy4nLFxuICAgICAgICBrZXlQYXR0ZXJuOiBcIlNob3J0IGtleWJvYXJkIHBhdHRlcm5zIGFyZSBlYXN5IHRvIGd1ZXNzLlwiLFxuICAgICAgICBuYW1lc0J5VGhlbXNlbHZlczogXCJTaW5nbGUgbmFtZXMgb3Igc3VybmFtZXMgYXJlIGVhc3kgdG8gZ3Vlc3MuXCIsXG4gICAgICAgIHB3bmVkOiBcIllvdXIgcGFzc3dvcmQgd2FzIGV4cG9zZWQgYnkgYSBkYXRhIGJyZWFjaCBvbiB0aGUgSW50ZXJuZXQuXCIsXG4gICAgICAgIHJlY2VudFllYXJzOiBcIlJlY2VudCB5ZWFycyBhcmUgZWFzeSB0byBndWVzcy5cIixcbiAgICAgICAgc2VxdWVuY2VzOiAnQ29tbW9uIGNoYXJhY3RlciBzZXF1ZW5jZXMgbGlrZSBcImFiY1wiIGFyZSBlYXN5IHRvIGd1ZXNzLicsXG4gICAgICAgIHNpbWlsYXJUb0NvbW1vbjogXCJUaGlzIGlzIHNpbWlsYXIgdG8gYSBjb21tb25seSB1c2VkIHBhc3N3b3JkLlwiLFxuICAgICAgICBzaW1wbGVSZXBlYXQ6ICdSZXBlYXRlZCBjaGFyYWN0ZXJzIGxpa2UgXCJhYWFcIiBhcmUgZWFzeSB0byBndWVzcy4nLFxuICAgICAgICBzdHJhaWdodFJvdzogXCJTdHJhaWdodCByb3dzIG9mIGtleXMgb24geW91ciBrZXlib2FyZCBhcmUgZWFzeSB0byBndWVzcy5cIixcbiAgICAgICAgdG9wSHVuZHJlZDogXCJUaGlzIGlzIGEgZnJlcXVlbnRseSB1c2VkIHBhc3N3b3JkLlwiLFxuICAgICAgICB0b3BUZW46IFwiVGhpcyBpcyBhIGhlYXZpbHkgdXNlZCBwYXNzd29yZC5cIixcbiAgICAgICAgdXNlcklucHV0czogXCJUaGVyZSBzaG91bGQgbm90IGJlIGFueSBwZXJzb25hbCBvciBwYWdlIHJlbGF0ZWQgZGF0YS5cIixcbiAgICAgICAgd29yZEJ5SXRzZWxmOiBcIlNpbmdsZSB3b3JkcyBhcmUgZWFzeSB0byBndWVzcy5cIlxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL290cC50c3hcbmltcG9ydCB7IENvbnRyb2wgYXMgUmFkaXhDb250cm9sIH0gZnJvbSBcIkByYWRpeC11aS9yZWFjdC1mb3JtXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDMgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBaRVJPID0gWzAsIDBdO1xudmFyIE9VVFNJREUgPSBbLTEsIC0xXTtcbnZhciBPVFBfTEVOR1RIX0RFRkFVTFQgPSA2O1xudmFyIFBBU1NXT1JEX01BTkFHRVJfT0ZGU0VUX0RFRkFVTFQgPSA0MDtcbnZhciBPVFBJbnB1dCA9IFJlYWN0My5mb3J3YXJkUmVmKGZ1bmN0aW9uIE9UUElucHV0Mihwcm9wcywgcmVmKSB7XG4gIGNvbnN0IHsgcmVuZGVyLCBsZW5ndGgsIGF1dG9TdWJtaXQsIC4uLnJlc3QgfSA9IHByb3BzO1xuICBjb25zdCBoYXNSZW5kZXJQcm9wID0gdHlwZW9mIHJlbmRlciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKGhhc1JlbmRlclByb3ApIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIE9UUElucHV0U2VnbWVudGVkLFxuICAgICAge1xuICAgICAgICAuLi5yZXN0LFxuICAgICAgICByZWYsXG4gICAgICAgIHJlbmRlcixcbiAgICAgICAgbGVuZ3RoLFxuICAgICAgICBhdXRvU3VibWl0XG4gICAgICB9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBPVFBJbnB1dFN0YW5kYXJkLFxuICAgIHtcbiAgICAgIC4uLnJlc3QsXG4gICAgICByZWYsXG4gICAgICBsZW5ndGgsXG4gICAgICBhdXRvU3VibWl0XG4gICAgfVxuICApO1xufSk7XG52YXIgT1RQSW5wdXRTdGFuZGFyZCA9IFJlYWN0My5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBPVFBJbnB1dDMocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgbGVuZ3RoID0gT1RQX0xFTkdUSF9ERUZBVUxULCBhdXRvU3VibWl0ID0gZmFsc2UsIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgIGNvbnN0IGlubmVyUmVmID0gUmVhY3QzLnVzZVJlZihudWxsKTtcbiAgICBSZWFjdDMudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsICgpID0+IGlubmVyUmVmLmN1cnJlbnQsIFtdKTtcbiAgICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICBpZiAoU3RyaW5nKHByb3BzLnZhbHVlKS5sZW5ndGggPT09IGxlbmd0aCAmJiBhdXRvU3VibWl0KSB7XG4gICAgICAgIChfYiA9IChfYSA9IGlubmVyUmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5mb3JtKSA9PSBudWxsID8gdm9pZCAwIDogX2IucmVxdWVzdFN1Ym1pdCgpO1xuICAgICAgfVxuICAgIH0sIFtwcm9wcy52YWx1ZSwgbGVuZ3RoLCBhdXRvU3VibWl0XSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICBSYWRpeENvbnRyb2wsXG4gICAgICB7XG4gICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIFwiZGF0YS1vdHAtaW5wdXQtc3RhbmRhcmRcIjogdHJ1ZVxuICAgICAgfVxuICAgICk7XG4gIH1cbik7XG52YXIgT1RQSW5wdXRTZWdtZW50ZWQgPSBSZWFjdDMuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gT1RQSW5wdXQ0KHByb3BzLCByZWYpIHtcbiAgICBjb25zdCB7XG4gICAgICBjbGFzc05hbWU6IHVzZXJQcm92aWRlZENsYXNzTmFtZSxcbiAgICAgIHJlbmRlcixcbiAgICAgIGxlbmd0aCA9IE9UUF9MRU5HVEhfREVGQVVMVCxcbiAgICAgIGF1dG9TdWJtaXQgPSBmYWxzZSxcbiAgICAgIHBhc3N3b3JkTWFuYWdlck9mZnNldCA9IFBBU1NXT1JEX01BTkFHRVJfT0ZGU0VUX0RFRkFVTFQsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IHByb3BzO1xuICAgIGNvbnN0IGlubmVyUmVmID0gUmVhY3QzLnVzZVJlZihudWxsKTtcbiAgICBjb25zdCBbc2VsZWN0aW9uUmFuZ2UsIHNldFNlbGVjdGlvblJhbmdlXSA9IFJlYWN0My51c2VTdGF0ZShwcm9wcy5hdXRvRm9jdXMgPyBaRVJPIDogT1VUU0lERSk7XG4gICAgY29uc3QgW2lzSG92ZXJpbmcsIHNldElzSG92ZXJpbmddID0gUmVhY3QzLnVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBpc0ZvY3VzZWQgPSAoKSA9PiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbm5lclJlZi5jdXJyZW50O1xuICAgIFJlYWN0My51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gaW5uZXJSZWYuY3VycmVudCwgW10pO1xuICAgIFJlYWN0My51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlubmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2V0U2VsZWN0aW9uUmFuZ2UoKGN1cikgPT4gc2VsZWN0aW9uUmFuZ2VVcGRhdGVyKGN1ciwgaW5uZXJSZWYpKTtcbiAgICB9LCBbcHJvcHMudmFsdWVdKTtcbiAgICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGZ1bmN0aW9uIG9uU2VsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICBpZiAoIWlzRm9jdXNlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFNlbGVjdGlvblJhbmdlKChjdXIpID0+IHNlbGVjdGlvblJhbmdlVXBkYXRlcihjdXIsIGlubmVyUmVmKSk7XG4gICAgICB9XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIG9uU2VsZWN0aW9uQ2hhbmdlLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCBvblNlbGVjdGlvbkNoYW5nZSk7XG4gICAgfSwgW10pO1xuICAgIFJlYWN0My51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgdmFyIF9hLCBfYjtcbiAgICAgIGlmIChTdHJpbmcocHJvcHMudmFsdWUpLmxlbmd0aCA9PT0gbGVuZ3RoICYmIGF1dG9TdWJtaXQpIHtcbiAgICAgICAgKF9iID0gKF9hID0gaW5uZXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvcm0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5yZXF1ZXN0U3VibWl0KCk7XG4gICAgICB9XG4gICAgfSwgW3Byb3BzLnZhbHVlLCBsZW5ndGgsIGF1dG9TdWJtaXRdKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXG4gICAgICBcImRpdlwiLFxuICAgICAge1xuICAgICAgICBcImRhdGEtb3RwLWlucHV0LXdyYXBwZXJcIjogdHJ1ZSxcbiAgICAgICAgc3R5bGU6IHdyYXBwZXJTdHlsZSxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwic3R5bGVcIiwgeyBjaGlsZHJlbjogYFxuICAgICAgaW5wdXRbZGF0YS1vdHAtaW5wdXQtc2VnbWVudGVkXTo6c2VsZWN0aW9uIHtcbiAgICAgICAgY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIH1cbiAgICAgIGAgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICAgIFJhZGl4Q29udHJvbCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJkYXRhLW90cC1pbnB1dC1zZWdtZW50ZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgICAgICAgb25Gb2N1czogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IE1hdGgubWluKGlubmVyUmVmLmN1cnJlbnQudmFsdWUubGVuZ3RoLCBsZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGlubmVyUmVmLmN1cnJlbnQudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgaW5uZXJSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvblJhbmdlKFtzdGFydCwgZW5kXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChfYSA9IHJlc3QgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3Qub25Gb2N1cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwocmVzdCwgZXZlbnQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBvbkJsdXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25SYW5nZShbLTEsIC0xXSk7XG4gICAgICAgICAgICAgICAgKF9hID0gcmVzdCA9PSBudWxsID8gdm9pZCAwIDogcmVzdC5vbkJsdXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHJlc3QsIGV2ZW50KTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRm9jdXNlZCgpKSB7XG4gICAgICAgICAgICAgICAgICBzZXRJc0hvdmVyaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAoX2EgPSBwcm9wcy5vbk1vdXNlT3ZlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwocHJvcHMsIGV2ZW50KTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgc2V0SXNIb3ZlcmluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgKF9hID0gcHJvcHMub25Nb3VzZUxlYXZlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChwcm9wcywgZXZlbnQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIC4uLmlucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgY2xpcFBhdGg6IGBpbnNldCgwIGNhbGMoMWNoICsgJHtwYXNzd29yZE1hbmFnZXJPZmZzZXR9cHgpIDAgMClgLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBgY2FsYygxMDAlICsgMWNoICsgJHtwYXNzd29yZE1hbmFnZXJPZmZzZXR9cHgpYFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB1c2VyUHJvdmlkZWRDbGFzc05hbWUsXG4gICAgICAgICAgICAgIFwiYXJpYS1oaWRkZW5cIjogdHJ1ZSxcbiAgICAgICAgICAgICAgc3R5bGU6IHNlZ21lbnRXcmFwcGVyU3R5bGUsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0pLm1hcCgoXywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNIb3ZlcmVkID0gaXNIb3ZlcmluZyAmJiAhaXNGb2N1c2VkKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDdXJzb3IgPSBzZWxlY3Rpb25SYW5nZVswXSA9PT0gc2VsZWN0aW9uUmFuZ2VbMV0gJiYgc2VsZWN0aW9uUmFuZ2VbMF0gPT09IGk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9ICgoX2EgPSBzZWxlY3Rpb25SYW5nZVswXSkgIT0gbnVsbCA/IF9hIDogLTEpIDw9IGkgJiYgKChfYiA9IHNlbGVjdGlvblJhbmdlWzFdKSAhPSBudWxsID8gX2IgOiAtMSkgPiBpO1xuICAgICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFJlYWN0My5GcmFnbWVudCwgeyBjaGlsZHJlbjogcmVuZGVyKHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcocHJvcHMudmFsdWUpW2ldIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICBzdGF0dXM6IGlzSG92ZXJlZCA/IFwiaG92ZXJlZFwiIDogaXNDdXJzb3IgPyBcImN1cnNvclwiIDogaXNTZWxlY3RlZCA/IFwic2VsZWN0ZWRcIiA6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgICAgICAgICB9KSB9LCBgb3RwLXNlZ21lbnQtJHtpfWApO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgXVxuICAgICAgfVxuICAgICk7XG4gIH1cbik7XG5mdW5jdGlvbiBzZWxlY3Rpb25SYW5nZVVwZGF0ZXIoY3VyLCBpbnB1dFJlZikge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaTtcbiAgbGV0IHVwZGF0ZWQgPSBbXG4gICAgKF9iID0gKF9hID0gaW5wdXRSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNlbGVjdGlvblN0YXJ0KSAhPSBudWxsID8gX2IgOiAwLFxuICAgIChfZCA9IChfYyA9IGlucHV0UmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zZWxlY3Rpb25FbmQpICE9IG51bGwgPyBfZCA6IDAsXG4gICAgKF9mID0gKF9lID0gaW5wdXRSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnNlbGVjdGlvbkRpcmVjdGlvbikgIT0gbnVsbCA/IF9mIDogbnVsbFxuICBdO1xuICBpZiAoY3VyWzBdID09PSB1cGRhdGVkWzBdICYmIGN1clsxXSA9PT0gdXBkYXRlZFsxXSkge1xuICAgIHJldHVybiBjdXI7XG4gIH1cbiAgaWYgKHVwZGF0ZWRbMF0gPT09IDAgJiYgdXBkYXRlZFsxXSA9PT0gMSkge1xuICAgIHVwZGF0ZWRbMl0gPSBcImZvcndhcmRcIjtcbiAgfVxuICBpZiAodXBkYXRlZFswXSA9PT0gdXBkYXRlZFsxXSkge1xuICAgIGlmICh1cGRhdGVkWzBdID4gMCAmJiBjdXJbMF0gPT09IHVwZGF0ZWRbMF0gJiYgY3VyWzFdID09PSB1cGRhdGVkWzBdICsgMSkge1xuICAgICAgdXBkYXRlZCA9IFt1cGRhdGVkWzBdIC0gMSwgdXBkYXRlZFsxXSwgXCJiYWNrd2FyZFwiXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoKF9nID0gaW5wdXRSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLnZhbHVlW3VwZGF0ZWRbMF1dKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdXBkYXRlZCA9IFt1cGRhdGVkWzBdLCB1cGRhdGVkWzFdICsgMSwgXCJiYWNrd2FyZFwiXTtcbiAgICB9IGVsc2UgaWYgKHVwZGF0ZWRbMF0gPj0gT1RQX0xFTkdUSF9ERUZBVUxUKSB7XG4gICAgICB1cGRhdGVkID0gW3VwZGF0ZWRbMF0gLSAxLCB1cGRhdGVkWzFdLCBcImJhY2t3YXJkXCJdO1xuICAgIH1cbiAgfVxuICAoX2kgPSBpbnB1dFJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2kuc2V0U2VsZWN0aW9uUmFuZ2UodXBkYXRlZFswXSwgdXBkYXRlZFsxXSwgKF9oID0gdXBkYXRlZFsyXSkgIT0gbnVsbCA/IF9oIDogdm9pZCAwKTtcbiAgcmV0dXJuIFt1cGRhdGVkWzBdLCB1cGRhdGVkWzFdXTtcbn1cbnZhciB3cmFwcGVyU3R5bGUgPSB7XG4gIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gIHVzZXJTZWxlY3Q6IFwibm9uZVwiXG59O1xudmFyIGlucHV0U3R5bGUgPSB7XG4gIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLFxuICBvcGFjaXR5OiAwLFxuICBvdXRsaW5lOiBcInRyYW5zcGFyZW50IHNvbGlkIDBweFwiLFxuICBhcHBlYXJhbmNlOiBcIm5vbmVcIixcbiAgY29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgaW5zZXQ6IDAsXG4gIGNhcmV0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgYm9yZGVyOiBcIjBweCBzb2xpZCB0cmFuc3BhcmVudFwiLFxuICAvLyB3aWR0aCBpcyBoYW5kbGVkIGlubGluZVxuICBoZWlnaHQ6IFwiMTAwJVwiLFxuICBsZXR0ZXJTcGFjaW5nOiBcIi0xcmVtXCJcbn07XG52YXIgc2VnbWVudFdyYXBwZXJTdHlsZSA9IHtcbiAgekluZGV4OiAxLFxuICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIlxufTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL3V0aWxzL2VucmljaC1maWVsZC1zdGF0ZS50c1xuZnVuY3Rpb24gZW5yaWNoRmllbGRTdGF0ZSh2YWxpZGl0eSwgZmllbGRTdGF0ZSkge1xuICByZXR1cm4gKHZhbGlkaXR5ID09IG51bGwgPyB2b2lkIDAgOiB2YWxpZGl0eS52YWxpZCkgPT09IGZhbHNlID8gRklFTERfU1RBVEVTLmVycm9yIDogZmllbGRTdGF0ZTtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL3V0aWxzL2RldGVybWluZS1pbnB1dC10eXBlLWZyb20tbmFtZS50c1xuZnVuY3Rpb24gZGV0ZXJtaW5lSW5wdXRUeXBlRnJvbU5hbWUobmFtZSkge1xuICBpZiAobmFtZSA9PT0gXCJwYXNzd29yZFwiIHx8IG5hbWUgPT09IFwiY29uZmlybVBhc3N3b3JkXCIgfHwgbmFtZSA9PT0gXCJjdXJyZW50UGFzc3dvcmRcIiB8fCBuYW1lID09PSBcIm5ld1Bhc3N3b3JkXCIpIHtcbiAgICByZXR1cm4gXCJwYXNzd29yZFwiO1xuICB9XG4gIGlmIChuYW1lID09PSBcImVtYWlsQWRkcmVzc1wiKSB7XG4gICAgcmV0dXJuIFwiZW1haWxcIjtcbiAgfVxuICBpZiAobmFtZSA9PT0gXCJwaG9uZU51bWJlclwiKSB7XG4gICAgcmV0dXJuIFwidGVsXCI7XG4gIH1cbiAgaWYgKG5hbWUgPT09IFwiY29kZVwiKSB7XG4gICAgcmV0dXJuIFwib3RwXCI7XG4gIH1cbiAgaWYgKG5hbWUgPT09IFwiYmFja3VwX2NvZGVcIikge1xuICAgIHJldHVybiBcImJhY2t1cF9jb2RlXCI7XG4gIH1cbiAgcmV0dXJuIFwidGV4dFwiO1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaG9va3MvdXNlLXByZXZpb3VzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VQcmV2aW91cyh2YWx1ZSkge1xuICBjb25zdCByZWYgPSBSZWFjdDQudXNlUmVmKCk7XG4gIFJlYWN0NC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9ob29rcy91c2UtdmFsaWRpdHktc3RhdGUtY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3Q1IGZyb20gXCJyZWFjdFwiO1xudmFyIFZhbGlkaXR5U3RhdGVDb250ZXh0ID0gUmVhY3Q1LmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbnZhciB1c2VWYWxpZGl0eVN0YXRlQ29udGV4dCA9ICgpID0+IFJlYWN0NS51c2VDb250ZXh0KFZhbGlkaXR5U3RhdGVDb250ZXh0KTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2hvb2tzL3VzZS1pbnB1dC50c3hcbmZ1bmN0aW9uIHVzZUlucHV0KHtcbiAgbmFtZTogaW5wdXROYW1lLFxuICB2YWx1ZTogcHJvdmlkZWRWYWx1ZSxcbiAgY2hlY2tlZDogcHJvdmlkZWRDaGVja2VkLFxuICBvbkNoYW5nZTogb25DaGFuZ2VQcm9wLFxuICBvbkJsdXI6IG9uQmx1clByb3AsXG4gIG9uRm9jdXM6IG9uRm9jdXNQcm9wLFxuICB0eXBlOiBpbnB1dFR5cGUsXG4gIC4uLnBhc3N0aHJvdWdoUHJvcHNcbn0pIHtcbiAgY29uc3QgZmllbGRDb250ZXh0ID0gdXNlRmllbGRDb250ZXh0KCk7XG4gIGNvbnN0IHJhd05hbWUgPSBpbnB1dE5hbWUgfHwgKGZpZWxkQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogZmllbGRDb250ZXh0Lm5hbWUpO1xuICBjb25zdCBuYW1lID0gcmF3TmFtZSA9PT0gXCJiYWNrdXBfY29kZVwiID8gXCJjb2RlXCIgOiByYXdOYW1lO1xuICBjb25zdCB7IHN0YXRlOiBmaWVsZFN0YXRlIH0gPSB1c2VGaWVsZFN0YXRlKHsgbmFtZSB9KTtcbiAgY29uc3QgdmFsaWRpdHkgPSB1c2VWYWxpZGl0eVN0YXRlQ29udGV4dCgpO1xuICBpZiAoIXJhd05hbWUgfHwgIW5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDbGVyazogPElucHV0IC8+IG11c3QgYmUgd3JhcHBlZCBpbiBhIDxGaWVsZD4gY29tcG9uZW50IG9yIGhhdmUgYSBuYW1lIHByb3AuXCIpO1xuICB9XG4gIGNvbnN0IHJlZiA9IHVzZUZvcm1TdG9yZSgpO1xuICBjb25zdCBbaGFzUGFzc2VkVmFsaWF0aW9uLCBzZXRIYXNQYXNzZWRWYWxpZGF0aW9uXSA9IFJlYWN0Ni51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgdmFsaWRhdGVQYXNzd29yZCB9ID0gdXNlUGFzc3dvcmQoe1xuICAgIG9uVmFsaWRhdGlvbkNvbXBsZXhpdHk6IChoYXNQYXNzZWQpID0+IHNldEhhc1Bhc3NlZFZhbGlkYXRpb24oaGFzUGFzc2VkKSxcbiAgICBvblZhbGlkYXRpb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICByZWYuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwiRklFTEQuRkVFREJBQ0suU0VUXCIsXG4gICAgICAgIGZpZWxkOiB7IG5hbWUsIGZlZWRiYWNrOiB7IHR5cGU6IFwic3VjY2Vzc1wiLCBtZXNzYWdlOiBcIllvdXIgcGFzc3dvcmQgbWVldHMgYWxsIHRoZSBuZWNlc3NhcnkgcmVxdWlyZW1lbnRzLlwiIH0gfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvblZhbGlkYXRpb25FcnJvcjogKGVycm9yLCBjb2RlcykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlZi5zZW5kKHtcbiAgICAgICAgICB0eXBlOiBcIkZJRUxELkZFRURCQUNLLlNFVFwiLFxuICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZmVlZGJhY2s6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBuZXcgQ2xlcmtFbGVtZW50c0ZpZWxkRXJyb3IoXCJwYXNzd29yZC12YWxpZGF0aW9uLWVycm9yXCIsIGVycm9yKSxcbiAgICAgICAgICAgICAgY29kZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25WYWxpZGF0aW9uV2FybmluZzogKHdhcm5pbmcsIGNvZGVzKSA9PiByZWYuc2VuZCh7XG4gICAgICB0eXBlOiBcIkZJRUxELkZFRURCQUNLLlNFVFwiLFxuICAgICAgZmllbGQ6IHsgbmFtZSwgZmVlZGJhY2s6IHsgdHlwZTogXCJ3YXJuaW5nXCIsIG1lc3NhZ2U6IHdhcm5pbmcsIGNvZGVzIH0gfVxuICAgIH0pLFxuICAgIG9uVmFsaWRhdGlvbkluZm86IChpbmZvLCBjb2RlcykgPT4ge1xuICAgICAgcmVmLnNlbmQoe1xuICAgICAgICB0eXBlOiBcIkZJRUxELkZFRURCQUNLLlNFVFwiLFxuICAgICAgICBmaWVsZDoge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgZmVlZGJhY2s6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiaW5mb1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogaW5mbyxcbiAgICAgICAgICAgIGNvZGVzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCB2YWx1ZSA9IHVzZUZvcm1TZWxlY3RvcihmaWVsZFZhbHVlU2VsZWN0b3IobmFtZSkpO1xuICBjb25zdCBwcmV2VmFsdWUgPSB1c2VQcmV2aW91cyh2YWx1ZSk7XG4gIGNvbnN0IGhhc1ZhbHVlID0gQm9vbGVhbih2YWx1ZSk7XG4gIGNvbnN0IHR5cGUgPSBpbnB1dFR5cGUgIT0gbnVsbCA/IGlucHV0VHlwZSA6IGRldGVybWluZUlucHV0VHlwZUZyb21OYW1lKHJhd05hbWUpO1xuICBsZXQgbmF0aXZlRmllbGRUeXBlID0gdHlwZTtcbiAgbGV0IHNob3VsZFZhbGlkYXRlUGFzc3dvcmQgPSBmYWxzZTtcbiAgaWYgKHR5cGUgPT09IFwicGFzc3dvcmRcIiB8fCB0eXBlID09PSBcInRleHRcIikge1xuICAgIHNob3VsZFZhbGlkYXRlUGFzc3dvcmQgPSBCb29sZWFuKHBhc3N0aHJvdWdoUHJvcHMudmFsaWRhdGVQYXNzd29yZCk7XG4gIH1cbiAgaWYgKG5hdGl2ZUZpZWxkVHlwZSA9PT0gXCJvdHBcIiB8fCBuYXRpdmVGaWVsZFR5cGUgPT09IFwiYmFja3VwX2NvZGVcIikge1xuICAgIG5hdGl2ZUZpZWxkVHlwZSA9IFwidGV4dFwiO1xuICB9XG4gIFJlYWN0Ni51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWYuc2VuZCh7XG4gICAgICB0eXBlOiBcIkZJRUxELkFERFwiLFxuICAgICAgZmllbGQ6IHsgbmFtZSwgdHlwZTogbmF0aXZlRmllbGRUeXBlLCB2YWx1ZTogcHJvdmlkZWRWYWx1ZSwgY2hlY2tlZDogcHJvdmlkZWRDaGVja2VkIH1cbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gcmVmLnNlbmQoeyB0eXBlOiBcIkZJRUxELlJFTU9WRVwiLCBmaWVsZDogeyBuYW1lIH0gfSk7XG4gIH0sIFtyZWZdKTtcbiAgUmVhY3Q2LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBcImNoZWNrYm94XCIgJiYgcHJvdmlkZWRDaGVja2VkICE9PSB2b2lkIDAgfHwgdHlwZSAhPT0gXCJjaGVja2JveFwiICYmIHByb3ZpZGVkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgcmVmLnNlbmQoe1xuICAgICAgICB0eXBlOiBcIkZJRUxELlVQREFURVwiLFxuICAgICAgICBmaWVsZDogeyBuYW1lLCB2YWx1ZTogcHJvdmlkZWRWYWx1ZSwgY2hlY2tlZDogcHJvdmlkZWRDaGVja2VkIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW25hbWUsIHR5cGUsIHJlZiwgcHJvdmlkZWRWYWx1ZSwgcHJvdmlkZWRDaGVja2VkXSk7XG4gIGNvbnN0IG9uQ2hhbmdlID0gUmVhY3Q2LnVzZUNhbGxiYWNrKFxuICAgIChldmVudCkgPT4ge1xuICAgICAgb25DaGFuZ2VQcm9wID09IG51bGwgPyB2b2lkIDAgOiBvbkNoYW5nZVByb3AoZXZlbnQpO1xuICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlZi5zZW5kKHsgdHlwZTogXCJGSUVMRC5VUERBVEVcIiwgZmllbGQ6IHsgbmFtZSwgdmFsdWU6IGV2ZW50LnRhcmdldC52YWx1ZSwgY2hlY2tlZDogZXZlbnQudGFyZ2V0LmNoZWNrZWQgfSB9KTtcbiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZVBhc3N3b3JkKSB7XG4gICAgICAgIHZhbGlkYXRlUGFzc3dvcmQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtyZWYsIG5hbWUsIG9uQ2hhbmdlUHJvcCwgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCwgdmFsaWRhdGVQYXNzd29yZF1cbiAgKTtcbiAgY29uc3Qgb25CbHVyID0gUmVhY3Q2LnVzZUNhbGxiYWNrKFxuICAgIChldmVudCkgPT4ge1xuICAgICAgb25CbHVyUHJvcCA9PSBudWxsID8gdm9pZCAwIDogb25CbHVyUHJvcChldmVudCk7XG4gICAgICBpZiAoc2hvdWxkVmFsaWRhdGVQYXNzd29yZCAmJiBldmVudC50YXJnZXQudmFsdWUgIT09IHByZXZWYWx1ZSkge1xuICAgICAgICB2YWxpZGF0ZVBhc3N3b3JkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbb25CbHVyUHJvcCwgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCwgdmFsaWRhdGVQYXNzd29yZCwgcHJldlZhbHVlXVxuICApO1xuICBjb25zdCBvbkZvY3VzID0gUmVhY3Q2LnVzZUNhbGxiYWNrKFxuICAgIChldmVudCkgPT4ge1xuICAgICAgb25Gb2N1c1Byb3AgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRm9jdXNQcm9wKGV2ZW50KTtcbiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZVBhc3N3b3JkICYmIGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gcHJldlZhbHVlKSB7XG4gICAgICAgIHZhbGlkYXRlUGFzc3dvcmQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtvbkZvY3VzUHJvcCwgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCwgdmFsaWRhdGVQYXNzd29yZCwgcHJldlZhbHVlXVxuICApO1xuICBjb25zdCBzaG91bGRCZUhpZGRlbiA9IGZhbHNlO1xuICBjb25zdCBFbGVtZW50ID0gdHlwZSA9PT0gXCJvdHBcIiA/IE9UUElucHV0IDogUmFkaXhDb250cm9sMjtcbiAgbGV0IHByb3BzID0ge307XG4gIGlmICh0eXBlID09PSBcIm90cFwiKSB7XG4gICAgY29uc3QgcCA9IHBhc3N0aHJvdWdoUHJvcHM7XG4gICAgY29uc3QgbGVuZ3RoID0gcC5sZW5ndGggfHwgT1RQX0xFTkdUSF9ERUZBVUxUO1xuICAgIHByb3BzID0ge1xuICAgICAgXCJkYXRhLW90cC1pbnB1dFwiOiB0cnVlLFxuICAgICAgYXV0b0NvbXBsZXRlOiBcIm9uZS10aW1lLWNvZGVcIixcbiAgICAgIGlucHV0TW9kZTogXCJudW1lcmljXCIsXG4gICAgICBwYXR0ZXJuOiBgWzAtOV17JHtsZW5ndGh9fWAsXG4gICAgICBtaW5MZW5ndGg6IGxlbmd0aCxcbiAgICAgIG1heExlbmd0aDogbGVuZ3RoLFxuICAgICAgb25DaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZS5yZXBsYWNlKC9cXEQrL2csIFwiXCIpO1xuICAgICAgICBvbkNoYW5nZShldmVudCk7XG4gICAgICB9LFxuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBzcGVsbENoZWNrOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJiYWNrdXBfY29kZVwiKSB7XG4gICAgcHJvcHMgPSB7XG4gICAgICBhdXRvQ29tcGxldGU6IFwib2ZmXCIsXG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHNwZWxsQ2hlY2s6IGZhbHNlXG4gICAgfTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcInBhc3N3b3JkXCIgJiYgc2hvdWxkVmFsaWRhdGVQYXNzd29yZCkge1xuICAgIHByb3BzID0ge1xuICAgICAgXCJkYXRhLWhhcy1wYXNzZWQtdmFsaWRhdGlvblwiOiBoYXNQYXNzZWRWYWxpYXRpb24gPyB0cnVlIDogdm9pZCAwXG4gICAgfTtcbiAgfVxuICBjb25zdCB7IHZhbGlkYXRlUGFzc3dvcmQ6IF8xLCAuLi5yZXN0IH0gPSBwYXNzdGhyb3VnaFByb3BzO1xuICByZXR1cm4ge1xuICAgIEVsZW1lbnQsXG4gICAgcHJvcHM6IHtcbiAgICAgIHR5cGUsXG4gICAgICB2YWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogXCJcIixcbiAgICAgIG9uQ2hhbmdlLFxuICAgICAgb25CbHVyLFxuICAgICAgb25Gb2N1cyxcbiAgICAgIFwiZGF0YS1oaWRkZW5cIjogc2hvdWxkQmVIaWRkZW4gPyB0cnVlIDogdm9pZCAwLFxuICAgICAgXCJkYXRhLWhhcy12YWx1ZVwiOiBoYXNWYWx1ZSA/IHRydWUgOiB2b2lkIDAsXG4gICAgICBcImRhdGEtc3RhdGVcIjogZW5yaWNoRmllbGRTdGF0ZSh2YWxpZGl0eSwgZmllbGRTdGF0ZSksXG4gICAgICAuLi5wcm9wcyxcbiAgICAgIC4uLnJlc3RcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9maWVsZC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gyIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRElTUExBWV9OQU1FID0gXCJDbGVya0VsZW1lbnRzRmllbGRcIjtcbnZhciBESVNQTEFZX05BTUVfSU5ORVIgPSBcIkNsZXJrRWxlbWVudHNGaWVsZElubmVyXCI7XG52YXIgRmllbGQgPSBSZWFjdDcuZm9yd2FyZFJlZigoeyBhbHdheXNTaG93LCAuLi5yZXN0IH0sIGZvcndhcmRlZFJlZikgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGZvcm1SZWYgPSB1c2VGb3JtU3RvcmUoKTtcbiAgY29uc3QgZm9ybUN0eCA9IGZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0O1xuICBjb25zdCBpc0hpZGRlbkZpZWxkID0gZm9ybUN0eC5wcm9ncmVzc2l2ZSAmJiBCb29sZWFuKChfYSA9IGZvcm1DdHguaGlkZGVuKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaGFzKHJlc3QubmFtZSkpO1xuICBjb25zdCBzaG91bGRIaWRlID0gYWx3YXlzU2hvdyA/IGZhbHNlIDogaXNIaWRkZW5GaWVsZDtcbiAgcmV0dXJuIHNob3VsZEhpZGUgPyBudWxsIDogLyogQF9fUFVSRV9fICovIGpzeDIoRmllbGRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7IG5hbWU6IHJlc3QubmFtZSB9LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIoXG4gICAgRmllbGRJbm5lcixcbiAgICB7XG4gICAgICAuLi5yZXN0LFxuICAgICAgcmVmOiBmb3J3YXJkZWRSZWZcbiAgICB9XG4gICkgfSk7XG59KTtcbkZpZWxkLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FO1xudmFyIEZpZWxkSW5uZXIgPSBSZWFjdDcuZm9yd2FyZFJlZigocHJvcHMsIGZvcndhcmRlZFJlZikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgY29uc3QgZmllbGQgPSB1c2VGaWVsZCh7IG5hbWU6IHJlc3QubmFtZSB9KTtcbiAgY29uc3QgeyBzdGF0ZTogZmllbGRTdGF0ZSB9ID0gdXNlRmllbGRTdGF0ZSh7IG5hbWU6IHJlc3QubmFtZSB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyKFxuICAgIFJhZGl4RmllbGQsXG4gICAge1xuICAgICAgLi4uZmllbGQucHJvcHMsXG4gICAgICAuLi5yZXN0LFxuICAgICAgcmVmOiBmb3J3YXJkZWRSZWYsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIoUmFkaXhWYWxpZGl0eVN0YXRlLCB7IGNoaWxkcmVuOiAodmFsaWRpdHkpID0+IHtcbiAgICAgICAgY29uc3QgZW5yaWNoZWRGaWVsZFN0YXRlID0gZW5yaWNoRmllbGRTdGF0ZSh2YWxpZGl0eSwgZmllbGRTdGF0ZSk7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MihWYWxpZGl0eVN0YXRlQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogdmFsaWRpdHksIGNoaWxkcmVuOiB0eXBlb2YgY2hpbGRyZW4gPT09IFwiZnVuY3Rpb25cIiA/IGNoaWxkcmVuKGVucmljaGVkRmllbGRTdGF0ZSkgOiBjaGlsZHJlbiB9KTtcbiAgICAgIH0gfSlcbiAgICB9XG4gICk7XG59KTtcbkZpZWxkSW5uZXIuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUVfSU5ORVI7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9maWVsZC1lcnJvci50c3hcbmltcG9ydCB7IEZvcm1NZXNzYWdlIGFzIFJhZGl4Rm9ybU1lc3NhZ2UgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LXNsb3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0OSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3JlYWN0L3V0aWxzL2lzLXJlYWN0LWZyYWdtZW50LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDggZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBpc1JlYWN0RnJhZ21lbnQobm9kZSkge1xuICByZXR1cm4gUmVhY3Q4LmlzVmFsaWRFbGVtZW50KG5vZGUpICYmIG5vZGUudHlwZSA9PT0gUmVhY3Q4LkZyYWdtZW50O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vZmllbGQtZXJyb3IudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIERJU1BMQVlfTkFNRTIgPSBcIkNsZXJrRWxlbWVudHNGaWVsZEVycm9yXCI7XG52YXIgRmllbGRFcnJvciA9IFJlYWN0OS5mb3J3YXJkUmVmKFxuICAoeyBhc0NoaWxkID0gZmFsc2UsIGNoaWxkcmVuLCBjb2RlLCBuYW1lLCAuLi5yZXN0IH0sIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIGNvbnN0IGZpZWxkQ29udGV4dCA9IHVzZUZpZWxkQ29udGV4dCgpO1xuICAgIGNvbnN0IHJhd0ZpZWxkTmFtZSA9IChmaWVsZENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGZpZWxkQ29udGV4dC5uYW1lKSB8fCBuYW1lO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IHJhd0ZpZWxkTmFtZSA9PT0gXCJiYWNrdXBfY29kZVwiID8gXCJjb2RlXCIgOiByYXdGaWVsZE5hbWU7XG4gICAgY29uc3QgeyBmZWVkYmFjayB9ID0gdXNlRmllbGRGZWVkYmFjayh7IG5hbWU6IGZpZWxkTmFtZSB9KTtcbiAgICBpZiAoISgoZmVlZGJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGZlZWRiYWNrLnR5cGUpID09PSBcImVycm9yXCIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZXJyb3IgPSBmZWVkYmFjay5tZXNzYWdlO1xuICAgIGlmICghZXJyb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3QgOiBcInNwYW5cIjtcbiAgICBjb25zdCBjaGlsZCA9IHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiID8gY2hpbGRyZW4oZXJyb3IpIDogY2hpbGRyZW47XG4gICAgaWYgKGlzUmVhY3RGcmFnbWVudChjaGlsZCkpIHtcbiAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiPEZpZWxkRXJyb3IgLz4gY2Fubm90IHJlbmRlciBhIEZyYWdtZW50IGFzIGEgY2hpbGQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMoXG4gICAgICBSYWRpeEZvcm1NZXNzYWdlLFxuICAgICAge1xuICAgICAgICBcImRhdGEtZXJyb3ItY29kZVwiOiBlcnJvci5jb2RlLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgICAgYXNDaGlsZDogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzKENvbXAsIHsgY2hpbGRyZW46IGNoaWxkIHx8IGVycm9yLm1lc3NhZ2UgfSlcbiAgICAgIH1cbiAgICApO1xuICB9XG4pO1xuRmllbGRFcnJvci5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRTI7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9maWVsZC1zdGF0ZS50c3hcbnZhciBESVNQTEFZX05BTUUzID0gXCJDbGVya0VsZW1lbnRzRmllbGRTdGF0ZVwiO1xuZnVuY3Rpb24gRmllbGRTdGF0ZSh7IGNoaWxkcmVuIH0pIHtcbiAgY29uc3QgZmllbGQgPSB1c2VGaWVsZENvbnRleHQoKTtcbiAgY29uc3QgeyBmZWVkYmFjayB9ID0gdXNlRmllbGRGZWVkYmFjayh7IG5hbWU6IGZpZWxkID09IG51bGwgPyB2b2lkIDAgOiBmaWVsZC5uYW1lIH0pO1xuICBjb25zdCB7IHN0YXRlIH0gPSB1c2VGaWVsZFN0YXRlKHsgbmFtZTogZmllbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGZpZWxkLm5hbWUgfSk7XG4gIGNvbnN0IHZhbGlkaXR5ID0gdXNlVmFsaWRpdHlTdGF0ZUNvbnRleHQoKTtcbiAgY29uc3QgbWVzc2FnZSA9IChmZWVkYmFjayA9PSBudWxsID8gdm9pZCAwIDogZmVlZGJhY2subWVzc2FnZSkgaW5zdGFuY2VvZiBDbGVya0VsZW1lbnRzRmllbGRFcnJvciA/IGZlZWRiYWNrLm1lc3NhZ2UubWVzc2FnZSA6IGZlZWRiYWNrID09IG51bGwgPyB2b2lkIDAgOiBmZWVkYmFjay5tZXNzYWdlO1xuICBjb25zdCBjb2RlcyA9IGZlZWRiYWNrID09IG51bGwgPyB2b2lkIDAgOiBmZWVkYmFjay5jb2RlcztcbiAgY29uc3QgZmllbGRTdGF0ZSA9IHsgc3RhdGU6IGVucmljaEZpZWxkU3RhdGUodmFsaWRpdHksIHN0YXRlKSwgbWVzc2FnZSwgY29kZXMgfTtcbiAgcmV0dXJuIGNoaWxkcmVuKGZpZWxkU3RhdGUpO1xufVxuRmllbGRTdGF0ZS5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRTM7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9mb3JtLnRzeFxuaW1wb3J0IHsgY29tcG9zZUV2ZW50SGFuZGxlcnMgfSBmcm9tIFwiQHJhZGl4LXVpL3ByaW1pdGl2ZVwiO1xuaW1wb3J0IHsgRm9ybSBhcyBSYWRpeEZvcm0gfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4NCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIERJU1BMQVlfTkFNRTQgPSBcIkNsZXJrRWxlbWVudHNGb3JtXCI7XG52YXIgRm9ybSA9IFJlYWN0MTAuZm9yd2FyZFJlZigoeyBmbG93QWN0b3IsIG9uU3VibWl0LCAuLi5yZXN0IH0sIGZvcndhcmRlZFJlZikgPT4ge1xuICBjb25zdCBmb3JtID0gdXNlRm9ybSh7IGZsb3dBY3RvciB9KTtcbiAgY29uc3QgeyBvblN1Ym1pdDogaW50ZXJuYWxPblN1Ym1pdCwgLi4uaW50ZXJuYWxGb3JtUHJvcHMgfSA9IGZvcm0ucHJvcHM7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NChcbiAgICBSYWRpeEZvcm0sXG4gICAge1xuICAgICAgLi4uaW50ZXJuYWxGb3JtUHJvcHMsXG4gICAgICAuLi5yZXN0LFxuICAgICAgb25TdWJtaXQ6IGNvbXBvc2VFdmVudEhhbmRsZXJzKGludGVybmFsT25TdWJtaXQsIG9uU3VibWl0KSxcbiAgICAgIHJlZjogZm9yd2FyZGVkUmVmXG4gICAgfVxuICApO1xufSk7XG5Gb3JtLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FNDtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2dsb2JhbC1lcnJvci50c3hcbmltcG9ydCB7IFNsb3QgYXMgU2xvdDIgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LXNsb3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4NSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIERJU1BMQVlfTkFNRTUgPSBcIkNsZXJrRWxlbWVudHNHbG9iYWxFcnJvclwiO1xudmFyIEdsb2JhbEVycm9yID0gUmVhY3QxMS5mb3J3YXJkUmVmKFxuICAoeyBhc0NoaWxkID0gZmFsc2UsIGNoaWxkcmVuLCBjb2RlLCAuLi5yZXN0IH0sIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3JzIH0gPSB1c2VHbG9iYWxFcnJvcnMoKTtcbiAgICBjb25zdCBlcnJvciA9IGVycm9ycyA9PSBudWxsID8gdm9pZCAwIDogZXJyb3JzWzBdO1xuICAgIGlmICghZXJyb3IgfHwgY29kZSAmJiBlcnJvci5jb2RlICE9PSBjb2RlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90MiA6IFwiZGl2XCI7XG4gICAgY29uc3QgY2hpbGQgPSB0eXBlb2YgY2hpbGRyZW4gPT09IFwiZnVuY3Rpb25cIiA/IGNoaWxkcmVuKGVycm9yKSA6IGNoaWxkcmVuO1xuICAgIGlmIChpc1JlYWN0RnJhZ21lbnQoY2hpbGQpKSB7XG4gICAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcIjxHbG9iYWxFcnJvciAvPiBjYW5ub3QgcmVuZGVyIGEgRnJhZ21lbnQgYXMgYSBjaGlsZC5cIik7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NShcbiAgICAgIENvbXAsXG4gICAgICB7XG4gICAgICAgIHJvbGU6IFwiYWxlcnRcIixcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgcmVmOiBmb3J3YXJkZWRSZWYsXG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZCB8fCBlcnJvci5tZXNzYWdlXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbkdsb2JhbEVycm9yLmRpc3BsYXlOYW1lID0gRElTUExBWV9OQU1FNTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9mb3JtL2lucHV0LnRzeFxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvbG9nZ2VyXCI7XG5pbXBvcnQgeyB1c2VDbGVyayBhcyB1c2VDbGVyazIgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC9yZWFjdFwiO1xuaW1wb3J0IHsgZXZlbnRDb21wb25lbnRNb3VudGVkIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdGVsZW1ldHJ5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEzIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvdXRpbHMvY3JlYXRlLWNvbnRleHQtZnJvbS1hY3Rvci1yZWYudHNcbmltcG9ydCB7IHVzZVNlbGVjdG9yIGFzIHVzZVNlbGVjdG9yVW5ib3VuZCB9IGZyb20gXCJAeHN0YXRlL3JlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihkaXNwbGF5TmFtZSkge1xuICBjb25zdCBSZWFjdENvbnRleHQgPSBSZWFjdDEyLmNyZWF0ZUNvbnRleHQobnVsbCk7XG4gIGNvbnN0IE9yaWdpbmFsUHJvdmlkZXIgPSBSZWFjdENvbnRleHQuUHJvdmlkZXI7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKHsgY2hpbGRyZW4sIGFjdG9yUmVmIH0pIHtcbiAgICByZXR1cm4gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFxuICAgICAgT3JpZ2luYWxQcm92aWRlcixcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IGFjdG9yUmVmXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW5cbiAgICApO1xuICB9XG4gIFByb3ZpZGVyLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gIGZ1bmN0aW9uIHVzZUNvbnRleHQ5KGFsbG93TWlzc2luZ0FjdG9yID0gZmFsc2UpIHtcbiAgICBjb25zdCBhY3RvclJlZiA9IFJlYWN0MTIudXNlQ29udGV4dChSZWFjdENvbnRleHQpO1xuICAgIGlmICghYWxsb3dNaXNzaW5nQWN0b3IgJiYgIWFjdG9yUmVmKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBZb3UgdXNlZCBhIGhvb2sgZnJvbSBcIiR7UHJvdmlkZXIuZGlzcGxheU5hbWV9XCIgYnV0IGl0J3Mgbm90IGluc2lkZSBhIDwke1Byb3ZpZGVyLmRpc3BsYXlOYW1lfS5Qcm92aWRlcj4gY29tcG9uZW50LmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBhY3RvclJlZjtcbiAgfVxuICBmdW5jdGlvbiB1c2VTZWxlY3RvcjYoc2VsZWN0b3IsIGNvbXBhcmUpIHtcbiAgICBjb25zdCBhY3RvciA9IHVzZUNvbnRleHQ5KCk7XG4gICAgcmV0dXJuIHVzZVNlbGVjdG9yVW5ib3VuZChhY3Rvciwgc2VsZWN0b3IsIGNvbXBhcmUpO1xuICB9XG4gIHJldHVybiB7XG4gICAgUHJvdmlkZXIsXG4gICAgdXNlQWN0b3JSZWY6IHVzZUNvbnRleHQ5LFxuICAgIHVzZVNlbGVjdG9yOiB1c2VTZWxlY3RvcjZcbiAgfTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY29udGV4dC9yb3V0ZXIuY29udGV4dC50c1xudmFyIFNpZ25JblJvdXRlckN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduSW5Sb3V0ZXJDdHhcIik7XG5mdW5jdGlvbiB1c2VTaWduSW5TdGVwKG5hbWUpIHtcbiAgcmV0dXJuIFNpZ25JblJvdXRlckN0eC51c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmNoaWxkcmVuW25hbWVdKTtcbn1cbnZhciB1c2VTaWduSW5TdGFydFN0ZXAgPSAoKSA9PiB1c2VTaWduSW5TdGVwKFwic3RhcnRcIik7XG52YXIgdXNlU2lnbkluRmlyc3RGYWN0b3JTdGVwID0gKCkgPT4gdXNlU2lnbkluU3RlcChcImZpcnN0RmFjdG9yXCIpO1xudmFyIHVzZVNpZ25JblNlY29uZEZhY3RvclN0ZXAgPSAoKSA9PiB1c2VTaWduSW5TdGVwKFwic2Vjb25kRmFjdG9yXCIpO1xudmFyIHVzZVNpZ25JblJlc2V0UGFzc3dvcmRTdGVwID0gKCkgPT4gdXNlU2lnbkluU3RlcChcInJlc2V0UGFzc3dvcmRcIik7XG52YXIgdXNlU2lnbkluUGFzc2tleUF1dG9maWxsID0gKCkgPT4gU2lnbkluUm91dGVyQ3R4LnVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuY29udGV4dC53ZWJBdXRobkF1dG9maWxsU3VwcG9ydCk7XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2NvbnRleHQvc2lnbi1pbi1zdHJhdGVneS5jb250ZXh0LnRzXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0IGFzIGNyZWF0ZUNvbnRleHQ0LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ0IH0gZnJvbSBcInJlYWN0XCI7XG52YXIgU2lnbkluU3RyYXRlZ3lDb250ZXh0ID0gY3JlYXRlQ29udGV4dDQoe1xuICBzdHJhdGVneTogdm9pZCAwXG59KTtcbmZ1bmN0aW9uIHVzZVNpZ25JblN0cmF0ZWd5KCkge1xuICBjb25zdCBjdHggPSB1c2VDb250ZXh0NChTaWduSW5TdHJhdGVneUNvbnRleHQpO1xuICBpZiAoIWN0eCkge1xuICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFxuICAgICAgXCJ1c2VTaWduSW5TdHJhdGVneSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgPFNpZ25Jbi5TdHJhdGVneT4gb3IgPFNpZ25Jbi5TdXBwb3J0ZWRTdHJhdGVneT4gY29tcG9uZW50LlwiXG4gICAgKTtcbiAgfVxuICBjb25zdCB7IHN0cmF0ZWd5IH0gPSBjdHg7XG4gIHJldHVybiBzdHJhdGVneTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vY29udGV4dC9zdHJhdGVnaWVzLmNvbnRleHQudHNcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDUsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDUgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdHJhdGVnaWVzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ1KHtcbiAgY3VycmVudDogdm9pZCAwLFxuICBpc0FjdGl2ZTogKF9uYW1lKSA9PiBmYWxzZSxcbiAgcHJlZmVycmVkOiB2b2lkIDBcbn0pO1xuZnVuY3Rpb24gdXNlU3RyYXRlZ3kobmFtZSkge1xuICBjb25zdCBjdHggPSB1c2VDb250ZXh0NShTdHJhdGVnaWVzQ29udGV4dCk7XG4gIGlmICghY3R4KSB7XG4gICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICAndXNlU3RyYXRlZ3kgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIDxTaWduSW4uU3RlcCBuYW1lPVwidmVyaWZpY2F0aW9uc1wiPiBjb21wb25lbnQuIERpZCB5b3UgbWVhbiB0byBgaW1wb3J0IHsgU3RlcCB9IGZyb20gXCJAY2xlcmsvZWxlbWVudHMvc2lnbi11cFwiYCBpbnN0ZWFkPydcbiAgICApO1xuICB9XG4gIGNvbnN0IHsgY3VycmVudCwgcHJlZmVycmVkLCBpc0FjdGl2ZSB9ID0gY3R4O1xuICByZXR1cm4ge1xuICAgIGN1cnJlbnQsXG4gICAgcHJlZmVycmVkLFxuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICByZXR1cm4gaXNBY3RpdmUobmFtZSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Zvcm0vaW5wdXQudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4NiB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIERJU1BMQVlfTkFNRTYgPSBcIkNsZXJrRWxlbWVudHNJbnB1dFwiO1xudmFyIERJU1BMQVlfTkFNRV9QQVNTS0VZU19BVVRPRklMTCA9IFwiQ2xlcmtFbGVtZW50c0lucHV0V2l0aFBhc3NrZXlBdXRvZmlsbFwiO1xudmFyIElucHV0ID0gUmVhY3QxMy5mb3J3YXJkUmVmKFxuICAocHJvcHMsIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IGNsZXJrID0gdXNlQ2xlcmsyKCk7XG4gICAgY29uc3QgZmllbGQgPSB1c2VJbnB1dChwcm9wcyk7XG4gICAgY29uc3QgaGFzUGFzc2tleUF1dG9maWxsUHJvcCA9IEJvb2xlYW4oKF9hID0gZmllbGQucHJvcHMuYXV0b0NvbXBsZXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoXCJ3ZWJhdXRoblwiKSk7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVGb3JQYXNza2V5ID0gW1widGV4dFwiLCBcImVtYWlsXCIsIFwidGVsXCJdLmluY2x1ZGVzKGZpZWxkLnByb3BzLnR5cGUpO1xuICAgIGNvbnN0IHNpZ25JblJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgICAoX2MgPSBjbGVyay50ZWxlbWV0cnkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5yZWNvcmQoXG4gICAgICBldmVudENvbXBvbmVudE1vdW50ZWQoXCJFbGVtZW50c19JbnB1dFwiLCB7XG4gICAgICAgIHR5cGU6IChfYiA9IHByb3BzLnR5cGUpICE9IG51bGwgPyBfYiA6IGZhbHNlLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gRGVwZW5kaW5nIG9uIHR5cGUgdGhlIHByb3BzIGNhbiBiZSBkaWZmZXJlbnRcbiAgICAgICAgcmVuZGVyOiBCb29sZWFuKHByb3BzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wcy5yZW5kZXIpLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gRGVwZW5kaW5nIG9uIHR5cGUgdGhlIHByb3BzIGNhbiBiZSBkaWZmZXJlbnRcbiAgICAgICAgYXNDaGlsZDogQm9vbGVhbihwcm9wcyA9PSBudWxsID8gdm9pZCAwIDogcHJvcHMuYXNDaGlsZCksXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBEZXBlbmRpbmcgb24gdHlwZSB0aGUgcHJvcHMgY2FuIGJlIGRpZmZlcmVudFxuICAgICAgICB2YWxpZGF0ZVBhc3N3b3JkOiBCb29sZWFuKHByb3BzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wcy52YWxpZGF0ZVBhc3N3b3JkKVxuICAgICAgfSlcbiAgICApO1xuICAgIGlmIChzaWduSW5Sb3V0ZXJSZWYgJiYgaGFzUGFzc2tleUF1dG9maWxsUHJvcCAmJiBhbGxvd2VkVHlwZUZvclBhc3NrZXkpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NihcbiAgICAgICAgSW5wdXRXaXRoUGFzc2tleUF1dG9maWxsLFxuICAgICAgICB7XG4gICAgICAgICAgcmVmOiBmb3J3YXJkZWRSZWYsXG4gICAgICAgICAgLi4ucHJvcHNcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGhhc1Bhc3NrZXlBdXRvZmlsbFByb3AgJiYgIWFsbG93ZWRUeXBlRm9yUGFzc2tleSkge1xuICAgICAgbG9nZ2VyLndhcm5PbmNlKFxuICAgICAgICBgPElucHV0IGF1dG9Db21wbGV0ZT1cIndlYmF1dGhuXCI+IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCA8SW5wdXQgdHlwZT1cInRleHRcIj4gb3IgPElucHV0IHR5cGU9XCJlbWFpbFwiPmBcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChoYXNQYXNza2V5QXV0b2ZpbGxQcm9wKSB7XG4gICAgICBsb2dnZXIud2Fybk9uY2UoXG4gICAgICAgIGA8SW5wdXQgYXV0b0NvbXBsZXRlPVwid2ViYXV0aG5cIj4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgPFNpZ25Jbj4gaW4gb3JkZXIgdG8gdHJpZ2dlciBhIHNpZ24taW4gYXR0ZW1wdCwgb3RoZXJ3aXNlIGl0IHdpbGwgYmUgaWdub3JlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDYoXG4gICAgICBmaWVsZC5FbGVtZW50LFxuICAgICAge1xuICAgICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgICAgLi4uZmllbGQucHJvcHNcbiAgICAgIH1cbiAgICApO1xuICB9XG4pO1xuSW5wdXQuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUU2O1xudmFyIElucHV0V2l0aFBhc3NrZXlBdXRvZmlsbCA9IFJlYWN0MTMuZm9yd2FyZFJlZihcbiAgKHByb3BzLCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgICBjb25zdCBzaWduSW5Sb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gICAgY29uc3QgcGFzc2tleUF1dG9maWxsU3VwcG9ydGVkID0gdXNlU2lnbkluUGFzc2tleUF1dG9maWxsKCk7XG4gICAgUmVhY3QxMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKHBhc3NrZXlBdXRvZmlsbFN1cHBvcnRlZCkge1xuICAgICAgICBzaWduSW5Sb3V0ZXJSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25JblJvdXRlclJlZi5zZW5kKHsgdHlwZTogXCJBVVRIRU5USUNBVEUuUEFTU0tFWS5BVVRPRklMTFwiIH0pO1xuICAgICAgfVxuICAgIH0sIFtwYXNza2V5QXV0b2ZpbGxTdXBwb3J0ZWQsIHNpZ25JblJvdXRlclJlZl0pO1xuICAgIGNvbnN0IGZpZWxkID0gdXNlSW5wdXQocHJvcHMpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NihcbiAgICAgIGZpZWxkLkVsZW1lbnQsXG4gICAgICB7XG4gICAgICAgIHJlZjogZm9yd2FyZGVkUmVmLFxuICAgICAgICAuLi5maWVsZC5wcm9wc1xuICAgICAgfVxuICAgICk7XG4gIH1cbik7XG5JbnB1dFdpdGhQYXNza2V5QXV0b2ZpbGwuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUVfUEFTU0tFWVNfQVVUT0ZJTEw7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9sYWJlbC50c3hcbmltcG9ydCB7IExhYmVsIGFzIFJhZGl4TGFiZWwgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbnZhciBESVNQTEFZX05BTUU3ID0gXCJDbGVya0VsZW1lbnRzTGFiZWxcIjtcbnZhciBMYWJlbCA9IFJhZGl4TGFiZWw7XG5MYWJlbC5kaXNwbGF5TmFtZSA9IERJU1BMQVlfTkFNRTc7XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vZm9ybS9zdWJtaXQudHN4XG5pbXBvcnQgeyBTdWJtaXQgYXMgUmFkaXhTdWJtaXQgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LWZvcm1cIjtcbnZhciBESVNQTEFZX05BTUU4ID0gXCJDbGVya0VsZW1lbnRzU3VibWl0XCI7XG52YXIgU3VibWl0ID0gUmFkaXhTdWJtaXQ7XG5TdWJtaXQuZGlzcGxheU5hbWUgPSBESVNQTEFZX05BTUU4O1xuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2Nvbm5lY3Rpb25zLnRzeFxuaW1wb3J0IHsgU2xvdCBhcyBTbG90MyB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCBhcyBjcmVhdGVDb250ZXh0NiwgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0NiB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvaG9va3MvdXNlLWFjdGl2ZS10YWdzLmhvb2sudHNcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSBcIkB4c3RhdGUvcmVhY3RcIjtcbnZhciBBY3RpdmVUYWdzTW9kZSA9IHtcbiAgYW55OiBcImFueVwiLFxuICBhbGw6IFwiYWxsXCJcbn07XG5mdW5jdGlvbiB1c2VBY3RpdmVUYWdzKGFjdG9yLCB0YWdzLCBtb2RlID0gQWN0aXZlVGFnc01vZGUuYW55KSB7XG4gIGNvbnN0IHN0YXRlID0gdXNlU2VsZWN0b3IoXG4gICAgYWN0b3IsXG4gICAgKHMpID0+IHMsXG4gICAgKHByZXYsIG5leHQpID0+IHByZXYudGFncyA9PT0gbmV4dC50YWdzXG4gICk7XG4gIGlmICghc3RhdGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiB0YWdzID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHN0YXRlLmhhc1RhZyh0YWdzKTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRhZ3MgcGFyYW1ldGVyIHByb3ZpZGVkIHRvIHVzZUFjdGl2ZVRhZ3NcIik7XG4gIH1cbiAgc3dpdGNoIChtb2RlKSB7XG4gICAgY2FzZSBBY3RpdmVUYWdzTW9kZS5hbnk6IHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nID0gbmV3IFNldCh0YWdzLmZpbHRlcigodGFnKSA9PiBzdGF0ZS5oYXNUYWcodGFnKSkpO1xuICAgICAgcmV0dXJuIHsgYWN0aXZlOiBtYXRjaGluZy5zaXplID4gMCwgYWN0aXZlVGFnczogbWF0Y2hpbmcgfTtcbiAgICB9XG4gICAgY2FzZSBBY3RpdmVUYWdzTW9kZS5hbGw6XG4gICAgICByZXR1cm4gdGFncy5sZW5ndGggPT09IHN0YXRlLnRhZ3Muc2l6ZSA/IHRhZ3MuZXZlcnkoKHRhZykgPT4gc3RhdGUuaGFzVGFnKHRhZykpIDogZmFsc2U7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBzcmMvcmVhY3QvaG9va3MvdXNlLXRoaXJkLXBhcnR5LXByb3ZpZGVyLmhvb2sudHNcbmltcG9ydCB7IHVzZUNsZXJrIGFzIHVzZUNsZXJrMyB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JlYWN0XCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazQgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3V0aWxzL3RoaXJkLXBhcnR5LXN0cmF0ZWdpZXMudHNcbmltcG9ydCB7IGljb25JbWFnZVVybCB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgT0FVVEhfUFJPVklERVJTIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvb2F1dGhcIjtcbmltcG9ydCB7IFdFQjNfUFJPVklERVJTIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvd2ViM1wiO1xuXG4vLyBzcmMvdXRpbHMvY2xlcmstanMudHNcbnZhciBmcm9tRW50cmllcyA9IChpdGVyYWJsZSkgPT4ge1xuICByZXR1cm4gWy4uLml0ZXJhYmxlXS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsXSkgPT4ge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn07XG5cbi8vIHNyYy91dGlscy90aGlyZC1wYXJ0eS1zdHJhdGVnaWVzLnRzXG52YXIgb2F1dGhTdHJhdGVnaWVzID0gT0FVVEhfUFJPVklERVJTLm1hcCgocCkgPT4gcC5zdHJhdGVneSk7XG52YXIgcHJvdmlkZXJUb0Rpc3BsYXlEYXRhID0gZnJvbUVudHJpZXMoXG4gIFsuLi5PQVVUSF9QUk9WSURFUlMsIC4uLldFQjNfUFJPVklERVJTXS5tYXAoKHApID0+IHtcbiAgICByZXR1cm4gW3AucHJvdmlkZXIsIHsgaWNvblVybDogaWNvbkltYWdlVXJsKHAucHJvdmlkZXIpLCBuYW1lOiBwLm5hbWUsIHN0cmF0ZWd5OiBwLnN0cmF0ZWd5IH1dO1xuICB9KVxuKTtcbnZhciBzdHJhdGVneVRvRGlzcGxheURhdGEgPSBmcm9tRW50cmllcyhcbiAgWy4uLk9BVVRIX1BST1ZJREVSUywgLi4uV0VCM19QUk9WSURFUlNdLm1hcCgocCkgPT4ge1xuICAgIHJldHVybiBbcC5zdHJhdGVneSwgeyBpY29uVXJsOiBpY29uSW1hZ2VVcmwocC5wcm92aWRlciksIGlkOiBwLnByb3ZpZGVyLCBuYW1lOiBwLm5hbWUgfV07XG4gIH0pXG4pO1xuZnVuY3Rpb24gaXNTYW1sU3RyYXRlZ3koc3RyYXRlZ3kpIHtcbiAgcmV0dXJuIHN0cmF0ZWd5ID09PSBcInNhbWxcIjtcbn1cbmZ1bmN0aW9uIGlzV2ViM1N0cmF0ZWd5KHN0cmF0ZWd5LCBhdmFpbGFibGUpIHtcbiAgcmV0dXJuIGF2YWlsYWJsZS5pbmNsdWRlcyhzdHJhdGVneS5zdGFydHNXaXRoKFwid2ViM19cIikgPyBzdHJhdGVneSA6IGB3ZWIzXyR7c3RyYXRlZ3l9X3NpZ25hdHVyZWApO1xufVxuZnVuY3Rpb24gaXNBdXRoZW50aWNhdGFibGVPYXV0aFN0cmF0ZWd5KHN0cmF0ZWd5LCBhdmFpbGFibGUpIHtcbiAgcmV0dXJuIGF2YWlsYWJsZS5pbmNsdWRlcyhzdHJhdGVneS5zdGFydHNXaXRoKFwib2F1dGhfXCIpID8gc3RyYXRlZ3kgOiBgb2F1dGhfJHtzdHJhdGVneX1gKTtcbn1cbnZhciBlbXB0eVRoaXJkUGFydHlQcm92aWRlcnMgPSB7XG4gIGF1dGhlbnRpY2F0YWJsZU9hdXRoU3RyYXRlZ2llczogW10sXG4gIHByb3ZpZGVyVG9EaXNwbGF5RGF0YToge30sXG4gIHN0cmF0ZWdpZXM6IFtdLFxuICBzdHJhdGVneVRvRGlzcGxheURhdGE6IHt9LFxuICB3ZWIzU3RyYXRlZ2llczogW11cbn07XG52YXIgZ2V0RW5hYmxlZFRoaXJkUGFydHlQcm92aWRlcnMgPSAoZW52aXJvbm1lbnQpID0+IHtcbiAgaWYgKCEoZW52aXJvbm1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGVudmlyb25tZW50LnVzZXJTZXR0aW5ncykpIHtcbiAgICByZXR1cm4gZW1wdHlUaGlyZFBhcnR5UHJvdmlkZXJzO1xuICB9XG4gIGNvbnN0IHsgc29jaWFsUHJvdmlkZXJTdHJhdGVnaWVzLCB3ZWIzRmlyc3RGYWN0b3JzLCBhdXRoZW50aWNhdGFibGVTb2NpYWxTdHJhdGVnaWVzIH0gPSBlbnZpcm9ubWVudC51c2VyU2V0dGluZ3M7XG4gIGNvbnN0IGtub3duU29jaWFsUHJvdmlkZXJTdHJhdGVnaWVzID0gc29jaWFsUHJvdmlkZXJTdHJhdGVnaWVzLmZpbHRlcigocykgPT4gb2F1dGhTdHJhdGVnaWVzLmluY2x1ZGVzKHMpKTtcbiAgY29uc3Qga25vd25BdXRoZW50aWNhdGFibGVTb2NpYWxTdHJhdGVnaWVzID0gYXV0aGVudGljYXRhYmxlU29jaWFsU3RyYXRlZ2llcy5maWx0ZXIoKHMpID0+IG9hdXRoU3RyYXRlZ2llcy5pbmNsdWRlcyhzKSk7XG4gIHJldHVybiB7XG4gICAgYXV0aGVudGljYXRhYmxlT2F1dGhTdHJhdGVnaWVzOiBbLi4ua25vd25BdXRoZW50aWNhdGFibGVTb2NpYWxTdHJhdGVnaWVzXSxcbiAgICBwcm92aWRlclRvRGlzcGxheURhdGEsXG4gICAgc3RyYXRlZ2llczogWy4uLmtub3duU29jaWFsUHJvdmlkZXJTdHJhdGVnaWVzLCAuLi53ZWIzRmlyc3RGYWN0b3JzXSxcbiAgICBzdHJhdGVneVRvRGlzcGxheURhdGEsXG4gICAgd2ViM1N0cmF0ZWdpZXM6IHdlYjNGaXJzdEZhY3RvcnNcbiAgfTtcbn07XG5cbi8vIHNyYy9yZWFjdC9ob29rcy91c2UtdGhpcmQtcGFydHktcHJvdmlkZXIuaG9vay50c1xudmFyIHVzZUlzUHJvdmlkZXJFbmFibGVkID0gKHByb3ZpZGVyKSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IGNsZXJrID0gdXNlQ2xlcmszKCk7XG4gIGlmICghY2xlcmsubG9hZGVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHByb3ZpZGVyID09PSBcInNhbWxcIikge1xuICAgIHJldHVybiAoX2IgPSAoX2EgPSBjbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnVzZXJTZXR0aW5ncy5zYW1sLmVuYWJsZWQpICE9IG51bGwgPyBfYiA6IGZhbHNlO1xuICB9XG4gIGNvbnN0IGRhdGEgPSBnZXRFbmFibGVkVGhpcmRQYXJ0eVByb3ZpZGVycyhjbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCk7XG4gIHJldHVybiBpc0F1dGhlbnRpY2F0YWJsZU9hdXRoU3RyYXRlZ3kocHJvdmlkZXIsIGRhdGEuYXV0aGVudGljYXRhYmxlT2F1dGhTdHJhdGVnaWVzKSB8fCBpc1dlYjNTdHJhdGVneShwcm92aWRlciwgZGF0YS53ZWIzU3RyYXRlZ2llcyk7XG59O1xudmFyIHVzZVRoaXJkUGFydHlQcm92aWRlciA9IChyZWYsIHByb3ZpZGVyKSA9PiB7XG4gIGNvbnN0IGlzUHJvdmlkZXJFbmFibGVkID0gdXNlSXNQcm92aWRlckVuYWJsZWQocHJvdmlkZXIpO1xuICBjb25zdCBpc1NhbWwgPSBpc1NhbWxTdHJhdGVneShwcm92aWRlcik7XG4gIGNvbnN0IGRldGFpbHMgPSBpc1NhbWwgPyB7XG4gICAgbmFtZTogXCJTQU1MXCIsXG4gICAgc3RyYXRlZ3k6IFwic2FtbFwiXG4gIH0gOiBwcm92aWRlclRvRGlzcGxheURhdGFbcHJvdmlkZXJdO1xuICBjb25zdCBhdXRoZW50aWNhdGUgPSB1c2VDYWxsYmFjazQoXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWlzUHJvdmlkZXJFbmFibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoaXNTYW1sKSB7XG4gICAgICAgIHJldHVybiByZWYuc2VuZCh7IHR5cGU6IFwiQVVUSEVOVElDQVRFLlNBTUxcIiB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm92aWRlciA9PT0gXCJtZXRhbWFza1wiKSB7XG4gICAgICAgIHJldHVybiByZWYuc2VuZCh7IHR5cGU6IFwiQVVUSEVOVElDQVRFLldFQjNcIiwgc3RyYXRlZ3k6IFwid2ViM19tZXRhbWFza19zaWduYXR1cmVcIiB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm92aWRlciA9PT0gXCJjb2luYmFzZV93YWxsZXRcIikge1xuICAgICAgICByZXR1cm4gcmVmLnNlbmQoeyB0eXBlOiBcIkFVVEhFTlRJQ0FURS5XRUIzXCIsIHN0cmF0ZWd5OiBcIndlYjNfY29pbmJhc2Vfd2FsbGV0X3NpZ25hdHVyZVwiIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHByb3ZpZGVyID09PSBcIm9reF93YWxsZXRcIikge1xuICAgICAgICByZXR1cm4gcmVmLnNlbmQoeyB0eXBlOiBcIkFVVEhFTlRJQ0FURS5XRUIzXCIsIHN0cmF0ZWd5OiBcIndlYjNfb2t4X3dhbGxldF9zaWduYXR1cmVcIiB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWYuc2VuZCh7IHR5cGU6IFwiQVVUSEVOVElDQVRFLk9BVVRIXCIsIHN0cmF0ZWd5OiBgb2F1dGhfJHtwcm92aWRlcn1gIH0pO1xuICAgIH0sXG4gICAgW3Byb3ZpZGVyLCBpc1Byb3ZpZGVyRW5hYmxlZCwgaXNTYW1sLCByZWZdXG4gICk7XG4gIGlmIChpc1Byb3ZpZGVyRW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXNoYm9hcmRQYXRoID0gYGh0dHBzOi8vZGFzaGJvYXJkLmNsZXJrLmNvbS9sYXN0LWFjdGl2ZT9wYXRoPS91c2VyLWF1dGhlbnRpY2F0aW9uLyR7cHJvdmlkZXIgPT09IFwibWV0YW1hc2tcIiA/IFwid2ViM1wiIDogXCJzb2NpYWwtY29ubmVjdGlvbnNcIn1gO1xuICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFxuICAgICAgYFlvdSBoYXZlIHVzZWQgPENvbm5lY3Rpb24gbmFtZT1cIiR7cHJvdmlkZXJ9XCI+IHdoaWNoIGlzbid0IGVuYWJsZWQgZm9yIHlvdXIgcHJvamVjdC4gRW5hYmxlICR7ZGV0YWlscy5uYW1lfSBpbiB5b3VyIENsZXJrIGRhc2hib2FyZDogJHtkYXNoYm9hcmRQYXRofWBcbiAgICApO1xuICB9XG4gIHJldHVybiB7XG4gICAgZXZlbnRzOiB7XG4gICAgICBhdXRoZW50aWNhdGVcbiAgICB9LFxuICAgIC4uLmRldGFpbHNcbiAgfTtcbn07XG5cbi8vIHNyYy9yZWFjdC9zaWduLXVwL2NvbnRleHQvcm91dGVyLmNvbnRleHQudHNcbnZhciBTaWduVXBSb3V0ZXJDdHggPSBjcmVhdGVDb250ZXh0RnJvbUFjdG9yUmVmKFwiU2lnblVwUm91dGVyQ3R4XCIpO1xuZnVuY3Rpb24gdXNlU2lnblVwU3RlcChuYW1lKSB7XG4gIHJldHVybiBTaWduVXBSb3V0ZXJDdHgudXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5jaGlsZHJlbltuYW1lXSk7XG59XG52YXIgdXNlU2lnblVwU3RhcnRTdGVwID0gKCkgPT4gdXNlU2lnblVwU3RlcChcInN0YXJ0XCIpO1xudmFyIHVzZVNpZ25VcENvbnRpbnVlU3RlcCA9ICgpID0+IHVzZVNpZ25VcFN0ZXAoXCJjb250aW51ZVwiKTtcbnZhciB1c2VTaWduVXBWZXJpZmljYXRpb25TdGVwID0gKCkgPT4gdXNlU2lnblVwU3RlcChcInZlcmlmaWNhdGlvblwiKTtcblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9jb25uZWN0aW9ucy50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g3IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgQ29ubmVjdGlvbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0NihudWxsKTtcbnZhciB1c2VDb25uZWN0aW9uQ29udGV4dCA9ICgpID0+IHtcbiAgY29uc3QgY3R4ID0gdXNlQ29udGV4dDYoQ29ubmVjdGlvbkNvbnRleHQpO1xuICBpZiAoIWN0eCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUNvbm5lY3Rpb25Db250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gPENsZXJrLkNvbm5lY3Rpb24+XCIpO1xuICB9XG4gIHJldHVybiBjdHg7XG59O1xuZnVuY3Rpb24gQ29ubmVjdGlvbih7IGFzQ2hpbGQsIG5hbWUsIC4uLnJlc3QgfSkge1xuICBjb25zdCBzaWduSW5SZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIGNvbnN0IHNpZ25VcFJlZiA9IFNpZ25VcFJvdXRlckN0eC51c2VBY3RvclJlZih0cnVlKTtcbiAgY29uc3QgcHJvdmlkZXIgPSB1c2VUaGlyZFBhcnR5UHJvdmlkZXIoc2lnbkluUmVmIHx8IHNpZ25VcFJlZiwgbmFtZSk7XG4gIGlmICghcHJvdmlkZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBDb21wID0gYXNDaGlsZCA/IFNsb3QzIDogXCJidXR0b25cIjtcbiAgY29uc3QgZGVmYXVsdFByb3BzID0gYXNDaGlsZCA/IHt9IDogeyB0eXBlOiBcImJ1dHRvblwiIH07XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NyhDb25uZWN0aW9uQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogcHJvdmlkZXIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NyhcbiAgICBDb21wLFxuICAgIHtcbiAgICAgIG9uQ2xpY2s6IHByb3ZpZGVyLmV2ZW50cy5hdXRoZW50aWNhdGUsXG4gICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAuLi5yZXN0XG4gICAgfVxuICApIH0pO1xufVxuZnVuY3Rpb24gSWNvbih7IGFzQ2hpbGQsIC4uLnJlc3QgfSkge1xuICBjb25zdCB7IGljb25VcmwsIG5hbWUgfSA9IHVzZUNvbm5lY3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDMgOiBcImltZ1wiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDcoXG4gICAgQ29tcCxcbiAgICB7XG4gICAgICBhbHQ6IGAke25hbWV9IGxvZ29gLFxuICAgICAgc3JjOiBpY29uVXJsLFxuICAgICAgLi4ucmVzdFxuICAgIH1cbiAgKTtcbn1cblxuLy8gc3JjL3JlYWN0L2NvbW1vbi9sb2FkaW5nLnRzeFxuaW1wb3J0IHsgdXNlQ2xlcmsgYXMgdXNlQ2xlcms2IH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IGV2ZW50Q29tcG9uZW50TW91bnRlZCBhcyBldmVudENvbXBvbmVudE1vdW50ZWQ0IH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdGVsZW1ldHJ5XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciBhcyB1c2VTZWxlY3RvcjUgfSBmcm9tIFwiQHhzdGF0ZS9yZWFjdFwiO1xuXG4vLyBzcmMvcmVhY3QvaG9va3MvdXNlLWxvYWRpbmcuaG9vay50c1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgYXMgdXNlU2VsZWN0b3IyIH0gZnJvbSBcIkB4c3RhdGUvcmVhY3RcIjtcbnZhciBzZWxlY3RMb2FkaW5nID0gKHNuYXBzaG90KSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChfYSA9IHNuYXBzaG90ID09IG51bGwgPyB2b2lkIDAgOiBzbmFwc2hvdC5jb250ZXh0KSA9PSBudWxsID8gdm9pZCAwIDogX2EubG9hZGluZztcbn07XG52YXIgY29tcGFyZUxvYWRpbmdWYWx1ZSA9IChwcmV2LCBuZXh0KSA9PiAocHJldiA9PSBudWxsID8gdm9pZCAwIDogcHJldi5pc0xvYWRpbmcpID09PSAobmV4dCA9PSBudWxsID8gdm9pZCAwIDogbmV4dC5pc0xvYWRpbmcpO1xuZnVuY3Rpb24gdXNlTG9hZGluZyhhY3Rvcikge1xuICBjb25zdCBsb2FkaW5nQ3R4ID0gdXNlU2VsZWN0b3IyKGFjdG9yLCBzZWxlY3RMb2FkaW5nLCBjb21wYXJlTG9hZGluZ1ZhbHVlKTtcbiAgaWYgKCFsb2FkaW5nQ3R4KSB7XG4gICAgcmV0dXJuIFtmYWxzZSwgeyBzdGVwOiB2b2lkIDAsIHN0cmF0ZWd5OiB2b2lkIDAsIGFjdGlvbjogdm9pZCAwIH1dO1xuICB9XG4gIHJldHVybiBbbG9hZGluZ0N0eC5pc0xvYWRpbmcsIHsgc3RlcDogbG9hZGluZ0N0eC5zdGVwLCBzdHJhdGVneTogbG9hZGluZ0N0eC5zdHJhdGVneSwgYWN0aW9uOiBsb2FkaW5nQ3R4LmFjdGlvbiB9XTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vc3RlcC50c3hcbmltcG9ydCB7IHVzZUNsZXJrIGFzIHVzZUNsZXJrNCB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JlYWN0XCI7XG5pbXBvcnQgeyBldmVudENvbXBvbmVudE1vdW50ZWQgYXMgZXZlbnRDb21wb25lbnRNb3VudGVkMiB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3RlbGVtZXRyeVwiO1xuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9jaG9vc2Utc2Vzc2lvbi9jaG9vc2Utc2Vzc2lvbi50c3hcbmltcG9ydCB7IFNsb3QgYXMgU2xvdDQgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LXNsb3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9yZWFjdC91dGlscy9jcmVhdGUtY29udGV4dC1mb3ItZG9tLXZhbGlkYXRpb24udHNcbmltcG9ydCAqIGFzIFJlYWN0MTQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBjcmVhdGVDb250ZXh0Rm9yRG9tVmFsaWRhdGlvbihkaXNwbGF5TmFtZSkge1xuICBjb25zdCBSZWFjdENvbnRleHQgPSBSZWFjdDE0LmNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuICBjb25zdCBPcmlnaW5hbFByb3ZpZGVyID0gUmVhY3RDb250ZXh0LlByb3ZpZGVyO1xuICBmdW5jdGlvbiBQcm92aWRlcih7IGNoaWxkcmVuIH0pIHtcbiAgICByZXR1cm4gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFxuICAgICAgT3JpZ2luYWxQcm92aWRlcixcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlblxuICAgICk7XG4gIH1cbiAgUHJvdmlkZXIuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgZnVuY3Rpb24gdXNlQ29udGV4dDkoYWxsb3dNaXNzaW5nQ29udGV4dCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY29udGV4dCA9IFJlYWN0MTQudXNlQ29udGV4dChSZWFjdENvbnRleHQpO1xuICAgIGlmICghYWxsb3dNaXNzaW5nQ29udGV4dCAmJiAhY29udGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgWW91IHVzZWQgYSBob29rIGZyb20gXCIke1Byb3ZpZGVyLmRpc3BsYXlOYW1lfVwiIGJ1dCBpdCdzIG5vdCBpbnNpZGUgYSA8JHtQcm92aWRlci5kaXNwbGF5TmFtZX0uUHJvdmlkZXI+IGNvbXBvbmVudC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuICByZXR1cm4ge1xuICAgIFByb3ZpZGVyLFxuICAgIHVzZURvbVZhbGlkYXRpb246IHVzZUNvbnRleHQ5XG4gIH07XG59XG5cbi8vIHNyYy9yZWFjdC91dGlscy9pcy12YWxpZC1jb21wb25lbnQtdHlwZS50c1xuaW1wb3J0ICogYXMgUmVhY3QxNSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIGlzVmFsaWRDb21wb25lbnRUeXBlKGNoaWxkLCB0eXBlKSB7XG4gIHJldHVybiBSZWFjdDE1LmlzVmFsaWRFbGVtZW50KGNoaWxkKSAmJiBjaGlsZC50eXBlID09PSB0eXBlO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi1pbi9jaG9vc2Utc2Vzc2lvbi9jaG9vc2Utc2Vzc2lvbi5ob29rcy50c1xuaW1wb3J0ICogYXMgUmVhY3QxNiBmcm9tIFwicmVhY3RcIjtcbnZhciBTaWduSW5BY3RpdmVTZXNzaW9uQ29udGV4dCA9IFJlYWN0MTYuY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZVNpZ25JbkFjdGl2ZVNlc3Npb25Db250ZXh0KCkge1xuICBjb25zdCBjdHggPSBSZWFjdDE2LnVzZUNvbnRleHQoU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQpO1xuICBpZiAoIWN0eCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25JbkFjdGl2ZVNlc3Npb25Db250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBTZXNzaW9uTGlzdC9TaWduSW5TZXNzaW9uTGlzdEl0ZW1cIik7XG4gIH1cbiAgcmV0dXJuIGN0eDtcbn1cbmZ1bmN0aW9uIHVzZVNpZ25JbkNob29zZVNlc3Npb25Jc0FjdGl2ZSgpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIHJldHVybiB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgXCJzdGVwOmNob29zZS1zZXNzaW9uXCIpO1xufVxuZnVuY3Rpb24gdXNlU2lnbkluQWN0aXZlU2Vzc2lvbkxpc3QocGFyYW1zKSB7XG4gIGNvbnN0IHsgb21pdEN1cnJlbnQgPSB0cnVlIH0gPSBwYXJhbXMgfHwge307XG4gIHJldHVybiBTaWduSW5Sb3V0ZXJDdHgudXNlU2VsZWN0b3IoKHN0YXRlKSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IGFjdGl2ZVNlc3Npb25zID0gKChfYiA9IChfYSA9IHN0YXRlLmNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jbGllbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5hY3RpdmVTZXNzaW9ucykgfHwgW107XG4gICAgY29uc3QgY3VycmVudFNlc3Npb25JZCA9IChfZCA9IChfYyA9IHN0YXRlLmNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYy5zZXNzaW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2QuaWQ7XG4gICAgY29uc3QgZmlsdGVyZWRTZXNzaW9ucyA9IG9taXRDdXJyZW50ID8gYWN0aXZlU2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzLmlkICE9PSBjdXJyZW50U2Vzc2lvbklkKSA6IGFjdGl2ZVNlc3Npb25zO1xuICAgIHJldHVybiBmaWx0ZXJlZFNlc3Npb25zLm1hcCgocykgPT4gKHtcbiAgICAgIGlkOiBzLmlkLFxuICAgICAgLi4ucy5wdWJsaWNVc2VyRGF0YVxuICAgIH0pKTtcbiAgfSk7XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2Nob29zZS1zZXNzaW9uL2Nob29zZS1zZXNzaW9uLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduSW5DaG9vc2VTZXNzaW9uQ3R4ID0gY3JlYXRlQ29udGV4dEZvckRvbVZhbGlkYXRpb24oXCJTaWduSW5DaG9vc2VTZXNzaW9uQ3R4XCIpO1xuZnVuY3Rpb24gU2lnbkluQ2hvb3NlU2Vzc2lvbih7IGFzQ2hpbGQsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSB7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlU2lnbkluQ2hvb3NlU2Vzc2lvbklzQWN0aXZlKCk7XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDQgOiBcImRpdlwiO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4OChTaWduSW5DaG9vc2VTZXNzaW9uQ3R4LlByb3ZpZGVyLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OChDb21wLCB7IC4uLnByb3BzLCBjaGlsZHJlbiB9KSB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduSW5TZXNzaW9uTGlzdCh7IGFzQ2hpbGQsIGNoaWxkcmVuLCBpbmNsdWRlQ3VycmVudFNlc3Npb24sIC4uLnByb3BzIH0pIHtcbiAgY29uc3Qgc2Vzc2lvbnMgPSB1c2VTaWduSW5BY3RpdmVTZXNzaW9uTGlzdCh7IG9taXRDdXJyZW50OiAhaW5jbHVkZUN1cnJlbnRTZXNzaW9uIH0pO1xuICBpZiAoIWNoaWxkcmVuIHx8ICEoc2Vzc2lvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHNlc3Npb25zLmxlbmd0aCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoUmVhY3QxNy5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPiAxKSB7XG4gICAgcmV0dXJuIFJlYWN0MTcuQ2hpbGRyZW4ub25seShudWxsKTtcbiAgfVxuICBpZiAoYXNDaGlsZCAmJiBpc1ZhbGlkQ29tcG9uZW50VHlwZShjaGlsZHJlbiwgU2lnbkluU2Vzc2lvbkxpc3RJdGVtKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImFzQ2hpbGQgY2Fubm90IGJlIHVzZWQgd2l0aCBTZXNzaW9uTGlzdEl0ZW0gYXMgdGhlIGRpcmVjdCBjaGlsZFwiKTtcbiAgfVxuICBpZiAoIVJlYWN0MTcuaXNWYWxpZEVsZW1lbnQoY2hpbGRyZW4pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiY2hpbGRyZW4gbXVzdCBiZSBhIHZhbGlkIFJlYWN0IGVsZW1lbnRcIik7XG4gIH1cbiAgY29uc3QgbmV3Q2hpbGRyZW4gPSBhc0NoaWxkID8gY2hpbGRyZW4ucHJvcHMuY2hpbGRyZW4gOiBjaGlsZHJlbjtcbiAgY29uc3QgY2hpbGRyZW5XaXRoQ3R4ID0gc2Vzc2lvbnMubWFwKChzZXNzaW9uKSA9PiB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgICAgU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQuUHJvdmlkZXIsXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiBzZXNzaW9uLFxuICAgICAgICBjaGlsZHJlbjogbmV3Q2hpbGRyZW5cbiAgICAgIH0sXG4gICAgICBgU2lnbkluQWN0aXZlU2Vzc2lvbkNvbnRleHQtJHtzZXNzaW9uLmlkfWBcbiAgICApO1xuICB9KTtcbiAgaWYgKGFzQ2hpbGQpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDgoU2xvdDQsIHsgLi4ucHJvcHMsIGNoaWxkcmVuOiBSZWFjdDE3LmNsb25lRWxlbWVudChjaGlsZHJlbiwgdm9pZCAwLCBjaGlsZHJlbldpdGhDdHgpIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4OChcInVsXCIsIHsgLi4ucHJvcHMsIGNoaWxkcmVuOiBjaGlsZHJlbldpdGhDdHggfSk7XG59XG5mdW5jdGlvbiBTaWduSW5TZXNzaW9uTGlzdEl0ZW0ocHJvcHMpIHtcbiAgY29uc3QgeyBhc0NoaWxkID0gZmFsc2UsIGNoaWxkcmVuLCAuLi5wYXNzdGhyb3VnaFByb3BzIH0gPSBwcm9wcztcbiAgY29uc3Qgc2Vzc2lvbiA9IHVzZVNpZ25JbkFjdGl2ZVNlc3Npb25Db250ZXh0KCk7XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDQgOiBcImxpXCI7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4OChDb21wLCB7IC4uLnBhc3N0aHJvdWdoUHJvcHMsIGNoaWxkcmVuOiBjaGlsZHJlbih7IHNlc3Npb24gfSkgfSk7XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2Nob29zZS1zdHJhdGVneS50c3hcbmltcG9ydCB7IFNsb3QgYXMgU2xvdDUgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LXNsb3RcIjtcbmltcG9ydCB7IHVzZVNlbGVjdG9yIGFzIHVzZVNlbGVjdG9yMyB9IGZyb20gXCJAeHN0YXRlL3JlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDE4IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vdmVyaWZpY2F0aW9uLm1hY2hpbmUudHNcbmltcG9ydCB7IGlzQ2xlcmtBUElSZXNwb25zZUVycm9yIGFzIGlzQ2xlcmtBUElSZXNwb25zZUVycm9yMiB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL2Vycm9yXCI7XG5pbXBvcnQgeyBhc3NpZ24gYXMgYXNzaWduMiwgZnJvbVByb21pc2UsIGxvZywgc2VuZFRvLCBzZXR1cCBhcyBzZXR1cDIgfSBmcm9tIFwieHN0YXRlXCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvY29uc3RhbnRzL2luZGV4LnRzXG52YXIgU1NPX0NBTExCQUNLX1BBVEhfUk9VVEUgPSBcIi9zc28tY2FsbGJhY2tcIjtcbnZhciBDSE9PU0VfU0VTU0lPTl9QQVRIX1JPVVRFID0gXCIvY2hvb3NlXCI7XG52YXIgTUFHSUNfTElOS19WRVJJRllfUEFUSF9ST1VURSA9IFwiL3ZlcmlmeVwiO1xudmFyIFNJR05fVVBfTU9ERVMgPSB7XG4gIFBVQkxJQzogXCJwdWJsaWNcIixcbiAgUkVTVFJJQ1RFRDogXCJyZXN0cmljdGVkXCJcbn07XG52YXIgU0lHTl9JTl9ERUZBVUxUX0JBU0VfUEFUSCA9IHNhZmVBY2Nlc3MoXG4gICgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHByb2Nlc3MuZW52LkNMRVJLX1NJR05fSU5fVVJMKSAhPSBudWxsID8gX2EgOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DTEVSS19TSUdOX0lOX1VSTDtcbiAgfSxcbiAgXCIvc2lnbi1pblwiXG4pO1xudmFyIFNJR05fVVBfREVGQVVMVF9CQVNFX1BBVEggPSBzYWZlQWNjZXNzKFxuICAoKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBwcm9jZXNzLmVudi5DTEVSS19TSUdOX1VQX1VSTCkgIT0gbnVsbCA/IF9hIDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ0xFUktfU0lHTl9VUF9VUkw7XG4gIH0sXG4gIFwiL3NpZ24tdXBcIlxuKTtcbnZhciBORVhUX1dJTkRPV19ISVNUT1JZX1NVUFBPUlRfVkVSU0lPTiA9IFwiMTQuMS4wXCI7XG52YXIgU0VBUkNIX1BBUkFNUyA9IHtcbiAgY3JlYXRlZFNlc3Npb246IFwiX19jbGVya19jcmVhdGVkX3Nlc3Npb25cIixcbiAgaGFuZHNoYWtlOiBcIl9fY2xlcmtfaGFuZHNoYWtlXCIsXG4gIGhlbHA6IFwiX19jbGVya19oZWxwXCIsXG4gIGludml0YXRpb25Ub2tlbjogXCJfX2NsZXJrX2ludml0YXRpb25fdG9rZW5cIixcbiAgbW9kYWxTdGF0ZTogXCJfX2NsZXJrX21vZGFsX3N0YXRlXCIsXG4gIHNhdGVsbGl0ZVVybDogXCJfX2NsZXJrX3NhdGVsbGl0ZV91cmxcIixcbiAgc3RhdHVzOiBcIl9fY2xlcmtfc3RhdHVzXCIsXG4gIHN5bmNlZDogXCJfX2NsZXJrX3N5bmNlZFwiLFxuICB0aWNrZXQ6IFwiX19jbGVya190aWNrZXRcIixcbiAgdHJhbnNmZXI6IFwiX19jbGVya190cmFuc2ZlclwiXG59O1xudmFyIFJFU0VOREFCTEVfQ09VTlRET1dOX0RFRkFVTFQgPSA2MDtcbnZhciBDQVBUQ0hBX0VMRU1FTlRfSUQgPSBcImNsZXJrLWNhcHRjaGFcIjtcbnZhciBFUlJPUl9DT0RFUyA9IHtcbiAgRk9STV9JREVOVElGSUVSX05PVF9GT1VORDogXCJmb3JtX2lkZW50aWZpZXJfbm90X2ZvdW5kXCIsXG4gIEZPUk1fUEFTU1dPUkRfSU5DT1JSRUNUOiBcImZvcm1fcGFzc3dvcmRfaW5jb3JyZWN0XCIsXG4gIElOVkFMSURfU1RSQVRFR1lfRk9SX1VTRVI6IFwic3RyYXRlZ3lfZm9yX3VzZXJfaW52YWxpZFwiLFxuICBOT1RfQUxMT1dFRF9UT19TSUdOX1VQOiBcIm5vdF9hbGxvd2VkX3RvX3NpZ25fdXBcIixcbiAgT0FVVEhfQUNDRVNTX0RFTklFRDogXCJvYXV0aF9hY2Nlc3NfZGVuaWVkXCIsXG4gIE9BVVRIX0VNQUlMX0RPTUFJTl9SRVNFUlZFRF9CWV9TQU1MOiBcIm9hdXRoX2VtYWlsX2RvbWFpbl9yZXNlcnZlZF9ieV9zYW1sXCIsXG4gIE5PVF9BTExPV0VEX0FDQ0VTUzogXCJub3RfYWxsb3dlZF9hY2Nlc3NcIixcbiAgU0FNTF9VU0VSX0FUVFJJQlVURV9NSVNTSU5HOiBcInNhbWxfdXNlcl9hdHRyaWJ1dGVfbWlzc2luZ1wiLFxuICBVU0VSX0xPQ0tFRDogXCJ1c2VyX2xvY2tlZFwiLFxuICBFTlRFUlBSSVNFX1NTT19VU0VSX0FUVFJJQlVURV9NSVNTSU5HOiBcImVudGVycHJpc2Vfc3NvX3VzZXJfYXR0cmlidXRlX21pc3NpbmdcIixcbiAgRU5URVJQUklTRV9TU09fRU1BSUxfQUREUkVTU19ET01BSU5fTUlTTUFUQ0g6IFwiZW50ZXJwcmlzZV9zc29fZW1haWxfYWRkcmVzc19kb21haW5fbWlzbWF0Y2hcIixcbiAgRU5URVJQUklTRV9TU09fSE9TVEVEX0RPTUFJTl9NSVNNQVRDSDogXCJlbnRlcnByaXNlX3Nzb19ob3N0ZWRfZG9tYWluX21pc21hdGNoXCIsXG4gIFNBTUxfRU1BSUxfQUREUkVTU19ET01BSU5fTUlTTUFUQ0g6IFwic2FtbF9lbWFpbF9hZGRyZXNzX2RvbWFpbl9taXNtYXRjaFwiLFxuICBPUkdBTklaQVRJT05fTUVNQkVSU0hJUF9RVU9UQV9FWENFRURFRF9GT1JfU1NPOiBcIm9yZ2FuaXphdGlvbl9tZW1iZXJzaGlwX3F1b3RhX2V4Y2VlZGVkX2Zvcl9zc29cIlxufTtcbnZhciBST1VUSU5HID0ge1xuICBwYXRoOiBcInBhdGhcIixcbiAgdmlydHVhbDogXCJ2aXJ0dWFsXCIsXG4gIGhhc2g6IFwiaGFzaFwiXG59O1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NoYXJlZC9zaGFyZWQuYWN0aW9ucy50c1xuZnVuY3Rpb24gc2VuZFRvTG9hZGluZyh7IGNvbnRleHQsIGV2ZW50IH0pIHtcbiAgbGV0IHN0ZXA7XG4gIGxldCBzdHJhdGVneTtcbiAgbGV0IGFjdGlvbjtcbiAgaWYgKGV2ZW50LnR5cGUuc3RhcnRzV2l0aChcInhzdGF0ZS5kb25lLlwiKSB8fCBldmVudC50eXBlLnN0YXJ0c1dpdGgoXCJ4c3RhdGUuZXJyb3IuXCIpKSB7XG4gICAgcmV0dXJuIGNvbnRleHQucGFyZW50LnNlbmQoe1xuICAgICAgdHlwZTogXCJMT0FESU5HXCIsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgc3RlcDogdm9pZCAwLFxuICAgICAgc3RyYXRlZ3k6IHZvaWQgMFxuICAgIH0pO1xuICB9XG4gIGlmIChjb250ZXh0LmxvYWRpbmdTdGVwID09PSBcInN0cmF0ZWd5XCIpIHtcbiAgICBzdGVwID0gdm9pZCAwO1xuICAgIGlmIChldmVudC50eXBlID09PSBcIlJFRElSRUNUXCIpIHtcbiAgICAgIHN0cmF0ZWd5ID0gZXZlbnQucGFyYW1zLnN0cmF0ZWd5O1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0ZXAsXG4gICAgICBzdHJhdGVneVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGNvbnRleHQubG9hZGluZ1N0ZXAgPT09IFwiY29udGludWVcIikge1xuICAgIHN0ZXAgPSBcImNvbnRpbnVlXCI7XG4gICAgc3RyYXRlZ3kgPSB2b2lkIDA7XG4gICAgYWN0aW9uID0gXCJhY3Rpb25cIiBpbiBldmVudCA/IGV2ZW50LmFjdGlvbiA6IHZvaWQgMDtcbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0ZXAsXG4gICAgICBzdHJhdGVneSxcbiAgICAgIGFjdGlvblxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGNvbnRleHQubG9hZGluZ1N0ZXAgPT09IFwicmVzZXQtcGFzc3dvcmRcIikge1xuICAgIHN0ZXAgPSBcInJlc2V0LXBhc3N3b3JkXCI7XG4gICAgc3RyYXRlZ3kgPSB2b2lkIDA7XG4gICAgYWN0aW9uID0gXCJhY3Rpb25cIiBpbiBldmVudCA/IGV2ZW50LmFjdGlvbiA6IHZvaWQgMDtcbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0ZXAsXG4gICAgICBzdHJhdGVneSxcbiAgICAgIGFjdGlvblxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGNvbnRleHQubG9hZGluZ1N0ZXAgPT09IFwic3RhcnRcIikge1xuICAgIHN0ZXAgPSBcInN0YXJ0XCI7XG4gICAgc3RyYXRlZ3kgPSB2b2lkIDA7XG4gICAgYWN0aW9uID0gXCJhY3Rpb25cIiBpbiBldmVudCA/IGV2ZW50LmFjdGlvbiA6IHZvaWQgMDtcbiAgICByZXR1cm4gY29udGV4dC5wYXJlbnQuc2VuZCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdcIixcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0ZXAsXG4gICAgICBzdHJhdGVneSxcbiAgICAgIGFjdGlvblxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHN0ZXAgPSBjb250ZXh0LmxvYWRpbmdTdGVwO1xuICAgIHN0cmF0ZWd5ID0gdm9pZCAwO1xuICAgIGFjdGlvbiA9IFwiYWN0aW9uXCIgaW4gZXZlbnQgPyBldmVudC5hY3Rpb24gOiB2b2lkIDA7XG4gICAgcmV0dXJuIGNvbnRleHQucGFyZW50LnNlbmQoe1xuICAgICAgdHlwZTogXCJMT0FESU5HXCIsXG4gICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICBzdGVwLFxuICAgICAgc3RyYXRlZ3ksXG4gICAgICBhY3Rpb25cbiAgICB9KTtcbiAgfVxufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vdXRpbHMvc3RhcnRpbmctZmFjdG9ycy50c1xuaW1wb3J0IHsgaXNXZWJBdXRoblN1cHBvcnRlZCB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3dlYmF1dGhuXCI7XG52YXIgbWFrZVNvcnRpbmdPcmRlck1hcCA9IChhcnIpID0+IGFyci5yZWR1Y2UoXG4gIChhY2MsIGssIGkpID0+IHtcbiAgICBhY2Nba10gPSBpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sXG4gIHt9XG4pO1xudmFyIFNUUkFURUdZX1NPUlRfT1JERVJfUEFTU1dPUkRfUFJFRiA9IG1ha2VTb3J0aW5nT3JkZXJNYXAoW1xuICBcInBhc3NrZXlcIixcbiAgXCJwYXNzd29yZFwiLFxuICBcImVtYWlsX2xpbmtcIixcbiAgXCJlbWFpbF9jb2RlXCIsXG4gIFwicGhvbmVfY29kZVwiXG5dKTtcbnZhciBTVFJBVEVHWV9TT1JUX09SREVSX09UUF9QUkVGID0gbWFrZVNvcnRpbmdPcmRlck1hcChbXG4gIFwiZW1haWxfY29kZVwiLFxuICBcImVtYWlsX2xpbmtcIixcbiAgXCJwaG9uZV9jb2RlXCIsXG4gIFwicGFzc2tleVwiLFxuICBcInBhc3N3b3JkXCJcbl0pO1xudmFyIG1ha2VTb3J0aW5nRnVuY3Rpb24gPSAoc29ydGluZ01hcCkgPT4gKGEsIGIpID0+IHtcbiAgY29uc3Qgb3JkZXJBID0gc29ydGluZ01hcFthLnN0cmF0ZWd5XTtcbiAgY29uc3Qgb3JkZXJCID0gc29ydGluZ01hcFtiLnN0cmF0ZWd5XTtcbiAgaWYgKG9yZGVyQSA9PT0gdm9pZCAwIHx8IG9yZGVyQiA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQjtcbn07XG52YXIgcGFzc3dvcmRQcmVmRmFjdG9yQ29tcGFyYXRvciA9IG1ha2VTb3J0aW5nRnVuY3Rpb24oU1RSQVRFR1lfU09SVF9PUkRFUl9QQVNTV09SRF9QUkVGKTtcbnZhciBvdHBQcmVmRmFjdG9yQ29tcGFyYXRvciA9IG1ha2VTb3J0aW5nRnVuY3Rpb24oU1RSQVRFR1lfU09SVF9PUkRFUl9PVFBfUFJFRik7XG52YXIgZmluZEZhY3RvckZvcklkZW50aWZpZXIgPSAoaSkgPT4gKGYpID0+IHtcbiAgcmV0dXJuIFwic2FmZUlkZW50aWZpZXJcIiBpbiBmICYmIGYuc2FmZUlkZW50aWZpZXIgPT09IGk7XG59O1xuZnVuY3Rpb24gZGV0ZXJtaW5lU3RhcnRpbmdTaWduSW5GYWN0b3IoZmlyc3RGYWN0b3JzLCBpZGVudGlmaWVyLCBwcmVmZXJyZWRTaWduSW5TdHJhdGVneSkge1xuICBpZiAoIWZpcnN0RmFjdG9ycyB8fCBmaXJzdEZhY3RvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHByZWZlcnJlZFNpZ25JblN0cmF0ZWd5ID09PSBcInBhc3N3b3JkXCIgPyBkZXRlcm1pbmVTdHJhdGVneVdoZW5QYXNzd29yZElzUHJlZmVycmVkKGZpcnN0RmFjdG9ycywgaWRlbnRpZmllcikgOiBkZXRlcm1pbmVTdHJhdGVneVdoZW5PVFBJc1ByZWZlcnJlZChmaXJzdEZhY3RvcnMsIGlkZW50aWZpZXIpO1xufVxuZnVuY3Rpb24gZmluZFBhc3NrZXlTdHJhdGVneShmYWN0b3JzKSB7XG4gIGlmIChpc1dlYkF1dGhuU3VwcG9ydGVkKCkpIHtcbiAgICBjb25zdCBwYXNza2V5RmFjdG9yID0gZmFjdG9ycy5maW5kKCh7IHN0cmF0ZWd5IH0pID0+IHN0cmF0ZWd5ID09PSBcInBhc3NrZXlcIik7XG4gICAgaWYgKHBhc3NrZXlGYWN0b3IpIHtcbiAgICAgIHJldHVybiBwYXNza2V5RmFjdG9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRldGVybWluZVN0cmF0ZWd5V2hlblBhc3N3b3JkSXNQcmVmZXJyZWQoZmFjdG9ycywgaWRlbnRpZmllcikge1xuICBjb25zdCBwYXNza2V5RmFjdG9yID0gZmluZFBhc3NrZXlTdHJhdGVneShmYWN0b3JzKTtcbiAgaWYgKHBhc3NrZXlGYWN0b3IpIHtcbiAgICByZXR1cm4gcGFzc2tleUZhY3RvcjtcbiAgfVxuICBjb25zdCBzZWxlY3RlZCA9IGZhY3RvcnMuc29ydChwYXNzd29yZFByZWZGYWN0b3JDb21wYXJhdG9yKVswXTtcbiAgaWYgKHNlbGVjdGVkLnN0cmF0ZWd5ID09PSBcInBhc3N3b3JkXCIpIHtcbiAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gIH1cbiAgcmV0dXJuIGZhY3RvcnMuZmluZChmaW5kRmFjdG9yRm9ySWRlbnRpZmllcihpZGVudGlmaWVyKSkgfHwgc2VsZWN0ZWQgfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIGRldGVybWluZVN0cmF0ZWd5V2hlbk9UUElzUHJlZmVycmVkKGZhY3RvcnMsIGlkZW50aWZpZXIpIHtcbiAgY29uc3QgcGFzc2tleUZhY3RvciA9IGZpbmRQYXNza2V5U3RyYXRlZ3koZmFjdG9ycyk7XG4gIGlmIChwYXNza2V5RmFjdG9yKSB7XG4gICAgcmV0dXJuIHBhc3NrZXlGYWN0b3I7XG4gIH1cbiAgY29uc3Qgc29ydGVkQmFzZWRPblByZWZGYWN0b3IgPSBmYWN0b3JzLnNvcnQob3RwUHJlZkZhY3RvckNvbXBhcmF0b3IpO1xuICBjb25zdCBmb3JJZGVudGlmaWVyID0gc29ydGVkQmFzZWRPblByZWZGYWN0b3IuZmluZChmaW5kRmFjdG9yRm9ySWRlbnRpZmllcihpZGVudGlmaWVyKSk7XG4gIGlmIChmb3JJZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIGZvcklkZW50aWZpZXI7XG4gIH1cbiAgY29uc3QgZmlyc3RCYXNlZE9uUHJlZiA9IHNvcnRlZEJhc2VkT25QcmVmRmFjdG9yWzBdO1xuICBpZiAoZmlyc3RCYXNlZE9uUHJlZi5zdHJhdGVneSA9PT0gXCJlbWFpbF9saW5rXCIpIHtcbiAgICByZXR1cm4gZmlyc3RCYXNlZE9uUHJlZjtcbiAgfVxuICByZXR1cm4gZmFjdG9ycy5maW5kKGZpbmRGYWN0b3JGb3JJZGVudGlmaWVyKGlkZW50aWZpZXIpKSB8fCBmaXJzdEJhc2VkT25QcmVmIHx8IG51bGw7XG59XG5mdW5jdGlvbiBkZXRlcm1pbmVTdGFydGluZ1NpZ25JblNlY29uZEZhY3RvcihzZWNvbmRGYWN0b3JzKSB7XG4gIGlmICghc2Vjb25kRmFjdG9ycyB8fCBzZWNvbmRGYWN0b3JzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHRvdHBGYWN0b3IgPSBzZWNvbmRGYWN0b3JzLmZpbmQoKGYpID0+IGYuc3RyYXRlZ3kgPT09IFwidG90cFwiKTtcbiAgaWYgKHRvdHBGYWN0b3IpIHtcbiAgICByZXR1cm4gdG90cEZhY3RvcjtcbiAgfVxuICBjb25zdCBwaG9uZUNvZGVGYWN0b3IgPSBzZWNvbmRGYWN0b3JzLmZpbmQoKGYpID0+IGYuc3RyYXRlZ3kgPT09IFwicGhvbmVfY29kZVwiKTtcbiAgaWYgKHBob25lQ29kZUZhY3Rvcikge1xuICAgIHJldHVybiBwaG9uZUNvZGVGYWN0b3I7XG4gIH1cbiAgcmV0dXJuIHNlY29uZEZhY3RvcnNbMF07XG59XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvdXRpbHMvYXNzZXJ0LnRzXG5mdW5jdGlvbiBhc3NlcnRJc0RlZmluZWQodmFsdWUsIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSA9PT0gdm9pZCAwIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2xhYmVsIHx8IHZhbHVlfSBpcyBub3QgZGVmaW5lZGApO1xuICB9XG59XG5mdW5jdGlvbiBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpIHtcbiAgaWYgKFwiZXJyb3JcIiBpbiBldmVudCA9PT0gZmFsc2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGFuIGVycm9yIGV2ZW50LCBnb3QgXCIke2V2ZW50LnR5cGV9XCJgKTtcbiAgfVxufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vdmVyaWZpY2F0aW9uLnR5cGVzLnRzXG52YXIgU2lnbkluVmVyaWZpY2F0aW9uRGVsYXlzID0ge1xuICByZXNlbmRhYmxlVGltZW91dDogMWUzXG4gIC8vIDEgc2Vjb25kXG59O1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vdmVyaWZpY2F0aW9uLm1hY2hpbmUudHNcbnZhciBpc05vblByZXBhcmFibGVTdHJhdGVneSA9IChzdHJhdGVneSkgPT4ge1xuICBpZiAoIXN0cmF0ZWd5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBbXCJwYXNza2V5XCIsIFwicGFzc3dvcmRcIl0uaW5jbHVkZXMoc3RyYXRlZ3kpO1xufTtcbnZhciBTaWduSW5WZXJpZmljYXRpb25NYWNoaW5lSWQgPSBcIlNpZ25JblZlcmlmaWNhdGlvblwiO1xudmFyIFNpZ25JblZlcmlmaWNhdGlvbk1hY2hpbmUgPSBzZXR1cDIoe1xuICBhY3RvcnM6IHtcbiAgICBkZXRlcm1pbmVTdGFydGluZ0ZhY3RvcjogZnJvbVByb21pc2UoXG4gICAgICAoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcIkFjdG9yIGBkZXRlcm1pbmVTdGFydGluZ0ZhY3RvcmAgbXVzdCBiZSBvdmVycmlkZGVuXCIpKVxuICAgICksXG4gICAgcHJlcGFyZTogZnJvbVByb21pc2UoXG4gICAgICAoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcIkFjdG9yIGBwcmVwYXJlYCBtdXN0IGJlIG92ZXJyaWRkZW5cIikpXG4gICAgKSxcbiAgICBhdHRlbXB0OiBmcm9tUHJvbWlzZShcbiAgICAgICgpID0+IFByb21pc2UucmVqZWN0KG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiQWN0b3IgYGF0dGVtcHRgIG11c3QgYmUgb3ZlcnJpZGRlblwiKSlcbiAgICApLFxuICAgIGF0dGVtcHRQYXNza2V5OiBmcm9tUHJvbWlzZSgoeyBpbnB1dDogeyBwYXJlbnQsIGZsb3cgfSB9KSA9PiB7XG4gICAgICByZXR1cm4gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF1dGhlbnRpY2F0ZVdpdGhQYXNza2V5KHtcbiAgICAgICAgZmxvd1xuICAgICAgfSk7XG4gICAgfSlcbiAgfSxcbiAgYWN0aW9uczoge1xuICAgIHJlc2VuZGFibGVUaWNrOiBhc3NpZ24yKCh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgIHJlc2VuZGFibGU6IGNvbnRleHQucmVzZW5kYWJsZUFmdGVyID09PSAwLFxuICAgICAgcmVzZW5kYWJsZUFmdGVyOiBjb250ZXh0LnJlc2VuZGFibGVBZnRlciA+IDAgPyBjb250ZXh0LnJlc2VuZGFibGVBZnRlciAtIDEgOiBjb250ZXh0LnJlc2VuZGFibGVBZnRlclxuICAgIH0pKSxcbiAgICByZXNlbmRhYmxlUmVzZXQ6IGFzc2lnbjIoe1xuICAgICAgcmVzZW5kYWJsZTogZmFsc2UsXG4gICAgICByZXNlbmRhYmxlQWZ0ZXI6IFJFU0VOREFCTEVfQ09VTlRET1dOX0RFRkFVTFRcbiAgICB9KSxcbiAgICB2YWxpZGF0ZVJlZ2lzdGVyZWRTdHJhdGVnaWVzOiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGNsZXJrID0gY29udGV4dC5wYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrO1xuICAgICAgaWYgKChfYSA9IGNsZXJrLl9fdW5zdGFibGVfX2Vudmlyb25tZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGZhbHNlKSB7XG4gICAgICAgIGlmIChjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZEZpcnN0RmFjdG9ycyAmJiAhY2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRGaXJzdEZhY3RvcnMuZXZlcnkoKGZhY3RvcikgPT4gY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcy5oYXMoZmFjdG9yLnN0cmF0ZWd5KSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgQ2xlcms6IFlvdXIgaW5zdGFuY2UgaXMgY29uZmlndXJlZCB0byBzdXBwb3J0IHRoZXNlIHN0cmF0ZWdpZXM6ICR7Y2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRGaXJzdEZhY3RvcnMubWFwKChmYWN0b3IpID0+IGZhY3Rvci5zdHJhdGVneSkuam9pbihcIiwgXCIpfSwgYnV0IHRoZSByZW5kZXJlZCBzdHJhdGVnaWVzIGFyZTogJHtBcnJheS5mcm9tKGNvbnRleHQucmVnaXN0ZXJlZFN0cmF0ZWdpZXMpLmpvaW4oXG4gICAgICAgICAgICAgIFwiLCBcIlxuICAgICAgICAgICAgKX0uIE1ha2Ugc3VyZSB0byByZW5kZXIgYSA8U3RyYXRlZ3k+IGNvbXBvbmVudCBmb3IgZWFjaCBzdXBwb3J0ZWQgc3RyYXRlZ3kuIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vY2xlcmsuY29tL2RvY3MvZWxlbWVudHMvcmVmZXJlbmNlL3NpZ24taW4jc3RyYXRlZ3lgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xlcmsuY2xpZW50LnNpZ25Jbi5zdXBwb3J0ZWRTZWNvbmRGYWN0b3JzICYmICFjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZFNlY29uZEZhY3RvcnMuZXZlcnkoKGZhY3RvcikgPT4gY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcy5oYXMoZmFjdG9yLnN0cmF0ZWd5KSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgQ2xlcms6IFlvdXIgaW5zdGFuY2UgaXMgY29uZmlndXJlZCB0byBzdXBwb3J0IHRoZXNlIDJGQSBzdHJhdGVnaWVzOiAke2NsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkU2Vjb25kRmFjdG9ycy5tYXAoKGYpID0+IGYuc3RyYXRlZ3kpLmpvaW4oXCIsIFwiKX0sIGJ1dCB0aGUgcmVuZGVyZWQgc3RyYXRlZ2llcyBhcmU6ICR7QXJyYXkuZnJvbShjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzKS5qb2luKFxuICAgICAgICAgICAgICBcIiwgXCJcbiAgICAgICAgICAgICl9LiBNYWtlIHN1cmUgdG8gcmVuZGVyIGEgPFN0cmF0ZWd5PiBjb21wb25lbnQgZm9yIGVhY2ggc3VwcG9ydGVkIHN0cmF0ZWd5LiBNb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2NsZXJrLmNvbS9kb2NzL2VsZW1lbnRzL3JlZmVyZW5jZS9zaWduLWluI3N0cmF0ZWd5YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RyYXRlZ2llc1VzZWRCdXROb3RBY3RpdmF0ZWQgPSBBcnJheS5mcm9tKGNvbnRleHQucmVnaXN0ZXJlZFN0cmF0ZWdpZXMpLmZpbHRlcihcbiAgICAgICAgICAoc3RyYXRlZ3kpID0+ICEoKF9hMiA9IGNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnNvbWUoKHN1cHBvcnRlZCkgPT4gc3VwcG9ydGVkLnN0cmF0ZWd5ID09PSBzdHJhdGVneSkpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzdHJhdGVnaWVzVXNlZEJ1dE5vdEFjdGl2YXRlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYENsZXJrOiBUaGVzZSByZW5kZXJlZCBzdHJhdGVnaWVzIGFyZSBub3QgY29uZmlndXJlZCBmb3IgeW91ciBpbnN0YW5jZTogJHtzdHJhdGVnaWVzVXNlZEJ1dE5vdEFjdGl2YXRlZC5qb2luKFwiLCBcIil9LiBJZiB0aGlzIGlzIHVuZXhwZWN0ZWQsIG1ha2Ugc3VyZSB0byBlbmFibGUgdGhlbSBpbiB5b3VyIENsZXJrIGRhc2hib2FyZDogaHR0cHM6Ly9kYXNoYm9hcmQuY2xlcmsuY29tL2xhc3QtYWN0aXZlP3BhdGg9L3VzZXItYXV0aGVudGljYXRpb24vZW1haWwtcGhvbmUtdXNlcm5hbWVgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKChfYiA9IGNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnN0cmF0ZWd5KSAmJiAhY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcy5oYXMoKF9jID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Muc3RyYXRlZ3kpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoXG4gICAgICAgICAgICBgWW91ciBzaWduLWluIGF0dGVtcHQgaXMgbWlzc2luZyBhICR7KF9kID0gY29udGV4dC5jdXJyZW50RmFjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2Quc3RyYXRlZ3l9IHN0cmF0ZWd5LiBNYWtlIHN1cmUgPFN0cmF0ZWd5IG5hbWU9XCIkeyhfZSA9IGNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnN0cmF0ZWd5fVwiPiBpcyByZW5kZXJlZCBpbiB5b3VyIGZsb3cuIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vY2xlcmsuY29tL2RvY3MvZWxlbWVudHMvcmVmZXJlbmNlL3NpZ24taW4jc3RyYXRlZ3lgXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghKChfZiA9IGNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLnN0cmF0ZWd5KSkge1xuICAgICAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFxuICAgICAgICAgICAgXCJVbmFibGUgdG8gZGV0ZXJtaW5lIGFuIGF1dGhlbnRpY2F0aW9uIHN0cmF0ZWd5IHRvIHZlcmlmeS4gVGhpcyBtZWFucyB5b3VyIGluc3RhbmNlIGlzIG1pc2NvbmZpZ3VyZWQuIFZpc2l0IHRoZSBDbGVyayBEYXNoYm9hcmQgYW5kIHZlcmlmeSB0aGF0IHlvdXIgaW5zdGFuY2UgaGFzIGF1dGhlbnRpY2F0aW9uIHN0cmF0ZWdpZXMgZW5hYmxlZDogaHR0cHM6Ly9kYXNoYm9hcmQuY2xlcmsuY29tL2xhc3QtYWN0aXZlP3BhdGg9L3VzZXItYXV0aGVudGljYXRpb24vZW1haWwtcGhvbmUtdXNlcm5hbWVcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNlbmRUb05leHQ6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IGNvbnRleHQucGFyZW50LnNlbmQoeyB0eXBlOiBcIk5FWFRcIiwgcmVzb3VyY2U6IGV2ZW50Lm91dHB1dCB9KSxcbiAgICBzZW5kVG9Mb2FkaW5nLFxuICAgIHNldEZvcm1FcnJvcnM6IHNlbmRUbyhcbiAgICAgICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5mb3JtUmVmLFxuICAgICAgKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgICksXG4gICAgc2V0Q29uc29sZUVycm9yOiAoeyBldmVudCB9KSA9PiB7XG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpO1xuICAgICAgY29uc3QgZXJyb3IgPSBpc0NsZXJrQVBJUmVzcG9uc2VFcnJvcjIoZXZlbnQuZXJyb3IpID8gZXZlbnQuZXJyb3IuZXJyb3JzWzBdLmxvbmdNZXNzYWdlIDogZXZlbnQuZXJyb3IubWVzc2FnZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBmdWxmaWxsIHRoZSBwcmVwYXJlIG9yIGF0dGVtcHQgcmVxdWVzdCBmb3IgdGhlIHNpZ24taW4gdmVyaWZpY2F0aW9uLlxuICAgICAgRXJyb3I6ICR7ZXJyb3J9XG4gICAgICBQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBpZiB5b3UgY29udGludWUgdG8gcnVuIGludG8gdGhpcyBpc3N1ZS5gKTtcbiAgICB9XG4gIH0sXG4gIGd1YXJkczoge1xuICAgIGlzUmVzZW5kYWJsZTogKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LnJlc2VuZGFibGUgfHwgY29udGV4dC5yZXNlbmRhYmxlQWZ0ZXIgPT09IDAsXG4gICAgaXNOZXZlclJlc2VuZGFibGU6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIGlzTm9uUHJlcGFyYWJsZVN0cmF0ZWd5KChfYSA9IGNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0cmF0ZWd5KTtcbiAgICB9XG4gIH0sXG4gIGRlbGF5czogU2lnbkluVmVyaWZpY2F0aW9uRGVsYXlzLFxuICB0eXBlczoge31cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICBpZDogU2lnbkluVmVyaWZpY2F0aW9uTWFjaGluZUlkLFxuICBjb250ZXh0OiAoeyBpbnB1dCB9KSA9PiAoe1xuICAgIGN1cnJlbnRGYWN0b3I6IG51bGwsXG4gICAgYmFzZVBhdGg6IGlucHV0LmJhc2VQYXRoIHx8IFNJR05fSU5fREVGQVVMVF9CQVNFX1BBVEgsXG4gICAgZm9ybVJlZjogaW5wdXQuZm9ybVJlZixcbiAgICBsb2FkaW5nU3RlcDogXCJ2ZXJpZmljYXRpb25zXCIsXG4gICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgcmVnaXN0ZXJlZFN0cmF0ZWdpZXM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgcmVzZW5kYWJsZTogZmFsc2UsXG4gICAgcmVzZW5kYWJsZUFmdGVyOiBSRVNFTkRBQkxFX0NPVU5URE9XTl9ERUZBVUxUXG4gIH0pLFxuICBpbml0aWFsOiBcIkluaXRcIixcbiAgb246IHtcbiAgICBcIk5BVklHQVRFLlBSRVZJT1VTXCI6IFwiLkhpc3RcIixcbiAgICBcIlNUUkFURUdZLlJFR0lTVEVSXCI6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbjIoe1xuICAgICAgICByZWdpc3RlcmVkU3RyYXRlZ2llczogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4gY29udGV4dC5yZWdpc3RlcmVkU3RyYXRlZ2llcy5hZGQoZXZlbnQuZmFjdG9yKVxuICAgICAgfSlcbiAgICB9LFxuICAgIFwiU1RSQVRFR1kuVU5SRUdJU1RFUlwiOiB7XG4gICAgICBhY3Rpb25zOiBhc3NpZ24yKHtcbiAgICAgICAgcmVnaXN0ZXJlZFN0cmF0ZWdpZXM6ICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgICBjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzLmRlbGV0ZShldmVudC5mYWN0b3IpO1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LnJlZ2lzdGVyZWRTdHJhdGVnaWVzO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSxcbiAgc3RhdGVzOiB7XG4gICAgSW5pdDoge1xuICAgICAgdGFnczogW1wic3RhdGU6cHJlcGFyaW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJkZXRlcm1pbmVTdGFydGluZ0ZhY3RvclwiLFxuICAgICAgICBzcmM6IFwiZGV0ZXJtaW5lU3RhcnRpbmdGYWN0b3JcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50XG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiUHJlcGFyaW5nXCIsXG4gICAgICAgICAgYWN0aW9uczogYXNzaWduMih7XG4gICAgICAgICAgICBjdXJyZW50RmFjdG9yOiAoeyBldmVudCB9KSA9PiBldmVudC5vdXRwdXRcbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIlByZXBhcmluZ1wiLFxuICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgIGxvZyhcIkNsZXJrIFtTaWduIEluIFZlcmlmaWNhdGlvbl06IEVycm9yIGRldGVybWluaW5nIHN0YXJ0aW5nIGZhY3RvclwiKSxcbiAgICAgICAgICAgIGFzc2lnbjIoe1xuICAgICAgICAgICAgICBjdXJyZW50RmFjdG9yOiB7IHN0cmF0ZWd5OiBcInBhc3N3b3JkXCIgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFByZXBhcmluZzoge1xuICAgICAgdGFnczogW1wic3RhdGU6cHJlcGFyaW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJwcmVwYXJlXCIsXG4gICAgICAgIHNyYzogXCJwcmVwYXJlXCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICByZXNlbmRhYmxlOiBjb250ZXh0LnJlc2VuZGFibGUsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAuLi5jb250ZXh0LmN1cnJlbnRGYWN0b3IsXG4gICAgICAgICAgICByZWRpcmVjdFVybDogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0ke2NvbnRleHQuYmFzZVBhdGh9JHtNQUdJQ19MSU5LX1ZFUklGWV9QQVRIX1JPVVRFfWBcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInJlc2VuZGFibGVSZXNldFwiLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIiwgXCJzZXRDb25zb2xlRXJyb3JcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBQZW5kaW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTpwZW5kaW5nXCJdLFxuICAgICAgZGVzY3JpcHRpb246IFwiV2FpdGluZyBmb3IgdXNlciBpbnB1dFwiLFxuICAgICAgb246IHtcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWVwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIkF0dGVtcHRpbmdQYXNza2V5XCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBcIk5BVklHQVRFLkNIT09TRV9TVFJBVEVHWVwiOiBcIkNob29zZVN0cmF0ZWd5XCIsXG4gICAgICAgIFwiTkFWSUdBVEUuRk9SR09UX1BBU1NXT1JEXCI6IFwiQ2hvb3NlU3RyYXRlZ3lcIixcbiAgICAgICAgUkVUUlk6IFwiUHJlcGFyaW5nXCIsXG4gICAgICAgIFNVQk1JVDoge1xuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5pdGlhbDogXCJJbml0XCIsXG4gICAgICBzdGF0ZXM6IHtcbiAgICAgICAgSW5pdDoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk1hcmtzIGFwcHJvcHJpYXRlIGZhY3RvcnMgYXMgbmV2ZXIgcmVzZW5kYWJsZS5cIixcbiAgICAgICAgICBhbHdheXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZ3VhcmQ6IFwiaXNOZXZlclJlc2VuZGFibGVcIixcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIk5ldmVyUmVzZW5kYWJsZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0YXJnZXQ6IFwiTm90UmVzZW5kYWJsZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBSZXNlbmRhYmxlOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiV2FpdGluZyBmb3IgdXNlciB0byByZXRyeVwiXG4gICAgICAgIH0sXG4gICAgICAgIE5ldmVyUmVzZW5kYWJsZToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkhhbmRsZXMgbmV2ZXIgcmVzZW5kYWJsZVwiLFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBSRVRSWToge1xuICAgICAgICAgICAgICBhY3Rpb25zOiBsb2coXCJOZXZlciByZXRyaWFibGVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIE5vdFJlc2VuZGFibGU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJIYW5kbGUgY291bnRkb3duc1wiLFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBSRVRSWToge1xuICAgICAgICAgICAgICBhY3Rpb25zOiBsb2coKHsgY29udGV4dCB9KSA9PiBgTm90IHJldHJpYWJsZTsgVHJ5IGFnYWluIGluICR7Y29udGV4dC5yZXNlbmRhYmxlQWZ0ZXJ9c2ApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZnRlcjoge1xuICAgICAgICAgICAgcmVzZW5kYWJsZVRpbWVvdXQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNldCBhcyByZXRyaWFibGUgaWYgY291bnRkb3duIGlzIDBcIixcbiAgICAgICAgICAgICAgICBndWFyZDogXCJpc1Jlc2VuZGFibGVcIixcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBcInJlc2VuZGFibGVUaWNrXCIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBcIlJlc2VuZGFibGVcIlxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQ29udGludWUgY291bnRkb3duIGlmIG5vdCByZXRyaWFibGVcIixcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBcInJlc2VuZGFibGVUaWNrXCIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBcIk5vdFJlc2VuZGFibGVcIixcbiAgICAgICAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhZnRlcjoge1xuICAgICAgICAzZTM6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInZhbGlkYXRlUmVnaXN0ZXJlZFN0cmF0ZWdpZXNcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBDaG9vc2VTdHJhdGVneToge1xuICAgICAgZGVzY3JpcHRpb246IFwiSGFuZGxlcyBib3RoIGNob29zZSBzdHJhdGVneSBhbmQgZm9yZ290IHBhc3N3b3JkIGFzIHRoZSBsYXR0ZXIgaXMgc2ltaWxhciBpbiBmdW5jdGlvbmFsaXR5XCIsXG4gICAgICB0YWdzOiBbXCJzdGF0ZTpjaG9vc2Utc3RyYXRlZ3lcIiwgXCJzdGF0ZTpmb3Jnb3QtcGFzc3dvcmRcIl0sXG4gICAgICBvbjoge1xuICAgICAgICBcIlNUUkFURUdZLlVQREFURVwiOiB7XG4gICAgICAgICAgYWN0aW9uczogYXNzaWduMih7IGN1cnJlbnRGYWN0b3I6ICh7IGV2ZW50IH0pID0+IGV2ZW50LmZhY3RvciB8fCBudWxsIH0pLFxuICAgICAgICAgIHRhcmdldDogXCJQcmVwYXJpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTphdHRlbXB0aW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGVudHJ5OiBcInNlbmRUb0xvYWRpbmdcIixcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJhdHRlbXB0XCIsXG4gICAgICAgIHNyYzogXCJhdHRlbXB0XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICBjdXJyZW50RmFjdG9yOiBjb250ZXh0LmN1cnJlbnRGYWN0b3IsXG4gICAgICAgICAgZmllbGRzOiBjb250ZXh0LmZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0LmZpZWxkc1xuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2VuZFRvTmV4dFwiLCBcInNlbmRUb0xvYWRpbmdcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIiwgXCJzZXRDb25zb2xlRXJyb3JcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgQXR0ZW1wdGluZ1Bhc3NrZXk6IHtcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmF0dGVtcHRpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgZW50cnk6IFwic2VuZFRvTG9hZGluZ1wiLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImF0dGVtcHRQYXNza2V5XCIsXG4gICAgICAgIHNyYzogXCJhdHRlbXB0UGFzc2tleVwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgICAgIHBhcmVudDogY29udGV4dC5wYXJlbnQsXG4gICAgICAgICAgZmxvdzogXCJkaXNjb3ZlcmFibGVcIlxuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2VuZFRvTmV4dFwiLCBcInNlbmRUb0xvYWRpbmdcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgSGlzdDoge1xuICAgICAgdHlwZTogXCJoaXN0b3J5XCJcbiAgICB9XG4gIH1cbn0pO1xudmFyIFNpZ25JbkZpcnN0RmFjdG9yTWFjaGluZSA9IFNpZ25JblZlcmlmaWNhdGlvbk1hY2hpbmUucHJvdmlkZSh7XG4gIGFjdG9yczoge1xuICAgIGRldGVybWluZVN0YXJ0aW5nRmFjdG9yOiBmcm9tUHJvbWlzZShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCBjbGVyayA9IGlucHV0LnBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcms7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICBkZXRlcm1pbmVTdGFydGluZ1NpZ25JbkZhY3RvcihcbiAgICAgICAgICBjbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZEZpcnN0RmFjdG9ycyxcbiAgICAgICAgICBjbGVyay5jbGllbnQuc2lnbkluLmlkZW50aWZpZXIsXG4gICAgICAgICAgKF9hID0gY2xlcmsuX191bnN0YWJsZV9fZW52aXJvbm1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5kaXNwbGF5Q29uZmlnLnByZWZlcnJlZFNpZ25JblN0cmF0ZWd5XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSksXG4gICAgcHJlcGFyZTogZnJvbVByb21pc2UoYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBwYXJhbXMsIHBhcmVudCwgcmVzZW5kYWJsZSB9ID0gaW5wdXQ7XG4gICAgICBjb25zdCBjbGVyayA9IHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcms7XG4gICAgICBjb25zdCBjdXJyZW50VmVyaWZpY2F0aW9uRXhwaXJhdGlvbiA9IGNsZXJrLmNsaWVudC5zaWduSW4uZmlyc3RGYWN0b3JWZXJpZmljYXRpb24uZXhwaXJlQXQ7XG4gICAgICBjb25zdCBuZWVkc1ByZXBhcmUgPSByZXNlbmRhYmxlIHx8ICFjdXJyZW50VmVyaWZpY2F0aW9uRXhwaXJhdGlvbiB8fCBjdXJyZW50VmVyaWZpY2F0aW9uRXhwaXJhdGlvbiA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgICAgaWYgKGlzTm9uUHJlcGFyYWJsZVN0cmF0ZWd5KHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLnN0cmF0ZWd5KSB8fCAhbmVlZHNQcmVwYXJlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xlcmsuY2xpZW50LnNpZ25Jbik7XG4gICAgICB9XG4gICAgICBhc3NlcnRJc0RlZmluZWQocGFyYW1zLCBcIkZpcnN0IGZhY3RvciBwYXJhbXNcIik7XG4gICAgICByZXR1cm4gYXdhaXQgY2xlcmsuY2xpZW50LnNpZ25Jbi5wcmVwYXJlRmlyc3RGYWN0b3IocGFyYW1zKTtcbiAgICB9KSxcbiAgICBhdHRlbXB0OiBmcm9tUHJvbWlzZShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgY29uc3QgeyBjdXJyZW50RmFjdG9yLCBmaWVsZHMsIHBhcmVudCB9ID0gaW5wdXQ7XG4gICAgICBhc3NlcnRJc0RlZmluZWQoY3VycmVudEZhY3RvciwgXCJDdXJyZW50IGZhY3RvclwiKTtcbiAgICAgIGxldCBhdHRlbXB0UGFyYW1zO1xuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBjdXJyZW50RmFjdG9yLnN0cmF0ZWd5O1xuICAgICAgY29uc3QgY29kZSA9IChfYSA9IGZpZWxkcy5nZXQoXCJjb2RlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgICBjb25zdCBwYXNzd29yZCA9IChfYiA9IGZpZWxkcy5nZXQoXCJwYXNzd29yZFwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZhbHVlO1xuICAgICAgc3dpdGNoIChzdHJhdGVneSkge1xuICAgICAgICBjYXNlIFwicGFzc2tleVwiOiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdXRoZW50aWNhdGVXaXRoUGFzc2tleSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYXNzd29yZFwiOiB7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKHBhc3N3b3JkLCBcIlBhc3N3b3JkXCIpO1xuICAgICAgICAgIGF0dGVtcHRQYXJhbXMgPSB7XG4gICAgICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmVzZXRfcGFzc3dvcmRfcGhvbmVfY29kZVwiOlxuICAgICAgICBjYXNlIFwicmVzZXRfcGFzc3dvcmRfZW1haWxfY29kZVwiOiB7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKGNvZGUsIFwiQ29kZSBmb3IgcmVzZXR0aW5nIHBob25lL2VtYWlsXCIpO1xuICAgICAgICAgIGF0dGVtcHRQYXJhbXMgPSB7XG4gICAgICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICBwYXNzd29yZFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBob25lX2NvZGVcIjpcbiAgICAgICAgY2FzZSBcImVtYWlsX2NvZGVcIjoge1xuICAgICAgICAgIGFzc2VydElzRGVmaW5lZChjb2RlLCBcIkNvZGUgZm9yIHBob25lL2VtYWlsXCIpO1xuICAgICAgICAgIGF0dGVtcHRQYXJhbXMgPSB7XG4gICAgICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgICAgIGNvZGVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ3ZWIzX21ldGFtYXNrX3NpZ25hdHVyZVwiOiB7XG4gICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gKF9jID0gZmllbGRzLmdldChcInNpZ25hdHVyZVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnZhbHVlO1xuICAgICAgICAgIGFzc2VydElzRGVmaW5lZChzaWduYXR1cmUsIFwiV2ViMyBNZXRhbWFzayBzaWduYXR1cmVcIik7XG4gICAgICAgICAgYXR0ZW1wdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgc2lnbmF0dXJlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwid2ViM19jb2luYmFzZV93YWxsZXRfc2lnbmF0dXJlXCI6IHtcbiAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSAoX2QgPSBmaWVsZHMuZ2V0KFwic2lnbmF0dXJlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2QudmFsdWU7XG4gICAgICAgICAgYXNzZXJ0SXNEZWZpbmVkKHNpZ25hdHVyZSwgXCJXZWIzIENvaW5iYXNlIFdhbGxldCBzaWduYXR1cmVcIik7XG4gICAgICAgICAgYXR0ZW1wdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgc2lnbmF0dXJlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwid2ViM19va3hfd2FsbGV0X3NpZ25hdHVyZVwiOiB7XG4gICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gKF9lID0gZmllbGRzLmdldChcInNpZ25hdHVyZVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnZhbHVlO1xuICAgICAgICAgIGFzc2VydElzRGVmaW5lZChzaWduYXR1cmUsIFwiV2ViMyBPS1ggV2FsbGV0IHNpZ25hdHVyZVwiKTtcbiAgICAgICAgICBhdHRlbXB0UGFyYW1zID0ge1xuICAgICAgICAgICAgc3RyYXRlZ3ksXG4gICAgICAgICAgICBzaWduYXR1cmVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYEludmFsaWQgc3RyYXRlZ3k6ICR7c3RyYXRlZ3l9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmF0dGVtcHRGaXJzdEZhY3RvcihhdHRlbXB0UGFyYW1zKTtcbiAgICB9KVxuICB9XG59KTtcbnZhciBTaWduSW5TZWNvbmRGYWN0b3JNYWNoaW5lID0gU2lnbkluVmVyaWZpY2F0aW9uTWFjaGluZS5wcm92aWRlKHtcbiAgYWN0b3JzOiB7XG4gICAgZGV0ZXJtaW5lU3RhcnRpbmdGYWN0b3I6IGZyb21Qcm9taXNlKFxuICAgICAgYXN5bmMgKHsgaW5wdXQgfSkgPT4gUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICBkZXRlcm1pbmVTdGFydGluZ1NpZ25JblNlY29uZEZhY3RvcihcbiAgICAgICAgICBpbnB1dC5wYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uc3VwcG9ydGVkU2Vjb25kRmFjdG9yc1xuICAgICAgICApXG4gICAgICApXG4gICAgKSxcbiAgICBwcmVwYXJlOiBmcm9tUHJvbWlzZShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IHBhcmFtcywgcGFyZW50LCByZXNlbmRhYmxlIH0gPSBpbnB1dDtcbiAgICAgIGNvbnN0IGNsZXJrID0gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyaztcbiAgICAgIGNvbnN0IGN1cnJlbnRWZXJpZmljYXRpb25FeHBpcmF0aW9uID0gY2xlcmsuY2xpZW50LnNpZ25Jbi5zZWNvbmRGYWN0b3JWZXJpZmljYXRpb24uZXhwaXJlQXQ7XG4gICAgICBjb25zdCBuZWVkc1ByZXBhcmUgPSByZXNlbmRhYmxlIHx8ICFjdXJyZW50VmVyaWZpY2F0aW9uRXhwaXJhdGlvbiB8fCBjdXJyZW50VmVyaWZpY2F0aW9uRXhwaXJhdGlvbiA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgICAgYXNzZXJ0SXNEZWZpbmVkKHBhcmFtcywgXCJTZWNvbmQgZmFjdG9yIHBhcmFtc1wiKTtcbiAgICAgIGlmIChwYXJhbXMuc3RyYXRlZ3kgIT09IFwicGhvbmVfY29kZVwiIHx8ICFuZWVkc1ByZXBhcmUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjbGVyay5jbGllbnQuc2lnbkluKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBjbGVyay5jbGllbnQuc2lnbkluLnByZXBhcmVTZWNvbmRGYWN0b3Ioe1xuICAgICAgICBzdHJhdGVneTogcGFyYW1zLnN0cmF0ZWd5LFxuICAgICAgICBwaG9uZU51bWJlcklkOiBwYXJhbXMucGhvbmVOdW1iZXJJZFxuICAgICAgfSk7XG4gICAgfSksXG4gICAgYXR0ZW1wdDogZnJvbVByb21pc2UoYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgeyBmaWVsZHMsIHBhcmVudCwgY3VycmVudEZhY3RvciB9ID0gaW5wdXQ7XG4gICAgICBjb25zdCBjb2RlID0gKF9hID0gZmllbGRzLmdldChcImNvZGVcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgIGFzc2VydElzRGVmaW5lZChjdXJyZW50RmFjdG9yLCBcIkN1cnJlbnQgZmFjdG9yXCIpO1xuICAgICAgYXNzZXJ0SXNEZWZpbmVkKGNvZGUsIFwiQ29kZVwiKTtcbiAgICAgIHJldHVybiBhd2FpdCBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uYXR0ZW1wdFNlY29uZEZhY3Rvcih7XG4gICAgICAgIHN0cmF0ZWd5OiBjdXJyZW50RmFjdG9yLnN0cmF0ZWd5LFxuICAgICAgICBjb2RlXG4gICAgICB9KTtcbiAgICB9KVxuICB9XG59KTtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy9zaWduLWluL3JvdXRlci5tYWNoaW5lLnRzXG5pbXBvcnQgeyBqb2luVVJMIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdXJsXCI7XG5pbXBvcnQgeyBpc1dlYkF1dGhuQXV0b2ZpbGxTdXBwb3J0ZWQgfSBmcm9tIFwiQGNsZXJrL3NoYXJlZC93ZWJhdXRoblwiO1xuaW1wb3J0IHsgYW5kLCBhc3NpZ24gYXMgYXNzaWduNCwgZW5xdWV1ZUFjdGlvbnMgYXMgZW5xdWV1ZUFjdGlvbnMzLCBmcm9tUHJvbWlzZSBhcyBmcm9tUHJvbWlzZTUsIGxvZyBhcyBsb2czLCBub3QgYXMgbm90Mywgb3IsIHJhaXNlLCBzZW5kVG8gYXMgc2VuZFRvNSwgc2V0dXAgYXMgc2V0dXA2IH0gZnJvbSBcInhzdGF0ZVwiO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3RoaXJkLXBhcnR5L3RoaXJkLXBhcnR5LmFjdG9ycy50c1xuaW1wb3J0IHsgZnJvbUNhbGxiYWNrLCBmcm9tUHJvbWlzZSBhcyBmcm9tUHJvbWlzZTIgfSBmcm9tIFwieHN0YXRlXCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvdXRpbHMvY2xlcmtqcy50c1xuZnVuY3Rpb24gaXNDbGVya0pTRXZlbnQoZXZlbnRPYmosIGV2ZW50KSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKGV2ZW50T2JqKS5pbmNsdWRlcyhldmVudCk7XG59XG52YXIgQ2xlcmtKU05hdmlnYXRpb25FdmVudCA9IHtcbiAgY29tcGxldGU6IFwiQ0xFUktKUy5OQVZJR0FURS5DT01QTEVURVwiLFxuICBzaWduVXA6IFwiQ0xFUktKUy5OQVZJR0FURS5TSUdOX1VQXCIsXG4gIGNvbnRpbnVlOiBcIkNMRVJLSlMuTkFWSUdBVEUuQ09OVElOVUVcIixcbiAgZ2VuZXJpYzogXCJDTEVSS0pTLk5BVklHQVRFLkdFTkVSSUNcIixcbiAgcmVzZXRQYXNzd29yZDogXCJDTEVSS0pTLk5BVklHQVRFLlJFU0VUX1BBU1NXT1JEXCIsXG4gIHNpZ25JbjogXCJDTEVSS0pTLk5BVklHQVRFLlNJR05fSU5cIixcbiAgdmVyaWZpY2F0aW9uOiBcIkNMRVJLSlMuTkFWSUdBVEUuVkVSSUZJQ0FUSU9OXCJcbn07XG5mdW5jdGlvbiBpc0NsZXJrSlNOYXZpZ2F0aW9uRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGlzQ2xlcmtKU0V2ZW50KENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQsIGV2ZW50KTtcbn1cblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy90aGlyZC1wYXJ0eS90aGlyZC1wYXJ0eS5hY3RvcnMudHNcbnZhciByZWRpcmVjdCA9IGZyb21Qcm9taXNlMihcbiAgYXN5bmMgKHsgaW5wdXQ6IHsgZmxvdywgcGFyYW1zLCBwYXJlbnQgfSB9KSA9PiB7XG4gICAgY29uc3QgY2xlcmsgPSBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrO1xuICAgIHJldHVybiBjbGVyay5jbGllbnRbZmxvd10uYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHtcbiAgICAgIHJlZGlyZWN0VXJsOiBjbGVyay5idWlsZFVybFdpdGhBdXRoKHBhcmFtcy5yZWRpcmVjdFVybCB8fCBcIi9cIiksXG4gICAgICByZWRpcmVjdFVybENvbXBsZXRlOiBjbGVyay5idWlsZFVybFdpdGhBdXRoKHBhcmFtcy5yZWRpcmVjdFVybENvbXBsZXRlIHx8IFwiL1wiKSxcbiAgICAgIC4uLnBhcmFtc1xuICAgIH0pO1xuICB9XG4pO1xudmFyIGhhbmRsZVJlZGlyZWN0Q2FsbGJhY2sgPSBmcm9tQ2FsbGJhY2soXG4gICh7IHNlbmRCYWNrLCBpbnB1dDogcGFyZW50IH0pID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IGNsZXJrID0gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyaztcbiAgICBjb25zdCBkaXNwbGF5Q29uZmlnID0gKF9hID0gY2xlcmsuX191bnN0YWJsZV9fZW52aXJvbm1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5kaXNwbGF5Q29uZmlnO1xuICAgIGNvbnN0IGN1c3RvbU5hdmlnYXRlID0gKHRvRXZ0KSA9PiB7XG4gICAgICBjb25zdCB0byA9IHRvRXZ0LnNwbGl0KFwiL1wiKS5zbGljZSgtMSlbMF07XG4gICAgICBpZiAoaXNDbGVya0pTTmF2aWdhdGlvbkV2ZW50KHRvKSkge1xuICAgICAgICBzZW5kQmFjayh7IHR5cGU6IHRvIH0pO1xuICAgICAgfSBlbHNlIGlmICh0byA9PT0gKGRpc3BsYXlDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGRpc3BsYXlDb25maWcuc2lnbkluVXJsKSkge1xuICAgICAgICBzZW5kQmFjayh7IHR5cGU6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQuc2lnbkluIH0pO1xuICAgICAgfSBlbHNlIGlmICh0byA9PT0gKGRpc3BsYXlDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGRpc3BsYXlDb25maWcuc2lnblVwVXJsKSkge1xuICAgICAgICBzZW5kQmFjayh7IHR5cGU6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQuc2lnblVwIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VuZEJhY2soeyB0eXBlOiBcIkZBSUxVUkVcIiwgZXJyb3I6IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKGBVbmtub3duIG5hdmlnYXRpb24gZXZlbnQ6ICR7dG99YCkgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkZWRDbGVyayA9IChfYiA9IGNsZXJrLmNsZXJranMpICE9IG51bGwgPyBfYiA6IGNsZXJrO1xuICAgIHZvaWQgbG9hZGVkQ2xlcmsuaGFuZGxlUmVkaXJlY3RDYWxsYmFjayhcbiAgICAgIHtcbiAgICAgICAgY29udGludWVTaWduVXBVcmw6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQuY29udGludWUsXG4gICAgICAgIGZpcnN0RmFjdG9yVXJsOiBDbGVya0pTTmF2aWdhdGlvbkV2ZW50LnNpZ25JbixcbiAgICAgICAgcmVzZXRQYXNzd29yZFVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5yZXNldFBhc3N3b3JkLFxuICAgICAgICBzZWNvbmRGYWN0b3JVcmw6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQuc2lnbkluLFxuICAgICAgICB2ZXJpZnlFbWFpbEFkZHJlc3NVcmw6IENsZXJrSlNOYXZpZ2F0aW9uRXZlbnQudmVyaWZpY2F0aW9uLFxuICAgICAgICB2ZXJpZnlQaG9uZU51bWJlclVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC52ZXJpZmljYXRpb24sXG4gICAgICAgIHNpZ25VcFVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5zaWduVXAsXG4gICAgICAgIHNpZ25JblVybDogQ2xlcmtKU05hdmlnYXRpb25FdmVudC5zaWduSW5cbiAgICAgIH0sXG4gICAgICBjdXN0b21OYXZpZ2F0ZVxuICAgICk7XG4gICAgcmV0dXJuICgpID0+IHZvaWQgMDtcbiAgfVxuKTtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy90aGlyZC1wYXJ0eS90aGlyZC1wYXJ0eS5tYWNoaW5lLnRzXG5pbXBvcnQgeyBhc3NlcnRFdmVudCwgYXNzaWduIGFzIGFzc2lnbjMsIGxvZyBhcyBsb2cyLCBub3QsIHNlbmRUbyBhcyBzZW5kVG8yLCBzZXR1cCBhcyBzZXR1cDMgfSBmcm9tIFwieHN0YXRlXCI7XG52YXIgVGhpcmRQYXJ0eU1hY2hpbmVJZCA9IFwiVGhpcmRQYXJ0eVwiO1xudmFyIFRoaXJkUGFydHlNYWNoaW5lID0gc2V0dXAzKHtcbiAgYWN0b3JzOiB7XG4gICAgaGFuZGxlUmVkaXJlY3RDYWxsYmFjayxcbiAgICByZWRpcmVjdFxuICB9LFxuICBhY3Rpb25zOiB7XG4gICAgbG9nRXJyb3I6IGxvZzIoKHsgZXZlbnQgfSkgPT4gYEVycm9yOiAke2V2ZW50LnR5cGV9YCksXG4gICAgYXNzaWduQWN0aXZlU3RyYXRlZ3k6IGFzc2lnbjMoe1xuICAgICAgYWN0aXZlU3RyYXRlZ3k6ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgYXNzZXJ0RXZlbnQoZXZlbnQsIFwiUkVESVJFQ1RcIik7XG4gICAgICAgIHJldHVybiBldmVudC5wYXJhbXMuc3RyYXRlZ3k7XG4gICAgICB9XG4gICAgfSksXG4gICAgdW5hc3NpZ25BY3RpdmVTdHJhdGVneTogYXNzaWduMyh7XG4gICAgICBhY3RpdmVTdHJhdGVneTogbnVsbFxuICAgIH0pLFxuICAgIHNlbmRUb05leHQ6ICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5wYXJlbnQuc2VuZCh7IHR5cGU6IFwiTkVYVFwiIH0pLFxuICAgIHNlbmRUb0xvYWRpbmcsXG4gICAgc2V0Rm9ybUVycm9yczogc2VuZFRvMihcbiAgICAgICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5mb3JtUmVmLFxuICAgICAgKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgIClcbiAgfSxcbiAgZ3VhcmRzOiB7XG4gICAgaXNFeGFtcGxlTW9kZTogKHsgY29udGV4dCB9KSA9PiBCb29sZWFuKGNvbnRleHQucGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5leGFtcGxlTW9kZSlcbiAgfSxcbiAgdHlwZXM6IHt9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgaWQ6IFRoaXJkUGFydHlNYWNoaW5lSWQsXG4gIGNvbnRleHQ6ICh7IGlucHV0IH0pID0+ICh7XG4gICAgYWN0aXZlU3RyYXRlZ3k6IG51bGwsXG4gICAgYmFzZVBhdGg6IGlucHV0LmJhc2VQYXRoLFxuICAgIGZvcm1SZWY6IGlucHV0LmZvcm1SZWYsXG4gICAgZmxvdzogaW5wdXQuZmxvdyxcbiAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICBsb2FkaW5nU3RlcDogXCJzdHJhdGVneVwiXG4gIH0pLFxuICBpbml0aWFsOiBcIklkbGVcIixcbiAgc3RhdGVzOiB7XG4gICAgSWRsZToge1xuICAgICAgZGVzY3JpcHRpb246IFwiU2V0cyB0aGlyZC1wYXJ0eSBwcm92aWRlcnMgaWYgbm90IGFscmVhZHkgc2V0LCBhbmQgd2FpdHMgZm9yIGEgcmVkaXJlY3Qgb3IgY2FsbGJhY2sgZXZlbnRcIixcbiAgICAgIG9uOiB7XG4gICAgICAgIENBTExCQUNLOiBcIkhhbmRsaW5nQ2FsbGJhY2tcIixcbiAgICAgICAgUkVESVJFQ1Q6IHtcbiAgICAgICAgICBndWFyZDogbm90KFwiaXNFeGFtcGxlTW9kZVwiKSxcbiAgICAgICAgICB0YXJnZXQ6IFwiUmVkaXJlY3RpbmdcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFJlZGlyZWN0aW5nOiB7XG4gICAgICBkZXNjcmlwdGlvbjogXCJSZWRpcmVjdHMgdG8gdGhlIHRoaXJkLXBhcnR5IHByb3ZpZGVyIGZvciBhdXRoZW50aWNhdGlvblwiLFxuICAgICAgdGFnczogW1wic3RhdGU6cmVkaXJlY3RcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgZW50cnk6IFtcImFzc2lnbkFjdGl2ZVN0cmF0ZWd5XCIsIFwic2VuZFRvTG9hZGluZ1wiXSxcbiAgICAgIGV4aXQ6IFtcInVuYXNzaWduQWN0aXZlU3RyYXRlZ3lcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcInJlZGlyZWN0XCIsXG4gICAgICAgIHNyYzogXCJyZWRpcmVjdFwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICBhc3NlcnRFdmVudChldmVudCwgXCJSRURJUkVDVFwiKTtcbiAgICAgICAgICBjb25zdCBsZWdhbEFjY2VwdGVkRmllbGQgPSAoX2EgPSBjb250ZXh0LmZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0LmZpZWxkcy5nZXQoXCJsZWdhbEFjY2VwdGVkXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2hlY2tlZDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFzZVBhdGg6IGNvbnRleHQuYmFzZVBhdGgsXG4gICAgICAgICAgICBmbG93OiBjb250ZXh0LmZsb3csXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgLi4uZXZlbnQucGFyYW1zLFxuICAgICAgICAgICAgICBsZWdhbEFjY2VwdGVkOiBsZWdhbEFjY2VwdGVkRmllbGQgfHwgdm9pZCAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIG9uRXJyb3I6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInNldEZvcm1FcnJvcnNcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiSWRsZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEhhbmRsaW5nQ2FsbGJhY2s6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkhhbmRsZXMgdGhlIGNhbGxiYWNrIGZyb20gdGhlIHRoaXJkLXBhcnR5IHByb3ZpZGVyXCIsXG4gICAgICB0YWdzOiBbXCJzdGF0ZTpjYWxsYmFja1wiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiaGFuZGxlUmVkaXJlY3RDYWxsYmFja1wiLFxuICAgICAgICBzcmM6IFwiaGFuZGxlUmVkaXJlY3RDYWxsYmFja1wiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcImxvZ0Vycm9yXCIsIFwic2V0Rm9ybUVycm9yc1wiXSxcbiAgICAgICAgICB0YXJnZXQ6IFwiSWRsZVwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcIkNMRVJLSlMuTkFWSUdBVEUuKlwiOiB7XG4gICAgICAgICAgYWN0aW9uczogXCJzZW5kVG9OZXh0XCIsXG4gICAgICAgICAgdGFyZ2V0OiBcIklkbGVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy91dGlscy9uZXh0LnRzXG5mdW5jdGlvbiBzaG91bGRVc2VWaXJ0dWFsUm91dGluZygpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCF3aW5kb3cubmV4dCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gd2luZG93Lm5leHQudmVyc2lvbiA8IE5FWFRfV0lORE9XX0hJU1RPUllfU1VQUE9SVF9WRVJTSU9OO1xufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vcmVzZXQtcGFzc3dvcmQubWFjaGluZS50c1xuaW1wb3J0IHsgZnJvbVByb21pc2UgYXMgZnJvbVByb21pc2UzLCBzZW5kVG8gYXMgc2VuZFRvMywgc2V0dXAgYXMgc2V0dXA0IH0gZnJvbSBcInhzdGF0ZVwiO1xudmFyIFNpZ25JblJlc2V0UGFzc3dvcmRNYWNoaW5lSWQgPSBcIlNpZ25JblJlc2V0UGFzc3dvcmRNYWNoaW5lXCI7XG52YXIgU2lnbkluUmVzZXRQYXNzd29yZE1hY2hpbmUgPSBzZXR1cDQoe1xuICBhY3RvcnM6IHtcbiAgICBhdHRlbXB0OiBmcm9tUHJvbWlzZTMoXG4gICAgICAoeyBpbnB1dDogeyBmaWVsZHMsIHBhcmVudCB9IH0pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAoKF9hID0gZmllbGRzLmdldChcInBhc3N3b3JkXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUpIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHNpZ25PdXRPZk90aGVyU2Vzc2lvbnMgPSAoKF9iID0gZmllbGRzLmdldChcInNpZ25PdXRPZk90aGVyU2Vzc2lvbnNcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jaGVja2VkKSB8fCBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5yZXNldFBhc3N3b3JkKHsgcGFzc3dvcmQsIHNpZ25PdXRPZk90aGVyU2Vzc2lvbnMgfSk7XG4gICAgICB9XG4gICAgKVxuICB9LFxuICBhY3Rpb25zOiB7XG4gICAgc2VuZFRvTG9hZGluZyxcbiAgICBzZW5kVG9OZXh0OiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiBjb250ZXh0LnBhcmVudC5zZW5kKHsgdHlwZTogXCJORVhUXCIsIHJlc291cmNlOiBldmVudC5vdXRwdXQgfSksXG4gICAgc2V0Rm9ybUVycm9yczogc2VuZFRvMyhcbiAgICAgICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5mb3JtUmVmLFxuICAgICAgKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgIClcbiAgfSxcbiAgdHlwZXM6IHt9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgaWQ6IFNpZ25JblJlc2V0UGFzc3dvcmRNYWNoaW5lSWQsXG4gIGNvbnRleHQ6ICh7IGlucHV0IH0pID0+ICh7XG4gICAgbG9hZGluZ1N0ZXA6IFwicmVzZXQtcGFzc3dvcmRcIixcbiAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICBmb3JtUmVmOiBpbnB1dC5mb3JtUmVmXG4gIH0pLFxuICBpbml0aWFsOiBcIlBlbmRpbmdcIixcbiAgc3RhdGVzOiB7XG4gICAgUGVuZGluZzoge1xuICAgICAgdGFnczogW1wic3RhdGU6cGVuZGluZ1wiXSxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIldhaXRpbmcgZm9yIHVzZXIgaW5wdXRcIixcbiAgICAgIG9uOiB7XG4gICAgICAgIFNVQk1JVDoge1xuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nOiB7XG4gICAgICB0YWdzOiBbXCJzdGF0ZTphdHRlbXB0aW5nXCIsIFwic3RhdGU6bG9hZGluZ1wiXSxcbiAgICAgIGVudHJ5OiBcInNlbmRUb0xvYWRpbmdcIixcbiAgICAgIGludm9rZToge1xuICAgICAgICBpZDogXCJhdHRlbXB0XCIsXG4gICAgICAgIHNyYzogXCJhdHRlbXB0XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICBmaWVsZHM6IGNvbnRleHQuZm9ybVJlZi5nZXRTbmFwc2hvdCgpLmNvbnRleHQuZmllbGRzXG4gICAgICAgIH0pLFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZW5kVG9OZXh0XCIsIFwic2VuZFRvTG9hZGluZ1wiXVxuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybUVycm9yc1wiLCBcInNlbmRUb0xvYWRpbmdcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy9zaWduLWluL3N0YXJ0Lm1hY2hpbmUudHNcbmltcG9ydCB7IGFzc2VydEV2ZW50IGFzIGFzc2VydEV2ZW50MiwgZW5xdWV1ZUFjdGlvbnMgYXMgZW5xdWV1ZUFjdGlvbnMyLCBmcm9tUHJvbWlzZSBhcyBmcm9tUHJvbWlzZTQsIG5vdCBhcyBub3QyLCBzZW5kVG8gYXMgc2VuZFRvNCwgc2V0dXAgYXMgc2V0dXA1IH0gZnJvbSBcInhzdGF0ZVwiO1xudmFyIERJU0FCTEVBQkxFX0ZJRUxEUyA9IFtcImVtYWlsQWRkcmVzc1wiLCBcInBob25lTnVtYmVyXCJdO1xudmFyIFNpZ25JblN0YXJ0TWFjaGluZUlkID0gXCJTaWduSW5TdGFydFwiO1xudmFyIFNpZ25JblN0YXJ0TWFjaGluZSA9IHNldHVwNSh7XG4gIGFjdG9yczoge1xuICAgIGF0dGVtcHRQYXNza2V5OiBmcm9tUHJvbWlzZTQoKHsgaW5wdXQ6IHsgcGFyZW50LCBmbG93IH0gfSkgPT4ge1xuICAgICAgcmV0dXJuIHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdXRoZW50aWNhdGVXaXRoUGFzc2tleSh7XG4gICAgICAgIGZsb3dcbiAgICAgIH0pO1xuICAgIH0pLFxuICAgIGF0dGVtcHRXZWIzOiBmcm9tUHJvbWlzZTQoXG4gICAgICAoeyBpbnB1dDogeyBwYXJlbnQsIHN0cmF0ZWd5IH0gfSkgPT4ge1xuICAgICAgICBpZiAoc3RyYXRlZ3kgPT09IFwid2ViM19tZXRhbWFza19zaWduYXR1cmVcIikge1xuICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0U25hcHNob3QoKS5jb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4uYXV0aGVudGljYXRlV2l0aE1ldGFtYXNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmF0ZWd5ID09PSBcIndlYjNfY29pbmJhc2Vfd2FsbGV0X3NpZ25hdHVyZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdXRoZW50aWNhdGVXaXRoQ29pbmJhc2VXYWxsZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyYXRlZ3kgPT09IFwid2ViM19va3hfd2FsbGV0X3NpZ25hdHVyZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5hdXRoZW50aWNhdGVXaXRoT0tYV2FsbGV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYFVuc3VwcG9ydGVkIFdlYjMgc3RyYXRlZ3k6ICR7c3RyYXRlZ3l9YCk7XG4gICAgICB9XG4gICAgKSxcbiAgICBhdHRlbXB0OiBmcm9tUHJvbWlzZTQoKHsgaW5wdXQ6IHsgZmllbGRzLCBwYXJlbnQsIHBhcmFtcyB9IH0pID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGNsZXJrID0gcGFyZW50LmdldFNuYXBzaG90KCkuY29udGV4dC5jbGVyaztcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gZmllbGRzLmdldChcInBhc3N3b3JkXCIpO1xuICAgICAgY29uc3QgaWRlbnRpZmllciA9IGZpZWxkcy5nZXQoXCJpZGVudGlmaWVyXCIpO1xuICAgICAgY29uc3QgcGFzc3dvcmRQYXJhbXMgPSAocGFzc3dvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhc3N3b3JkLnZhbHVlKSA/IHtcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLnZhbHVlLFxuICAgICAgICBzdHJhdGVneTogXCJwYXNzd29yZFwiXG4gICAgICB9IDoge307XG4gICAgICByZXR1cm4gY2xlcmsuY2xpZW50LnNpZ25Jbi5jcmVhdGUoe1xuICAgICAgICAuLi5wYXNzd29yZFBhcmFtcyxcbiAgICAgICAgLi4uKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLnRpY2tldCkgPyBwYXJhbXMgOiB7XG4gICAgICAgICAgaWRlbnRpZmllcjogKF9hID0gaWRlbnRpZmllciA9PSBudWxsID8gdm9pZCAwIDogaWRlbnRpZmllci52YWx1ZSkgIT0gbnVsbCA/IF9hIDogXCJcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxuICB9LFxuICBhY3Rpb25zOiB7XG4gICAgc2VuZFRvTmV4dDogKHsgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgcmV0dXJuIGNvbnRleHQucGFyZW50LnNlbmQoeyB0eXBlOiBcIk5FWFRcIiwgcmVzb3VyY2U6IGV2ZW50ID09IG51bGwgPyB2b2lkIDAgOiBldmVudC5vdXRwdXQgfSk7XG4gICAgfSxcbiAgICBzZW5kVG9Mb2FkaW5nLFxuICAgIHNldEZvcm1EaXNhYmxlZFRpY2tldEZpZWxkczogZW5xdWV1ZUFjdGlvbnMyKCh7IGNvbnRleHQsIGVucXVldWUgfSkgPT4ge1xuICAgICAgaWYgKCFjb250ZXh0LnRpY2tldCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJyZW50RmllbGRzID0gY29udGV4dC5mb3JtUmVmLmdldFNuYXBzaG90KCkuY29udGV4dC5maWVsZHM7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgRElTQUJMRUFCTEVfRklFTERTKSB7XG4gICAgICAgIGlmIChjdXJyZW50RmllbGRzLmhhcyhuYW1lKSkge1xuICAgICAgICAgIGVucXVldWUuc2VuZFRvKGNvbnRleHQuZm9ybVJlZiwgeyB0eXBlOiBcIkZJRUxELkRJU0FCTEVcIiwgZmllbGQ6IHsgbmFtZSB9IH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gICAgc2V0Rm9ybUVycm9yczogc2VuZFRvNChcbiAgICAgICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5mb3JtUmVmLFxuICAgICAgKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICBhc3NlcnRBY3RvckV2ZW50RXJyb3IoZXZlbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiRVJST1JTLlNFVFwiLFxuICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgIClcbiAgfSxcbiAgZ3VhcmRzOiB7XG4gICAgaGFzVGlja2V0OiAoeyBjb250ZXh0IH0pID0+IEJvb2xlYW4oY29udGV4dC50aWNrZXQpLFxuICAgIGlzRXhhbXBsZU1vZGU6ICh7IGNvbnRleHQgfSkgPT4gQm9vbGVhbihjb250ZXh0LnBhcmVudC5nZXRTbmFwc2hvdCgpLmNvbnRleHQuZXhhbXBsZU1vZGUpXG4gIH0sXG4gIHR5cGVzOiB7fVxufSkuY3JlYXRlTWFjaGluZSh7XG4gIGlkOiBTaWduSW5TdGFydE1hY2hpbmVJZCxcbiAgY29udGV4dDogKHsgaW5wdXQgfSkgPT4gKHtcbiAgICBiYXNlUGF0aDogaW5wdXQuYmFzZVBhdGggfHwgU0lHTl9JTl9ERUZBVUxUX0JBU0VfUEFUSCxcbiAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICBmb3JtUmVmOiBpbnB1dC5mb3JtUmVmLFxuICAgIGxvYWRpbmdTdGVwOiBcInN0YXJ0XCIsXG4gICAgdGlja2V0OiBpbnB1dC50aWNrZXRcbiAgfSksXG4gIGluaXRpYWw6IFwiSW5pdFwiLFxuICBzdGF0ZXM6IHtcbiAgICBJbml0OiB7XG4gICAgICBkZXNjcmlwdGlvbjogXCJIYW5kbGUgdGlja2V0LCBpZiBwcmVzZW50OyBFbHNlLCBkZWZhdWx0IHRvIFBlbmRpbmcgc3RhdGUuXCIsXG4gICAgICBhbHdheXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcImhhc1RpY2tldFwiLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgUGVuZGluZzoge1xuICAgICAgdGFnczogW1wic3RhdGU6cGVuZGluZ1wiXSxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIldhaXRpbmcgZm9yIHVzZXIgaW5wdXRcIixcbiAgICAgIG9uOiB7XG4gICAgICAgIFNVQk1JVDoge1xuICAgICAgICAgIGd1YXJkOiBub3QyKFwiaXNFeGFtcGxlTW9kZVwiKSxcbiAgICAgICAgICB0YXJnZXQ6IFwiQXR0ZW1wdGluZ1wiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWVwiOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nUGFzc2tleVwiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWS5BVVRPRklMTFwiOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nUGFzc2tleUF1dG9GaWxsXCIsXG4gICAgICAgICAgcmVlbnRlcjogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuV0VCM1wiOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nV2ViM1wiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgQXR0ZW1wdGluZzoge1xuICAgICAgdGFnczogW1wic3RhdGU6YXR0ZW1wdGluZ1wiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBlbnRyeTogXCJzZW5kVG9Mb2FkaW5nXCIsXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiYXR0ZW1wdFwiLFxuICAgICAgICBzcmM6IFwiYXR0ZW1wdFwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIGZpZWxkczogY29udGV4dC5mb3JtUmVmLmdldFNuYXBzaG90KCkuY29udGV4dC5maWVsZHMsXG4gICAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjb250ZXh0LnRpY2tldCA/IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5OiBcInRpY2tldFwiLFxuICAgICAgICAgICAgdGlja2V0OiBjb250ZXh0LnRpY2tldFxuICAgICAgICAgIH0gOiB7fTtcbiAgICAgICAgICByZXR1cm4geyAuLi5kZWZhdWx0UGFyYW1zLCBwYXJhbXMgfTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2V0Rm9ybURpc2FibGVkVGlja2V0RmllbGRzXCIsIFwic2VuZFRvTmV4dFwiLCBcInNlbmRUb0xvYWRpbmdcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1EaXNhYmxlZFRpY2tldEZpZWxkc1wiLCBcInNldEZvcm1FcnJvcnNcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgQXR0ZW1wdGluZ1Bhc3NrZXk6IHtcbiAgICAgIHRhZ3M6IFtcInN0YXRlOmF0dGVtcHRpbmdcIiwgXCJzdGF0ZTpsb2FkaW5nXCJdLFxuICAgICAgZW50cnk6IFwic2VuZFRvTG9hZGluZ1wiLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImF0dGVtcHRQYXNza2V5XCIsXG4gICAgICAgIHNyYzogXCJhdHRlbXB0UGFzc2tleVwiLFxuICAgICAgICBpbnB1dDogKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgICAgIHBhcmVudDogY29udGV4dC5wYXJlbnQsXG4gICAgICAgICAgZmxvdzogXCJkaXNjb3ZlcmFibGVcIlxuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2VuZFRvTmV4dFwiLCBcInNlbmRUb0xvYWRpbmdcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgQXR0ZW1wdGluZ1Bhc3NrZXlBdXRvRmlsbDoge1xuICAgICAgb246IHtcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWVwiOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nUGFzc2tleVwiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgU1VCTUlUOiB7XG4gICAgICAgICAgZ3VhcmQ6IG5vdDIoXCJpc0V4YW1wbGVNb2RlXCIpLFxuICAgICAgICAgIHRhcmdldDogXCJBdHRlbXB0aW5nXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImF0dGVtcHRQYXNza2V5QXV0b2ZpbGxcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRQYXNza2V5XCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgcGFyZW50OiBjb250ZXh0LnBhcmVudCxcbiAgICAgICAgICBmbG93OiBcImF1dG9maWxsXCJcbiAgICAgICAgfSksXG4gICAgICAgIG9uRG9uZToge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNlbmRUb05leHRcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIl0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlBlbmRpbmdcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBBdHRlbXB0aW5nV2ViMzoge1xuICAgICAgdGFnczogW1wic3RhdGU6YXR0ZW1wdGluZ1wiLCBcInN0YXRlOmxvYWRpbmdcIl0sXG4gICAgICBlbnRyeTogXCJzZW5kVG9Mb2FkaW5nXCIsXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwiYXR0ZW1wdFdlYjNcIixcbiAgICAgICAgc3JjOiBcImF0dGVtcHRXZWIzXCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICAgICAgYXNzZXJ0RXZlbnQyKGV2ZW50LCBcIkFVVEhFTlRJQ0FURS5XRUIzXCIpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJlbnQ6IGNvbnRleHQucGFyZW50LFxuICAgICAgICAgICAgc3RyYXRlZ3k6IGV2ZW50LnN0cmF0ZWd5XG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wic2VuZFRvTmV4dFwiLCBcInNlbmRUb0xvYWRpbmdcIl1cbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1FcnJvcnNcIiwgXCJzZW5kVG9Mb2FkaW5nXCJdLFxuICAgICAgICAgIHRhcmdldDogXCJQZW5kaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvc2lnbi1pbi9yb3V0ZXIubWFjaGluZS50c1xudmFyIGlzQ3VycmVudFBhdGggPSAocGF0aCkgPT4gKHsgY29udGV4dCB9LCBfcGFyYW1zKSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIHJldHVybiAoX2IgPSAoX2EgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1hdGNoKHBhdGgpKSAhPSBudWxsID8gX2IgOiBmYWxzZTtcbn07XG52YXIgbmVlZHNTdGF0dXMgPSAoc3RhdHVzKSA9PiAoeyBjb250ZXh0LCBldmVudCB9LCBfKSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIHJldHVybiAoKF9hID0gZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50LnJlc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhdHVzKSA9PT0gc3RhdHVzIHx8ICgoX2IgPSBjb250ZXh0LmNsZXJrKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2xpZW50LnNpZ25Jbi5zdGF0dXMpID09PSBzdGF0dXM7XG59O1xudmFyIFNpZ25JblJvdXRlck1hY2hpbmVJZCA9IFwiU2lnbkluUm91dGVyXCI7XG52YXIgU2lnbkluUm91dGVyTWFjaGluZSA9IHNldHVwNih7XG4gIGFjdG9yczoge1xuICAgIGZpcnN0RmFjdG9yTWFjaGluZTogU2lnbkluRmlyc3RGYWN0b3JNYWNoaW5lLFxuICAgIGZvcm1NYWNoaW5lOiBGb3JtTWFjaGluZSxcbiAgICByZXNldFBhc3N3b3JkTWFjaGluZTogU2lnbkluUmVzZXRQYXNzd29yZE1hY2hpbmUsXG4gICAgc3RhcnRNYWNoaW5lOiBTaWduSW5TdGFydE1hY2hpbmUsXG4gICAgc2Vjb25kRmFjdG9yTWFjaGluZTogU2lnbkluU2Vjb25kRmFjdG9yTWFjaGluZSxcbiAgICB0aGlyZFBhcnR5TWFjaGluZTogVGhpcmRQYXJ0eU1hY2hpbmUsXG4gICAgd2ViQXV0aG5BdXRvZmlsbFN1cHBvcnQ6IGZyb21Qcm9taXNlNSgoKSA9PiBpc1dlYkF1dGhuQXV0b2ZpbGxTdXBwb3J0ZWQoKSlcbiAgfSxcbiAgYWN0aW9uczoge1xuICAgIGNsZWFyRm9ybUVycm9yczogc2VuZFRvNSgoeyBjb250ZXh0IH0pID0+IGNvbnRleHQuZm9ybVJlZiwgeyB0eXBlOiBcIkVSUk9SUy5DTEVBUlwiIH0pLFxuICAgIG5hdmlnYXRlSW50ZXJuYWw6ICh7IGNvbnRleHQgfSwgeyBwYXRoLCBmb3JjZSA9IGZhbHNlIH0pID0+IHtcbiAgICAgIGlmICghY29udGV4dC5yb3V0ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFmb3JjZSAmJiBzaG91bGRVc2VWaXJ0dWFsUm91dGluZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0LmV4YW1wbGVNb2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVkUGF0aCA9IGpvaW5VUkwoY29udGV4dC5yb3V0ZXIuYmFzZVBhdGgsIHBhdGgpO1xuICAgICAgaWYgKHJlc29sdmVkUGF0aCA9PT0gY29udGV4dC5yb3V0ZXIucGF0aG5hbWUoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb250ZXh0LnJvdXRlci5zaGFsbG93UHVzaChyZXNvbHZlZFBhdGgpO1xuICAgIH0sXG4gICAgbmF2aWdhdGVFeHRlcm5hbDogKHsgY29udGV4dCB9LCB7IHBhdGggfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EucHVzaChwYXRoKTtcbiAgICB9LFxuICAgIHJhaXNlTmV4dDogcmFpc2UoeyB0eXBlOiBcIk5FWFRcIiB9KSxcbiAgICBzZXRBY3RpdmU6IGVucXVldWVBY3Rpb25zMygoeyBlbnF1ZXVlLCBjaGVjaywgY29udGV4dCwgZXZlbnQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgaWYgKGNoZWNrKFwiaXNFeGFtcGxlTW9kZVwiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpZCA9IGV2ZW50ID09IG51bGwgPyB2b2lkIDAgOiBldmVudC5pZDtcbiAgICAgIGNvbnN0IGxhc3RBY3RpdmVTZXNzaW9uSWQgPSBjb250ZXh0LmNsZXJrLmNsaWVudC5sYXN0QWN0aXZlU2Vzc2lvbklkO1xuICAgICAgY29uc3QgY3JlYXRlZFNlc3Npb25JZCA9ICgoZXZlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50LnJlc291cmNlKSB8fCBjb250ZXh0LmNsZXJrLmNsaWVudC5zaWduSW4pLmNyZWF0ZWRTZXNzaW9uSWQ7XG4gICAgICBjb25zdCBzZXNzaW9uID0gaWQgfHwgY3JlYXRlZFNlc3Npb25JZCB8fCBsYXN0QWN0aXZlU2Vzc2lvbklkIHx8IG51bGw7XG4gICAgICB2b2lkIGNvbnRleHQuY2xlcmsuc2V0QWN0aXZlKHtcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgcmVkaXJlY3RVcmw6ICgoX2EgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNlYXJjaFBhcmFtcygpLmdldChcInJlZGlyZWN0X3VybFwiKSkgfHwgY29udGV4dC5jbGVyay5idWlsZEFmdGVyU2lnbkluVXJsKClcbiAgICAgIH0pO1xuICAgICAgZW5xdWV1ZS5yYWlzZSh7IHR5cGU6IFwiUkVTRVRcIiB9LCB7IGRlbGF5OiAyZTMgfSk7XG4gICAgfSksXG4gICAgc2V0RXJyb3I6IGFzc2lnbjQoe1xuICAgICAgZXJyb3I6IChfLCB7IGVycm9yIH0pID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihcIlVua25vd24gZXJyb3JcIik7XG4gICAgICB9XG4gICAgfSksXG4gICAgc2V0Rm9ybUVycm9yczogKHsgY29udGV4dCB9LCBwYXJhbXMpID0+IHNlbmRUbzUoY29udGV4dC5mb3JtUmVmLCB7XG4gICAgICB0eXBlOiBcIkVSUk9SUy5TRVRcIixcbiAgICAgIGVycm9yOiBwYXJhbXMuZXJyb3JcbiAgICB9KSxcbiAgICBzZXRGb3JtT0F1dGhFcnJvcnM6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JPcmlnID0gY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLmZpcnN0RmFjdG9yVmVyaWZpY2F0aW9uLmVycm9yO1xuICAgICAgaWYgKCFlcnJvck9yaWcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IGVycm9yO1xuICAgICAgc3dpdGNoIChlcnJvck9yaWcuY29kZSkge1xuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLk5PVF9BTExPV0VEX1RPX1NJR05fVVA6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuT0FVVEhfQUNDRVNTX0RFTklFRDpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5OT1RfQUxMT1dFRF9BQ0NFU1M6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuU0FNTF9VU0VSX0FUVFJJQlVURV9NSVNTSU5HOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLk9BVVRIX0VNQUlMX0RPTUFJTl9SRVNFUlZFRF9CWV9TQU1MOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLlVTRVJfTE9DS0VEOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLkVOVEVSUFJJU0VfU1NPX1VTRVJfQVRUUklCVVRFX01JU1NJTkc6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuRU5URVJQUklTRV9TU09fRU1BSUxfQUREUkVTU19ET01BSU5fTUlTTUFUQ0g6XG4gICAgICAgIGNhc2UgRVJST1JfQ09ERVMuRU5URVJQUklTRV9TU09fSE9TVEVEX0RPTUFJTl9NSVNNQVRDSDpcbiAgICAgICAgY2FzZSBFUlJPUl9DT0RFUy5TQU1MX0VNQUlMX0FERFJFU1NfRE9NQUlOX01JU01BVENIOlxuICAgICAgICBjYXNlIEVSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9NRU1CRVJTSElQX1FVT1RBX0VYQ0VFREVEX0ZPUl9TU086XG4gICAgICAgICAgZXJyb3IgPSBuZXcgQ2xlcmtFbGVtZW50c0Vycm9yKGVycm9yT3JpZy5jb2RlLCBlcnJvck9yaWcubG9uZ01lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZXJyb3IgPSBuZXcgQ2xlcmtFbGVtZW50c0Vycm9yKFxuICAgICAgICAgICAgXCJ1bmFibGVfdG9fY29tcGxldGVcIixcbiAgICAgICAgICAgIFwiVW5hYmxlIHRvIGNvbXBsZXRlIGFjdGlvbiBhdCB0aGlzIHRpbWUuIElmIHRoZSBwcm9ibGVtIHBlcnNpc3RzIHBsZWFzZSBjb250YWN0IHN1cHBvcnQuXCJcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29udGV4dC5mb3JtUmVmLnNlbmQoe1xuICAgICAgICB0eXBlOiBcIkVSUk9SUy5TRVRcIixcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdHJhbnNmZXI6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IF9fY2xlcmtfdHJhbnNmZXI6IFwiMVwiIH0pO1xuICAgICAgKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wdXNoKGAke2NvbnRleHQuc2lnblVwUGF0aH0/JHtzZWFyY2hQYXJhbXN9YCk7XG4gICAgfVxuICB9LFxuICBndWFyZHM6IHtcbiAgICBoYXNBdXRoZW50aWNhdGVkVmlhQ2xlcmtKUzogKHsgY29udGV4dCB9KSA9PiBCb29sZWFuKGNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5zdGF0dXMgPT09IG51bGwgJiYgY29udGV4dC5jbGVyay5jbGllbnQubGFzdEFjdGl2ZVNlc3Npb25JZCksXG4gICAgaGFzT0F1dGhFcnJvcjogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICByZXR1cm4gQm9vbGVhbigoX2QgPSAoX2MgPSAoX2IgPSAoX2EgPSBjb250ZXh0LmNsZXJrKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2xpZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc2lnbkluKSA9PSBudWxsID8gdm9pZCAwIDogX2MuZmlyc3RGYWN0b3JWZXJpZmljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfZC5lcnJvcik7XG4gICAgfSxcbiAgICBoYXNSZXNvdXJjZTogKHsgY29udGV4dCB9KSA9PiB7XG4gICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgIHJldHVybiBCb29sZWFuKChfYyA9IChfYiA9IChfYSA9IGNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jbGllbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5zaWduSW4pID09IG51bGwgPyB2b2lkIDAgOiBfYy5zdGF0dXMpO1xuICAgIH0sXG4gICAgaGFzVGlja2V0OiAoeyBjb250ZXh0IH0pID0+IEJvb2xlYW4oY29udGV4dC50aWNrZXQpLFxuICAgIGlzTG9nZ2VkSW5BbmRTaW5nbGVTZXNzaW9uOiBhbmQoW1wiaXNMb2dnZWRJblwiLCBcImlzU2luZ2xlU2Vzc2lvbk1vZGVcIiwgbm90MyhcImlzRXhhbXBsZU1vZGVcIildKSxcbiAgICBpc0FjdGl2ZVBhdGhSb290OiBpc0N1cnJlbnRQYXRoKFwiL1wiKSxcbiAgICBpc0NvbXBsZXRlOiAoeyBjb250ZXh0LCBldmVudCB9KSA9PiB7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IGV2ZW50ID09IG51bGwgPyB2b2lkIDAgOiBldmVudC5yZXNvdXJjZTtcbiAgICAgIGNvbnN0IHNpZ25JbiA9IGNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25JbjtcbiAgICAgIHJldHVybiAocmVzb3VyY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc291cmNlLnN0YXR1cykgPT09IFwiY29tcGxldGVcIiAmJiBCb29sZWFuKHJlc291cmNlID09IG51bGwgPyB2b2lkIDAgOiByZXNvdXJjZS5jcmVhdGVkU2Vzc2lvbklkKSB8fCBzaWduSW4uc3RhdHVzID09PSBcImNvbXBsZXRlXCIgJiYgQm9vbGVhbihzaWduSW4uY3JlYXRlZFNlc3Npb25JZCk7XG4gICAgfSxcbiAgICBpc0xvZ2dlZEluOiAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiBCb29sZWFuKChfYSA9IGNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS51c2VyKTtcbiAgICB9LFxuICAgIGlzU2luZ2xlU2Vzc2lvbk1vZGU6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgdmFyIF9hLCBfYjtcbiAgICAgIHJldHVybiBCb29sZWFuKChfYiA9IChfYSA9IGNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmF1dGhDb25maWcuc2luZ2xlU2Vzc2lvbk1vZGUpO1xuICAgIH0sXG4gICAgaXNFeGFtcGxlTW9kZTogKHsgY29udGV4dCB9KSA9PiBCb29sZWFuKGNvbnRleHQuZXhhbXBsZU1vZGUpLFxuICAgIG5lZWRzU3RhcnQ6IG9yKFtub3QzKFwiaGFzUmVzb3VyY2VcIiksIFwic3RhdHVzTmVlZHNJZGVudGlmaWVyXCIsIGlzQ3VycmVudFBhdGgoXCIvXCIpXSksXG4gICAgbmVlZHNGaXJzdEZhY3RvcjogYW5kKFtcInN0YXR1c05lZWRzRmlyc3RGYWN0b3JcIiwgaXNDdXJyZW50UGF0aChcIi9jb250aW51ZVwiKV0pLFxuICAgIG5lZWRzU2Vjb25kRmFjdG9yOiBhbmQoW1wic3RhdHVzTmVlZHNTZWNvbmRGYWN0b3JcIiwgaXNDdXJyZW50UGF0aChcIi9jb250aW51ZVwiKV0pLFxuICAgIG5lZWRzQ2FsbGJhY2s6IGlzQ3VycmVudFBhdGgoU1NPX0NBTExCQUNLX1BBVEhfUk9VVEUpLFxuICAgIG5lZWRzQ2hvb3NlU2Vzc2lvbjogaXNDdXJyZW50UGF0aChDSE9PU0VfU0VTU0lPTl9QQVRIX1JPVVRFKSxcbiAgICBuZWVkc05ld1Bhc3N3b3JkOiBhbmQoW1wic3RhdHVzTmVlZHNOZXdQYXNzd29yZFwiLCBpc0N1cnJlbnRQYXRoKFwiL25ldy1wYXNzd29yZFwiKV0pLFxuICAgIHN0YXR1c05lZWRzSWRlbnRpZmllcjogbmVlZHNTdGF0dXMoXCJuZWVkc19pZGVudGlmaWVyXCIpLFxuICAgIHN0YXR1c05lZWRzRmlyc3RGYWN0b3I6IG5lZWRzU3RhdHVzKFwibmVlZHNfZmlyc3RfZmFjdG9yXCIpLFxuICAgIHN0YXR1c05lZWRzU2Vjb25kRmFjdG9yOiBuZWVkc1N0YXR1cyhcIm5lZWRzX3NlY29uZF9mYWN0b3JcIiksXG4gICAgc3RhdHVzTmVlZHNOZXdQYXNzd29yZDogbmVlZHNTdGF0dXMoXCJuZWVkc19uZXdfcGFzc3dvcmRcIilcbiAgfSxcbiAgdHlwZXM6IHt9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgaWQ6IFNpZ25JblJvdXRlck1hY2hpbmVJZCxcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIFNldCBpbiBJTklUIGV2ZW50XG4gIGNvbnRleHQ6IHt9LFxuICBpbml0aWFsOiBcIklkbGVcIixcbiAgb246IHtcbiAgICBcIkFVVEhFTlRJQ0FURS5PQVVUSFwiOiB7XG4gICAgICBhY3Rpb25zOiBzZW5kVG81KFRoaXJkUGFydHlNYWNoaW5lSWQsICh7IGNvbnRleHQsIGV2ZW50IH0pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiUkVESVJFQ1RcIixcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5OiBldmVudC5zdHJhdGVneSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsOiBgJHsoKF9hID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tb2RlKSA9PT0gUk9VVElORy52aXJ0dWFsID8gKF9iID0gY29udGV4dC5jbGVyay5fX3Vuc3RhYmxlX19lbnZpcm9ubWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmRpc3BsYXlDb25maWcuc2lnbkluVXJsIDogKF9jID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYy5iYXNlUGF0aH0ke1NTT19DQUxMQkFDS19QQVRIX1JPVVRFfWAsXG4gICAgICAgICAgICByZWRpcmVjdFVybENvbXBsZXRlOiAoKF9kID0gY29udGV4dC5yb3V0ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZC5zZWFyY2hQYXJhbXMoKS5nZXQoXCJyZWRpcmVjdF91cmxcIikpIHx8IGNvbnRleHQuY2xlcmsuYnVpbGRBZnRlclNpZ25JblVybCgpXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9LFxuICAgIFwiQVVUSEVOVElDQVRFLlNBTUxcIjoge1xuICAgICAgYWN0aW9uczogc2VuZFRvNShUaGlyZFBhcnR5TWFjaGluZUlkLCAoeyBjb250ZXh0IH0pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBcIlJFRElSRUNUXCIsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBzdHJhdGVneTogXCJzYW1sXCIsXG4gICAgICAgICAgICBpZGVudGlmaWVyOiAoX2EgPSBjb250ZXh0LmZvcm1SZWYuZ2V0U25hcHNob3QoKS5jb250ZXh0LmZpZWxkcy5nZXQoXCJpZGVudGlmaWVyXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUsXG4gICAgICAgICAgICByZWRpcmVjdFVybDogYCR7KChfYiA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2IubW9kZSkgPT09IFJPVVRJTkcudmlydHVhbCA/IChfYyA9IGNvbnRleHQuY2xlcmsuX191bnN0YWJsZV9fZW52aXJvbm1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYy5kaXNwbGF5Q29uZmlnLnNpZ25JblVybCA6IChfZCA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2QuYmFzZVBhdGh9JHtTU09fQ0FMTEJBQ0tfUEFUSF9ST1VURX1gLFxuICAgICAgICAgICAgcmVkaXJlY3RVcmxDb21wbGV0ZTogKChfZSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2Uuc2VhcmNoUGFyYW1zKCkuZ2V0KFwicmVkaXJlY3RfdXJsXCIpKSB8fCBjb250ZXh0LmNsZXJrLmJ1aWxkQWZ0ZXJTaWduSW5VcmwoKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgfSxcbiAgICBcIkZPUk0uQVRUQUNIXCI6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkF0dGFjaC9yZS1hdHRhY2ggdGhlIGZvcm0gdG8gdGhlIHJvdXRlci5cIixcbiAgICAgIGFjdGlvbnM6IGVucXVldWVBY3Rpb25zMygoeyBlbnF1ZXVlLCBldmVudCB9KSA9PiB7XG4gICAgICAgIGVucXVldWUuYXNzaWduKHtcbiAgICAgICAgICBmb3JtUmVmOiBldmVudC5mb3JtUmVmXG4gICAgICAgIH0pO1xuICAgICAgICBlbnF1ZXVlLnJhaXNlKHsgdHlwZTogXCJSRVNFVC5TVEVQXCIgfSk7XG4gICAgICB9KVxuICAgIH0sXG4gICAgXCJOQVZJR0FURS5QUkVWSU9VU1wiOiBcIi5IaXN0XCIsXG4gICAgXCJOQVZJR0FURS5TVEFSVFwiOiBcIi5TdGFydFwiLFxuICAgIExPQURJTkc6IHtcbiAgICAgIGFjdGlvbnM6IGFzc2lnbjQoKHsgZXZlbnQgfSkgPT4gKHtcbiAgICAgICAgbG9hZGluZzoge1xuICAgICAgICAgIGlzTG9hZGluZzogZXZlbnQuaXNMb2FkaW5nLFxuICAgICAgICAgIHN0ZXA6IGV2ZW50LnN0ZXAsXG4gICAgICAgICAgc3RyYXRlZ3k6IGV2ZW50LnN0cmF0ZWd5LFxuICAgICAgICAgIGFjdGlvbjogZXZlbnQuYWN0aW9uXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgIH0sXG4gICAgUkVTRVQ6IFwiLklkbGVcIlxuICB9LFxuICBzdGF0ZXM6IHtcbiAgICBJZGxlOiB7XG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwid2ViQXV0aG5BdXRvZmlsbFwiLFxuICAgICAgICBzcmM6IFwid2ViQXV0aG5BdXRvZmlsbFN1cHBvcnRcIixcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogYXNzaWduNCh7IHdlYkF1dGhuQXV0b2ZpbGxTdXBwb3J0OiAoeyBldmVudCB9KSA9PiBldmVudC5vdXRwdXQgfSlcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIElOSVQ6IHtcbiAgICAgICAgICBhY3Rpb25zOiBhc3NpZ240KCh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IChfYSA9IGV2ZW50LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNlYXJjaFBhcmFtcygpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY2xlcms6IGV2ZW50LmNsZXJrLFxuICAgICAgICAgICAgICBleGFtcGxlTW9kZTogZXZlbnQuZXhhbXBsZU1vZGUgfHwgZmFsc2UsXG4gICAgICAgICAgICAgIGZvcm1SZWY6IGV2ZW50LmZvcm1SZWYsXG4gICAgICAgICAgICAgIGxvYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJvdXRlcjogZXZlbnQucm91dGVyLFxuICAgICAgICAgICAgICBzaWduVXBQYXRoOiBldmVudC5zaWduVXBQYXRoIHx8IFNJR05fVVBfREVGQVVMVF9CQVNFX1BBVEgsXG4gICAgICAgICAgICAgIHRpY2tldDogKHNlYXJjaFBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogc2VhcmNoUGFyYW1zLmdldChTRUFSQ0hfUEFSQU1TLnRpY2tldCkpIHx8IHZvaWQgMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0YXJnZXQ6IFwiSW5pdFwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIEluaXQ6IHtcbiAgICAgIGVudHJ5OiBlbnF1ZXVlQWN0aW9uczMoKHsgY29udGV4dCwgZW5xdWV1ZSwgc2VsZiB9KSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmICghc2VsZi5nZXRTbmFwc2hvdCgpLmNoaWxkcmVuW1RoaXJkUGFydHlNYWNoaW5lSWRdKSB7XG4gICAgICAgICAgZW5xdWV1ZS5zcGF3bkNoaWxkKFwidGhpcmRQYXJ0eU1hY2hpbmVcIiwge1xuICAgICAgICAgICAgaWQ6IFRoaXJkUGFydHlNYWNoaW5lSWQsXG4gICAgICAgICAgICBzeXN0ZW1JZDogVGhpcmRQYXJ0eU1hY2hpbmVJZCxcbiAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgIGJhc2VQYXRoOiAoX2IgPSAoX2EgPSBjb250ZXh0LnJvdXRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmJhc2VQYXRoKSAhPSBudWxsID8gX2IgOiBTSUdOX0lOX0RFRkFVTFRfQkFTRV9QQVRILFxuICAgICAgICAgICAgICBmbG93OiBcInNpZ25JblwiLFxuICAgICAgICAgICAgICBmb3JtUmVmOiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAgICAgICAgIHBhcmVudDogc2VsZlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGFsd2F5czogW1xuICAgICAgICB7XG4gICAgICAgICAgZ3VhcmQ6IFwibmVlZHNDYWxsYmFja1wiLFxuICAgICAgICAgIHRhcmdldDogXCJDYWxsYmFja1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJuZWVkc0Nob29zZVNlc3Npb25cIixcbiAgICAgICAgICB0YXJnZXQ6IFwiQ2hvb3NlU2Vzc2lvblwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJpc0NvbXBsZXRlXCIsXG4gICAgICAgICAgYWN0aW9uczogXCJzZXRBY3RpdmVcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZ3VhcmQ6IFwiaXNMb2dnZWRJbkFuZFNpbmdsZVNlc3Npb25cIixcbiAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICBsb2czKFwiQWxyZWFkeSBsb2dnZWQgaW5cIiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwibmF2aWdhdGVFeHRlcm5hbFwiLFxuICAgICAgICAgICAgICBwYXJhbXM6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgcGF0aDogKChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc2VhcmNoUGFyYW1zKCkuZ2V0KFwicmVkaXJlY3RfdXJsXCIpKSB8fCBjb250ZXh0LmNsZXJrLmJ1aWxkQWZ0ZXJTaWduSW5VcmwoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJuZWVkc1N0YXJ0XCIsXG4gICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IGZvcmNlOiB0cnVlLCBwYXRoOiBcIi9cIiB9IH0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlN0YXJ0XCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGd1YXJkOiBcIm5lZWRzRmlyc3RGYWN0b3JcIixcbiAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgIHRhcmdldDogXCJGaXJzdEZhY3RvclwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJuZWVkc1NlY29uZEZhY3RvclwiLFxuICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBmb3JjZTogdHJ1ZSwgcGF0aDogXCIvY29udGludWVcIiB9IH0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlNlY29uZEZhY3RvclwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBndWFyZDogXCJuZWVkc05ld1Bhc3N3b3JkXCIsXG4gICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IGZvcmNlOiB0cnVlLCBwYXRoOiBcIi9yZXNldC1wYXNzd29yZFwiIH0gfSxcbiAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL1wiIH0gfSxcbiAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZ3VhcmQ6IFwiaGFzVGlja2V0XCIsXG4gICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IGZvcmNlOiB0cnVlLCBwYXRoOiBcIi9cIiB9IH0sXG4gICAgICAgICAgdGFyZ2V0OiBcIlN0YXJ0XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgU3RhcnQ6IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6c3RhcnRcIl0sXG4gICAgICBleGl0OiBcImNsZWFyRm9ybUVycm9yc1wiLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcInN0YXJ0XCIsXG4gICAgICAgIHNyYzogXCJzdGFydE1hY2hpbmVcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQsIHNlbGYgfSkgPT4ge1xuICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFzZVBhdGg6IChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYmFzZVBhdGgsXG4gICAgICAgICAgICBmb3JtUmVmOiBjb250ZXh0LmZvcm1SZWYsXG4gICAgICAgICAgICBwYXJlbnQ6IHNlbGYsXG4gICAgICAgICAgICB0aWNrZXQ6IGNvbnRleHQudGlja2V0XG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogXCJyYWlzZU5leHRcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgXCJSRVNFVC5TVEVQXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIixcbiAgICAgICAgICByZWVudGVyOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIFwiQVVUSEVOVElDQVRFLlBBU1NLRVlcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJzdGFydFwiLCAoeyBldmVudCB9KSA9PiBldmVudClcbiAgICAgICAgfSxcbiAgICAgICAgXCJBVVRIRU5USUNBVEUuUEFTU0tFWS5BVVRPRklMTFwiOiB7XG4gICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcInN0YXJ0XCIsICh7IGV2ZW50IH0pID0+IGV2ZW50KVxuICAgICAgICB9LFxuICAgICAgICBcIkFVVEhFTlRJQ0FURS5XRUIzXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwic3RhcnRcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpXG4gICAgICAgIH0sXG4gICAgICAgIE5FWFQ6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJpc0NvbXBsZXRlXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBcInNldEFjdGl2ZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc0ZpcnN0RmFjdG9yXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvY29udGludWVcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiRmlyc3RGYWN0b3JcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNTZWNvbmRGYWN0b3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJTZWNvbmRGYWN0b3JcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNOZXdQYXNzd29yZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL3Jlc2V0LXBhc3N3b3JkXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlJlc2V0UGFzc3dvcmRcIlxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0sXG4gICAgRmlyc3RGYWN0b3I6IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6Zmlyc3QtZmFjdG9yXCIsIFwic3RlcDp2ZXJpZmljYXRpb25zXCJdLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcImZpcnN0RmFjdG9yXCIsXG4gICAgICAgIHNyYzogXCJmaXJzdEZhY3Rvck1hY2hpbmVcIixcbiAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQsIHNlbGYgfSkgPT4ge1xuICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybVJlZjogY29udGV4dC5mb3JtUmVmLFxuICAgICAgICAgICAgcGFyZW50OiBzZWxmLFxuICAgICAgICAgICAgYmFzZVBhdGg6IChfYSA9IGNvbnRleHQucm91dGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYmFzZVBhdGhcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICBhY3Rpb25zOiBcInJhaXNlTmV4dFwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbjoge1xuICAgICAgICBcIkFVVEhFTlRJQ0FURS5QQVNTS0VZXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwiZmlyc3RGYWN0b3JcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpXG4gICAgICAgIH0sXG4gICAgICAgIFwiUkVTRVQuU1RFUFwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIkZpcnN0RmFjdG9yXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBORVhUOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNDb21wbGV0ZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogXCJzZXRBY3RpdmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNTZWNvbmRGYWN0b3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJTZWNvbmRGYWN0b3JcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNOZXdQYXNzd29yZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL3Jlc2V0LXBhc3N3b3JkXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlJlc2V0UGFzc3dvcmRcIlxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJTVFJBVEVHWS5VUERBVEVcIjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlbmQgZXZlbnQgdG8gdmVyaWZpY2F0aW9uIG1hY2hpbmUgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHN0cmF0ZWd5LlwiLFxuICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJmaXJzdEZhY3RvclwiLCAoeyBldmVudCB9KSA9PiBldmVudCksXG4gICAgICAgICAgdGFyZ2V0OiBcIi5JZGxlXCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluaXRpYWw6IFwiSWRsZVwiLFxuICAgICAgc3RhdGVzOiB7XG4gICAgICAgIElkbGU6IHtcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgXCJOQVZJR0FURS5GT1JHT1RfUEFTU1dPUkRcIjoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJOYXZpZ2F0ZSB0byBmb3Jnb3QgcGFzc3dvcmQgc2NyZWVuLlwiLFxuICAgICAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwiZmlyc3RGYWN0b3JcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiRm9yZ290UGFzc3dvcmRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiTkFWSUdBVEUuQ0hPT1NFX1NUUkFURUdZXCI6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiTmF2aWdhdGUgdG8gY2hvb3NlIHN0cmF0ZWd5IHNjcmVlbi5cIixcbiAgICAgICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcImZpcnN0RmFjdG9yXCIsICh7IGV2ZW50IH0pID0+IGV2ZW50KSxcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIkNob29zaW5nU3RyYXRlZ3lcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgQ2hvb3NpbmdTdHJhdGVneToge1xuICAgICAgICAgIHRhZ3M6IFtcInN0ZXA6Y2hvb3NlLXN0cmF0ZWd5XCJdLFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBcIk5BVklHQVRFLlBSRVZJT1VTXCI6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiR28gdG8gSWRsZSwgYW5kIGFsc28gdGVsbCBmaXJzdEZhY3RvciB0byBnbyB0byBQZW5kaW5nXCIsXG4gICAgICAgICAgICAgIHRhcmdldDogXCJJZGxlXCIsXG4gICAgICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJmaXJzdEZhY3RvclwiLCB7IHR5cGU6IFwiTkFWSUdBVEUuUFJFVklPVVNcIiB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgRm9yZ290UGFzc3dvcmQ6IHtcbiAgICAgICAgICB0YWdzOiBbXCJzdGVwOmZvcmdvdC1wYXNzd29yZFwiXSxcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgXCJOQVZJR0FURS5QUkVWSU9VU1wiOiBcIklkbGVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgU2Vjb25kRmFjdG9yOiB7XG4gICAgICB0YWdzOiBbXCJzdGVwOnNlY29uZC1mYWN0b3JcIiwgXCJzdGVwOnZlcmlmaWNhdGlvbnNcIl0sXG4gICAgICBpbnZva2U6IHtcbiAgICAgICAgaWQ6IFwic2Vjb25kRmFjdG9yXCIsXG4gICAgICAgIHNyYzogXCJzZWNvbmRGYWN0b3JNYWNoaW5lXCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0LCBzZWxmIH0pID0+ICh7XG4gICAgICAgICAgZm9ybVJlZjogY29udGV4dC5mb3JtUmVmLFxuICAgICAgICAgIHBhcmVudDogc2VsZlxuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogXCJyYWlzZU5leHRcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgXCJSRVNFVC5TVEVQXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiU2Vjb25kRmFjdG9yXCIsXG4gICAgICAgICAgcmVlbnRlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBORVhUOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwiaXNDb21wbGV0ZVwiLFxuICAgICAgICAgICAgYWN0aW9uczogXCJzZXRBY3RpdmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNOZXdQYXNzd29yZFwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL3Jlc2V0LXBhc3N3b3JkXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlJlc2V0UGFzc3dvcmRcIlxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJTVFJBVEVHWS5VUERBVEVcIjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlbmQgZXZlbnQgdG8gdmVyaWZpY2F0aW9uIG1hY2hpbmUgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHN0cmF0ZWd5LlwiLFxuICAgICAgICAgIGFjdGlvbnM6IHNlbmRUbzUoXCJzZWNvbmRGYWN0b3JcIiwgKHsgZXZlbnQgfSkgPT4gZXZlbnQpLFxuICAgICAgICAgIHRhcmdldDogXCIuSWRsZVwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbml0aWFsOiBcIklkbGVcIixcbiAgICAgIHN0YXRlczoge1xuICAgICAgICBJZGxlOiB7XG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFwiTkFWSUdBVEUuQ0hPT1NFX1NUUkFURUdZXCI6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiTmF2aWdhdGUgdG8gY2hvb3NlIHN0cmF0ZWd5IHNjcmVlbi5cIixcbiAgICAgICAgICAgICAgYWN0aW9uczogc2VuZFRvNShcInNlY29uZEZhY3RvclwiLCAoeyBldmVudCB9KSA9PiBldmVudCksXG4gICAgICAgICAgICAgIHRhcmdldDogXCJDaG9vc2luZ1N0cmF0ZWd5XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIENob29zaW5nU3RyYXRlZ3k6IHtcbiAgICAgICAgICB0YWdzOiBbXCJzdGVwOmNob29zZS1zdHJhdGVneVwiXSxcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgXCJOQVZJR0FURS5QUkVWSU9VU1wiOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkdvIHRvIElkbGUsIGFuZCBhbHNvIHRlbGwgZmlyc3RGYWN0b3IgdG8gZ28gdG8gUGVuZGluZ1wiLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiSWRsZVwiLFxuICAgICAgICAgICAgICBhY3Rpb25zOiBzZW5kVG81KFwic2Vjb25kRmFjdG9yXCIsIHsgdHlwZTogXCJOQVZJR0FURS5QUkVWSU9VU1wiIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBSZXNldFBhc3N3b3JkOiB7XG4gICAgICB0YWdzOiBbXCJzdGVwOnJlc2V0LXBhc3N3b3JkXCJdLFxuICAgICAgaW52b2tlOiB7XG4gICAgICAgIGlkOiBcInJlc2V0UGFzc3dvcmRcIixcbiAgICAgICAgc3JjOiBcInJlc2V0UGFzc3dvcmRNYWNoaW5lXCIsXG4gICAgICAgIGlucHV0OiAoeyBjb250ZXh0LCBzZWxmIH0pID0+ICh7XG4gICAgICAgICAgZm9ybVJlZjogY29udGV4dC5mb3JtUmVmLFxuICAgICAgICAgIHBhcmVudDogc2VsZlxuICAgICAgICB9KSxcbiAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgYWN0aW9uczogXCJyYWlzZU5leHRcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb246IHtcbiAgICAgICAgXCJSRVNFVC5TVEVQXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiLFxuICAgICAgICAgIHJlZW50ZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgTkVYVDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImlzQ29tcGxldGVcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFwic2V0QWN0aXZlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzRmlyc3RGYWN0b3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJGaXJzdEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc1NlY29uZEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlNlY29uZEZhY3RvclwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSxcbiAgICBDYWxsYmFjazoge1xuICAgICAgdGFnczogW1wic3RlcDpjYWxsYmFja1wiXSxcbiAgICAgIGVudHJ5OiBzZW5kVG81KFRoaXJkUGFydHlNYWNoaW5lSWQsIHsgdHlwZTogXCJDQUxMQkFDS1wiIH0pLFxuICAgICAgb246IHtcbiAgICAgICAgTkVYVDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcImhhc09BdXRoRXJyb3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcInNldEZvcm1PQXV0aEVycm9yc1wiLCB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgZm9yY2U6IHRydWUsIHBhdGg6IFwiL1wiIH0gfV0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiU3RhcnRcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IG9yKFtcImlzTG9nZ2VkSW5cIiwgXCJpc0NvbXBsZXRlXCIsIFwiaGFzQXV0aGVudGljYXRlZFZpYUNsZXJrSlNcIl0pLFxuICAgICAgICAgICAgYWN0aW9uczogXCJzZXRBY3RpdmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZ3VhcmQ6IFwic3RhdHVzTmVlZHNJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBcInRyYW5zZmVyXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGd1YXJkOiBcInN0YXR1c05lZWRzRmlyc3RGYWN0b3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IHsgdHlwZTogXCJuYXZpZ2F0ZUludGVybmFsXCIsIHBhcmFtczogeyBwYXRoOiBcIi9jb250aW51ZVwiIH0gfSxcbiAgICAgICAgICAgIHRhcmdldDogXCJGaXJzdEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc1NlY29uZEZhY3RvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogeyB0eXBlOiBcIm5hdmlnYXRlSW50ZXJuYWxcIiwgcGFyYW1zOiB7IHBhdGg6IFwiL2NvbnRpbnVlXCIgfSB9LFxuICAgICAgICAgICAgdGFyZ2V0OiBcIlNlY29uZEZhY3RvclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBndWFyZDogXCJzdGF0dXNOZWVkc05ld1Bhc3N3b3JkXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiB7IHR5cGU6IFwibmF2aWdhdGVJbnRlcm5hbFwiLCBwYXJhbXM6IHsgcGF0aDogXCIvcmVzZXQtcGFzc3dvcmRcIiB9IH0sXG4gICAgICAgICAgICB0YXJnZXQ6IFwiUmVzZXRQYXNzd29yZFwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSxcbiAgICBDaG9vc2VTZXNzaW9uOiB7XG4gICAgICB0YWdzOiBbXCJzdGVwOmNob29zZS1zZXNzaW9uXCJdLFxuICAgICAgb246IHtcbiAgICAgICAgXCJTRVNTSU9OLlNFVF9BQ1RJVkVcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IHtcbiAgICAgICAgICAgIHR5cGU6IFwic2V0QWN0aXZlXCIsXG4gICAgICAgICAgICBwYXJhbXM6ICh7IGV2ZW50IH0pID0+ICh7IGlkOiBldmVudC5pZCB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgRXJyb3I6IHtcbiAgICAgIHRhZ3M6IFtcInN0ZXA6ZXJyb3JcIl0sXG4gICAgICBvbjoge1xuICAgICAgICBORVhUOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcIlN0YXJ0XCIsXG4gICAgICAgICAgYWN0aW9uczogXCJjbGVhckZvcm1FcnJvcnNcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBIaXN0OiB7XG4gICAgICB0eXBlOiBcImhpc3RvcnlcIixcbiAgICAgIGV4aXQ6IFwiY2xlYXJGb3JtRXJyb3JzXCJcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3V0aWxzL2Zvcm1hdHRlcnMudHNcbmltcG9ydCB7IHRpdGxlaXplIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdW5kZXJzY29yZVwiO1xuZnVuY3Rpb24gZm9ybWF0TmFtZSguLi5hcmdzKSB7XG4gIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB0aXRsZWl6ZShhcmdzWzBdKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGFyZ3MuZmlsdGVyKEJvb2xlYW4pLm1hcCh0aXRsZWl6ZSkuam9pbihcIiBcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcm1hdFNhbHV0YXRpb24oe1xuICBmaXJzdE5hbWUsXG4gIGxhc3ROYW1lLFxuICBpZGVudGlmaWVyXG59KSB7XG4gIHJldHVybiBmaXJzdE5hbWUgJiYgZm9ybWF0TmFtZShmaXJzdE5hbWUpIHx8IGxhc3ROYW1lICYmIGZvcm1hdE5hbWUobGFzdE5hbWUpIHx8IGlkZW50aWZpZXIgfHwgXCJcIjtcbn1cblxuLy8gc3JjL2ludGVybmFscy9tYWNoaW5lcy9zaWduLWluL3JvdXRlci5zZWxlY3RvcnMudHNcbmZ1bmN0aW9uIFNpZ25JblNhZmVJZGVudGlmaWVyU2VsZWN0b3JGb3JTdHJhdGVneShzdHJhdGVneSkge1xuICByZXR1cm4gKHMpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBzaWduSW4gPSAoX2EgPSBzLmNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jbGllbnQuc2lnbkluO1xuICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgY29uc3QgbWF0Y2hpbmdGYWN0b3JzID0gW1xuICAgICAgICAuLi4oX2IgPSBzaWduSW4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzKSAhPSBudWxsID8gX2IgOiBbXSxcbiAgICAgICAgLi4uKF9jID0gc2lnbkluLnN1cHBvcnRlZFNlY29uZEZhY3RvcnMpICE9IG51bGwgPyBfYyA6IFtdXG4gICAgICBdLmZpbHRlcigoZikgPT4gZi5zdHJhdGVneSA9PT0gc3RyYXRlZ3kpO1xuICAgICAgY29uc3QgbWF0Y2hpbmdGYWN0b3JGb3JJZGVudGlmaWVyID0gc2lnbkluLmlkZW50aWZpZXIgJiYgbWF0Y2hpbmdGYWN0b3JzLmxlbmd0aCA+IDAgPyBtYXRjaGluZ0ZhY3RvcnMuZmluZCgoZikgPT4gXCJzYWZlSWRlbnRpZmllclwiIGluIGYgJiYgZi5zYWZlSWRlbnRpZmllciA9PT0gc2lnbkluLmlkZW50aWZpZXIpIDogbnVsbDtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRmFjdG9yRm9yU3RyYXRlZ3kgPSBtYXRjaGluZ0ZhY3RvcnNbMF07XG4gICAgICBpZiAobWF0Y2hpbmdGYWN0b3JGb3JJZGVudGlmaWVyICYmIFwic2FmZUlkZW50aWZpZXJcIiBpbiBtYXRjaGluZ0ZhY3RvckZvcklkZW50aWZpZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nRmFjdG9yRm9ySWRlbnRpZmllci5zYWZlSWRlbnRpZmllcjtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaGluZ0ZhY3RvckZvclN0cmF0ZWd5ICYmIFwic2FmZUlkZW50aWZpZXJcIiBpbiBtYXRjaGluZ0ZhY3RvckZvclN0cmF0ZWd5KSB7XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0ZhY3RvckZvclN0cmF0ZWd5LnNhZmVJZGVudGlmaWVyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2lnbkluLmlkZW50aWZpZXIgfHwgXCJcIjtcbiAgfTtcbn1cbmZ1bmN0aW9uIFNpZ25JblNhbHV0YXRpb25TZWxlY3RvcihzKSB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCBzaWduSW4gPSAoX2EgPSBzLmNvbnRleHQuY2xlcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jbGllbnQuc2lnbkluO1xuICByZXR1cm4gZm9ybWF0U2FsdXRhdGlvbih7XG4gICAgZmlyc3ROYW1lOiAoX2IgPSBzaWduSW4gPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25Jbi51c2VyRGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmZpcnN0TmFtZSxcbiAgICBpZGVudGlmaWVyOiBzaWduSW4gPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25Jbi5pZGVudGlmaWVyLFxuICAgIGxhc3ROYW1lOiAoX2MgPSBzaWduSW4gPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25Jbi51c2VyRGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmxhc3ROYW1lXG4gIH0pO1xufVxuXG4vLyBzcmMvaW50ZXJuYWxzL21hY2hpbmVzL3NpZ24taW4vcm91dGVyLnR5cGVzLnRzXG52YXIgU2lnbkluUm91dGVyU3lzdGVtSWQgPSB7XG4gIHN0YXJ0OiBcInN0YXJ0XCIsXG4gIGZpcnN0RmFjdG9yOiBcImZpcnN0RmFjdG9yXCIsXG4gIHNlY29uZEZhY3RvcjogXCJzZWNvbmRGYWN0b3JcIixcbiAgcmVzZXRQYXNzd29yZDogXCJyZXNldFBhc3N3b3JkXCJcbn07XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL2Nob29zZS1zdHJhdGVneS50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g5IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU2lnbkluQ2hvb3NlU3RyYXRlZ3lDdHggPSBjcmVhdGVDb250ZXh0Rm9yRG9tVmFsaWRhdGlvbihcIlNpZ25JbkNob29zZVN0cmF0ZWd5Q3R4XCIpO1xuZnVuY3Rpb24gU2lnbkluQ2hvb3NlU3RyYXRlZ3koeyBhc0NoaWxkLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGVGaXJzdEZhY3RvciA9IHVzZUFjdGl2ZVRhZ3MoXG4gICAgcm91dGVyUmVmLFxuICAgIFtcInN0ZXA6dmVyaWZpY2F0aW9uc1wiLCBcInN0ZXA6Zmlyc3QtZmFjdG9yXCIsIFwic3RlcDpjaG9vc2Utc3RyYXRlZ3lcIl0sXG4gICAgQWN0aXZlVGFnc01vZGUuYWxsXG4gICk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlU2Vjb25kRmFjdG9yID0gdXNlQWN0aXZlVGFncyhcbiAgICByb3V0ZXJSZWYsXG4gICAgW1wic3RlcDp2ZXJpZmljYXRpb25zXCIsIFwic3RlcDpzZWNvbmQtZmFjdG9yXCIsIFwic3RlcDpjaG9vc2Utc3RyYXRlZ3lcIl0sXG4gICAgQWN0aXZlVGFnc01vZGUuYWxsXG4gICk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gYWN0aXZlU3RhdGVGaXJzdEZhY3RvciB8fCBhY3RpdmVTdGF0ZVNlY29uZEZhY3RvcjtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90NSA6IFwiZGl2XCI7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3g5KFNpZ25JbkNob29zZVN0cmF0ZWd5Q3R4LlByb3ZpZGVyLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OShDb21wLCB7IC4uLnByb3BzLCBjaGlsZHJlbiB9KSB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduSW5Gb3Jnb3RQYXNzd29yZCh7IGFzQ2hpbGQsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3MoXG4gICAgcm91dGVyUmVmLFxuICAgIFtcInN0ZXA6dmVyaWZpY2F0aW9uc1wiLCBcInN0ZXA6Zmlyc3QtZmFjdG9yXCIsIFwic3RlcDpmb3Jnb3QtcGFzc3dvcmRcIl0sXG4gICAgQWN0aXZlVGFnc01vZGUuYWxsXG4gICk7XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDUgOiBcImRpdlwiO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4OShTaWduSW5DaG9vc2VTdHJhdGVneUN0eC5Qcm92aWRlciwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDkoQ29tcCwgeyAuLi5wcm9wcywgY2hpbGRyZW4gfSkgfSkgOiBudWxsO1xufVxudmFyIFNVUFBPUlRFRF9TVFJBVEVHWV9OQU1FID0gXCJTaWduSW5TdXBwb3J0ZWRTdHJhdGVneVwiO1xudmFyIFNpZ25JblN1cHBvcnRlZFN0cmF0ZWd5ID0gUmVhY3QxOC5mb3J3YXJkUmVmKFxuICAoeyBhc0NoaWxkLCBjaGlsZHJlbiwgbmFtZSwgLi4ucmVzdCB9LCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IHJvdXRlclJlZi5nZXRTbmFwc2hvdCgpO1xuICAgIGNvbnN0IHN0YXR1cyA9IHNuYXBzaG90LmNvbnRleHQuY2xlcmsuY2xpZW50LnNpZ25Jbi5zdGF0dXM7XG4gICAgY29uc3Qgc3VwcG9ydGVkRmlyc3RGYWN0b3JzID0gc3RhdHVzID09PSBcIm5lZWRzX2ZpcnN0X2ZhY3RvclwiID8gc25hcHNob3QuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZEZpcnN0RmFjdG9ycyB8fCBbXSA6IFtdO1xuICAgIGNvbnN0IHN1cHBvcnRlZFNlY29uZEZhY3RvcnMgPSBzdGF0dXMgPT09IFwibmVlZHNfc2Vjb25kX2ZhY3RvclwiID8gc25hcHNob3QuY29udGV4dC5jbGVyay5jbGllbnQuc2lnbkluLnN1cHBvcnRlZFNlY29uZEZhY3RvcnMgfHwgW10gOiBbXTtcbiAgICBjb25zdCBmYWN0b3IgPSBbLi4uc3VwcG9ydGVkRmlyc3RGYWN0b3JzLCAuLi5zdXBwb3J0ZWRTZWNvbmRGYWN0b3JzXS5maW5kKChmYWN0b3IyKSA9PiBuYW1lID09PSBmYWN0b3IyLnN0cmF0ZWd5KTtcbiAgICBjb25zdCBjdXJyZW50RmFjdG9yID0gdXNlU2VsZWN0b3IzKFxuICAgICAgc25hcHNob3QuY2hpbGRyZW5bU2lnbkluUm91dGVyU3lzdGVtSWQuZmlyc3RGYWN0b3JdIHx8IHNuYXBzaG90LmNoaWxkcmVuW1NpZ25JblJvdXRlclN5c3RlbUlkLnNlY29uZEZhY3Rvcl0sXG4gICAgICAoc3RhdGUpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gc3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRlLmNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0cmF0ZWd5O1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3Qgc2VuZFVwZGF0ZVN0cmF0ZWd5RXZlbnQgPSBSZWFjdDE4LnVzZUNhbGxiYWNrKFxuICAgICAgKCkgPT4gcm91dGVyUmVmLnNlbmQoeyB0eXBlOiBcIlNUUkFURUdZLlVQREFURVwiLCBmYWN0b3IgfSksXG4gICAgICBbcm91dGVyUmVmLCBmYWN0b3JdXG4gICAgKTtcbiAgICBpZiAoY3VycmVudEZhY3RvciA9PT0gbmFtZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdDUgOiBcImJ1dHRvblwiO1xuICAgIGNvbnN0IGRlZmF1bHRQcm9wcyA9IGFzQ2hpbGQgPyB7fSA6IHsgdHlwZTogXCJidXR0b25cIiB9O1xuICAgIHJldHVybiBmYWN0b3IgPyAvKiBAX19QVVJFX18gKi8ganN4OShTaWduSW5TdHJhdGVneUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgc3RyYXRlZ3k6IG5hbWUgfSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g5KFxuICAgICAgQ29tcCxcbiAgICAgIHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICByZWY6IGZvcndhcmRlZFJlZixcbiAgICAgICAgb25DbGljazogc2VuZFVwZGF0ZVN0cmF0ZWd5RXZlbnQsXG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiB8fCBmYWN0b3Iuc3RyYXRlZ3lcbiAgICAgIH1cbiAgICApIH0pIDogbnVsbDtcbiAgfVxuKTtcblNpZ25JblN1cHBvcnRlZFN0cmF0ZWd5LmRpc3BsYXlOYW1lID0gU1VQUE9SVEVEX1NUUkFURUdZX05BTUU7XG5cbi8vIHNyYy9yZWFjdC9zaWduLWluL3Jlc2V0LXBhc3N3b3JkLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEwIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU2lnbkluUmVzZXRQYXNzd29yZEN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduSW5SZXNldFBhc3N3b3JkQ3R4XCIpO1xuZnVuY3Rpb24gU2lnbkluUmVzZXRQYXNzd29yZChwcm9wcykge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgXCJzdGVwOnJlc2V0LXBhc3N3b3JkXCIpO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4MTAoU2lnbkluUmVzZXRQYXNzd29yZElubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblJlc2V0UGFzc3dvcmRJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduSW5SZXNldFBhc3N3b3JkU3RlcCgpO1xuICBpZiAoIXJlZikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTAoU2lnbkluUmVzZXRQYXNzd29yZEN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vc3NvLWNhbGxiYWNrLnRzeFxuZnVuY3Rpb24gU2lnbkluU1NPQ2FsbGJhY2soeyBjaGlsZHJlbiB9KSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6Y2FsbGJhY2tcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IGNoaWxkcmVuIDogbnVsbDtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vc3RhcnQudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTEgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduSW5TdGFydEN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduSW5TdGFydEN0eFwiKTtcbmZ1bmN0aW9uIFNpZ25JblN0YXJ0KHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6c3RhcnRcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMShTaWduSW5TdGFydElubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblN0YXJ0SW5uZXIocHJvcHMpIHtcbiAgY29uc3QgcmVmID0gdXNlU2lnbkluU3RhcnRTdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMShTaWduSW5TdGFydEN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDExKFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vdmVyaWZpY2F0aW9ucy50c3hcbmltcG9ydCB7IHVzZVNlbGVjdG9yIGFzIHVzZVNlbGVjdG9yNCB9IGZyb20gXCJAeHN0YXRlL3JlYWN0XCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazYsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q1IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pbnRlcm5hbHMvbWFjaGluZXMvdXRpbHMvc3RyYXRlZ2llcy50c1xudmFyIG1hdGNoU3RyYXRlZ3kgPSAoY3VycmVudCwgZGVzaXJlZCkgPT4ge1xuICBpZiAoIWN1cnJlbnQgfHwgIWRlc2lyZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGN1cnJlbnQgPT09IGRlc2lyZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gY3VycmVudC5zdGFydHNXaXRoKGAke2Rlc2lyZWR9X2ApO1xufTtcblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vdmVyaWZpY2F0aW9ucy50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxMiB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNpZ25JbkZpcnN0RmFjdG9yQ3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25JbkZpcnN0RmFjdG9yQ3R4XCIpO1xudmFyIFNpZ25JblNlY29uZEZhY3RvckN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduSW5TZWNvbmRGYWN0b3JDdHhcIik7XG52YXIgc3RyYXRlZ2llc1NlbGVjdG9yID0gKHN0YXRlKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChfYSA9IHN0YXRlLmNvbnRleHQuY3VycmVudEZhY3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0cmF0ZWd5O1xufTtcbmZ1bmN0aW9uIFNpZ25JblN0cmF0ZWdpZXNQcm92aWRlcih7XG4gIGNoaWxkcmVuLFxuICBwcmVmZXJyZWQsXG4gIGFjdG9yUmVmLFxuICAuLi5wcm9wc1xufSkge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduSW5Sb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgY3VycmVudCA9IHVzZVNlbGVjdG9yNChhY3RvclJlZiwgc3RyYXRlZ2llc1NlbGVjdG9yKTtcbiAgY29uc3QgaXNDaG9vc2luZ0FsdFN0cmF0ZWd5ID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFtcInN0ZXA6Y2hvb3NlLXN0cmF0ZWd5XCIsIFwic3RlcDpmb3Jnb3QtcGFzc3dvcmRcIl0pO1xuICBjb25zdCBpc0FjdGl2ZSA9IHVzZUNhbGxiYWNrNigobmFtZSkgPT4gY3VycmVudCA/IG1hdGNoU3RyYXRlZ3koY3VycmVudCwgbmFtZSkgOiBmYWxzZSwgW2N1cnJlbnRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTdHJhdGVnaWVzQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBjdXJyZW50LCBwcmVmZXJyZWQsIGlzQWN0aXZlIH0sIGNoaWxkcmVuOiBpc0Nob29zaW5nQWx0U3RyYXRlZ3kuYWN0aXZlID8gbnVsbCA6IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICBGb3JtLFxuICAgIHtcbiAgICAgIGZsb3dBY3RvcjogYWN0b3JSZWYsXG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApIH0pO1xufVxuZnVuY3Rpb24gdXNlRmFjdG9yQ3R4KCkge1xuICBjb25zdCBmaXJzdEZhY3RvclJlZiA9IFNpZ25JbkZpcnN0RmFjdG9yQ3R4LnVzZUFjdG9yUmVmKHRydWUpO1xuICBjb25zdCBzZWNvbmRGYWN0b3JSZWYgPSBTaWduSW5TZWNvbmRGYWN0b3JDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIHJldHVybiBmaXJzdEZhY3RvclJlZiB8fCBzZWNvbmRGYWN0b3JSZWY7XG59XG5mdW5jdGlvbiBTaWduSW5TdHJhdGVneSh7IGNoaWxkcmVuLCBuYW1lIH0pIHtcbiAgY29uc3QgeyBhY3RpdmUgfSA9IHVzZVN0cmF0ZWd5KG5hbWUpO1xuICBjb25zdCBmYWN0b3JDdHggPSB1c2VGYWN0b3JDdHgoKTtcbiAgdXNlRWZmZWN0NSgoKSA9PiB7XG4gICAgaWYgKGZhY3RvckN0eCkge1xuICAgICAgZmFjdG9yQ3R4LnNlbmQoeyB0eXBlOiBcIlNUUkFURUdZLlJFR0lTVEVSXCIsIGZhY3RvcjogbmFtZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICgoZmFjdG9yQ3R4ID09IG51bGwgPyB2b2lkIDAgOiBmYWN0b3JDdHguZ2V0U25hcHNob3QoKS5zdGF0dXMpID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgIGZhY3RvckN0eC5zZW5kKHsgdHlwZTogXCJTVFJBVEVHWS5VTlJFR0lTVEVSXCIsIGZhY3RvcjogbmFtZSB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbZmFjdG9yQ3R4LCBuYW1lXSk7XG4gIHJldHVybiBhY3RpdmUgPyAvKiBAX19QVVJFX18gKi8ganN4MTIoU2lnbkluU3RyYXRlZ3lDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7IHN0cmF0ZWd5OiBuYW1lIH0sIGNoaWxkcmVuIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JblZlcmlmaWNhdGlvbnMocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IHsgYWN0aXZlVGFnczogYWN0aXZlUm91dGVzIH0gPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgW1wic3RlcDpmaXJzdC1mYWN0b3JcIiwgXCJzdGVwOnNlY29uZC1mYWN0b3JcIl0pO1xuICBpZiAoYWN0aXZlUm91dGVzLmhhcyhcInN0ZXA6Zmlyc3QtZmFjdG9yXCIpKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5GaXJzdEZhY3RvcklubmVyLCB7IC4uLnByb3BzIH0pO1xuICB9XG4gIGlmIChhY3RpdmVSb3V0ZXMuaGFzKFwic3RlcDpzZWNvbmQtZmFjdG9yXCIpKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5TZWNvbmRGYWN0b3JJbm5lciwgeyAuLi5wcm9wcyB9KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25JbkZpcnN0RmFjdG9yKHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25JblJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6Zmlyc3QtZmFjdG9yXCIpO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4MTIoU2lnbkluRmlyc3RGYWN0b3JJbm5lciwgeyAuLi5wcm9wcyB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduSW5TZWNvbmRGYWN0b3IocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpzZWNvbmQtZmFjdG9yXCIpO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4MTIoU2lnbkluU2Vjb25kRmFjdG9ySW5uZXIsIHsgLi4ucHJvcHMgfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gU2lnbkluRmlyc3RGYWN0b3JJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduSW5GaXJzdEZhY3RvclN0ZXAoKTtcbiAgaWYgKCFyZWYpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gcmVmID8gLyogQF9fUFVSRV9fICovIGpzeDEyKFNpZ25JbkZpcnN0RmFjdG9yQ3R4LlByb3ZpZGVyLCB7IGFjdG9yUmVmOiByZWYsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTIoXG4gICAgU2lnbkluU3RyYXRlZ2llc1Byb3ZpZGVyLFxuICAgIHtcbiAgICAgIGFjdG9yUmVmOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduSW5TZWNvbmRGYWN0b3JJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduSW5TZWNvbmRGYWN0b3JTdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHJlZiA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTaWduSW5TZWNvbmRGYWN0b3JDdHguUHJvdmlkZXIsIHsgYWN0b3JSZWY6IHJlZiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICBTaWduSW5TdHJhdGVnaWVzUHJvdmlkZXIsXG4gICAge1xuICAgICAgYWN0b3JSZWY6IHJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIH0pIDogbnVsbDtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24taW4vc3RlcC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxMyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNJR05fSU5fU1RFUFMgPSB7XG4gIHN0YXJ0OiBcInN0YXJ0XCIsXG4gIHZlcmlmaWNhdGlvbnM6IFwidmVyaWZpY2F0aW9uc1wiLFxuICBcImNob29zZS1zdHJhdGVneVwiOiBcImNob29zZS1zdHJhdGVneVwiLFxuICBcImNob29zZS1zZXNzaW9uXCI6IFwiY2hvb3NlLXNlc3Npb25cIixcbiAgXCJmb3Jnb3QtcGFzc3dvcmRcIjogXCJmb3Jnb3QtcGFzc3dvcmRcIixcbiAgXCJyZXNldC1wYXNzd29yZFwiOiBcInJlc2V0LXBhc3N3b3JkXCIsXG4gIFwic3NvLWNhbGxiYWNrXCI6IFwic3NvLWNhbGxiYWNrXCJcbn07XG5mdW5jdGlvbiBTaWduSW5TdGVwKHByb3BzKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgY2xlcmsgPSB1c2VDbGVyazQoKTtcbiAgKF9hID0gY2xlcmsudGVsZW1ldHJ5KSA9PSBudWxsID8gdm9pZCAwIDogX2EucmVjb3JkKGV2ZW50Q29tcG9uZW50TW91bnRlZDIoXCJFbGVtZW50c19TaWduSW5TdGVwXCIsIHsgbmFtZTogcHJvcHMubmFtZSB9KSk7XG4gIHN3aXRjaCAocHJvcHMubmFtZSkge1xuICAgIGNhc2UgU0lHTl9JTl9TVEVQUy5zdGFydDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTMoU2lnbkluU3RhcnQsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTLnZlcmlmaWNhdGlvbnM6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFNpZ25JblZlcmlmaWNhdGlvbnMsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX0lOX1NURVBTW1wiY2hvb3NlLXN0cmF0ZWd5XCJdOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhTaWduSW5DaG9vc2VTdHJhdGVneSwgeyAuLi5wcm9wcyB9KTtcbiAgICBjYXNlIFNJR05fSU5fU1RFUFNbXCJmb3Jnb3QtcGFzc3dvcmRcIl06XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFNpZ25JbkZvcmdvdFBhc3N3b3JkLCB7IC4uLnByb3BzIH0pO1xuICAgIGNhc2UgU0lHTl9JTl9TVEVQU1tcInJlc2V0LXBhc3N3b3JkXCJdOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhTaWduSW5SZXNldFBhc3N3b3JkLCB7IC4uLnByb3BzIH0pO1xuICAgIGNhc2UgU0lHTl9JTl9TVEVQU1tcImNob29zZS1zZXNzaW9uXCJdOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhTaWduSW5DaG9vc2VTZXNzaW9uLCB7IC4uLnByb3BzIH0pO1xuICAgIGNhc2UgU0lHTl9JTl9TVEVQU1tcInNzby1jYWxsYmFja1wiXTpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTMoU2lnbkluU1NPQ2FsbGJhY2ssIHsgLi4ucHJvcHMgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKGBJbnZhbGlkIHN0ZXAgbmFtZS4gVXNlOiAke09iamVjdC5rZXlzKFNJR05fSU5fU1RFUFMpLmpvaW4oXCIsXCIpfS5gKTtcbiAgfVxufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi11cC9zdGVwLnRzeFxuaW1wb3J0IHsgdXNlQ2xlcmsgYXMgdXNlQ2xlcms1IH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvcmVhY3RcIjtcbmltcG9ydCB7IGV2ZW50Q29tcG9uZW50TW91bnRlZCBhcyBldmVudENvbXBvbmVudE1vdW50ZWQzIH0gZnJvbSBcIkBjbGVyay9zaGFyZWQvdGVsZW1ldHJ5XCI7XG5cbi8vIHNyYy9yZWFjdC9zaWduLXVwL2NvbnRpbnVlLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDE0IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU2lnblVwQ29udGludWVDdHggPSBjcmVhdGVDb250ZXh0RnJvbUFjdG9yUmVmKFwiU2lnblVwQ29udGludWVDdHhcIik7XG5mdW5jdGlvbiBTaWduVXBDb250aW51ZShwcm9wcykge1xuICBjb25zdCByb3V0ZXJSZWYgPSBTaWduVXBSb3V0ZXJDdHgudXNlQWN0b3JSZWYoKTtcbiAgY29uc3QgYWN0aXZlU3RhdGUgPSB1c2VBY3RpdmVUYWdzKHJvdXRlclJlZiwgXCJzdGVwOmNvbnRpbnVlXCIpO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4MTQoU2lnblVwQ29udGludWVJbm5lciwgeyAuLi5wcm9wcyB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduVXBDb250aW51ZUlubmVyKHByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVNpZ25VcENvbnRpbnVlU3RlcCgpO1xuICBpZiAoIXJlZikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTQoU2lnblVwQ29udGludWVDdHguUHJvdmlkZXIsIHsgYWN0b3JSZWY6IHJlZiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNChcbiAgICBGb3JtLFxuICAgIHtcbiAgICAgIGZsb3dBY3RvcjogcmVmLFxuICAgICAgLi4ucHJvcHNcbiAgICB9XG4gICkgfSk7XG59XG5cbi8vIHNyYy9yZWFjdC9zaWduLXVwL3Jlc3RyaWN0ZWQudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTUgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIFNpZ25VcFJlc3RyaWN0ZWQocHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyUmVmID0gU2lnblVwUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyb3V0ZXJSZWYsIFwic3RlcDpyZXN0cmljdGVkXCIpO1xuICByZXR1cm4gYWN0aXZlU3RhdGUgPyAvKiBAX19QVVJFX18gKi8ganN4MTUoXG4gICAgRm9ybSxcbiAgICB7XG4gICAgICBmbG93QWN0b3I6IHJvdXRlclJlZixcbiAgICAgIC4uLnByb3BzXG4gICAgfVxuICApIDogbnVsbDtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24tdXAvc3RhcnQudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTYgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTaWduVXBTdGFydEN0eCA9IGNyZWF0ZUNvbnRleHRGcm9tQWN0b3JSZWYoXCJTaWduVXBTdGFydEN0eFwiKTtcbmZ1bmN0aW9uIFNpZ25VcFN0YXJ0KHByb3BzKSB7XG4gIGNvbnN0IHJvdXRlclJlZiA9IFNpZ25VcFJvdXRlckN0eC51c2VBY3RvclJlZigpO1xuICBjb25zdCBhY3RpdmVTdGF0ZSA9IHVzZUFjdGl2ZVRhZ3Mocm91dGVyUmVmLCBcInN0ZXA6c3RhcnRcIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxNihTaWduVXBTdGFydElubmVyLCB7IC4uLnByb3BzIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIFNpZ25VcFN0YXJ0SW5uZXIocHJvcHMpIHtcbiAgY29uc3QgcmVmID0gdXNlU2lnblVwU3RhcnRTdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNihTaWduVXBTdGFydEN0eC5Qcm92aWRlciwgeyBhY3RvclJlZjogcmVmLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE2KFxuICAgIEZvcm0sXG4gICAge1xuICAgICAgZmxvd0FjdG9yOiByZWYsXG4gICAgICAuLi5wcm9wc1xuICAgIH1cbiAgKSB9KTtcbn1cblxuLy8gc3JjL3JlYWN0L3NpZ24tdXAvdmVyaWZpY2F0aW9ucy50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50MywganN4IGFzIGpzeDE3IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU2lnblVwVmVyaWZpY2F0aW9uQ3R4ID0gY3JlYXRlQ29udGV4dEZyb21BY3RvclJlZihcIlNpZ25VcFZlcmlmaWNhdGlvbkN0eFwiKTtcbmZ1bmN0aW9uIFNpZ25VcFZlcmlmaWNhdGlvbnMocHJvcHMpIHtcbiAgY29uc3QgcmVmID0gU2lnblVwUm91dGVyQ3R4LnVzZUFjdG9yUmVmKCk7XG4gIGNvbnN0IGFjdGl2ZVN0YXRlID0gdXNlQWN0aXZlVGFncyhyZWYsIFwic3RlcDp2ZXJpZmljYXRpb25cIik7XG4gIHJldHVybiBhY3RpdmVTdGF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhTaWduVXBWZXJpZnlJbm5lciwgeyAuLi5wcm9wcyB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiBTaWduVXBWZXJpZnlJbm5lcihwcm9wcykge1xuICBjb25zdCByZWYgPSB1c2VTaWduVXBWZXJpZmljYXRpb25TdGVwKCk7XG4gIGlmICghcmVmKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhTaWduVXBWZXJpZmljYXRpb25DdHguUHJvdmlkZXIsIHsgYWN0b3JSZWY6IHJlZiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhcbiAgICBGb3JtLFxuICAgIHtcbiAgICAgIGZsb3dBY3RvcjogcmVmLFxuICAgICAgLi4ucHJvcHNcbiAgICB9XG4gICkgfSk7XG59XG5mdW5jdGlvbiBTaWduVXBTdHJhdGVneSh7IGNoaWxkcmVuLCBuYW1lOiB0YWcgfSkge1xuICBjb25zdCByZWYgPSBTaWduVXBWZXJpZmljYXRpb25DdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIGlmICghcmVmKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJzxTdHJhdGVneT4gdXNlZCBvdXRzaWRlIG9mIDxTaWduVXA+LiBEaWQgeW91IG1lYW4gdG8gYGltcG9ydCB7IFN0cmF0ZWd5IH0gZnJvbSBcIkBjbGVyay9lbGVtZW50cy9zaWduLWluXCJgIGluc3RlYWQ/J1xuICAgICk7XG4gIH1cbiAgY29uc3QgeyBhY3RpdmUgfSA9IHVzZUFjdGl2ZVRhZ3MocmVmLCBbXG4gICAgYHZlcmlmaWNhdGlvbjoke3RhZ31gLFxuICAgIGB2ZXJpZmljYXRpb246Y2F0ZWdvcnk6JHt0YWd9YFxuICBdKTtcbiAgcmV0dXJuIGFjdGl2ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhGcmFnbWVudDMsIHsgY2hpbGRyZW4gfSkgOiBudWxsO1xufVxuXG4vLyBzcmMvcmVhY3Qvc2lnbi11cC9zdGVwLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDE4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgU0lHTl9VUF9TVEVQUyA9IHtcbiAgc3RhcnQ6IFwic3RhcnRcIixcbiAgY29udGludWU6IFwiY29udGludWVcIixcbiAgdmVyaWZpY2F0aW9uczogXCJ2ZXJpZmljYXRpb25zXCIsXG4gIHJlc3RyaWN0ZWQ6IFwicmVzdHJpY3RlZFwiXG59O1xuZnVuY3Rpb24gU2lnblVwU3RlcChwcm9wcykge1xuICB2YXIgX2E7XG4gIGNvbnN0IGNsZXJrID0gdXNlQ2xlcms1KCk7XG4gIChfYSA9IGNsZXJrLnRlbGVtZXRyeSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnJlY29yZChldmVudENvbXBvbmVudE1vdW50ZWQzKFwiRWxlbWVudHNfU2lnblVwU3RlcFwiLCB7IG5hbWU6IHByb3BzLm5hbWUgfSkpO1xuICBzd2l0Y2ggKHByb3BzLm5hbWUpIHtcbiAgICBjYXNlIFNJR05fVVBfU1RFUFMuc3RhcnQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KFNpZ25VcFN0YXJ0LCB7IC4uLnByb3BzIH0pO1xuICAgIGNhc2UgU0lHTl9VUF9TVEVQUy5jb250aW51ZTpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTgoU2lnblVwQ29udGludWUsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX1VQX1NURVBTLnZlcmlmaWNhdGlvbnM6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KFNpZ25VcFZlcmlmaWNhdGlvbnMsIHsgLi4ucHJvcHMgfSk7XG4gICAgY2FzZSBTSUdOX1VQX1NURVBTLnJlc3RyaWN0ZWQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KFNpZ25VcFJlc3RyaWN0ZWQsIHsgLi4ucHJvcHMgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFxuICAgICAgICBgSW52YWxpZCBzdGVwIG5hbWUuIFVzZSAnc3RhcnQnLCAnY29udGludWUnLCAndmVyaWZpY2F0aW9ucycsIG9yICdyZXN0cmljdGVkJy5gXG4gICAgICApO1xuICB9XG59XG5cbi8vIHNyYy9yZWFjdC91dGlscy9tYXAtc2NvcGUtdG8tc3RyYXRlZ3kudHNcbmZ1bmN0aW9uIGlzUHJvdmlkZXJTdHJhdGVneVNjb3BlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5zdGFydHNXaXRoKFwicHJvdmlkZXI6XCIpO1xufVxuZnVuY3Rpb24gbWFwU2NvcGVUb1N0cmF0ZWd5KHNjb3BlKSB7XG4gIGlmIChzY29wZSA9PT0gXCJwcm92aWRlcjptZXRhbWFza1wiKSB7XG4gICAgcmV0dXJuIFwid2ViM19tZXRhbWFza19zaWduYXR1cmVcIjtcbiAgfVxuICBpZiAoc2NvcGUgPT09IFwicHJvdmlkZXI6Y29pbmJhc2Vfd2FsbGV0XCIpIHtcbiAgICByZXR1cm4gXCJ3ZWIzX2NvaW5iYXNlX3dhbGxldF9zaWduYXR1cmVcIjtcbiAgfVxuICBpZiAoc2NvcGUgPT09IFwicHJvdmlkZXI6b2t4X3dhbGxldFwiKSB7XG4gICAgcmV0dXJuIFwid2ViM19va3hfd2FsbGV0X3NpZ25hdHVyZVwiO1xuICB9XG4gIGlmIChzY29wZSA9PT0gXCJwcm92aWRlcjpzYW1sXCIpIHtcbiAgICByZXR1cm4gXCJzYW1sXCI7XG4gIH1cbiAgY29uc3Qgc2NvcGVXaXRob3V0UHJlZml4ID0gc2NvcGUucmVwbGFjZShcInByb3ZpZGVyOlwiLCBcIlwiKTtcbiAgcmV0dXJuIGBvYXV0aF8ke3Njb3BlV2l0aG91dFByZWZpeH1gO1xufVxuXG4vLyBzcmMvcmVhY3QvY29tbW9uL2xvYWRpbmcudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTkgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIGlzU2lnbkluU2NvcGUoc2NvcGUpIHtcbiAgaWYgKCFzY29wZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChzY29wZS5zdGFydHNXaXRoKFwic3RlcDpcIikpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFNJR05fSU5fU1RFUFMsIHNjb3BlLnJlcGxhY2UoXCJzdGVwOlwiLCBcIlwiKSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBpc1NpZ25VcFNjb3BlKHNjb3BlKSB7XG4gIGlmICghc2NvcGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoc2NvcGUuc3RhcnRzV2l0aChcInN0ZXA6XCIpKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChTSUdOX1VQX1NURVBTLCBzY29wZS5yZXBsYWNlKFwic3RlcDpcIiwgXCJcIikpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gTG9hZGluZyh7IGNoaWxkcmVuLCBzY29wZSB9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgY2xlcmsgPSB1c2VDbGVyazYoKTtcbiAgKF9hID0gY2xlcmsudGVsZW1ldHJ5KSA9PSBudWxsID8gdm9pZCAwIDogX2EucmVjb3JkKGV2ZW50Q29tcG9uZW50TW91bnRlZDQoXCJFbGVtZW50c19Mb2FkaW5nXCIsIHsgc2NvcGU6IHNjb3BlICE9IG51bGwgPyBzY29wZSA6IGZhbHNlIH0pKTtcbiAgY29uc3Qgc2lnbkluUm91dGVyUmVmID0gU2lnbkluUm91dGVyQ3R4LnVzZUFjdG9yUmVmKHRydWUpO1xuICBjb25zdCBzaWduVXBSb3V0ZXJSZWYgPSBTaWduVXBSb3V0ZXJDdHgudXNlQWN0b3JSZWYodHJ1ZSk7XG4gIGlmICghc2lnbkluUm91dGVyUmVmICYmICFzaWduVXBSb3V0ZXJSZWYpIHtcbiAgICB0aHJvdyBuZXcgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcihgPExvYWRpbmc+IG11c3QgYmUgdXNlZCB3aXRoaW4gYSA8U2lnbkluPiBvciA8U2lnblVwPiBjb21wb25lbnQuYCk7XG4gIH1cbiAgaWYgKHNpZ25JblJvdXRlclJlZikge1xuICAgIGlmIChpc1NpZ25JblNjb3BlKHNjb3BlKSkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxOShcbiAgICAgICAgU2lnbkluTG9hZGluZyxcbiAgICAgICAge1xuICAgICAgICAgIHNjb3BlLFxuICAgICAgICAgIHJvdXRlclJlZjogc2lnbkluUm91dGVyUmVmLFxuICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKGBJbnZhbGlkIHNjb3BlIFwiJHtzY29wZX1cIiB1c2VkIGZvciA8TG9hZGluZz4gaW5zaWRlIDxTaWduSW4+LmApO1xuICAgIH1cbiAgfVxuICBpZiAoc2lnblVwUm91dGVyUmVmKSB7XG4gICAgaWYgKGlzU2lnblVwU2NvcGUoc2NvcGUpKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE5KFxuICAgICAgICBTaWduVXBMb2FkaW5nLFxuICAgICAgICB7XG4gICAgICAgICAgc2NvcGUsXG4gICAgICAgICAgcm91dGVyUmVmOiBzaWduVXBSb3V0ZXJSZWYsXG4gICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IENsZXJrRWxlbWVudHNSdW50aW1lRXJyb3IoYEludmFsaWQgc2NvcGUgXCIke3Njb3BlfVwiIHVzZWQgZm9yIDxMb2FkaW5nPiBpbnNpZGUgPFNpZ25VcD4uYCk7XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBDbGVya0VsZW1lbnRzUnVudGltZUVycm9yKFwiSW52YWxpZCBzdGF0ZSBmb3IgPExvYWRpbmc+LiBQbGVhc2Ugb3BlbiBhbiBpc3N1ZS5cIik7XG59XG5mdW5jdGlvbiBTaWduSW5Mb2FkaW5nKHsgY2hpbGRyZW4sIHNjb3BlLCByb3V0ZXJSZWYgfSkge1xuICBjb25zdCBbaXNMb2FkaW5nLCB7IHN0ZXA6IGxvYWRpbmdTdGVwLCBzdHJhdGVneSwgYWN0aW9uIH1dID0gdXNlTG9hZGluZyhyb3V0ZXJSZWYpO1xuICBjb25zdCB0YWdzID0gdXNlU2VsZWN0b3I1KHJvdXRlclJlZiwgKHMpID0+IHMudGFncyk7XG4gIGNvbnN0IGlzU3RlcExvYWRpbmcgPSAoc3RlcCkgPT4gaXNMb2FkaW5nICYmIGxvYWRpbmdTdGVwID09PSBzdGVwO1xuICBjb25zdCBpc0luZmVycmVkU3RlcExvYWRpbmcgPSAoc3RlcCkgPT4gdGFncy5oYXMoYHN0ZXA6JHtzdGVwfWApICYmIGlzU3RlcExvYWRpbmcoc3RlcCk7XG4gIGxldCBsb2FkaW5nUmVzdWx0ID0gZmFsc2U7XG4gIGlmIChzY29wZSA9PT0gXCJnbG9iYWxcIikge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc0xvYWRpbmc7XG4gIH0gZWxzZSBpZiAoc2NvcGUgJiYgaXNQcm92aWRlclN0cmF0ZWd5U2NvcGUoc2NvcGUpKSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzTG9hZGluZyAmJiBsb2FkaW5nU3RlcCA9PT0gdm9pZCAwICYmIHN0cmF0ZWd5ID09PSBtYXBTY29wZVRvU3RyYXRlZ3koc2NvcGUpO1xuICB9IGVsc2UgaWYgKHNjb3BlKSB7XG4gICAgbG9hZGluZ1Jlc3VsdCA9IGlzU3RlcExvYWRpbmcoc2NvcGUucmVwbGFjZShcInN0ZXA6XCIsIFwiXCIpKSB8fCBzY29wZSA9PT0gYWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJzdGFydFwiKSB8fCBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJ2ZXJpZmljYXRpb25zXCIpIHx8IGlzSW5mZXJyZWRTdGVwTG9hZGluZyhcImNob29zZS1zdHJhdGVneVwiKSB8fCBpc0luZmVycmVkU3RlcExvYWRpbmcoXCJmb3Jnb3QtcGFzc3dvcmRcIikgfHwgaXNJbmZlcnJlZFN0ZXBMb2FkaW5nKFwicmVzZXQtcGFzc3dvcmRcIik7XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuKGxvYWRpbmdSZXN1bHQpO1xufVxuZnVuY3Rpb24gU2lnblVwTG9hZGluZyh7IGNoaWxkcmVuLCBzY29wZSwgcm91dGVyUmVmIH0pIHtcbiAgY29uc3QgW2lzTG9hZGluZywgeyBzdGVwOiBsb2FkaW5nU3RlcCwgc3RyYXRlZ3ksIGFjdGlvbiB9XSA9IHVzZUxvYWRpbmcocm91dGVyUmVmKTtcbiAgY29uc3QgdGFncyA9IHVzZVNlbGVjdG9yNShyb3V0ZXJSZWYsIChzKSA9PiBzLnRhZ3MpO1xuICBjb25zdCBpc1N0ZXBMb2FkaW5nID0gKHN0ZXApID0+IGlzTG9hZGluZyAmJiBsb2FkaW5nU3RlcCA9PT0gc3RlcDtcbiAgY29uc3QgaXNJbmZlcnJlZFN0ZXBMb2FkaW5nID0gKHN0ZXApID0+IHRhZ3MuaGFzKGBzdGVwOiR7c3RlcH1gKSAmJiBpc1N0ZXBMb2FkaW5nKHN0ZXApO1xuICBsZXQgbG9hZGluZ1Jlc3VsdCA9IGZhbHNlO1xuICBpZiAoc2NvcGUgPT09IFwiZ2xvYmFsXCIpIHtcbiAgICBsb2FkaW5nUmVzdWx0ID0gaXNMb2FkaW5nO1xuICB9IGVsc2UgaWYgKHNjb3BlICYmIGlzUHJvdmlkZXJTdHJhdGVneVNjb3BlKHNjb3BlKSkge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc0xvYWRpbmcgJiYgbG9hZGluZ1N0ZXAgPT09IHZvaWQgMCAmJiBzdHJhdGVneSA9PT0gbWFwU2NvcGVUb1N0cmF0ZWd5KHNjb3BlKTtcbiAgfSBlbHNlIGlmIChzY29wZSkge1xuICAgIGxvYWRpbmdSZXN1bHQgPSBpc1N0ZXBMb2FkaW5nKHNjb3BlLnJlcGxhY2UoXCJzdGVwOlwiLCBcIlwiKSkgfHwgc2NvcGUgPT09IGFjdGlvbjtcbiAgfSBlbHNlIHtcbiAgICBsb2FkaW5nUmVzdWx0ID0gaXNJbmZlcnJlZFN0ZXBMb2FkaW5nKFwic3RhcnRcIikgfHwgaXNJbmZlcnJlZFN0ZXBMb2FkaW5nKFwiY29udGludWVcIikgfHwgaXNJbmZlcnJlZFN0ZXBMb2FkaW5nKFwidmVyaWZpY2F0aW9uc1wiKTtcbiAgfVxuICByZXR1cm4gY2hpbGRyZW4obG9hZGluZ1Jlc3VsdCk7XG59XG5cbi8vIHNyYy9yZWFjdC9jb21tb24vbGluay50c3hcbmltcG9ydCB7IHVzZUNsZXJrIGFzIHVzZUNsZXJrNyB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JlYWN0XCI7XG5pbXBvcnQgeyB1c2VDbGVya1JvdXRlciB9IGZyb20gXCJAY2xlcmsvc2hhcmVkL3JvdXRlclwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDIwIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgcGF0aHMgPSB7XG4gIFwic2lnbi1pblwiOiBcInNpZ25JblVybFwiLFxuICBcInNpZ24tdXBcIjogXCJzaWduVXBVcmxcIlxufTtcbmZ1bmN0aW9uIExpbmsoeyBuYXZpZ2F0ZSwgY2hpbGRyZW4sIC4uLnJlc3QgfSkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VDbGVya1JvdXRlcigpO1xuICBjb25zdCBjbGVyayA9IHVzZUNsZXJrNygpO1xuICBjb25zdCBkZXN0aW5hdGlvblVybCA9IHJvdXRlci5tYWtlRGVzdGluYXRpb25VcmxXaXRoUHJlc2VydmVkUXVlcnlQYXJhbWV0ZXJzKFxuICAgIGNsZXJrLl9faW50ZXJuYWxfZ2V0T3B0aW9uKHBhdGhzW25hdmlnYXRlXSlcbiAgKTtcbiAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuKHsgdXJsOiBkZXN0aW5hdGlvblVybCB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIwKFxuICAgIFwiYVwiLFxuICAgIHtcbiAgICAgIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIGlmIChyb3V0ZXIpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgcm91dGVyLnB1c2goZGVzdGluYXRpb25VcmwpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaHJlZjogZGVzdGluYXRpb25VcmwsXG4gICAgICAuLi5yZXN0LFxuICAgICAgY2hpbGRyZW5cbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCB7XG4gIF9fcHJpdmF0ZUdldCxcbiAgX19wcml2YXRlQWRkLFxuICBfX3ByaXZhdGVTZXQsXG4gIENsZXJrRWxlbWVudHNFcnJvcixcbiAgQ2xlcmtFbGVtZW50c1J1bnRpbWVFcnJvcixcbiAgaW5zcGVjdCxcbiAgRm9ybVN0b3JlUHJvdmlkZXIsXG4gIHVzZUZvcm1TdG9yZSxcbiAgRmllbGQsXG4gIEZpZWxkRXJyb3IsXG4gIEZpZWxkU3RhdGUsXG4gIEZvcm0sXG4gIEdsb2JhbEVycm9yLFxuICBTaWduSW5Sb3V0ZXJDdHgsXG4gIHVzZVNpZ25JblN0cmF0ZWd5LFxuICBJbnB1dCxcbiAgTGFiZWwsXG4gIFN1Ym1pdCxcbiAgdXNlQWN0aXZlVGFncyxcbiAgU2lnblVwUm91dGVyQ3R4LFxuICBDb25uZWN0aW9uLFxuICBJY29uLFxuICB1c2VTaWduSW5BY3RpdmVTZXNzaW9uQ29udGV4dCxcbiAgU2lnbkluU2Vzc2lvbkxpc3QsXG4gIFNpZ25JblNlc3Npb25MaXN0SXRlbSxcbiAgU1NPX0NBTExCQUNLX1BBVEhfUk9VVEUsXG4gIE1BR0lDX0xJTktfVkVSSUZZX1BBVEhfUk9VVEUsXG4gIFNJR05fVVBfTU9ERVMsXG4gIFNJR05fSU5fREVGQVVMVF9CQVNFX1BBVEgsXG4gIFNJR05fVVBfREVGQVVMVF9CQVNFX1BBVEgsXG4gIE5FWFRfV0lORE9XX0hJU1RPUllfU1VQUE9SVF9WRVJTSU9OLFxuICBTRUFSQ0hfUEFSQU1TLFxuICBSRVNFTkRBQkxFX0NPVU5URE9XTl9ERUZBVUxULFxuICBDQVBUQ0hBX0VMRU1FTlRfSUQsXG4gIEVSUk9SX0NPREVTLFxuICBST1VUSU5HLFxuICBzZW5kVG9Mb2FkaW5nLFxuICBhc3NlcnRBY3RvckV2ZW50RXJyb3IsXG4gIFRoaXJkUGFydHlNYWNoaW5lSWQsXG4gIFRoaXJkUGFydHlNYWNoaW5lLFxuICBzaG91bGRVc2VWaXJ0dWFsUm91dGluZyxcbiAgU2lnbkluUm91dGVyTWFjaGluZSxcbiAgU2lnbkluU2FmZUlkZW50aWZpZXJTZWxlY3RvckZvclN0cmF0ZWd5LFxuICBTaWduSW5TYWx1dGF0aW9uU2VsZWN0b3IsXG4gIFNpZ25JblN1cHBvcnRlZFN0cmF0ZWd5LFxuICBTaWduSW5GaXJzdEZhY3RvckN0eCxcbiAgU2lnbkluU2Vjb25kRmFjdG9yQ3R4LFxuICBTaWduSW5TdHJhdGVneSxcbiAgU2lnbkluRmlyc3RGYWN0b3IsXG4gIFNpZ25JblNlY29uZEZhY3RvcixcbiAgU2lnbkluU3RlcCxcbiAgU2lnblVwU3RhcnRDdHgsXG4gIFNpZ25VcFZlcmlmaWNhdGlvbkN0eCxcbiAgU2lnblVwU3RyYXRlZ3ksXG4gIFNpZ25VcFN0ZXAsXG4gIExvYWRpbmcsXG4gIExpbmtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay03QjNJV1dXTC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@clerk/elements/dist/chunk-7B3IWWWL.mjs\n"));

/***/ })

});